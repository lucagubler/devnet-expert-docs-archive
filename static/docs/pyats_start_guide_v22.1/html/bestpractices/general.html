

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>General Guidelines &mdash; Get Started with pyATS  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=83f4edbc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/js/custom.js?v=80dc6f7b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Test Suite Guidelines" href="test.html" />
    <link rel="prev" title="Style Guide" href="style.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Get Started with pyATS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/architecture.html">Test Ecosystem Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prereqs/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/installpyATS.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basic Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/structureofastatement.html">Everything is Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/manageconnections.html">Device Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/parseoutput.html">Parse Device Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/learndevices.html">Learn Device Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/configuredevices.html">Configure Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/comparebeforeafter.html">Compare Network States</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/runtestcase.html">Run Test Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/deviceapis.html">Helpful Device APIs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Best Practices</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Concept Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design &amp; Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Style Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">General Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#environment-requirements">Environment Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#headers-comments">Headers &amp; Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#libraries-packages">Libraries &amp; Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#errors-exceptions">Errors &amp; Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#execution">Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#governance">Governance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Test Suite Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="lib.html">Library Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="topology.html">Topology Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="job.html">Job Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="doAndDont.html">Do &amp; Don’t</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenarios/scenarios.html">Real-world examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/keyconcepts.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Get Started with pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">General Guidelines</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <style>
.question {background-color: yellow; font-weight:bold; padding: .25em;}
.monospace {font-family: monospace; color: #404040; font-size: 14px;}
.border {border: 1px #404040;}
</style><section id="general-guidelines">
<h1>General Guidelines<a class="headerlink" href="#general-guidelines" title="Link to this heading"></a></h1>
<section id="environment-requirements">
<h2>Environment Requirements<a class="headerlink" href="#environment-requirements" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Test suites, shall not depend on any pre-existing
configuration of the environment (e.g. routers, switches), and shall always
perform its own configurations, unless explicitly coded to be and/or
provided/told otherwise.</p></li>
<li><p>Test suites shall always leave the environment (e.g. routers and switches)
in the same state as they were found in (before the script started),
regardless of its results and whether any errors occurred.</p></li>
<li><p>Test suites shall support both real and virtual (simulated)
environment/hardware seamlessly.</p></li>
<li><p>Test suites shall be able to support a wide variety of execution environments,
eg: Jenkins, docker containers, VMs, etc.</p></li>
</ul>
</section>
<section id="headers-comments">
<h2>Headers &amp; Comments<a class="headerlink" href="#headers-comments" title="Link to this heading"></a></h2>
<ul>
<li><p>All files (modules) shall have headers using Python docstring notation,
describing in detail its author, support contacts, purpose, description,
usages &amp; etc.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">importlib</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="c1">#*******************************************************************************</span>
<span class="c1">#*                           Test Script Template</span>
<span class="c1">#* ----------------------------------------------------------------------------</span>
<span class="c1">#* ABOUT THIS TEMPLATE - Please read</span>
<span class="c1">#*</span>
<span class="c1">#* - Anything enclosed in &lt;&gt; must be replaced by the appropriate text for your</span>
<span class="c1">#*   application</span>
<span class="c1">#*</span>
<span class="c1">#* Author:</span>
<span class="c1">#*    &lt;name&gt;, Cisco Systems Inc.</span>
<span class="c1">#*</span>
<span class="c1">#* Support:</span>
<span class="c1">#*    &lt;name&gt;@cisco.com</span>
<span class="c1">#*</span>
<span class="c1">#* Read More:</span>
<span class="c1">#*   For the complete and up-to-date user guide on pyATS, visit:</span>
<span class="c1">#*   https://pyats.dev/</span>
<span class="c1">#*</span>
<span class="c1">#*******************************************************************************</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">importlib</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>All classes, functions, methods shall have headers using Python docstring
notation, describing its purpose, usage, arguments, return values and
providing examples.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="k">def</span> <span class="nf">extract_module</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>

    <span class="o">...</span>

    <span class="k">return</span> <span class="n">find</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">expand</span><span class="p">(),</span> <span class="n">k</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate" id="this-just-bumps-code-over"><div class="highlight"><pre><span></span>  <span class="c1"># Correct</span>
  <span class="k">def</span> <span class="nf">configure_cdp</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">interfaces</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot; Enables cdp on target device</span>
<span class="sd">          Args:</span>
<span class="sd">              device (&#39;obj&#39;): Device object</span>
<span class="sd">              interfaces (&#39;list&#39;): List of interfaces to configure cdp on</span>
<span class="sd">          Returns:</span>
<span class="sd">              None</span>
<span class="sd">      &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Code blocks shall be commented, describing its steps and purpose</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="c1">#### workaround Code ####</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;conf t</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="s1">&#39;conf t.*#&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;hostname </span><span class="si">{}</span><span class="se">\r</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctrl</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="s1">&#39;hostname.*#&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;end</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="s1">&#39;end.*#&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;wri mem</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="s1">&#39;wri mem.*#&#39;</span><span class="p">,</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">120</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;conf t</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="s1">&#39;conf t.*#&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;hostname </span><span class="si">{}</span><span class="se">\r</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ctrl</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">expect</span><span class="p">(</span><span class="s1">&#39;hostname.*#&#39;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;end</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">#########################</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="c1">#### workaround Code ####</span>
<span class="c1"># Send commands in altered order to set up environment</span>
<span class="c1"># for proceeding tests. This code is a workaround for</span>
<span class="c1"># host image memory not initializing properly</span>
<span class="n">device</span><span class="o">.</span><span class="n">hostname</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">name</span>
<span class="n">device</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s1">&#39;hostname </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
<span class="n">device</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;write memory&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="n">device</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s1">&#39;hostname </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
<span class="c1">#########################</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Convoluted logic shall be commented, including descriptions for each
logic path.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">route</span><span class="o">.</span><span class="n">hops</span><span class="p">():</span>
    <span class="n">net_freq</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">max_freq</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_freq</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">net_addr</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">max_addr</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_addr</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">device</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="c1"># Loop through devices and ensure network fabric</span>
<span class="c1"># frequencies and addresses  always fall within allowed values.</span>
<span class="c1"># Reassign values if less than 0 or greater than max_freq/max_addr</span>
<span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">route</span><span class="o">.</span><span class="n">hops</span><span class="p">():</span>
    <span class="n">net_freq</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">max_freq</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_freq</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">device</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">net_addr</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">max_addr</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">device</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max_addr</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">device</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Code changes shall have in-line comments before the change, with the bug ID
and a brief explanation of what’s changed.</p></li>
</ul>
</section>
<section id="libraries-packages">
<h2>Libraries &amp; Packages<a class="headerlink" href="#libraries-packages" title="Link to this heading"></a></h2>
<ul>
<li><p>All users shall prioritize using and contributing to <a class="reference external" href="https://developer.cisco.com/docs/pyats-development-guide/">genie libraries</a>.
Uplifts should be made as needed.</p></li>
<li><p>Library &amp; package requirements shall be clearly identified within the
script header</p></li>
<li><p>Libraries &amp; packages should be leveraging <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/abstract/index.html#">Genie abstraction</a> concept/solution
whenever possible</p></li>
<li><p>All import statements shall be explicit and shall occur at the top of the file.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="kn">from</span> <span class="nn">x.y</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="kn">from</span> <span class="nn">x.y</span> <span class="kn">import</span> <span class="n">Z</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">x</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">y</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Traffic generation/control shall be done by using central, common functions
and libraries.</p></li>
<li><p>All configurations shall be done/generated by calling functions/classes and
providing them with corresponding parameter values. These functions/classes
should belong to the <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">common libraries</a>.</p></li>
<li><p>All device output parsing (including screen scraping) shall be done using
<a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">common library parsers</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show version&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="errors-exceptions">
<h2>Errors &amp; Exceptions<a class="headerlink" href="#errors-exceptions" title="Link to this heading"></a></h2>
<ul>
<li><p>All exceptions and errors (including expected ones) shall be logged.
Avoid silent exceptions</p>
<blockquote>
<div><div class="highlight-python notranslate" id="id1"><div class="highlight"><pre><span></span>  <span class="c1"># Wrong</span>
  <span class="k">try</span><span class="p">:</span>
      <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Try to connect to console (connection a)&quot;</span><span class="p">)</span>
      <span class="n">uut</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;con&#39;</span><span class="p">,</span> <span class="n">via</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>

  <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">errored</span><span class="p">(</span><span class="s2">&quot;Errored connecting to console. You&#39;re on your own.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate" id="id2"><div class="highlight"><pre><span></span>  <span class="c1"># Correct</span>
  <span class="k">try</span><span class="p">:</span>
      <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Try to connect to console (connection a)&quot;</span><span class="p">)</span>
      <span class="n">uut</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;con&#39;</span><span class="p">,</span> <span class="n">via</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>

  <span class="k">except</span> <span class="ne">TimeoutError</span> <span class="k">as</span> <span class="n">te</span><span class="p">:</span>
      <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Log relevant connection info here&quot;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">errored</span><span class="p">(</span><span class="s2">&quot;Connection timed out!</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">te</span><span class="p">))</span>

  <span class="k">except</span> <span class="ne">InterruptedError</span> <span class="k">as</span> <span class="n">ie</span><span class="p">:</span>
      <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Log relevant connection info here&quot;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">errored</span><span class="p">(</span><span class="s2">&quot;Connection interupted!</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ie</span><span class="p">))</span>

  <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
      <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Log ALL connection info here&quot;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">errored</span><span class="p">(</span><span class="s2">&quot;Unexpected error!</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Exception catching shall be explicit: never blanket catch all exceptions
(<code class="docutils literal notranslate"><span class="pre">except:</span></code> statement without exception class type), or catching for
<code class="docutils literal notranslate"><span class="pre">BaseException</span></code> types.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">some</span> <span class="n">code</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">some</span> <span class="n">other</span> <span class="n">code</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">some</span> <span class="n">code</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">some</span> <span class="n">other</span> <span class="n">code</span>
</pre></div>
</div>
</li>
<li><p>All code should prefer raising built-in exceptions whenever possible. Avoid
creating excessive new exception types.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Test suite shall always test for both positive and negative logic paths.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="k">if</span> <span class="n">api</span><span class="p">():</span>
    <span class="n">do</span> <span class="n">something</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="k">if</span> <span class="n">api</span><span class="p">():</span>
    <span class="n">do</span> <span class="n">something</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">do</span> <span class="n">something</span> <span class="k">else</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Test suite shall be executable through job files (pyats run job execution).</p></li>
<li><p>Test suite shall leverage asynchronous (<a class="reference external" href="https://pubhub.devnetcloud.com/media/pyats/docs/async/pcall.html">parallel</a>) executions whenever possible.</p></li>
<li><p>Temporary file generation shall be done using python tempfile module,
generated under the current runtime directory. All temporary files shall be
deleted at the end of the run.</p></li>
<li><p>Test suite shall detect and report any anomalies during execution, such as
crash, CPU freeze, memory leaks, etc. Look into <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/health/index.html">pyATS Health Check</a>.</p></li>
</ul>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading"></a></h2>
<ul>
<li><p>Logging shall be done only through using python native logging module and
functionality. <code class="docutils literal notranslate"><span class="pre">print()</span></code> function should never be used in Test suites and libraries.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This is some message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;This is some message&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Test suites must log thorough and informative messages describing its
actions, purposes, progress and intermediate/final result.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="n">perform</span> <span class="n">check</span> <span class="mi">1</span>
<span class="n">perform</span> <span class="n">check</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Performing check 1 to verify x is up&#39;</span><span class="p">)</span>
<span class="n">perform</span> <span class="n">check</span> <span class="mi">1</span>

<span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Performing check 2 to verify z is down&#39;</span><span class="p">)</span>
<span class="n">perform</span> <span class="n">check</span> <span class="mi">2</span>

<span class="k">if</span> <span class="nb">all</span> <span class="n">passed</span><span class="p">:</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;All worked as expected&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Failed because step &lt;...&gt; has failed&#39;</span><span class="p">)</span>
    <span class="n">some</span> <span class="n">logic</span>
</pre></div>
</div>
</li>
<li><p>Point of failures and expected output/behavior/values shall be clearly
identified in the log file.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Wrong</span>
<span class="k">if</span> <span class="n">dbgObj</span><span class="o">.</span><span class="n">verify_poe_deployment</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">failed</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">passed</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correct</span>
<span class="k">if</span> <span class="n">dbgObj</span><span class="o">.</span><span class="n">verify_poe_deployment</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="c1"># Give debug information ...</span>
    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Debug History:&quot;</span> <span class="o">+</span> <span class="n">dbgObj</span><span class="o">.</span><span class="n">command_history</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">            Status: &quot;</span> <span class="o">+</span> <span class="n">dbgObj</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">failed</span><span class="p">(</span><span class="s2">&quot;Point of entry deployment verification failed.&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">passed</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Test results and any diagnostic information that may be helpful for debugging
and bug-raising purposes shall be logged thoroughly.</p></li>
<li><p>Avoid using warnings excessively: in test automation, warnings are typically
ignored.</p></li>
<li><p>Test suite should log a test topology diagram per test case if applicable.</p></li>
</ul>
</section>
<section id="governance">
<h2>Governance<a class="headerlink" href="#governance" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Core infrastructure changes and feature requests shall follow the governance
and priority matrix outlined in pyATS documentation.</p></li>
<li><p>Internally shared and/or externally open-sourced packages and libraries
needs to have one or more identified owners. Each and every owner shall be
responsible for their own project’s maintenance, and publishing guidelines
in their repository README file.</p></li>
<li><p>Each test suite shall have an owner (individual or team), responsible of
reviewing pull requests and changes to the test suite.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="style.html" class="btn btn-neutral float-left" title="Style Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="test.html" class="btn btn-neutral float-right" title="Test Suite Guidelines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Cisco Systems Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>