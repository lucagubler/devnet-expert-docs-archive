

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Concept Introduction &mdash; Get Started with pyATS  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=83f4edbc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/js/custom.js?v=80dc6f7b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Design &amp; Development" href="design.html" />
    <link rel="prev" title="Helpful Device APIs" href="../quickstart/deviceapis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Get Started with pyATS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/architecture.html">Test Ecosystem Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prereqs/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/installpyATS.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basic Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/structureofastatement.html">Everything is Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/manageconnections.html">Device Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/parseoutput.html">Parse Device Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/learndevices.html">Learn Device Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/configuredevices.html">Configure Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/comparebeforeafter.html">Compare Network States</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/runtestcase.html">Run Test Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/deviceapis.html">Helpful Device APIs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Best Practices</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Concept Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dream">Dream</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#forewords">Forewords</a></li>
<li class="toctree-l2"><a class="reference internal" href="#agnostic-reusable">Agnostic &amp; Reusable</a></li>
<li class="toctree-l2"><a class="reference internal" href="#effective-efficient">Effective &amp; Efficient</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reliable-repeatable">Reliable &amp; Repeatable</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sustainable-responsible">Sustainable &amp; Responsible</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design &amp; Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="general.html">General Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Test Suite Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="lib.html">Library Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="topology.html">Topology Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="job.html">Job Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="doAndDont.html">Do &amp; Don’t</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenarios/scenarios.html">Real-world examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/keyconcepts.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Get Started with pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Concept Introduction</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <style>
.question {background-color: yellow; font-weight:bold; padding: .25em;}
.monospace {font-family: monospace; color: #404040; font-size: 14px;}
.border {border: 1px #404040;}
</style><section id="concept-introduction">
<h1>Concept Introduction<a class="headerlink" href="#concept-introduction" title="Link to this heading"></a></h1>
<section id="dream">
<h2>Dream<a class="headerlink" href="#dream" title="Link to this heading"></a></h2>
<p>Imagine a development environment where all libraries you need are there. You can re-use libraries to develop your testcases, business requirement, re-use all libraries which have been developped in previous testcase by anybody else. This mean, the Bgp team re-use the OSPF team libraries, routing re-using platform, IOSXR re-using NXOS when needed. Each have great log message in the case they fail, or pass. You could 100% focus on what you want to do, and not focus on how to do it.</p>
<p>If we had this, imagine what our testcases would look like.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">shut_interface</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="s1">&#39;Ethernet2/3&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">dev</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">verify_interface_shut</span><span class="p">(</span><span class="n">interface</span><span class="o">=</span><span class="s1">&#39;Ethernet2/3&#39;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">failed</span><span class="p">(</span><span class="s1">&#39;Interface is not shut&#39;</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
<span class="o">...</span>
</pre></div>
</div>
<p>It makes the script code very easy and quick to write. It also makes the code extremely readable by your teammate and other people that might inherits this script in the future.</p>
<p>If a library does not exists yet, add it and then continue with your automation. Each library follows good developing practice:</p>
<ul class="simple">
<li><p>One common library which is shared to all</p></li>
<li><p>Re-usable library</p>
<ul>
<li><p>Parsers</p></li>
<li><p>Apis</p></li>
<li><p>Connections</p></li>
<li><p>Testcases</p></li>
<li><p>…</p></li>
</ul>
</li>
<li><p>No code duplication</p></li>
<li><p>Debuggable</p></li>
<li><p>Good comments</p></li>
</ul>
<p>This is one of the goal of having good practice; Creating a development environment
that scales, simplify the work for all, and speed up development. As time pass, a larger and a better libraries exists for all to use.</p>
<p>For this to exists, we need guidelines and best practice.</p>
</section>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>Originating as Cisco engineering document, <em>EDCS-1529178</em>, this documentation expands
on the best practices of writing pyATS test cases and libraries. It was created
with a few purposes in mind:</p>
<ul class="simple">
<li><p>To enforce device agnostic, modular automation</p></li>
<li><p>To help design better automation that is scalable and reliable</p></li>
<li><p>To establish basic principles around what is and is not acceptable
in generic test automation life cycle – test automation is software as well.</p></li>
<li><p>To be used as a tool for someone looking to review someone else’s code.</p></li>
<li><p>Enable standard/consistency in automation for ease of port, inheritance
&amp; maintenance</p></li>
</ul>
<p>This document is a list of do’s and do-not’s for pyATS-based automation,
and is written like a set of rules/regulations.</p>
<ul class="simple">
<li><p>The words “must” &amp; “shall” means that the guideline is a non-optional
requirement.</p></li>
<li><p>The word “should” means that the guideline is strongly suggested, but other
acceptable options may also be used (if applicable).</p></li>
</ul>
<p>It is recommended that the content of this document be used during code reviews,
and code design &amp; planning.</p>
<p>This document is intended for individual &amp; engineers using and developing
automated test scripts and their supporting libraries, modules and packages
under the pyATS ecosystem.</p>
</section>
<section id="forewords">
<h2>Forewords<a class="headerlink" href="#forewords" title="Link to this heading"></a></h2>
<p>Test automation is no different than any other software development: using
software to test software. It requires clear understanding of overall
requirements, proper planning, solid design, and most importantly,
disciplined programming. This document offers an organized collection of ideas
and practices intended to guide pyATS users throughout this development process.</p>
<p>Automation must be cost-effective in the long-term. We should keep this in
mind while planning, designing, and developing test automation. The following
is a set of key principles that all test automation development shall follow.</p>
<p>We tried to add as much example as possible to make the content less dry, and
easier to follow.</p>
</section>
<section id="agnostic-reusable">
<h2>Agnostic &amp; Reusable<a class="headerlink" href="#agnostic-reusable" title="Link to this heading"></a></h2>
<p>The test code must remain generic enough such that the support of new
OS/Platform/Versions shall only entail writing/enhancing libraries for
handling inputs/outputs/timings differences. All platform, OS and version
specific code must be abstracted into libraries. This promotes code reusability
whilst reducing overall code complexity.</p>
<p>Consider leveraging the <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/abstract/index.html">genie.abstract</a> package and <a class="reference external" href="https://pubhub.devnetcloud.com/media/pyats-development-guide/docs/writeparser/writeparser.html">contributing</a> your
agnostic packages and libraries to genie.libs, benefiting the user community.
Follow guidelines outlined in the repository README files and development
guides.</p>
<blockquote>
<div><div class="highlight-python notranslate" id="this-just-bumps-code-over"><div class="highlight"><pre><span></span>  <span class="c1"># Wrong</span>
  <span class="k">if</span> <span class="s1">&#39;17.2&#39;</span> <span class="ow">in</span> <span class="n">show_version</span><span class="p">:</span>
      <span class="n">do_something</span><span class="p">()</span>
  <span class="k">elif</span> <span class="s1">&#39;17.3&#39;</span> <span class="ow">in</span> <span class="n">show_version</span><span class="p">:</span>
      <span class="n">do</span> <span class="n">something</span><span class="p">()</span>
  <span class="k">elif</span> <span class="s1">&#39;17.5&#39;</span> <span class="ow">in</span> <span class="n">show_version</span><span class="p">:</span>
      <span class="n">do_something</span><span class="p">()</span>
  <span class="o">...</span>
</pre></div>
</div>
<div class="highlight-python notranslate" id="id1"><div class="highlight"><pre><span></span>  <span class="c1"># Correct</span>
  <span class="c1"># Because of abstraction, no need to do the ifs</span>
  <span class="c1"># and it will find the right library for this os, platform, image, ...</span>
  <span class="n">dev</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>As new version of the OS appear, we should not be modifying all our scripts,
but only the library that drives the script.</p></li>
</ul>
</section>
<section id="effective-efficient">
<h2>Effective &amp; Efficient<a class="headerlink" href="#effective-efficient" title="Link to this heading"></a></h2>
<p>The effectiveness of a test suite is measured as a function of its execution
time, resource requirements, and the number of unique problems/bugs/issues it
catches. As test suites are expected to long-lived, they must be engineered to
be both time-efficient and cost-effective whilst providing maximum coverage
and attempting to catch all potential bugs/issues:</p>
<ul class="simple">
<li><p>Focus on the feature you are testing and avoid repeating the same test trail.</p></li>
<li><p>Add new tests and/or enhance existing tests as the feature gets more stable.</p></li>
<li><p>Do things <a class="reference external" href="https://pubhub.devnetcloud.com/media/pyats/docs/async/pcall.html">asynchronously</a> when applicable to reduce execution time.</p></li>
<li><p>Refactor test suites often in order to make them more efficient whilst
maintaining the same test coverage.</p></li>
<li><p>When customers report problems, review your tests and see if you can improve
them in order to catch similar problems.</p></li>
<li><p>Lower the priority (tier) of tests when they lose their value, but do not
delete them – test coverage shall only increase, not decrease.</p></li>
<li><p>Use your knowledge of the source code and architecture and constantly seek
to improve the effectiveness of your test suites.</p></li>
</ul>
<p><strong>In summary</strong></p>
<ul class="simple">
<li><p>Effectiveness of a test script
* execution time
* resource requirements
* number of unique problems/bugs/issues it catches</p></li>
<li><p>Time limit per test suite
* Reserve devices
* Clean
* Configure</p></li>
<li><p>Use Asynchronous as much as possible</p></li>
<li><p>Constant review of coverage</p></li>
<li><p>Prioritize testcases</p></li>
</ul>
</section>
<section id="reliable-repeatable">
<h2>Reliable &amp; Repeatable<a class="headerlink" href="#reliable-repeatable" title="Link to this heading"></a></h2>
<p>Tests that reports pass under failure conditions is worse than not having such
tests. Automation is software, and is thus also prone to bugs. In order to
avoid bugs slipping through, code logic shall be explicit and strict (eg, if
statements covering all possible scenarios), flexible (eg, handles assorted
environments &amp; timing conditions), and code changes should always be reviewed
by colleagues and/or subject matter experts.</p>
<p><strong>In summary</strong></p>
<ul class="simple">
<li><p>Test automation must always give the same result with the starting point</p></li>
<li><p>Inconsistent results make you question everything</p>
<ul>
<li><p>Is it the device?</p></li>
<li><p>Is it the script ?</p></li>
<li><p>Configuration ?</p></li>
<li><p>Let’s rerun to try to find the issue - Waste of time</p></li>
</ul>
</li>
<li><p>Pass under Failure condition is worse than having no test</p></li>
</ul>
</section>
<section id="sustainable-responsible">
<h2>Sustainable &amp; Responsible<a class="headerlink" href="#sustainable-responsible" title="Link to this heading"></a></h2>
<p>Over the course of its life, a test suite goes through many revisions and its
ownership possibly transitioned through multiple groups. These revisions may
be enhancements (increasing coverage/platform support), bug fixes (correcting
errors in the code logic), or amendments (conforming to changes in the product
under test). As such, all test automation suites shall be designed to be
maintainable: minimizing the amount of effort associated with revisions
&amp; sustainment.</p>
<p>As an example, test suites typically rely heavily on device control I/O
(e.g. CLI). As these are prone to change during a product’s life cycle, test
suites shall be designed in such a way that these revisions can be reflected
in the test code through minimal changes: e.g., by following a modular design
using objects and classes, reusing and extending existing libraries whenever
possible.</p>
<p>Keep test suites easy to read, comprehend &amp; use by following consistent style
and through thorough documentation. Describe what is being accomplished, comment
on complex code and logic, and detail the different use-cases of your creations
and how to debug them in case of failures. Keep your comments to the point and
accurate in the explanation.</p>
<p><strong>In summary</strong></p>
<ul class="simple">
<li><p>Scripts get modified</p>
<ul>
<li><p>Increasing Coverage</p></li>
<li><p>Platform Support</p></li>
<li><p>Bug Fix</p></li>
</ul>
</li>
<li><p>Ownership will change over the course of script life</p></li>
<li><p>The goal should be to Minimize effort each time it has to be modified</p></li>
<li><p>Easy to read</p></li>
<li><p>Consistent style across script, library</p></li>
<li><p>Documentation
* Header
* Comments</p></li>
<li><p>Maintain comments</p></li>
<li><p>Be explicit with your errors</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../quickstart/deviceapis.html" class="btn btn-neutral float-left" title="Helpful Device APIs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="design.html" class="btn btn-neutral float-right" title="Design &amp; Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Cisco Systems Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>