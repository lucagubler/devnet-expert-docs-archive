

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Run Test Scripts &mdash; Get Started with pyATS  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=83f4edbc" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=7f41d439"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/js/custom.js?v=80dc6f7b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Helpful Device APIs" href="deviceapis.html" />
    <link rel="prev" title="Compare Network States" href="comparebeforeafter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Get Started with pyATS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/architecture.html">Test Ecosystem Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prereqs/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/installpyATS.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basic Concepts</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="structureofastatement.html">Everything is Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="manageconnections.html">Device Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="parseoutput.html">Parse Device Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="learndevices.html">Learn Device Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuredevices.html">Configure Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparebeforeafter.html">Compare Network States</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run Test Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#automated-testing-process">Automated testing process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advantages-of-a-modular-strategy">Advantages of a modular strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#triggers">Triggers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-trigger">What is a trigger?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure-of-a-trigger">Structure of a trigger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#verifications">Verifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-verification">What is a verification?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-verifications-work">How do verifications work?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#datafiles">Datafiles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#trigger-datafile">Trigger datafile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verification-datafile">Verification datafile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#job-file">Job file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-run-a-test-case">How to run a test case</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#use-the-command-line-to-run-a-single-test-case">Use the command line to run a single test case</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-a-job-file-to-run-a-test-script">Use a job file to run a test script</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deviceapis.html">Helpful Device APIs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Best Practices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/intro.html">Concept Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/design.html">Design &amp; Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/style.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/general.html">General Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/test.html">Test Suite Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/lib.html">Library Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/topology.html">Topology Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/job.html">Job Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/summary.html">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bestpractices/doAndDont.html">Do &amp; Don’t</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenarios/scenarios.html">Real-world examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="keyconcepts.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Get Started with pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Run Test Scripts</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <style>
.question {background-color: yellow; font-weight:bold; padding: .25em;}
.monospace {font-family: monospace; color: #404040; font-size: 14px;}
.border {border: 1px #404040;}
</style><section id="run-test-scripts">
<h1>Run Test Scripts<a class="headerlink" href="#run-test-scripts" title="Link to this heading"></a></h1>
<p>This topic describes how you can use the <strong>pyATS Library</strong> to build and run test cases and use them for automated network testing.</p>
<p>You don’t need to know Python — you can use the <code class="docutils literal notranslate"><span class="pre">genie</span> <span class="pre">run</span></code> functionality from your Linux terminal. Simply stated, you tell the system the test cases to run, the order to execute them, and the data to pass to the system at runtime.</p>
<section id="automated-testing-process">
<span id="auto-testing-process"></span><h2>Automated testing process<a class="headerlink" href="#automated-testing-process" title="Link to this heading"></a></h2>
<p>The pyATS Library provides the building blocks that make it easy for you to automate your network testing. Simply:</p>
<blockquote>
<div><ul class="simple">
<li><p>Select from a pool of pre-written test cases (<a class="reference internal" href="#triggers"><span class="std std-ref">triggers</span></a>).</p></li>
<li><p>Tell the system to run them in a specific order, and the data to use for each case.</p></li>
<li><p>You can also specify any pre- and post-processing that you want to apply.</p></li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">Harness</span></code> module controls the flow of your network automation in three stages, as described in the following table.</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">Automated testing process</span><a class="headerlink" href="#id5" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 5.0%" />
<col style="width: 40.0%" />
<col style="width: 55.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stage</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Common setup</p></td>
<td><p>Prepare devices for testing:</p>
<ul class="simple">
<li><p>Connect</p></li>
<li><p>Configure (optional)</p></li>
<li><p>Generate traffic (optional)</p></li>
<li><p>Take a snapshot of configuration, operational state, or both (optional)</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Triggers and verifications</p></td>
<td><p>Perform tests and run show commands on your devices.</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Common cleanup</p></td>
<td><p>Check that device states match the original:</p>
<ul class="simple">
<li><p>Take a snapshot of configuration, operational state, or both (optional)</p></li>
<li><p>Compare snapshots with the common setup snapshots (optional)</p></li>
<li><p>Stop generated traffic (optional)</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Harness</span></code> is modular, and you can customize all of the components, including a <a class="reference internal" href="keyconcepts.html#term-Trigger"><span class="xref std std-term">trigger</span></a> or <a class="reference internal" href="keyconcepts.html#term-Verification"><span class="xref std std-term">verification</span></a> to meet your automated testing requirements.</p>
</div>
<p>At runtime, the <code class="docutils literal notranslate"><span class="pre">Harness</span></code> pulls together all of the data that you’ve defined in the <a class="reference internal" href="#job-file"><span class="std std-ref">job file</span></a> and <a class="reference internal" href="#datafiles"><span class="std std-ref">datafiles</span></a>.</p>
</section>
<section id="advantages-of-a-modular-strategy">
<h2>Advantages of a modular strategy<a class="headerlink" href="#advantages-of-a-modular-strategy" title="Link to this heading"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Consistent, standards-based test cases are reusable.</p></li>
<li><p>You can write test scripts efficiently, using the reusable, plug and play test cases as building blocks.</p></li>
<li><p>It’s easy to customize the standard test cases to meet your requirements.</p></li>
<li><p>The automated testing process is <em>data-driven</em> — you don’t have to re-write tests, just modify the datafiles.</p></li>
<li><p>You can choose from a few hundred pyATS Library <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">open-source API functions</a> to define your test case actions and steps.</p></li>
</ul>
</div></blockquote>
</section>
<section id="triggers">
<span id="id1"></span><h2>Triggers<a class="headerlink" href="#triggers" title="Link to this heading"></a></h2>
<section id="what-is-a-trigger">
<h3>What is a trigger?<a class="headerlink" href="#what-is-a-trigger" title="Link to this heading"></a></h3>
<p>A trigger is an action or sequence of actions performed on a device, which changes the device state or configuration.</p>
<p>You can think of a trigger as equivalent to a pyATS <em>test case</em>. The pyATS Library provides you with <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">a pool of triggers for the most common actions</a>, already written and available to use out-of-the-box. Select a trigger name from the <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">list</a> to see a description.</p>
</section>
<section id="structure-of-a-trigger">
<h3>Structure of a trigger<a class="headerlink" href="#structure-of-a-trigger" title="Link to this heading"></a></h3>
<p>Remember that you can use <code class="docutils literal notranslate"><span class="pre">genie</span> <span class="pre">run</span></code> with the pyATS Library pool of triggers and verifications. But if you know or want to learn a bit of Python, you can customize a trigger to meet your requirements. A trigger is a Python <span class="monospace">(*.py)</span> file that has a standard structure, as shown in the following example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">genie.harness.base</span> <span class="kn">import</span> <span class="n">Trigger</span>
<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">aetest</span>

<span class="k">class</span> <span class="nc">TriggerClassName</span><span class="p">(</span><span class="n">Trigger</span><span class="p">):</span>

    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">section_1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uut</span><span class="p">,</span> <span class="n">steps</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39; Learn prerequisite information</span>
<span class="sd">            Args:</span>
<span class="sd">                uut (&#39;obj&#39;): Device object</span>
<span class="sd">                steps (&#39;obj&#39;): steps context manager</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">with</span> <span class="n">steps</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;Step 1 check if bgp neighbor is shut down&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">step</span><span class="p">:</span>
            <span class="n">is_expected</span> <span class="o">=</span> <span class="n">uut</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">is_bgp_neighbors_shutdown</span><span class="p">(</span><span class="n">uut</span><span class="p">,</span> <span class="p">[</span><span class="err">‘</span><span class="mf">1.1.1.1</span><span class="err">’</span><span class="p">],</span> <span class="err">‘</span><span class="n">ipv4</span><span class="err">’</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_expected</span><span class="p">:</span>
                <span class="n">step</span><span class="o">.</span><span class="n">passed</span><span class="p">(</span><span class="s1">&#39;Reason this step passed&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">step</span><span class="o">.</span><span class="n">failed</span><span class="p">(</span><span class="s1">&#39;Reason this step failed&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">class</span></code> is the name of the trigger and inherits from the pyATS Library <code class="docutils literal notranslate"><span class="pre">Trigger</span></code> object. Each class performs one specific task, which can have multiple <code class="docutils literal notranslate"><span class="pre">steps</span></code>. For more detailed information, see the <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/userguide/harness/developer/index.html#harness-developer-guide">Harness Developer Guide</a>.</p>
</section>
</section>
<section id="verifications">
<h2>Verifications<a class="headerlink" href="#verifications" title="Link to this heading"></a></h2>
<section id="what-is-a-verification">
<h3>What is a verification?<a class="headerlink" href="#what-is-a-verification" title="Link to this heading"></a></h3>
<p>A verification is the execution of a show command to retrieve the current state of one or more devices. A verification typically runs before and after an action (trigger) to compare the previous and current device states.</p>
</section>
<section id="how-do-verifications-work">
<h3>How do verifications work?<a class="headerlink" href="#how-do-verifications-work" title="Link to this heading"></a></h3>
<p>By taking an initial snapshot (a parsed show command), and then taking the same snapshot after each trigger runs, the system can compare the snapshots to ensure that here are no unexpected changes to your network configuration or operational state.</p>
</section>
</section>
<section id="datafiles">
<span id="id2"></span><h2>Datafiles<a class="headerlink" href="#datafiles" title="Link to this heading"></a></h2>
<p>The <a class="reference external" href="https://yaml.org">YAML</a> datafiles control the flow of test execution. This makes your automated testing <em>data-driven</em>, with no hard-coded values required in your testing scripts. The datafiles contain the values to pass to the system at runtime.</p>
<section id="trigger-datafile">
<h3>Trigger datafile<a class="headerlink" href="#trigger-datafile" title="Link to this heading"></a></h3>
<p>A trigger datafile is a <a class="reference external" href="https://yaml.org">YAML</a> file that tells the pyATS Library which test cases to run and where they are:</p>
<blockquote>
<div><ul class="simple">
<li><p>Trigger name</p></li>
<li><p>Trigger source — the path and <em>class</em> (trigger)</p></li>
<li><p>Devices on which to run the test (use the <code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">device</span></code> argument to specify devices other than ‘uut’)</p></li>
<li><p>Any parameters (input) to pass as arguments to the trigger functions</p></li>
</ul>
</div></blockquote>
<p>Each trigger description tells you the mandatory and optional fields of its associated datafile.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you use the standard pyATS Library triggers, you don’t have to provide a trigger datafile. The system uses the default datafile stored in your virtual environment at <code class="docutils literal notranslate"><span class="pre">/genie_yamls/&lt;uut_os&gt;/trigger_datafile_&lt;uut_os&gt;.yaml</span></code>. The default trigger datafile specifies the device ‘uut’, which you define in your <a class="reference internal" href="keyconcepts.html#term-Testbed-YAML-file"><span class="xref std std-term">testbed yaml file</span></a>.</p>
</div>
<p>For more details, see the <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/userguide/harness/user/datafile.html#trigger-datafile">complete trigger datafile schema</a>.</p>
</section>
<section id="verification-datafile">
<h3>Verification datafile<a class="headerlink" href="#verification-datafile" title="Link to this heading"></a></h3>
<p>Similar to a  trigger datafile, a verification datafile specifies the following minimum information:</p>
<blockquote>
<div><ul class="simple">
<li><p>Verification name</p></li>
<li><p>Verification source — the path and <em>class</em> (trigger)</p></li>
<li><p>Devices on which to run the test (use the <code class="docutils literal notranslate"><span class="pre">--</span> <span class="pre">device</span></code> argument to specify devices other than ‘uut’)</p></li>
<li><p>Any parameters (input) to pass as arguments to the verification functions</p></li>
</ul>
</div></blockquote>
<p>For more details, see the <a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/userguide/harness/user/datafile.html?highlight=datafile%20schema#verification-datafile">complete verification datafile schema</a>.</p>
</section>
</section>
<section id="job-file">
<span id="id4"></span><h2>Job file<a class="headerlink" href="#job-file" title="Link to this heading"></a></h2>
<p>A job file defines how the system creates and runs a dynamic test script:</p>
<blockquote>
<div><ul class="simple">
<li><p>pyATS Library functionality to import</p></li>
<li><p>gRun command</p></li>
<li><p>Trigger UUIDs to indicate which trigger classes to execute</p></li>
<li><p>Verification UUIDs to indicate which verifications to execute</p></li>
</ul>
</div></blockquote>
<p>If you use <code class="docutils literal notranslate"><span class="pre">genie</span> <span class="pre">run</span></code>, you don’t need a job file.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For a more detailed example and to see an actual job file, go to <a class="reference external" href="https://github.com/CiscoTestAutomation/examples/tree/master/libraries/harness_triggers">https://github.com/CiscoTestAutomation/examples/tree/master/libraries/harness_triggers</a>.</p>
</div>
</section>
<section id="how-to-run-a-test-case">
<h2>How to run a test case<a class="headerlink" href="#how-to-run-a-test-case" title="Link to this heading"></a></h2>
<p>The following examples show you how to run a single test case and a test script that includes multiple test cases.</p>
<section id="use-the-command-line-to-run-a-single-test-case">
<h3>Use the command line to run a single test case<a class="headerlink" href="#use-the-command-line-to-run-a-single-test-case" title="Link to this heading"></a></h3>
<p>You can run the following example using the <a class="reference download internal" download="" href="../_downloads/04c1c0ffd3a875e85db16c7408c0f784/mock.zip"><code class="xref download docutils literal notranslate"><span class="pre">mock</span> <span class="pre">device</span></code></a>.</p>
<ol class="arabic">
<li><p>In your virtual environment, change to the directory that contains the mock YAML file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(pyats) $ cd mock
</pre></div>
</div>
</li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">genie</span> <span class="pre">run</span></code> and specify the testbed, trigger, verification, and device, and log details:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(pyats) $ genie run --testbed-file mock.yaml --trigger-uids=&quot;TriggerShutNoShutBgp&quot; --verification-uids=&quot;Verify_BgpProcessVrfAll&quot; --devices uut
</pre></div>
</div>
<p><em>Result</em>: The system displays the test results on-screen and creates an HTML log file named <span class="monospace">TaskLog.html</span> in the current directory.</p>
</li>
</ol>
<blockquote id="log-viewer">
<div><div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul>
<li><p>To see a user-friendly file that you can easily read in a web browser, run the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyats</span> <span class="n">logs</span> <span class="nb">list</span>
</pre></div>
</div>
<p>Look for the file you want to see, and then run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyats</span> <span class="n">logs</span> <span class="n">view</span> <span class="o">-</span><span class="n">n</span>
</pre></div>
</div>
<p>where <em>n</em> is the log index, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyats</span> <span class="n">logs</span> <span class="n">view</span> <span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>The log viewer organizes the data so that you can drill down for more details. <br /> <br /></p>
</li>
<li><p>If you’re a DevNet user and you want to receive an email with the results, add the argument <code class="docutils literal notranslate"><span class="pre">--mailto</span> <span class="pre">&lt;address&gt;</span></code>.</p></li>
</ul>
</div>
<p>The following example shows part of the log where you can see the overall <a class="reference internal" href="#auto-testing-process"><span class="std std-ref">automated testing process</span></a>. Note that the verification ran before and after the trigger.</p>
<img alt="../_images/tasklog_example.png" src="../_images/tasklog_example.png" />
</div></blockquote>
</section>
<section id="use-a-job-file-to-run-a-test-script">
<h3>Use a job file to run a test script<a class="headerlink" href="#use-a-job-file-to-run-a-test-script" title="Link to this heading"></a></h3>
<p>When you use a job file to run multiple test cases, you are using an automated <em>test script</em>.</p>
<p>This example shows you how to specify a job file that defines multiple triggers and verifications. For this example, you’ll need to <a class="reference internal" href="../install/installpyATS.html#clone-git-examples"><span class="std std-ref">clone or download the GitHub examples</span></a>. We’ll use the <code class="docutils literal notranslate"><span class="pre">harness_triggers</span></code> example and the mock data provided.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example shows you how to use a job file, but you can also run multiple test cases using <code class="docutils literal notranslate"><span class="pre">genie</span> <span class="pre">run</span></code>.</p>
</div>
<ol class="arabic">
<li><p>In your virtual environment, change to the directory that contains the example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(pyats) $ cd examples/libraries/harness_triggers
</pre></div>
</div>
</li>
<li><p>Run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(pyats) $ pyats run job demo2_harness_triggers_job.py --testbed-file cisco_live.yaml --replay mock_device
</pre></div>
</div>
<p><em>Result</em>: The system displays the test results on-screen and creates an HTML log file named <span class="monospace">TaskLog.html</span> in the current directory.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul class="simple">
<li><p>You can use the <a class="reference internal" href="#log-viewer"><span class="std std-ref">log viewer</span></a> to see a user-friendly log in your web browser.</p></li>
<li><p>If you’re a DevNet user and you want to receive an email with the results, add the argument <code class="docutils literal notranslate"><span class="pre">--mailto</span> <span class="pre">&lt;address&gt;</span></code>.</p></li>
</ul>
</div>
<p>The following example shows part of the log where you can see the overall <a class="reference internal" href="#auto-testing-process"><span class="std std-ref">automated testing process</span></a>. Note that the system ran the verifications once after the common setup and again after each trigger.</p>
<img alt="../_images/tasklog_example2.png" src="../_images/tasklog_example2.png" />
</li>
</ol>
<p>See also…</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/userguide/apis/index.html#api-guidelines-and-good-practices">More information about API network functions</a></p></li>
<li><p><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-docs/docs/cookbooks/harness.html">Detailed description of the Harness module</a></p></li>
<li><p><a class="reference external" href="https://github.com/CiscoTestAutomation/examples/tree/master/libraries">Examples of the Harness</a></p></li>
<li><p><a class="reference external" href="https://pubhub.devnetcloud.com/media/pyats/docs/cli/pyats_logs.html#pyats-logs">pyATS logs</a></p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="comparebeforeafter.html" class="btn btn-neutral float-left" title="Compare Network States" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="deviceapis.html" class="btn btn-neutral float-right" title="Helpful Device APIs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Cisco Systems Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>