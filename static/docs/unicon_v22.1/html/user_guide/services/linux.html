

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Linux &mdash; Unicon Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=82a976d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=1045b1b5" />

  
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="NSO" href="nso.html" />
    <link rel="prev" title="Junos" href="junos.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Unicon Plugins
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supported_platforms.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connection.html">Connection Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../passwords.html">Password Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proxy.html">Connection Through Proxies</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API/Services</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="what_are_services.html">What Are Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_services.html">Common Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_services.html#dual-rp-services">Dual RP Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_services.html#stack-rp-services">Stack RP Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic_services.html#quad-rp-services">Quad RP Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="aci.html">ACI</a></li>
<li class="toctree-l2"><a class="reference internal" href="asa_fp2k.html">ASA/FP2K</a></li>
<li class="toctree-l2"><a class="reference internal" href="cimc.html">CIMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="confd.html">ConfD</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftd.html">FXOS/FTD</a></li>
<li class="toctree-l2"><a class="reference internal" href="fxos.html">FXOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="fxos_fp4k.html">FXOS/FP4K</a></li>
<li class="toctree-l2"><a class="reference internal" href="fxos_fp9k.html">FXOS/FP9K</a></li>
<li class="toctree-l2"><a class="reference internal" href="gaia.html">Check Point Gaia OS</a></li>
<li class="toctree-l2"><a class="reference internal" href="iosxe.html">IOSXE</a></li>
<li class="toctree-l2"><a class="reference internal" href="iosxe_c9800_ewc_ap.html">IOSXE/C9800/EWC_AP</a></li>
<li class="toctree-l2"><a class="reference internal" href="iosxr.html">IOSXR</a></li>
<li class="toctree-l2"><a class="reference internal" href="junos.html">Junos</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#execute">execute</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ping">ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sudo">sudo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nso.html">NSO</a></li>
<li class="toctree-l2"><a class="reference internal" href="nxos.html">NXOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="nxos_mds.html">NXOS/MDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdwan.html">SDWAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="sros.html">SROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="staros.html">StarOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="vos.html">VOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="windows.html">Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="service_dialogs.html">Dialog Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot/index.html">RobotFramework Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../playback/index.html">Playback</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/plugins.html">Plugin Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/service_framework.html">How to write  a new Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/eal.html">Expect Abstraction Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/statemachine.html">State Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/unittests.html">Develop &amp; Run Unittests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/modules.html">Unicon API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog_plugins/index.html">Plugins Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Unicon Plugins</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">API/Services</a></li>
      <li class="breadcrumb-item active">Linux</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="linux">
<h1>Linux<a class="headerlink" href="#linux" title="Link to this heading">¶</a></h1>
<p>This section lists the services which are supported on Linux.</p>
<p>** Prompt and Shell Prompt overriding **</p>
<p>By default, Unicon is able to detect most variations of the bash shell prompt. However, in
instances where another shell is being used (such as <code class="xref py py-obj docutils literal notranslate"><span class="pre">zsh</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">fish</span></code>) it may have difficulty
in detecting your prompt thus leaving the connection hanging. In the event this occurs you
can override your prompt using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">PROMPT</span></code> setting in your testbed file like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">linux_device</span><span class="p">:</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">        </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">          </span><span class="nt">PROMPT</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;your_prompt_regex&gt;&#39;</span>
</pre></div>
</div>
<p>If <code class="xref py py-obj docutils literal notranslate"><span class="pre">learn_hostname</span></code> is set to True, Unicon will attempt to learn and store the hostname
of you device in memory and switch the prompt to accommodate for that. It too can be overridden
with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">SHELL_PROMPT</span></code> setting like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">linux_device</span><span class="p">:</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">        </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">          </span><span class="nt">SHELL_PROMPT</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;your_prompt_regex&gt;&#39;</span>
</pre></div>
</div>
<p>Use <code class="xref py py-obj docutils literal notranslate"><span class="pre">%N</span></code> in your regex to specify where the hostname should be located.</p>
<section id="execute">
<h2>execute<a class="headerlink" href="#execute" title="Link to this heading">¶</a></h2>
<p>This service is used to execute arbitrary commands on the device. Though it is
intended to execute non-interactive commands. In case you wanted to execute
interactive command use <code class="xref py py-obj docutils literal notranslate"><span class="pre">reply</span></code> option. Refer <a class="reference internal" href="../../developer_guide/eal.html#prompt-recovery-label"><span class="std std-ref">Prompt Recovery Feature</span></a> for
details on <code class="xref py py-obj docutils literal notranslate"><span class="pre">prompt_recovery</span></code> argument.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>timeout</p></td>
<td><p>int (default 60 sec)</p></td>
<td><p>timeout value for the overall interaction.</p></td>
</tr>
<tr class="row-odd"><td><p>reply</p></td>
<td><p>Dialog</p></td>
<td><p>additional dialog</p></td>
</tr>
<tr class="row-even"><td><p>command</p></td>
<td><p>str</p></td>
<td><p>command to execute</p></td>
</tr>
<tr class="row-odd"><td><p>prompt_recovery</p></td>
<td><p>bool (default False)</p></td>
<td><p>Enable/Disable prompt recovery feature</p></td>
</tr>
<tr class="row-even"><td><p>check_retcode</p></td>
<td><p>bool (default False)</p></td>
<td><p>Enable/disable return code check</p></td>
</tr>
<tr class="row-odd"><td><p>valid_retcodes</p></td>
<td><p>list (default [0])</p></td>
<td><p>Valid return codes</p></td>
</tr>
</tbody>
</table>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Execute</span></code> service returns the output of the command in the string format
or it raises an exception. You can expect a TimeoutError or SubCommandFailure
error in case anything goes wrong.</p>
<p>This list of valid return codes can be specified via <code class="docutils literal notranslate"><span class="pre">valid_retcodes</span></code>. If the setting
<code class="xref py py-obj docutils literal notranslate"><span class="pre">CHECK_RETURN_CODE</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> or the <code class="docutils literal notranslate"><span class="pre">check_retcode</span></code> option is True,
the command <code class="xref py py-obj docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$?</span></code> is used to check the return value of the (last) executed command.
If the value is not in the list, a SubCommandFailure is raised.</p>
<p>You can enable return code checking by setting <code class="xref py py-obj docutils literal notranslate"><span class="pre">CHECK_RETURN_CODE</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>. By default,
return code checking is disabled.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Example</span>
<span class="o">--------</span>

<span class="kn">from</span> <span class="nn">unicon</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="n">host</span><span class="o">=</span><span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;HOSTNAME&#39;</span><span class="p">,</span>
                <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ssh lshekhar-bgl&#39;</span><span class="p">],</span>
                <span class="n">credentials</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;cisco123&#39;</span><span class="p">}},</span>
                <span class="n">os</span><span class="o">=</span><span class="s1">&#39;linux&#39;</span><span class="p">)</span>

<span class="c1"># simple execute call</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;ipconfig&quot;</span><span class="p">)</span>

<span class="c1"># command which take longer time , with timeout value</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;ls -l&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># using the reply option.</span>
<span class="kn">from</span> <span class="nn">unicon.eal.dialogs</span> <span class="kn">import</span> <span class="n">Statement</span><span class="p">,</span> <span class="n">Dialog</span>
<span class="n">dialog</span> <span class="o">=</span> <span class="n">Dialog</span><span class="p">([</span>
               <span class="n">Statement</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;--More--&#39;</span><span class="p">,</span>
                        <span class="n">action</span><span class="o">=</span><span class="s1">&#39;sendline(q)&#39;</span><span class="p">,</span>
                        <span class="n">loop_continue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">continue_timer</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="p">])</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;ps -ef | more&quot;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="n">dialog</span><span class="p">)</span>

<span class="c1"># using prompt_recovery feature</span>
<span class="n">host</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">prompt_recovery</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># return code checking</span>
<span class="n">host</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;command&#39;</span><span class="p">,</span> <span class="n">valid_retcodes</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">check_retcode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Do not check return codes</span>
<span class="n">host</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">CHECK_RETURN_CODE</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
</section>
<section id="ping">
<h2>ping<a class="headerlink" href="#ping" title="Link to this heading">¶</a></h2>
<p>This service is used to ping another device from the linux command prompt.
The addr argument is required, all other arguments are optional. By default,
a <code class="xref py py-obj docutils literal notranslate"><span class="pre">count</span></code> of <code class="docutils literal notranslate"><span class="pre">5</span></code> is used.</p>
<p>The command <code class="xref py py-obj docutils literal notranslate"><span class="pre">ping</span></code> is used by default. If the IP address is an IPv6 address,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">ping6</span></code> will be used automatically.</p>
<p>Argument options are translated to the ping command line options automatically.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>addr</p></td>
<td><p>string</p></td>
<td><p>ping destination IP address. (required)</p></td>
</tr>
<tr class="row-odd"><td><p>command</p></td>
<td><p>string</p></td>
<td><p>command to execute (default: ping,
ping6 will be used for IPv6 addr target)</p></td>
</tr>
<tr class="row-even"><td><p>options</p></td>
<td><p>string</p></td>
<td><p>boolean options (see below).</p></td>
</tr>
<tr class="row-odd"><td><p>count</p></td>
<td><p>integer/string</p></td>
<td><p>Number of packets to send.</p></td>
</tr>
<tr class="row-even"><td><p>interval</p></td>
<td><p>integer/string</p></td>
<td><p>Wait interval seconds between sending
each packet.</p></td>
</tr>
<tr class="row-odd"><td><p>interface</p></td>
<td><p>string</p></td>
<td><p>Set source address to specified
interface address. Argument may be
numeric IP address or  name of device.</p></td>
</tr>
<tr class="row-even"><td><p>pattern</p></td>
<td><p>string</p></td>
<td><p>You may specify up to 16 pad bytes to
fill out the packet you send.</p></td>
</tr>
<tr class="row-odd"><td><p>tos</p></td>
<td><p>integer</p></td>
<td><p>Set Quality of Service related bits.
tos can be either decimal or hex number.</p></td>
</tr>
<tr class="row-even"><td><p>size</p></td>
<td><p>integer/string</p></td>
<td><p>Specifies the number of data bytes to
be sent.</p></td>
</tr>
<tr class="row-odd"><td><p>ttl</p></td>
<td><p>integer/string</p></td>
<td><p>Set the IP Time to Live.</p></td>
</tr>
<tr class="row-even"><td><p>timestamp</p></td>
<td><p>string</p></td>
<td><p>Set special IP timestamp options.
timestamp option may be either
tsonly (only timestamps),
tsandaddr (timestamps and addresses) or
tsprespec host1 [host2 [host3 [host4]]]
(timestamp prespecified hops).</p></td>
</tr>
<tr class="row-odd"><td><p>timeout</p></td>
<td><p>integer/string</p></td>
<td><p>Specify a timeout, in seconds.</p></td>
</tr>
<tr class="row-even"><td><p>error_pattern</p></td>
<td><p>list of regex</p></td>
<td><p>Error patterns that raise an exception.
Default <code class="xref py py-obj docutils literal notranslate"><span class="pre">['[123456789]+0*%</span> <span class="pre">packet</span> <span class="pre">loss']</span></code></p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><dl class="simple">
<dt>return :</dt><dd><ul class="simple">
<li><p>ping command response on Success</p></li>
<li><p>raise SubCommandFailure if error pattern is found</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p>Boolean options</p>
<p>By default, the adaptive ping option (<code class="xref py py-obj docutils literal notranslate"><span class="pre">A</span></code>) is used. To disable adaptive ping,
specify the <code class="xref py py-obj docutils literal notranslate"><span class="pre">options</span></code> argument without the <code class="xref py py-obj docutils literal notranslate"><span class="pre">A</span></code> option.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>A</p></td>
<td><p>Adaptive ping. Interpacket interval adapts to round-trip time</p></td>
</tr>
<tr class="row-odd"><td><p>b</p></td>
<td><p>Allow pinging a broadcast address.</p></td>
</tr>
<tr class="row-even"><td><p>f</p></td>
<td><p>Flood ping.</p></td>
</tr>
<tr class="row-odd"><td><p>L</p></td>
<td><p>Suppress loopback of multicast packets.
This flag only applies if the ping destination is a multicast address.</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>Numeric output only. No attempt will be made to lookup symbolic names for host addresses.</p></td>
</tr>
<tr class="row-odd"><td><p>q</p></td>
<td><p>Quiet output. Nothing is displayed except the summary lines at startup time and when finished.</p></td>
</tr>
<tr class="row-even"><td><p>r</p></td>
<td><p>Bypass the normal routing tables and send directly to a host on an attached interface.</p></td>
</tr>
<tr class="row-odd"><td><p>R</p></td>
<td><p>Record route.</p></td>
</tr>
<tr class="row-even"><td><p>S</p></td>
<td><p>Set socket sndbuf. If not specified, it is selected to buffer not more than one packet.</p></td>
</tr>
<tr class="row-odd"><td><p>U</p></td>
<td><p>Print full user-to-user latency</p></td>
</tr>
<tr class="row-even"><td><p>v</p></td>
<td><p>Verbose output.</p></td>
</tr>
</tbody>
</table>
<p>Example commands:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;::1&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="s2">&quot;Av&quot;</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1500</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s1">&#39;2.2.2.2&#39;</span><span class="p">,</span> <span class="n">error_pattern</span><span class="o">=</span><span class="p">[])</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">error_pattern</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39; 0% packet loss&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Example output</strong></p>
<p>Example with <code class="xref py py-obj docutils literal notranslate"><span class="pre">addr</span></code> parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="n">addr</span><span class="o">=</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span>
<span class="go">ping -c5 -A 127.0.0.1</span>
<span class="go">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.018 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.022 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.022 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.024 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.029 ms</span>

<span class="go">--- 127.0.0.1 ping statistics ---</span>
<span class="go">5 packets transmitted, 5 received, 0% packet loss, time 801ms</span>
<span class="go">rtt min/avg/max/mdev = 0.018/0.023/0.029/0.003 ms, ipg/ewma 200.425/0.020 ms</span>
</pre></div>
</div>
<p>Example with IP address string as parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">)</span>
<span class="go">ping -c5 -A 127.0.0.1</span>
<span class="go">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.015 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.032 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.028 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.024 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.030 ms</span>

<span class="go">--- 127.0.0.1 ping statistics ---</span>
<span class="go">5 packets transmitted, 5 received, 0% packet loss, time 813ms</span>
<span class="go">rtt min/avg/max/mdev = 0.015/0.025/0.032/0.008 ms, ipg/ewma 203.271/0.020 ms</span>
<span class="go">cisco@server:~$</span>
</pre></div>
</div>
<p>Example with IPv6 address as and count parameters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;::1&quot;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">ping6 -c10 -A ::1</span>
<span class="go">PING ::1(::1) 56 data bytes</span>
<span class="go">64 bytes from ::1: icmp_seq=1 ttl=64 time=0.019 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=2 ttl=64 time=0.032 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=3 ttl=64 time=0.032 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=4 ttl=64 time=0.018 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=5 ttl=64 time=0.037 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=6 ttl=64 time=0.032 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=7 ttl=64 time=0.027 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=8 ttl=64 time=0.036 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=9 ttl=64 time=0.041 ms</span>
<span class="go">64 bytes from ::1: icmp_seq=10 ttl=64 time=0.200 ms</span>

<span class="go">--- ::1 ping statistics ---</span>
<span class="go">10 packets transmitted, 10 received, 0% packet loss, time 1807ms</span>
<span class="go">rtt min/avg/max/mdev = 0.018/0.047/0.200/0.051 ms, ipg/ewma 200.843/0.049 ms</span>
<span class="go">cisco@server:~$</span>
</pre></div>
</div>
<p>Example with boolean options specified.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="s2">&quot;Av&quot;</span><span class="p">)</span>
<span class="go">ping -c5 -v -A 127.0.0.1</span>
<span class="go">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.013 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.052 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.028 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.027 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.028 ms</span>

<span class="go">--- 127.0.0.1 ping statistics ---</span>
<span class="go">5 packets transmitted, 5 received, 0% packet loss, time 801ms</span>
<span class="go">rtt min/avg/max/mdev = 0.013/0.029/0.052/0.013 ms, ipg/ewma 200.362/0.021 ms</span>
<span class="go">cisco@server:~$</span>
</pre></div>
</div>
<p>Example with packet size specified.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1500</span><span class="p">)</span>
<span class="go">ping -c5 -s1500 -A 127.0.0.1</span>
<span class="go">PING 127.0.0.1 (127.0.0.1) 1500(1528) bytes of data.</span>
<span class="go">1508 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.017 ms</span>
<span class="go">1508 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.043 ms</span>
<span class="go">1508 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.032 ms</span>
<span class="go">1508 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.037 ms</span>
<span class="go">1508 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.028 ms</span>

<span class="go">--- 127.0.0.1 ping statistics ---</span>
<span class="go">5 packets transmitted, 5 received, 0% packet loss, time 801ms</span>
<span class="go">rtt min/avg/max/mdev = 0.017/0.031/0.043/0.010 ms, ipg/ewma 200.374/0.024 ms</span>
<span class="go">cisco@server:~$</span>
</pre></div>
</div>
<p>Example with default exception on packet loss.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s1">&#39;2.2.2.2&#39;</span><span class="p">)</span>
<span class="go">ping -A -c5 2.2.2.2</span>
<span class="go">PING 2.2.2.2 (2.2.2.2) 56(84) bytes of data.</span>

<span class="go">--- 2.2.2.2 ping statistics ---</span>
<span class="go">5 packets transmitted, 0 received, 100% packet loss, time 14005ms</span>
<span class="go">cisco@server:~$ Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;/projects/unicon/src/unicon/bases/linux/services.py&quot;</span>, line <span class="m">72</span>, in <span class="n">__call__</span>
<span class="w">    </span><span class="bp">self</span><span class="o">.</span><span class="n">call_service</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
  File <span class="nb">&quot;/projects/unicon/src/unicon/plugins/linux/service_implementation.py&quot;</span>, line <span class="m">238</span>, in <span class="n">call_service</span>
<span class="w">    </span><span class="k">raise</span> <span class="n">SubCommandFailure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">match_list</span><span class="p">)</span>
<span class="gr">unicon.core.errors.SubCommandFailure</span>: <span class="n">(&#39;PING 2.2.2.2 (2.2.2.2) 56(84) bytes of data.\r\n\r\n--- 2.2.2.2 ping statistics ---\r\n5 packets transmitted, 0 received, 100% packet loss, time 14005ms&#39;, [&#39;100% packet loss&#39;])</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Example with empty error pattern to avoid exception.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s2">&quot;2.2.2.2&quot;</span><span class="p">,</span> <span class="n">error_pattern</span><span class="o">=</span><span class="p">[])</span>
<span class="go">ping -A -c5 2.2.2.2</span>
<span class="go">PING 2.2.2.2 (2.2.2.2) 56(84) bytes of data.</span>

<span class="go">--- 2.2.2.2 ping statistics ---</span>
<span class="go">5 packets transmitted, 0 received, 100% packet loss, time 14005ms</span>
<span class="go">cisco@server:~$</span>
</pre></div>
</div>
<p>Example with custom error pattern to trigger exception.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">error_pattern</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39; 0% packet loss&#39;</span><span class="p">])</span>
<span class="go">ping -A -c5 127.0.0.1</span>
<span class="go">PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.018 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.022 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.022 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.024 ms</span>
<span class="go">64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.029 ms</span>

<span class="go">--- 127.0.0.1 ping statistics ---</span>
<span class="go">5 packets transmitted, 5 received, 0% packet loss, time 801ms</span>
<span class="go">rtt min/avg/max/mdev = 0.018/0.023/0.029/0.003 ms, ipg/ewma 200.425/0.020 ms</span>
<span class="go">cisco@server:~$ Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
  File <span class="nb">&quot;/projects/unicon/src/unicon/bases/linux/services.py&quot;</span>, line <span class="m">72</span>, in <span class="n">__call__</span>
<span class="w">    </span><span class="bp">self</span><span class="o">.</span><span class="n">call_service</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
  File <span class="nb">&quot;/projects/unicon/src/unicon/plugins/linux/service_implementation.py&quot;</span>, line <span class="m">238</span>, in <span class="n">call_service</span>
<span class="w">    </span><span class="k">raise</span> <span class="n">SubCommandFailure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">match_list</span><span class="p">)</span>
<span class="gr">unicon.core.errors.SubCommandFailure</span>: <span class="n">(&#39;PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\r\n64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.018 ms\r\n64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.022 ms\r\n64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.022 ms\r\n64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.024 ms\r\n64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.029 ms\r\n\r\n--- 127.0.0.1 ping statistics ---\r\n5 packets transmitted, 5 received, 0% packet loss, time 801ms\r\nrtt min/avg/max/mdev = 0.018/0.023/0.029/0.003 ms, ipg/ewma 200.425/0.020 ms&#39;, [&#39; 0% packet loss&#39;])</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</section>
<section id="sudo">
<span id="linux-sudo"></span><h2>sudo<a class="headerlink" href="#sudo" title="Link to this heading">¶</a></h2>
<p>This service is used to execute commands using <code class="docutils literal notranslate"><span class="pre">sudo</span></code> on the device. This can be
used to get a root shell by using <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.sudo()</span></code>, as <code class="xref py py-obj docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">bash</span></code> is the default
command.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>command</p></td>
<td><p>str</p></td>
<td><p>command to execute with sudo (default: bash)</p></td>
</tr>
<tr class="row-odd"><td><p>timeout</p></td>
<td><p>int (default 60 sec)</p></td>
<td><p>timeout value for the overall interaction.</p></td>
</tr>
<tr class="row-even"><td><p>reply</p></td>
<td><p>Dialog</p></td>
<td><p>additional dialog</p></td>
</tr>
<tr class="row-odd"><td><p>prompt_recovery</p></td>
<td><p>bool (default False)</p></td>
<td><p>Enable/Disable prompt recovery feature</p></td>
</tr>
</tbody>
</table>
<p>The sudo password can be specified in the testbed file under the <code class="xref py py-obj docutils literal notranslate"><span class="pre">sudo</span></code> credentials.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">lnx</span><span class="p">:</span>
<span class="w">  </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">linux</span>
<span class="w">  </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span>
<span class="w">      </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco</span>
<span class="w">    </span><span class="nt">sudo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sudo_password</span>
</pre></div>
</div>
<p>Example with device.sudo().</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">dev</span><span class="o">.</span><span class="n">sudo</span><span class="p">()</span>

<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">04</span> <span class="mi">14</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span><span class="mi">472</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">lnx</span> <span class="k">with</span> <span class="n">alias</span> <span class="s1">&#39;cli&#39;</span><span class="p">:</span> <span class="n">executing</span> <span class="n">command</span> <span class="s1">&#39;sudo bash&#39;</span> <span class="o">+++</span>
<span class="n">sudo</span> <span class="n">bash</span>
<span class="p">[</span><span class="n">sudo</span><span class="p">]</span> <span class="n">password</span> <span class="k">for</span> <span class="n">cisco</span><span class="p">:</span>
<span class="n">Linux</span><span class="c1">#</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="s1">&#39;[sudo] password for cisco: &#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
</pre></div>
</div>
<p>Example with sudo command argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">dev</span><span class="o">.</span><span class="n">sudo</span><span class="p">(</span><span class="s1">&#39;ls&#39;</span><span class="p">)</span>

<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">04</span> <span class="mi">14</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">58</span><span class="p">,</span><span class="mi">397</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">lnx</span> <span class="k">with</span> <span class="n">alias</span> <span class="s1">&#39;cli&#39;</span><span class="p">:</span> <span class="n">executing</span> <span class="n">command</span> <span class="s1">&#39;sudo ls&#39;</span> <span class="o">+++</span>
<span class="n">sudo</span> <span class="n">ls</span>
<span class="o">/</span><span class="n">tmp</span>
<span class="o">/</span><span class="n">var</span>
<span class="o">/</span><span class="n">opt</span>
<span class="n">Linux</span><span class="err">$</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="s1">&#39;/tmp</span><span class="se">\r\n</span><span class="s1">/var</span><span class="se">\r\n</span><span class="s1">/opt&#39;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="junos.html" class="btn btn-neutral float-left" title="Junos" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nso.html" class="btn btn-neutral float-right" title="NSO" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2020, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>