

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Connection Basics &mdash; Unicon Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=82a976d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1045b1b5" />

  
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Password Handling" href="passwords.html" />
    <link rel="prev" title="Supported Platforms" href="supported_platforms.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Unicon Plugins
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported_platforms.html">Supported Platforms</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Connection Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-pyats-testbed-yaml">Using pyATS Testbed YAML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#customizing-your-connection">Customizing Your Connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-single-nxos">Example: Single NXOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-linux-server">Example: Linux Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-moonshine">Example: Moonshine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-nso">Example: NSO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-confd">Example: ConfD</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-vos">Example: VOS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pyats-connection-pool">pyATS Connection Pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-apis">Python APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extend-settings-attributes">Extend Settings Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overriding-service-attributes">Overriding Service Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#credentials">Credentials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#in-pyats-testbed-yaml">In pyATS Testbed YAML</a></li>
<li class="toctree-l3"><a class="reference internal" href="#in-python">In Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-credential-action">Post credential action</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prompt-recovery-usage">Prompt Recovery Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#login-and-password-prompts">Login and Password Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#learn-device-os">Learn Device OS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="passwords.html">Password Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="proxy.html">Connection Through Proxies</a></li>
<li class="toctree-l1"><a class="reference internal" href="services/index.html">API/Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="services/service_dialogs.html">Dialog Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../playback/index.html">Playback</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/plugins.html">Plugin Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/service_framework.html">How to write  a new Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/eal.html">Expect Abstraction Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/statemachine.html">State Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/unittests.html">Develop &amp; Run Unittests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">Unicon API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog_plugins/index.html">Plugins Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Unicon Plugins</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Connection Basics</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="connection-basics">
<h1>Connection Basics<a class="headerlink" href="#connection-basics" title="Link to this heading">¶</a></h1>
<p id="unicon-connection">There are two primary ways of creating device CLI connections using Unicon:</p>
<ol class="arabic simple">
<li><p>using pyATS testbed YAML files</p></li>
<li><p>using native Python Unicon APIs</p></li>
</ol>
<section id="using-pyats-testbed-yaml">
<h2>Using pyATS Testbed YAML<a class="headerlink" href="#using-pyats-testbed-yaml" title="Link to this heading">¶</a></h2>
<p>The simplest way to create a device connection using Unicon is through a
pyATS testbed YAML file.</p>
<p>The testbed YAML file contains all necessary information that instructs Unicon
on <em>how</em> a connection should be established (eg, using what parameters and
credentials).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1"># Example</span>
<span class="w">  </span><span class="c1"># -------</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="c1">#   a simple pyATS testbed YAML file</span>


<span class="nt">devices</span><span class="p">:</span>
<span class="w">    </span><span class="nt">csr1000v-1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router</span>
<span class="w">        </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iosxe</span>
<span class="w">        </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">            </span><span class="nt">default</span><span class="p">:</span>
<span class="w">                </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco123</span>
<span class="w">                </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">enable</span><span class="p">:</span>
<span class="w">                </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco123</span>
<span class="w">        </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">            </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">                </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">                </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">168.10.1.35</span>
</pre></div>
</div>
<p>Note that in the above file, the following key values are used by Unicon
to identify the proper plugin to use to create the underlying connection:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">os:</span></code> -  OS details of the device [required]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">platform:</span></code> -  platform of the the device [optional]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">model:</span></code> - platform model of the device [optional]</p></li>
</ul>
</div></blockquote>
<p>If an equivalent unicon connection plugin is not found for a device, unicon
will use the <code class="docutils literal notranslate"><span class="pre">generic</span> <span class="pre">plugin</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The supported OS and platform information can be found here: <a class="reference external" href="introduction.html#supported-platforms">Supported Platforms</a>.</p>
</div>
<p>Now, you can establish connectivity to this device within your
test scripts, or within Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   using the above testbed yaml file in pyATS</span>

<span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>

<span class="n">testbed</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;my-testbed.yaml&#39;</span><span class="p">)</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;csr1000v-1&#39;</span><span class="p">]</span>

<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="n">device</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show version&#39;</span><span class="p">)</span>
</pre></div>
</div>
<section id="customizing-your-connection">
<h3>Customizing Your Connection<a class="headerlink" href="#customizing-your-connection" title="Link to this heading">¶</a></h3>
<p>In order to allow users to tune unicon plugin behavior without the need for
any code changes, several kinds of overrides may be made from the testbed
YAML itself.</p>
<p>Connecting to a pyATS device via unicon ultimately results in a unicon
<a class="reference internal" href="#unicon-connection"><span class="std std-ref">Connection</span></a> object being created.</p>
<p>The following parameters are eligible for override under the <code class="docutils literal notranslate"><span class="pre">arguments</span></code> key
in the testbed YAML connection block:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">learn_hostname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prompt_recovery</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_exec_commands</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_config_commands</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_stdout</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">goto_enable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">standby_goto_enable</span></code></p></li>
</ul>
<p id="settings-control">A connection, once created, has a <code class="docutils literal notranslate"><span class="pre">settings</span></code> parameter whose contents and
defaults are plugin-dependent.  It is possible to override these settings
from the testbed YAML file via the <code class="docutils literal notranslate"><span class="pre">settings</span></code> key.</p>
<p>Settings can be accessed <a class="reference internal" href="services/generic_services.html#controlled-settings"><span class="std std-ref">here</span></a>.</p>
<p>A connection is assigned a plugin-dependent list of services when it is created.
It is possible to override any service attribute from the testbed YAML file
via the <code class="docutils literal notranslate"><span class="pre">service_attributes</span></code> key.</p>
<p>The following testbed YAML shows these three kinds of override:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">device1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;nxos&#39;</span>
<span class="w">    </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;n7k&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;router&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">telnet</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.64.70.11</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2042</span>

<span class="w">        </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">          </span><span class="nt">connection_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120</span>
<span class="w">          </span><span class="nt">mit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>

<span class="w">        </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ESCAPE_CHAR_CHATTY_TERM_WAIT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="w">        </span><span class="nt">service_attributes</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ping</span><span class="p">:</span>
<span class="w">            </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1234</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Details specified under the <code class="docutils literal notranslate"><span class="pre">arguments</span></code>, <code class="docutils literal notranslate"><span class="pre">settings</span></code> or
<code class="docutils literal notranslate"><span class="pre">service_attributes</span></code> connection block keys take
precedence over any identically-named details passed to the
<code class="docutils literal notranslate"><span class="pre">device.connect()</span></code> call.</p>
<p>Using the above testbed YAML as an example:</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">device1.connect(connection_timeout=240)</span></code>
results in <code class="docutils literal notranslate"><span class="pre">device1.connection_timeout</span></code> being set to 120.</p>
<p>Calling
<code class="docutils literal notranslate"><span class="pre">device1.connect(settings=dict(ESCAPE_CHAR_CHATTY_TERM_WAIT=10))</span></code>
results in <code class="docutils literal notranslate"><span class="pre">device1.settings.ESCAPE_CHAR_CHATTY_TERM_WAIT</span></code> being set to 1.</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">device1.connect(service_attributes=dict(ping=dict(timeout=1)))</span></code>
results in <code class="docutils literal notranslate"><span class="pre">device1.ping.timeout</span></code> being set to 1234.</p>
</div>
<p>If you want to change to default timeout value for execute and configure service,
you can set the <code class="docutils literal notranslate"><span class="pre">EXEC_TIMEOUT</span></code> and <code class="docutils literal notranslate"><span class="pre">CONFIG_TIMEOUT</span></code> in the testbed file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">device1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;nxos&#39;</span>
<span class="w">    </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;n7k&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;router&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">telnet</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.64.70.11</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2042</span>

<span class="w">        </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">          </span><span class="nt">EXEC_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120</span>
<span class="w">          </span><span class="nt">CONFIG_TIMEOUT</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">120</span>
</pre></div>
</div>
</section>
<section id="example-single-nxos">
<h3>Example: Single NXOS<a class="headerlink" href="#example-single-nxos" title="Link to this heading">¶</a></h3>
<p>Every other platform can use the same sample file by changing the os, platform, model. The Moonshine platform does not require a username or password, so
these are omitted (see below for an example).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">step-n7k-1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;nxos&#39;</span>
<span class="w">    </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;n7k&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;router&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lab</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;unicon.Unicon&#39;</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">telnet</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.64.70.11</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2042</span>
</pre></div>
</div>
<p>For more info on testbed refer to <span class="xref std std-ref">topology</span> package.</p>
<p><strong>Connecting to the device using the above testbed file:</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>unicon Connection arguments may be passed in the pyATS
<code class="docutils literal notranslate"><span class="pre">device.connect()</span></code>.  For example: <code class="docutils literal notranslate"><span class="pre">device.connect(learn_hostname=True)</span></code>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;testbed.yaml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uut</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;step-n7k-1&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uut</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: +++ initializing context +++</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: +++ initializing state_machine +++</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: +++ initializing services +++</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  ping   :  &lt;unicon.plugins.generic.service_implementation.Ping object at 0x10441ff98&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  reload   :  &lt;unicon.plugins.nxos.service_implementation.Reload object at 0x10441fef0&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  sendline   :  &lt;unicon.plugins.generic.service_implementation.Sendline object at 0x10441ffd0&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  list_vdc   :  &lt;unicon.plugins.nxos.service_implementation.ListVdc object at 0x10441f978&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  copy   :  &lt;unicon.plugins.generic.service_implementation.Copy object at 0x10443b048&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  switchto   :  &lt;unicon.plugins.nxos.service_implementation.SwitchVdc object at 0x10443b0b8&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  disable   :  &lt;unicon.plugins.generic.service_implementation.Disable object at 0x10443b0f0&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  send   :  &lt;unicon.plugins.generic.service_implementation.Send object at 0x10443b128&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  delete_vdc   :  &lt;unicon.plugins.nxos.service_implementation.DeleteVdc object at 0x10443b160&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  ping6   :  &lt;unicon.plugins.nxos.service_implementation.Ping6 object at 0x10443b198&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  execute   :  &lt;unicon.plugins.generic.service_implementation.Execute object at 0x10443b208&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  enable   :  &lt;unicon.plugins.generic.service_implementation.Enable object at 0x10443b240&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  shellexec   :  &lt;unicon.plugins.nxos.service_implementation.ShellExec object at 0x10443b278&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  switchback   :  &lt;unicon.plugins.nxos.service_implementation.SwitchbackVdc object at 0x10443b2b0&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  config   :  &lt;unicon.plugins.generic.service_implementation.Config object at 0x10443b2e8&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  create_vdc   :  &lt;unicon.plugins.nxos.service_implementation.CreateVdc object at 0x10443b320&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  expect   :  &lt;unicon.plugins.generic.service_implementation.Expect object at 0x10443b358&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: adding service  log_user   :  &lt;unicon.plugins.generic.service_implementation.LogUser object at 0x10443b390&gt;</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: connection to step-n7k-1</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: +++ connection to spawn_command: telnet 10.64.70.24 2061, id: 4358177400 +++</span>

<span class="go">2016-04-06T12:06:50: %UNICON-INFO: telnet 10.64.70.24 2061</span>
<span class="go">Trying 10.64.70.24...</span>
<span class="go">Connected to ts-nostg-mm18.cisco.com.</span>
<span class="go">Escape character is &#39;^]&#39;.</span>

<span class="go">step-n7k-1#</span>
<span class="go">2016-04-06T12:06:51: %UNICON-INFO: +++ initializing handle +++</span>

<span class="go">2016-04-06T12:06:51: %UNICON-INFO: +++ execute  +++</span>
<span class="go">term length 0</span>
<span class="go">step-n7k-1#</span>
<span class="go">2016-04-06T12:06:51: %UNICON-INFO: +++ execute  +++</span>
<span class="go">term width 511</span>
<span class="go">step-n7k-1#</span>
<span class="go">2016-04-06T12:06:51: %UNICON-INFO: +++ execute  +++</span>
<span class="go">terminal session-timeout 0</span>
<span class="go">step-n7k-1#</span>
<span class="go">2016-04-06T12:06:51: %UNICON-INFO: +++ config  +++</span>
<span class="go">config term</span>
<span class="go">Enter configuration commands, one per line.  End with CNTL/Z.</span>
<span class="go">step-n7k-1(config)# no logging console</span>
<span class="go">step-n7k-1(config)# line console</span>
<span class="go">step-n7k-1(config-console)# exec-timeout 0</span>
<span class="go">step-n7k-1(config-console)# terminal width 511</span>
<span class="go">step-n7k-1(config-console)# end</span>
<span class="go">step-n7k-1#</span>
</pre></div>
</div>
</section>
<section id="example-linux-server">
<h3>Example: Linux Server<a class="headerlink" href="#example-linux-server" title="Link to this heading">¶</a></h3>
<p>Specifying linux device in testbed file template is almost the same as router template, except Unicon
looks for <code class="xref py py-obj docutils literal notranslate"><span class="pre">linux</span></code> block in the device details and os has to be mentioned as <code class="xref py py-obj docutils literal notranslate"><span class="pre">linux</span></code></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mohamoha-ads</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;linux&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;unicon.Unicon&#39;</span>
<span class="w">      </span><span class="nt">linux</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mohamoha-ads</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;linux&#39;</span>
</pre></div>
</div>
<p><strong>Connecting to linux machine using above testbed file:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;testbed.yaml&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">server</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;mohamoha-ads&#39;</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">server</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: +++ initializing context +++</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: +++ initializing state_machine +++</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: +++ initializing services +++</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: adding service  send   :  &lt;unicon.plugins.generic.service_implementation.Send object at 0x10443b9b0&gt;</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: adding service  execute   :  &lt;unicon.plugins.linux.service_implementation.Execute object at 0x10443be48&gt;</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: adding service  sendline   :  &lt;unicon.plugins.generic.service_implementation.Sendline object at 0x10443be80&gt;</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: adding service  expect   :  &lt;unicon.plugins.generic.service_implementation.Expect object at 0x10443beb8&gt;</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: adding service  log_user   :  &lt;unicon.plugins.generic.service_implementation.LogUser object at 0x10443bef0&gt;</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: connection to mohamoha-ads</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: +++ connection to spawn_command: ssh -l mohamoha 64.103.223.250, id: 4366516064 +++</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: ssh -l mohamoha 64.103.223.250</span>

<span class="go">Last login: Mon Apr  4 16:12:21 2016 from 10.232.8.212</span>
<span class="go">Cisco Linux 5.50-5Server Kickstarted on: Sat Jun 13 05:53:15 PDT 2009.</span>

<span class="go">bgl-ads-842:129&gt;</span>
<span class="go">2016-04-06T12:10:49: %UNICON-INFO: +++ initializing handle +++</span>

<span class="go">2016-04-06T12:10:49: %UNICON-INFO: Attaching  all Subcommands</span>
</pre></div>
</div>
<p><strong>Connection to Linux with additional SSH options:</strong></p>
<p>If you want the linux connection to take additional ssh options, then it’s better
to use <code class="xref py py-obj docutils literal notranslate"><span class="pre">command</span></code> key. Unicon will take the value of <code class="xref py py-obj docutils literal notranslate"><span class="pre">command</span></code> and spawns.
Command value should be the complete command to be spawned.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mohamoha-ads</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;linux&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;unicon.Unicon&#39;</span>
<span class="w">      </span><span class="nt">linux</span><span class="p">:</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ssh</span><span class="nv"> </span><span class="s">-l</span><span class="nv"> </span><span class="s">admin</span><span class="nv"> </span><span class="s">10.1.1.1</span><span class="nv"> </span><span class="s">-oHostKeyAlgorithms=+ssh-dss&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;linux&#39;</span>
</pre></div>
</div>
<p><strong>Connecting to another TCP port using SSH:</strong></p>
<p>If you want to connect to another port with SSH, you can use the port option in the testbed file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">lnx-vm</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;linux&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;unicon.Unicon&#39;</span>
<span class="w">      </span><span class="nt">linux</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.1.1.1</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2200</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;linux&#39;</span>
</pre></div>
</div>
</section>
<section id="example-moonshine">
<h3>Example: Moonshine<a class="headerlink" href="#example-moonshine" title="Link to this heading">¶</a></h3>
<p id="unicon-user-guide-connection-moonshine">Specifying a Moonshine device in the testbed file template is again very similar to the above examples,
except Unicon looks for the <code class="xref py py-obj docutils literal notranslate"><span class="pre">iosxr</span></code> os and <code class="xref py py-obj docutils literal notranslate"><span class="pre">moonshine</span></code> type and platform, and no username or password is
required.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">bringup</span><span class="p">:</span>
<span class="w">  </span><span class="nt">xrut</span><span class="p">:</span>
<span class="w">    </span><span class="nt">base_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/auto/xrut/xrut-gold</span>
<span class="w">    </span><span class="nt">sim_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/my/xrut/sim/dir</span>
<span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">moonshine-1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iosxr</span>
<span class="w">    </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">moonshine</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">moonshine</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="nv">unicon.XRUTConnect</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="nv">xrutconnect</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>Please note that devices using the xrutconnect protocol should specify the default connection class as
unicon.XRUTConnect.</p>
<p>For information on how to create such a testbed file via the <code class="xref py py-obj docutils literal notranslate"><span class="pre">xrutbringup</span></code> command, passing in a logical
testbed file and a clean.yaml file, please see <span class="xref std std-ref">dyntopo xrut working examples moonshine</span> .</p>
</section>
<section id="example-nso">
<h3>Example: NSO<a class="headerlink" href="#example-nso" title="Link to this heading">¶</a></h3>
<p id="unicon-user-guide-connection-nso">To connect to the Network Service Orchestrator CLI via SSH, use the ‘nso’ OS type and specify the
ssh port under the connection details.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># example testbed.yaml file for NSO CLI</span>
<span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ncs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nso</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">          </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">          </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unicon.Unicon</span>
<span class="w">        </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cli</span>
<span class="w">      </span><span class="nt">con</span><span class="p">:</span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncs_cli -C</span>
<span class="w">      </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">        </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">          </span><span class="nt">nso</span><span class="p">:</span>
<span class="w">              </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">              </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco1234</span>
<span class="w">        </span><span class="nt">login_creds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nso</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2024</span>
</pre></div>
</div>
<p><strong>Connecting to NSO CLI via SSH using above testbed file:</strong></p>
<p>As shown in the example below, use the connect() method to initiate the connection,
specify the ‘via’ option if no default is configured under the connection defaults.</p>
<p>The ncs.conf configuration file section for the SSH service for NSO is shown below.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;cli&gt;</span>
<span class="w">  </span><span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
<span class="w">  </span><span class="nt">&lt;style&gt;</span>c<span class="nt">&lt;/style&gt;</span>

<span class="w">  </span><span class="cm">&lt;!-- Use the builtin SSH server --&gt;</span>
<span class="w">  </span><span class="nt">&lt;ssh&gt;</span>
<span class="w">    </span><span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
<span class="w">    </span><span class="nt">&lt;ip&gt;</span>0.0.0.0<span class="nt">&lt;/ip&gt;</span>
<span class="w">    </span><span class="nt">&lt;port&gt;</span>2024<span class="nt">&lt;/port&gt;</span>
<span class="w">  </span><span class="nt">&lt;/ssh&gt;</span>
</pre></div>
</div>
<p>This example uses the ‘cli’ connection which initiates a SSH session the to default port of the NSO SSH service.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;testbed.yaml&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ncs</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">ncs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ncs</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">via</span><span class="o">=</span><span class="s1">&#39;cli&#39;</span><span class="p">)</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ initializing context +++</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ initializing state_machine +++</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ initializing services +++</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  execute   :  &lt;unicon.plugins.nso.service_implementation.Execute object at 0x7ff3549ba630&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  cli_style   :  &lt;unicon.plugins.nso.service_implementation.CliStyle object at 0x7ff3549ba668&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  log_user   :  &lt;unicon.plugins.generic.service_implementation.LogUser object at 0x7ff3549ba6a0&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  sendline   :  &lt;unicon.plugins.generic.service_implementation.Sendline object at 0x7ff3549ba6d8&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  expect   :  &lt;unicon.plugins.generic.service_implementation.Expect object at 0x7ff3549ba710&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  configure   :  &lt;unicon.plugins.nso.service_implementation.Configure object at 0x7ff3549ba748&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: adding service  send   :  &lt;unicon.plugins.generic.service_implementation.Send object at 0x7ff3549ba780&gt;</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: connection to ncs</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ connection to spawn_command: ssh -l admin 127.0.0.1 -p 2024, id: 140683073268704 +++</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: ssh -l admin 127.0.0.1 -p 2024</span>
<span class="go">admin@127.0.0.1&#39;s password:</span>

<span class="go">admin connected from 127.0.0.1 using ssh on nso-dev-server</span>
<span class="go">admin@ncs#</span>
<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ initializing handle +++</span>

<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ None  +++</span>
<span class="go">paginate false</span>
<span class="go">admin@ncs#</span>
<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ execute  +++</span>
<span class="go">screen-length 0</span>
<span class="go">admin@ncs#</span>
<span class="go">2017-06-02T08:15:55: %UNICON-INFO: +++ execute  +++</span>
<span class="go">screen-width 0</span>
<span class="go">admin@ncs#</span>
<span class="go">2017-06-02T08:15:55: %UNICON-INFO: Attaching  all Subcommands</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>Connecting to NSO CLI via ncs_cli command using above testbed file</strong></p>
<p>It is also possible to run the ncs_cli command to initiate the CLI session,
use the ‘command’ option in the testbed.yaml file to specify the ncs_cli command.</p>
<p>Specify the ‘via’ option if the default is not specified in the connection defaults.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ncs</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">via</span><span class="o">=</span><span class="s1">&#39;con&#39;</span><span class="p">)</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ initializing context +++</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ initializing state_machine +++</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ initializing services +++</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  send   :  &lt;unicon.plugins.generic.service_implementation.Send object at 0x7fab8e932320&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  log_user   :  &lt;unicon.plugins.generic.service_implementation.LogUser object at 0x7fab8e932358&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  configure   :  &lt;unicon.plugins.nso.service_implementation.Configure object at 0x7fab8e932390&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  cli_style   :  &lt;unicon.plugins.nso.service_implementation.CliStyle object at 0x7fab8e9323c8&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  execute   :  &lt;unicon.plugins.nso.service_implementation.Execute object at 0x7fab8e932400&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  sendline   :  &lt;unicon.plugins.generic.service_implementation.Sendline object at 0x7fab8e932438&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: adding service  expect   :  &lt;unicon.plugins.generic.service_implementation.Expect object at 0x7fab8e932470&gt;</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: connection to ncs</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ connection to spawn_command: ncs_cli -C, id: 140374808144136 +++</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: ncs_cli -C</span>

<span class="go">dwapstra connected from 10.0.2.2 using ssh on nso-dev-server</span>
<span class="go">dwapstra@ncs#</span>
<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ initializing handle +++</span>

<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ None  +++</span>
<span class="go">paginate false</span>
<span class="go">dwapstra@ncs#</span>
<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ execute  +++</span>
<span class="go">screen-length 0</span>
<span class="go">dwapstra@ncs#</span>
<span class="go">2017-06-02T08:19:19: %UNICON-INFO: +++ execute  +++</span>
<span class="go">screen-width 0</span>
<span class="go">dwapstra@ncs#</span>
<span class="go">2017-06-02T08:19:19: %UNICON-INFO: Attaching  all Subcommands</span>
</pre></div>
</div>
</section>
<section id="example-confd">
<h3>Example: ConfD<a class="headerlink" href="#example-confd" title="Link to this heading">¶</a></h3>
<p id="unicon-user-guide-connection-confd">To connect to ConfD based CLI via SSH, use the ‘confd’ OS type and specify the
ssh port (if needed) under the connection details.</p>
<p>For NSO, the ‘os’ needs to be specified, ‘platform’ can be omitted.
For CSP, ESC and NFVIS, the ‘platform’ needs to be specified.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># example testbed.yaml file for NSO CLI</span>
<span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ncs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">confd</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router</span>
<span class="w">    </span><span class="c1"># platform: &#39;csp&#39;, &#39;esc&#39; or &#39;nfvis&#39;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">          </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">          </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco1234</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unicon.Unicon</span>
<span class="w">        </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cli</span>
<span class="w">      </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2024</span>
</pre></div>
</div>
</section>
<section id="example-vos">
<h3>Example: VOS<a class="headerlink" href="#example-vos" title="Link to this heading">¶</a></h3>
<p id="unicon-user-guide-connection-vos">To connect to Cisco Unified Collaboration based CLI via SSH, use the ‘vos’ OS type and specify the
ssh port (if needed) under the connection details.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># example testbed.yaml file for VOS CLI</span>
<span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cm</span><span class="p">:</span>
<span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vos</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">server</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">          </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">          </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco1234</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unicon.Unicon</span>
<span class="w">        </span><span class="nt">via</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cli</span>
<span class="w">      </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.1</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span>
</pre></div>
</div>
</section>
</section>
<section id="pyats-connection-pool">
<h2>pyATS Connection Pool<a class="headerlink" href="#pyats-connection-pool" title="Link to this heading">¶</a></h2>
<p>Unicon (IOSXE, NXOS and IOSXR) plugins now support creating a pool of shareable
connections to be distributed among device action requests promoting speed and
avoiding race condition and deadlocks.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1"># Connection pool using unicon.Unicon class example</span>
<span class="c1"># Assuming we have a device that is defined in the testbed yaml file as above</span>

<span class="c1"># using the above device, create a pool of 5 workers</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">device</span><span class="o">.</span><span class="n">start_pool</span><span class="p">(</span><span class="n">alias</span> <span class="o">=</span> <span class="s1">&#39;pool&#39;</span><span class="p">,</span> <span class="o">-----</span> <span class="o">&gt;</span> <span class="n">Connection</span> <span class="n">pool</span> <span class="n">will</span> <span class="n">be</span> <span class="n">accessed</span> <span class="k">as</span> <span class="s2">&quot;device.pool&quot;</span>
                      <span class="n">via</span> <span class="o">=</span> <span class="s1">&#39;mgmt&#39;</span><span class="p">,</span>   <span class="o">-----</span> <span class="o">&gt;</span> <span class="n">Connection</span> <span class="n">name</span> <span class="k">as</span> <span class="ow">in</span> <span class="n">testbed</span> <span class="n">yaml</span>
                      <span class="n">size</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>

<span class="c1"># Now all action requests sent to the device will run simultaneously on the</span>
<span class="c1"># 5 connections (knows as workers) on a first come first serve basis.</span>
</pre></div>
</div>
<p>Check here for more details on pyATS <a class="reference external" href="https://pubhub.devnetcloud.com/media/pyats/docs/connections/sharing.html#connection-pools">Connection Pool</a> feature.</p>
</section>
<section id="python-apis">
<h2>Python APIs<a class="headerlink" href="#python-apis" title="Link to this heading">¶</a></h2>
<p>This section covers how to connect to a device in standalone mode, using raw
Python APIs directly.</p>
<dl class="simple">
<dt>To connect to a device, you need.</dt><dd><ul class="simple">
<li><p>IP address</p></li>
<li><p>Hostname</p></li>
<li><p>OS</p></li>
<li><p>Credentials</p></li>
</ul>
</dd>
</dl>
<p>Please make sure that device is up and booted. In the following
example, we are establishing connection to a <em>dual rp</em> NXOS device.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unicon</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;n7k2-1&#39;</span><span class="p">,</span>
                 <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;telnet 172.27.114.43 2037&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;telnet 172.27.114.43 2038&#39;</span><span class="p">],</span>
                 <span class="n">credentials</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisc0123&#39;</span><span class="p">}},</span>
                 <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>Arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>hostname</strong>: must be same as the exact hostname of the device.
Do not append prompt characters like ‘#’ or ‘$’</p></li>
<li><p><strong>os</strong>: The os of the device to connect to.  This selects a unicon plugin.</p></li>
<li><p><strong>start</strong>: It must be a list of commands which needs to be invoked for starting a connection.
Generally it will be of the format <code class="xref py py-obj docutils literal notranslate"><span class="pre">telnet</span> <span class="pre">xxx</span> <span class="pre">xxx</span></code>. But it could take any value.</p></li>
<li><p><strong>credentials</strong>: A dictionary of named credentials used to interact with the device.</p></li>
<li><p><strong>platform</strong>: The platform of the device to connect to.  This selects a
unicon sub-plugin under the given plugin identified with the <code class="docutils literal notranslate"><span class="pre">os</span></code>
argument.  <em>(Optional)</em></p></li>
<li><p><strong>model</strong>: The model of the device to connect to.  This selects a
unicon sub-sub-plugin under the given plugin identified with the <code class="docutils literal notranslate"><span class="pre">os</span></code>
and <code class="docutils literal notranslate"><span class="pre">platform</span></code> arguments.  <em>(Optional)</em></p></li>
<li><p><strong>connection_timeout</strong>: Connection timeout value to connect the device.
Default value is <code class="docutils literal notranslate"><span class="pre">60</span> <span class="pre">sec</span></code>. <em>(Optional)</em></p></li>
<li><p><strong>proxy_connections</strong>: Connection object which is use to establish proxy connection.
Default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>. <em>(Optional)</em></p></li>
<li><p><strong>alias</strong>: Connection alias. Default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>. <em>(Optional)</em></p></li>
<li><p><strong>login_creds</strong>: A single credential name or a list of credentials for
authenticating against the device.  Default value is <code class="docutils literal notranslate"><span class="pre">default</span></code>. <em>(Optional)</em></p></li>
<li><p><strong>cred_action</strong>: A dictionary with credential names and post password action statement.
This allows the user to specify e.g. <code class="xref py py-obj docutils literal notranslate"><span class="pre">sendline</span></code> to be sent after a credential password.
The typical use case is a terminal server connection where a return will get a response
from the device. <em>(Optional)</em></p></li>
<li><p><strong>learn_hostname</strong>: Set to <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the actual hostname set on the device
differs from the hostname parameter. <em>(Optional)</em></p></li>
<li><p><strong>learn_os</strong>: Set to <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the device os is not provided, it will try to
learn the device os and redirect to the learned plugin. <em>(Optional)</em></p></li>
<li><p><strong>prompt_recovery</strong>: Set <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> for using prompt recovery feature. Default value is <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#False" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.
Click <a class="reference internal" href="../developer_guide/eal.html#prompt-recovery-label"><span class="std std-ref">Prompt Recovery Feature</span></a> for more information on the feature. <em>(Optional)</em></p></li>
<li><p><strong>init_exec_commands</strong>: List of exec commands to use when initializing the connection.
This option overrules the default settings for the plugin and uses the
user specified initialization commands. Can also be passed in the
connection block in the yaml file. <em>(Optional)</em></p></li>
<li><p><strong>init_config_commands</strong>: List of config commands to use when initializing the connection.
This option overrules the default settings for the plugin and uses the user specified initialization commands.
Config commands will not be executed on the standby RP.
Config commands are not available on Linux and ISE plugins. Can also be
passed in the connection block in the yaml file. <em>(Optional)</em></p></li>
<li><p><strong>logfile</strong>: Filename to log all device interaction to. By default, a file will
be created in /tmp based on the hostname, via (if specified) and timestamp. <em>(Optional)</em></p></li>
<li><p><strong>log_buffer</strong>: Set to <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> to use a log_buffer instead of a logfile, no logfile will be created.
The log buffer can be accessed via connection.log_buffer attribute. <em>(Optional)</em></p></li>
<li><p><strong>mit</strong>: Boolean option to maintain initial state on connect. The state detected
on connect() is maintained, no connection initialization is done and the
exec and config initialization commands are not executed.  It is possible to use
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">mit</span></code> option with HA connections, however please note that HA initialization is not done.
Default is False. For more info on device state, see <a class="reference internal" href="../developer_guide/statemachine.html"><span class="doc">Statemachine</span></a>
<em>(Optional)</em></p></li>
<li><p><strong>settings</strong>: Dictionary or Settings class instance with updated settings for this connection.
Pass a dictionary to update some of the settings, or pass a Settings object with all settings.
<em>(Optional)</em></p></li>
<li><p><strong>overwrite_settings</strong>: Boolean option to allow settings to be appended (if the attribute is a list).
<em>(Optional)</em></p></li>
<li><p><strong>log_stdout</strong>: Boolean option to enable/disable logging to standard output. Default is True.
<em>(Optional)</em></p></li>
<li><p><strong>debug</strong>: Boolean option to enable/disable internal debug logging.
<em>(Optional)</em></p></li>
<li><p><strong>service_attributes</strong>: Dictionary whose keys are service names
and whose values are dictionaries containing key/value pairs to set on the
named service.
<em>(Optional)</em></p></li>
<li><p><strong>connect_reply</strong>: Dialog object which user wants to be added in the connection dialog.
<em>(Optional)</em></p></li>
<li><p><strong>goto_enable</strong>: Boolean option to enable/disable connection behavior to go to enable state
after setting up connection. Default is True.
<em>(Optional)</em></p></li>
<li><p><strong>standby_goto_enable</strong>: Boolean option to enable/disable standby connection behavior to go to
enable state after setting up connection. Default is True.
<em>(Optional)</em></p></li>
<li><p><strong>trim_line</strong>: Boolean option to enable line trimming if the line has additional <code class="xref py py-obj docutils literal notranslate"><span class="pre">\r\n</span></code> characters.
<em>(Optional)</em></p></li>
<li><p><strong>reconnect</strong>: Boolean option to enable automatic reconnect in case the connection has not been made
or the connection was lost. Default: True
<em>(Optional)</em></p></li>
</ul>
</div></blockquote>
<p>For <em>Single RP</em> connection, <code class="xref py py-obj docutils literal notranslate"><span class="pre">start</span></code> will be a list with only one element.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Connecting to many routing and switching platforms usually requires
the configured hostname to be known in advance.
However, sometimes the configured hostname on such a device may be
unknown and may differ from the <code class="docutils literal notranslate"><span class="pre">hostname</span></code> parameter.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">learn_hostname=True</span></code> is specified:</p>
<blockquote>
<div><ul class="simple">
<li><p>unicon attempts to learn the hostname of the device
by examining the device’s prompt.</p></li>
<li><p>If no hostname can be learned, a warning is thrown and the
learned hostname is set to a generic pattern.</p></li>
<li><p>If the learned hostname differs from the <code class="docutils literal notranslate"><span class="pre">hostname</span></code> parameter,
<code class="docutils literal notranslate"><span class="pre">dev.previous_hostname</span></code> is set to the original hostname and
<code class="docutils literal notranslate"><span class="pre">dev.hostname</span></code> is overwritten with the newly learned hostname.</p></li>
<li><p>Once set, the <code class="docutils literal notranslate"><span class="pre">learn_hostname</span></code> setting can only be changed by
destroying and recreating the Connection object.</p></li>
<li><p>The hostname of the device does not contain the characters :
#, whitespace characters.</p></li>
</ul>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Passive hostname learning is enabled by default and will
give a warning if the device hostname does not match the learned
hostname. The learned hostname is only used if <code class="xref py py-obj docutils literal notranslate"><span class="pre">learn_hostname=True</span></code>.</p>
<p>A timeout may occur if the prompt pattern uses the hostname,
the timeout error includes the hostname and a hint to check
the hostname if a mismatch was detected.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the Linux plugin, it is recommended to use <code class="docutils literal notranslate"><span class="pre">learn_hostname=True</span></code>.
With the default prompt pattern for the Linux plugin there is a risk of false prompt
matching if the output contains one of the prompt characters <code class="xref py py-obj docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">#</span> <span class="pre">%</span> <span class="pre">~</span> <span class="pre">$</span></code> at the end of a line.</p>
</div>
<p><strong>Disconnecting</strong></p>
<p>To disconnect a session, you can call the <code class="xref py py-obj docutils literal notranslate"><span class="pre">disconnect()</span></code> method from a Unicon connection.
This will terminate the subprocess that is handling the device connection. By default,
Unicon waits about 10 seconds after the process is terminated before returning from the method.
This is to prevent connection issues on rapid connect/disconnect sequences.</p>
<p>To change the default timers used when disconnecting, you can change the <code class="xref py py-obj docutils literal notranslate"><span class="pre">GRACEFUL_DISCONNECT_WAIT_SEC</span></code> and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">POST_DISCONNECT_WAIT_SEC</span></code> settings on the Settings object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">GRACEFUL_DISCONNECT_WAIT_SEC</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">dev</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">POST_DISCONNECT_WAIT_SEC</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<section id="extend-settings-attributes">
<span id="unicon-extend-settings-attributes"></span><h3>Extend Settings Attributes<a class="headerlink" href="#extend-settings-attributes" title="Link to this heading">¶</a></h3>
<p>It is possible to extend list settings attributes of the connection like <code class="docutils literal notranslate"><span class="pre">ERROR_PATTERN</span></code>
and <code class="docutils literal notranslate"><span class="pre">CONFIGURE_ERROR_PATTERN</span></code> by using <code class="docutils literal notranslate"><span class="pre">overwrite_settings=False</span></code> argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unicon</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="n">settings</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ERROR_PATTERN&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">]}</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;asr1000&#39;</span><span class="p">,</span>
                 <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;telnet 172.27.114.43 2037&#39;</span><span class="p">],</span>
                 <span class="n">credentials</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisc0123&#39;</span><span class="p">}},</span>
                 <span class="n">os</span><span class="o">=</span><span class="s1">&#39;iosxe&#39;</span><span class="p">,</span>
                 <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
                 <span class="n">overwrite_settings</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">dev</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">ERROR_PATTERN</span>
<span class="p">[</span><span class="s1">&#39;test&#39;</span><span class="p">,</span>
 <span class="s1">&#39;error&#39;</span><span class="p">,</span>
 <span class="s1">&#39;^%</span><span class="se">\\</span><span class="s1">s*[Ii]nvalid (command|input)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;^%</span><span class="se">\\</span><span class="s1">s*[Ii]ncomplete (command|input)&#39;</span><span class="p">,</span>
 <span class="s1">&#39;^%</span><span class="se">\\</span><span class="s1">s*[Aa]mbiguous (command|input)&#39;</span><span class="p">]</span>

<span class="c1"># this can be done from testbed yaml as well</span>
<span class="c1"># the following is an example testbed</span>
<span class="n">devices</span><span class="p">:</span>
  <span class="n">PE1</span><span class="p">:</span>
    <span class="n">alias</span><span class="p">:</span> <span class="n">uut</span>
    <span class="n">os</span><span class="p">:</span> <span class="n">iosxe</span>
    <span class="n">credentials</span><span class="p">:</span>
      <span class="n">default</span><span class="p">:</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">cisco</span>
        <span class="n">username</span><span class="p">:</span> <span class="n">admin</span>
      <span class="n">enable</span><span class="p">:</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">cisco</span>
    <span class="n">connections</span><span class="p">:</span>
      <span class="n">defaults</span><span class="p">:</span>
        <span class="n">class</span><span class="p">:</span> <span class="n">unicon</span><span class="o">.</span><span class="n">Unicon</span>
      <span class="n">a</span><span class="p">:</span>
        <span class="n">protocol</span><span class="p">:</span> <span class="n">telnet</span>
        <span class="n">ip</span><span class="p">:</span> <span class="mf">1.1.1.1</span>
        <span class="n">port</span><span class="p">:</span> <span class="mi">2039</span>
        <span class="n">arguments</span><span class="p">:</span>
          <span class="n">overwrite_settings</span><span class="p">:</span> <span class="kc">False</span>
        <span class="n">settings</span><span class="p">:</span>
          <span class="n">EXEC_TIMEOUT</span><span class="p">:</span> <span class="mi">300</span>
          <span class="n">ERROR_PATTERN</span><span class="p">:</span>
            <span class="o">-</span> <span class="n">testbed</span>
            <span class="o">-</span> <span class="n">my</span> <span class="n">ERROR</span>
</pre></div>
</div>
</section>
<section id="overriding-service-attributes">
<span id="unicon-override-service-attributes"></span><h3>Overriding Service Attributes<a class="headerlink" href="#overriding-service-attributes" title="Link to this heading">¶</a></h3>
<p>When a connection is created, various services are attached to it.  The
selected plugin determines the list of supported services.</p>
<p>It is possible to override attributes of one or more services by specifying
the <code class="docutils literal notranslate"><span class="pre">service_attributes</span></code> parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unicon</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;n7k2-1&#39;</span><span class="p">,</span>
                 <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;telnet 172.27.114.43 2037&#39;</span><span class="p">],</span>
                 <span class="n">credentials</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisc0123&#39;</span><span class="p">}},</span>
                 <span class="n">os</span><span class="o">=</span><span class="s1">&#39;nxos&#39;</span><span class="p">,</span>
                 <span class="n">service_attributes</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="n">traceroute</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">123</span><span class="p">),</span>
                    <span class="n">ping</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">456</span><span class="p">)))</span>
<span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">dev</span><span class="o">.</span><span class="n">traceroute</span><span class="o">.</span><span class="n">timeout</span>
<span class="mi">123</span>
<span class="n">dev</span><span class="o">.</span><span class="n">ping</span><span class="o">.</span><span class="n">timeout</span>
<span class="mi">456</span>
</pre></div>
</div>
</section>
</section>
<section id="credentials">
<span id="unicon-credentials"></span><h2>Credentials<a class="headerlink" href="#credentials" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">credentials</span></code> connection parameter defines a dictionary of named
credentials.  A credential is a dictionary typically containing both
<code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> keys.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">login_creds</span></code> connection parameter defines an optional sequence of
credential names to try.  Each time the device prompts for a username or
password, the current credential is set to the next credential in the sequence
if a current credential has not already been set.
When a password is sent, the current credential is unset.  The one exception
is when entering an administrator’s password on a routing device coming up
without configuration, in this case the current credential is reused.
If the sequence has been exhausted and no more credentials are available to
satisfy a username/password prompt, a
<a class="reference internal" href="../api/unicon.core.html#unicon.core.errors.CredentialsExhaustedError" title="unicon.core.errors.CredentialsExhaustedError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CredentialsExhaustedError</span></code></a> is
raised.</p>
<p>Credentials are not retried, any username or password failure causes a
<a class="reference internal" href="../api/unicon.core.html#unicon.core.errors.UniconAuthenticationError" title="unicon.core.errors.UniconAuthenticationError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">UniconAuthenticationError</span></code></a>
to be raised.</p>
<p>It is possible to specify the password to use for routing devices to enter
enable mode.  This may be done via the <code class="docutils literal notranslate"><span class="pre">enable_password</span></code> entry under the
current credential, or via a separate credential called <code class="docutils literal notranslate"><span class="pre">enable</span></code>.
Please see <a class="reference internal" href="passwords.html#unicon-enable-password-handling"><span class="std std-ref">Enable password handling</span></a> for details.</p>
<p>Passwords specified as a <span class="xref std std-ref">secret_strings</span> are automatically decoded prior
to being sent to the device.</p>
<section id="in-pyats-testbed-yaml">
<h3>In pyATS Testbed YAML<a class="headerlink" href="#in-pyats-testbed-yaml" title="Link to this heading">¶</a></h3>
<p>Credentials may be specified on a per-testbed, per-device or per-connection
basis, as documented in <span class="xref std std-ref">topology_credential_password_modeling</span>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    devices:</span>
<span class="s2">        my_device:</span>
<span class="s2">            type: router</span>
<span class="s2">            credentials:</span>
<span class="s2">                default:</span>
<span class="s2">                    username: admin</span>
<span class="s2">                    password: Cisc0123</span>
<span class="s2">                alternate:</span>
<span class="s2">                    username: alt_username</span>
<span class="s2">                    password: alt_password</span>
<span class="s2">                termserv:</span>
<span class="s2">                    username: tsuser</span>
<span class="s2">                    password: tspw</span>
<span class="s2">                enable:</span>
<span class="s2">                    password: enablepw</span>
<span class="s2">            connections:</span>
<span class="s2">                defaults: {class: &#39;unicon.Unicon&#39;}</span>
<span class="s2">                a:</span>
<span class="s2">                  protocol: ssh</span>
<span class="s2">                  ip: 10.64.70.11</span>
<span class="s2">                  port: 2042</span>
<span class="s2">                  login_creds: [termserv, default]</span>
<span class="s2">                  ssh_options: &quot;-v -i /path/to/identityfile&quot;</span>

<span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">my_device</span>
<span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c1"># To connect using different credentials than is contained in the</span>
<span class="c1"># testbed YAML ``login_creds`` key:</span>
<span class="n">dev</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
<span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">login_creds</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;termserv&#39;</span><span class="p">,</span> <span class="s1">&#39;alternate&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="in-python">
<h3>In Python<a class="headerlink" href="#in-python" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span> <span class="o">=</span> <span class="n">Connnection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">uut_hostname</span><span class="p">,</span>
                   <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="n">uut_start_cmd</span><span class="p">],</span>
                   <span class="n">credentials</span><span class="o">=</span><span class="p">{</span>\
                       <span class="p">{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisc0123&#39;</span><span class="p">}},</span>\
                       <span class="p">{</span><span class="s1">&#39;enable&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;enablepw&#39;</span><span class="p">}},</span>\
                       <span class="p">{</span><span class="s1">&#39;termserv&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;tsuser&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;tspw&#39;</span><span class="p">}},</span>\
                   <span class="p">},</span>
                   <span class="n">login_creds</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;termserv&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">],</span>
                 <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="post-credential-action">
<h3>Post credential action<a class="headerlink" href="#post-credential-action" title="Link to this heading">¶</a></h3>
<p>In certain cases, e.g. when using a serial console server, an action is needed to get a response
from the device connected to the serial port. There are two ways to configure this action.
The first one is using a setting, the second one is using a post credential action.
The post credential action takes precedence over the setting.</p>
<p>Example credentials for a device.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">my_device</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cisc0123</span>
<span class="w">        </span><span class="nt">terminal_server</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tsuser</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tspw</span>
</pre></div>
</div>
<p>Setting the credential action via <code class="xref py py-obj docutils literal notranslate"><span class="pre">settings</span></code> in python.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Name of the credential after which a &quot;sendline()&quot; should be executed</span>
<span class="n">dev</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">SENDLINE_AFTER_CRED</span> <span class="o">=</span> <span class="s1">&#39;terminal_server&#39;</span>
</pre></div>
</div>
<p>Settings can also be specified for the connection in the topology file as shown below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">connections</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">      </span><span class="nt">SENDLINE_AFTER_CRED</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">terminal_server</span>
</pre></div>
</div>
<p>The post credential action supports <code class="docutils literal notranslate"><span class="pre">send</span></code> and <code class="docutils literal notranslate"><span class="pre">sendline</span></code>, you can specify a string to be sent,
e.g. <code class="xref py py-obj docutils literal notranslate"><span class="pre">send(</span> <span class="pre">)</span></code> to send a space or <code class="xref py py-obj docutils literal notranslate"><span class="pre">send(\x03)</span></code> to send Ctrl-C. Quotes should not be specified.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">connections</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cli</span><span class="p">:</span>
<span class="w">    </span><span class="nt">login_creds</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">terminal_server</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">default</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">arguments</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cred_action</span><span class="p">:</span>
<span class="w">        </span><span class="nt">terminal_server</span><span class="p">:</span>
<span class="w">          </span><span class="nt">post</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sendline()</span>
</pre></div>
</div>
</section>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h2>
<p>Every unicon device connection Logger has 3 handlers.</p>
<ol class="arabic simple">
<li><p>Screen Handler: This logs messages on stdout</p></li>
<li><p>File Handler: This logs messages in file /tmp/&lt;device&gt;-&lt;alias&gt;-&lt;timestamp&gt;.log. This is default log file. To modify the file value, the logfile parameter can be used.</p></li>
<li><p>pyATS TaskLog Handler: This logs messages in pyats TaskLog file</p></li>
</ol>
<p>Change logfile when connecting.</p>
<p>In unicon standalone mode:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">uut_hostname</span><span class="p">,</span>
                   <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="n">uut_start_cmd</span><span class="p">],</span>
                   <span class="n">logfile</span><span class="o">=</span><span class="s1">&#39;user-provided-file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>With pyATS:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">logfile</span><span class="o">=</span><span class="s1">&#39;user-provided-file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Log level of device output and service messages is <code class="xref py py-obj docutils literal notranslate"><span class="pre">INFO</span></code>.</p>
<p>To disable unicon device connection logging, we can set logger level above <code class="xref py py-obj docutils literal notranslate"><span class="pre">logging.INFO</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">uut</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
</pre></div>
</div>
<p>To enable debug logs, use below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">uut</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</pre></div>
</div>
<p>Debug log now integrates with pyATS testbed yaml file. You can enable it
by define the <code class="xref py py-obj docutils literal notranslate"><span class="pre">debug:</span> <span class="pre">True</span></code> in the yaml file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">devices</span><span class="p">:</span>
  <span class="n">PE1</span><span class="p">:</span>
    <span class="n">connections</span><span class="p">:</span>
      <span class="n">defaults</span><span class="p">:</span>
        <span class="n">class</span><span class="p">:</span> <span class="s1">&#39;unicon.Unicon&#39;</span>
        <span class="n">debug</span><span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
<p>To disable logging to standard output, use the <code class="xref py py-obj docutils literal notranslate"><span class="pre">log_stdout</span></code> boolean option.</p>
<p>In unicon standalone mode:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="n">uut_hostname</span><span class="p">,</span>
                   <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="n">uut_start_cmd</span><span class="p">],</span>
                   <span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>With pyATS:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="prompt-recovery-usage">
<h2>Prompt Recovery Usage<a class="headerlink" href="#prompt-recovery-usage" title="Link to this heading">¶</a></h2>
<p>In unicon, device connection is 2 step process:</p>
<ol class="arabic simple">
<li><p>Create Device <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code> object</p></li>
<li><p>Invoke <code class="xref py py-obj docutils literal notranslate"><span class="pre">connect()</span></code> on Device <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code> object.</p></li>
</ol>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">prompt_recovery</span></code> is valid for per connect() call.
To use <code class="xref py py-obj docutils literal notranslate"><span class="pre">prompt_recovery</span></code> feature user need to specify it per call i.e when connecting next time, user need to set it again as <a class="reference external" href="https://docs.python.org/3.6/library/constants.html#True" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p>
<p>Examples:</p>
<p>To use <code class="xref py py-obj docutils literal notranslate"><span class="pre">prompt_recovery</span></code> feature in unicon, use it in the following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unicon</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;R2&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;telnet localhost 15000&#39;</span><span class="p">],</span> <span class="n">prompt_recovery</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>If user wishes to enable <code class="xref py py-obj docutils literal notranslate"><span class="pre">prompt_recovery</span></code> after creating Device Connection object, it can be done in the following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">unicon</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;R2&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;telnet localhost 15000&#39;</span><span class="p">])</span>
<span class="n">device</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">prompt_recovery</span><span class="o">=</span><span class="kc">True</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
</pre></div>
</div>
<p>When using with pyats, the feature can be used in the following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">testbed</span><span class="p">[</span><span class="s1">&#39;R1&#39;</span><span class="p">]</span>
<span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">prompt_recovery</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In pyats, to use <code class="xref py py-obj docutils literal notranslate"><span class="pre">prompt_recovery</span></code> in next <code class="xref py py-obj docutils literal notranslate"><span class="pre">connect()</span></code> call, use <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.destroy()</span></code> to disconnect connection and
use <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.connect(prompt_recovery=True)</span></code> again.</p>
</section>
<section id="login-and-password-prompts">
<h2>Login and Password Prompts<a class="headerlink" href="#login-and-password-prompts" title="Link to this heading">¶</a></h2>
<p>Unicon generic plugin uses the following regular expressions to match login and password prompts:</p>
<ol class="arabic simple">
<li><p>Login pattern: <code class="xref py py-obj docutils literal notranslate"><span class="pre">r'^.*([Uu]sername|[Ll]ogin):</span> <span class="pre">?$'</span></code></p></li>
<li><p>Password pattern: <code class="xref py py-obj docutils literal notranslate"><span class="pre">r'^.*[Pp]assword(</span> <span class="pre">for</span> <span class="pre">)?(S+)?:</span> <span class="pre">?$'</span></code></p></li>
</ol>
<p>While creating a connection, Unicon sends username and password when the device prompt matches the above patterns.</p>
<p>In some cases, change in login/password prompts on device may lead to connection failure if the default
patterns no longer match.</p>
<p>To handle such situations, user can provide custom regular expression pattern to match with different
login and password prompts on the device.</p>
<p>It can be done by setting regular expression to <code class="xref py py-obj docutils literal notranslate"><span class="pre">LOGIN_PROMPT</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">PASSWORD_PROMPT</span></code> attributes of device <code class="xref py py-obj docutils literal notranslate"><span class="pre">settings</span></code>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unicon standalone mode</span>
<span class="n">dev</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hostname</span><span class="o">=</span><span class="s1">&#39;R2&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;telnet x.x.x.x&#39;</span><span class="p">],</span>\
    <span class="n">credentials</span><span class="o">=</span><span class="p">{{</span><span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;Cisc0123&#39;</span><span class="p">}})</span>
<span class="n">dev</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_PROMPT</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;USERNAME:\s?$&#39;</span>
<span class="n">dev</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">PASSWORD_PROMPT</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;PASSWORD:\s$&#39;</span>
</pre></div>
</div>
<p>In pyATS testbed yaml file, this can be set in the following way:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">R2</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">credentials</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span>
<span class="w">            </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cisc0123</span>
<span class="w">  </span><span class="w w-Error">  </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;unicon.Unicon&#39;</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">telnet</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">x.x.x.x</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2042</span>
<span class="w">        </span><span class="nt">prompts</span><span class="p">:</span>
<span class="w">            </span><span class="nt">login</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;USERNAME:</span><span class="err">\</span><span class="s">s*$&quot;</span>
<span class="w">            </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PASSWORD:</span><span class="err">\</span><span class="s">s*$&quot;</span>
</pre></div>
</div>
<p>The login and password patterns are also applicable for login/password prompts displayed during
<code class="xref py py-obj docutils literal notranslate"><span class="pre">reload()</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">switchover()</span></code> services. It is possible to override the login and
password dialogs and other default dialogs in the execute service by specifying the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">service_dialog</span></code> option in the execute statement. See <a class="reference external" href="services/generic_services.html#execute">execute service</a>.</p>
<p>This setting attribute are not applicable for <code class="xref py py-obj docutils literal notranslate"><span class="pre">ise</span></code> plugin.</p>
<p>These settings attributes are supported on below plugins:</p>
<ol class="arabic simple">
<li><p>generic</p></li>
<li><p>iosxr</p></li>
<li><p>junos</p></li>
<li><p>linux</p></li>
<li><p>aireos</p></li>
</ol>
</section>
<section id="learn-device-os">
<h2>Learn Device OS<a class="headerlink" href="#learn-device-os" title="Link to this heading">¶</a></h2>
<p>Unicon generic plugin now can learn the device os/platform and redirect the connection to use corresponding plugins.
This can be done if you pass <code class="xref py py-obj docutils literal notranslate"><span class="pre">learn_os</span></code> argument in <code class="xref py py-obj docutils literal notranslate"><span class="pre">device.connect(learn_os=True)</span></code>.</p>
<p>Example:</p>
<p>In pyATS testbed.yaml file, no <a class="reference external" href="https://docs.python.org/3.6/library/os.html#module-os" title="(in Python v3.6)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">os</span></code></a> is provided:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Router</span><span class="p">:</span>
<span class="w">    </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xe</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco</span>
<span class="w">        </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span>
<span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco</span>
<span class="w">    </span><span class="nt">connections</span><span class="p">:</span>
<span class="w">      </span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">        </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unicon.Unicon</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span>
<span class="w">        </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">telnet</span>
<span class="w">        </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">x.x.x.x</span>
<span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xxxx</span>
</pre></div>
</div>
<p>In pyATS shell:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pyats shell --testbed-file testbed.yaml</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">genie.testbed</span> <span class="kn">import</span> <span class="n">load</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;testbed.yaml&#39;</span><span class="p">)</span>
<span class="o">-------------------------------------------------------------------------------</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;uut&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dev</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">learn_os</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># dev.connect()  &lt;&lt; if learn_os is not provided, then it will use generic plugin</span>


<span class="n">device</span><span class="s1">&#39;s os is not provided, unicon may not use correct plugins</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span><span class="mi">909</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span> <span class="n">logfile</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">Router</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="mi">20200811</span><span class="n">T161737899</span><span class="o">.</span><span class="n">log</span> <span class="o">+++</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span><span class="mi">910</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Unicon</span> <span class="n">plugin</span> <span class="n">generic</span> <span class="o">+++</span>
<span class="n">Trying</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">...</span>


<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span><span class="mi">951</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">spawn</span><span class="p">:</span> <span class="n">telnet</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span> <span class="n">xxxx</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="mi">140643774849992</span> <span class="o">+++</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span><span class="mi">952</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">Router</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span><span class="mi">952</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="n">Learning</span> <span class="n">device</span> <span class="n">Router</span> <span class="n">os</span>
<span class="n">Connected</span> <span class="n">to</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span>
<span class="n">Escape</span> <span class="n">character</span> <span class="ow">is</span> <span class="s1">&#39;^]&#39;</span><span class="o">.</span>

<span class="n">Router</span><span class="c1">#</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">38</span><span class="p">,</span><span class="mi">543</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span><span class="p">:</span> <span class="n">executing</span> <span class="n">command</span> <span class="s1">&#39;show version&#39;</span> <span class="o">+++</span>
<span class="n">show</span> <span class="n">version</span>
<span class="n">Cisco</span> <span class="n">IOS</span> <span class="n">Software</span><span class="p">,</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">Software</span> <span class="p">(</span><span class="n">PPC_LINUX_IOSD</span><span class="o">-</span><span class="n">ADVIPSERVICES</span><span class="o">-</span><span class="n">M</span><span class="p">),</span> <span class="n">Version</span> <span class="mf">15.2</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">S</span><span class="p">,</span> <span class="n">RELEASE</span> <span class="n">SOFTWARE</span> <span class="p">(</span><span class="n">fc4</span><span class="p">)</span>
<span class="n">Technical</span> <span class="n">Support</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">cisco</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">techsupport</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">1986</span><span class="o">-</span><span class="mi">2012</span> <span class="n">by</span> <span class="n">Cisco</span> <span class="n">Systems</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">Compiled</span> <span class="n">Mon</span> <span class="mi">23</span><span class="o">-</span><span class="n">Jul</span><span class="o">-</span><span class="mi">12</span> <span class="mi">19</span><span class="p">:</span><span class="mi">02</span> <span class="n">by</span> <span class="n">mcpre</span>

<span class="n">IOS</span> <span class="n">XE</span> <span class="n">Version</span><span class="p">:</span> <span class="mf">03.07.00</span><span class="o">.</span><span class="n">S</span>

<span class="n">Cisco</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">software</span><span class="p">,</span> <span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2005</span><span class="o">-</span><span class="mi">2012</span> <span class="n">by</span> <span class="n">cisco</span> <span class="n">Systems</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>  <span class="n">Certain</span> <span class="n">components</span> <span class="n">of</span> <span class="n">Cisco</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">software</span> <span class="n">are</span>
<span class="n">licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">GNU</span> <span class="n">General</span> <span class="n">Public</span> <span class="n">License</span> <span class="p">(</span><span class="s2">&quot;GPL&quot;</span><span class="p">)</span> <span class="n">Version</span> <span class="mf">2.0</span><span class="o">.</span>  <span class="n">The</span>
<span class="n">software</span> <span class="n">code</span> <span class="n">licensed</span> <span class="n">under</span> <span class="n">GPL</span> <span class="n">Version</span> <span class="mf">2.0</span> <span class="ow">is</span> <span class="n">free</span> <span class="n">software</span> <span class="n">that</span> <span class="n">comes</span>
<span class="k">with</span> <span class="n">ABSOLUTELY</span> <span class="n">NO</span> <span class="n">WARRANTY</span><span class="o">.</span>  <span class="n">You</span> <span class="n">can</span> <span class="n">redistribute</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">modify</span> <span class="n">such</span>
<span class="n">GPL</span> <span class="n">code</span> <span class="n">under</span> <span class="n">the</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">GPL</span> <span class="n">Version</span> <span class="mf">2.0</span><span class="o">.</span>  <span class="n">For</span> <span class="n">more</span> <span class="n">details</span><span class="p">,</span> <span class="n">see</span> <span class="n">the</span>
<span class="n">documentation</span> <span class="ow">or</span> <span class="s2">&quot;License Notice&quot;</span> <span class="n">file</span> <span class="n">accompanying</span> <span class="n">the</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">software</span><span class="p">,</span>
<span class="ow">or</span> <span class="n">the</span> <span class="n">applicable</span> <span class="n">URL</span> <span class="n">provided</span> <span class="n">on</span> <span class="n">the</span> <span class="n">flyer</span> <span class="n">accompanying</span> <span class="n">the</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span>
<span class="n">software</span><span class="o">.</span>


<span class="n">ROM</span><span class="p">:</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">ROMMON</span>

<span class="n">Router</span> <span class="n">uptime</span> <span class="ow">is</span> <span class="mi">31</span> <span class="n">weeks</span><span class="p">,</span> <span class="mi">2</span> <span class="n">hours</span><span class="p">,</span> <span class="mi">15</span> <span class="n">minutes</span>
<span class="n">Uptime</span> <span class="k">for</span> <span class="n">this</span> <span class="n">control</span> <span class="n">processor</span> <span class="ow">is</span> <span class="mi">31</span> <span class="n">weeks</span><span class="p">,</span> <span class="mi">2</span> <span class="n">hours</span><span class="p">,</span> <span class="mi">18</span> <span class="n">minutes</span>
<span class="n">System</span> <span class="n">returned</span> <span class="n">to</span> <span class="n">ROM</span> <span class="n">by</span> <span class="n">reload</span>
<span class="n">System</span> <span class="n">image</span> <span class="n">file</span> <span class="ow">is</span> <span class="s2">&quot;bootflash:asr1000rp1-advipservices.03.07.00.S.152-4.S.bin&quot;</span>
<span class="n">Last</span> <span class="n">reload</span> <span class="n">reason</span><span class="p">:</span> <span class="n">PowerOn</span>


<span class="n">cisco</span> <span class="n">Router</span><span class="o">-</span><span class="n">F</span> <span class="p">(</span><span class="mi">2</span><span class="n">RU</span><span class="p">)</span> <span class="n">processor</span> <span class="k">with</span> <span class="mi">1698793</span><span class="n">K</span><span class="o">/</span><span class="mi">6147</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">memory</span><span class="o">.</span>
<span class="n">Processor</span> <span class="n">board</span> <span class="n">ID</span> <span class="n">FOX1405GDVK</span>
<span class="mi">12</span> <span class="n">Gigabit</span> <span class="n">Ethernet</span> <span class="n">interfaces</span>
<span class="mi">32768</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">non</span><span class="o">-</span><span class="n">volatile</span> <span class="n">configuration</span> <span class="n">memory</span><span class="o">.</span>
<span class="mi">4194304</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">physical</span> <span class="n">memory</span><span class="o">.</span>
<span class="mi">7798783</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">eUSB</span> <span class="n">flash</span> <span class="n">at</span> <span class="n">bootflash</span><span class="p">:</span><span class="o">.</span>

<span class="n">Configuration</span> <span class="n">register</span> <span class="ow">is</span> <span class="mh">0x2102</span>

<span class="n">Router</span><span class="c1">#</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="mi">221</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="n">Learned</span> <span class="n">device</span> <span class="n">os</span><span class="p">:</span> <span class="n">iosxe</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span><span class="mi">222</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span>
<span class="n">Learned</span> <span class="n">device</span> <span class="n">os</span><span class="p">:</span> <span class="n">iosxe</span>
<span class="n">Redirect</span> <span class="n">to</span> <span class="n">corresponding</span> <span class="n">plugins</span><span class="o">.</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span><span class="mi">263</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span> <span class="n">logfile</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">Router</span><span class="o">-</span><span class="n">cli</span><span class="o">-</span><span class="mi">20200811</span><span class="n">T161752253</span><span class="o">.</span><span class="n">log</span> <span class="o">+++</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span><span class="mi">263</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Unicon</span> <span class="n">plugin</span> <span class="n">iosxe</span> <span class="o">+++</span>
<span class="n">Trying</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">...</span>


<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span><span class="mi">288</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">spawn</span><span class="p">:</span> <span class="n">telnet</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span> <span class="n">xxxx</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="mi">140643774387984</span> <span class="o">+++</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span><span class="mi">288</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">Router</span>
<span class="n">Connected</span> <span class="n">to</span> <span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">x</span><span class="o">.</span>
<span class="n">Escape</span> <span class="n">character</span> <span class="ow">is</span> <span class="s1">&#39;^]&#39;</span><span class="o">.</span>

<span class="n">Router</span><span class="c1">#</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span><span class="mi">896</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">initializing</span> <span class="n">handle</span> <span class="o">+++</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span><span class="mi">897</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span><span class="p">:</span> <span class="n">executing</span> <span class="n">command</span> <span class="s1">&#39;term length 0&#39;</span> <span class="o">+++</span>
<span class="n">term</span> <span class="n">length</span> <span class="mi">0</span>
<span class="n">Router</span><span class="c1">#</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span><span class="mi">113</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span><span class="p">:</span> <span class="n">executing</span> <span class="n">command</span> <span class="s1">&#39;term width 0&#39;</span> <span class="o">+++</span>
<span class="n">term</span> <span class="n">width</span> <span class="mi">0</span>
<span class="n">Router</span><span class="c1">#</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span><span class="mi">310</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span><span class="p">:</span> <span class="n">executing</span> <span class="n">command</span> <span class="s1">&#39;show version&#39;</span> <span class="o">+++</span>
<span class="n">show</span> <span class="n">version</span>
<span class="n">Cisco</span> <span class="n">IOS</span> <span class="n">Software</span><span class="p">,</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">Software</span> <span class="p">(</span><span class="n">PPC_LINUX_IOSD</span><span class="o">-</span><span class="n">ADVIPSERVICES</span><span class="o">-</span><span class="n">M</span><span class="p">),</span> <span class="n">Version</span> <span class="mf">15.2</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">S</span><span class="p">,</span> <span class="n">RELEASE</span> <span class="n">SOFTWARE</span> <span class="p">(</span><span class="n">fc4</span><span class="p">)</span>
<span class="n">Technical</span> <span class="n">Support</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">cisco</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">techsupport</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">1986</span><span class="o">-</span><span class="mi">2012</span> <span class="n">by</span> <span class="n">Cisco</span> <span class="n">Systems</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">Compiled</span> <span class="n">Mon</span> <span class="mi">23</span><span class="o">-</span><span class="n">Jul</span><span class="o">-</span><span class="mi">12</span> <span class="mi">19</span><span class="p">:</span><span class="mi">02</span> <span class="n">by</span> <span class="n">mcpre</span>

<span class="n">IOS</span> <span class="n">XE</span> <span class="n">Version</span><span class="p">:</span> <span class="mf">03.07.00</span><span class="o">.</span><span class="n">S</span>

<span class="n">Cisco</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">software</span><span class="p">,</span> <span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2005</span><span class="o">-</span><span class="mi">2012</span> <span class="n">by</span> <span class="n">cisco</span> <span class="n">Systems</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">All</span> <span class="n">rights</span> <span class="n">reserved</span><span class="o">.</span>  <span class="n">Certain</span> <span class="n">components</span> <span class="n">of</span> <span class="n">Cisco</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">software</span> <span class="n">are</span>
<span class="n">licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">GNU</span> <span class="n">General</span> <span class="n">Public</span> <span class="n">License</span> <span class="p">(</span><span class="s2">&quot;GPL&quot;</span><span class="p">)</span> <span class="n">Version</span> <span class="mf">2.0</span><span class="o">.</span>  <span class="n">The</span>
<span class="n">software</span> <span class="n">code</span> <span class="n">licensed</span> <span class="n">under</span> <span class="n">GPL</span> <span class="n">Version</span> <span class="mf">2.0</span> <span class="ow">is</span> <span class="n">free</span> <span class="n">software</span> <span class="n">that</span> <span class="n">comes</span>
<span class="k">with</span> <span class="n">ABSOLUTELY</span> <span class="n">NO</span> <span class="n">WARRANTY</span><span class="o">.</span>  <span class="n">You</span> <span class="n">can</span> <span class="n">redistribute</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">modify</span> <span class="n">such</span>
<span class="n">GPL</span> <span class="n">code</span> <span class="n">under</span> <span class="n">the</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">GPL</span> <span class="n">Version</span> <span class="mf">2.0</span><span class="o">.</span>  <span class="n">For</span> <span class="n">more</span> <span class="n">details</span><span class="p">,</span> <span class="n">see</span> <span class="n">the</span>
<span class="n">documentation</span> <span class="ow">or</span> <span class="s2">&quot;License Notice&quot;</span> <span class="n">file</span> <span class="n">accompanying</span> <span class="n">the</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">software</span><span class="p">,</span>
<span class="ow">or</span> <span class="n">the</span> <span class="n">applicable</span> <span class="n">URL</span> <span class="n">provided</span> <span class="n">on</span> <span class="n">the</span> <span class="n">flyer</span> <span class="n">accompanying</span> <span class="n">the</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span>
<span class="n">software</span><span class="o">.</span>


<span class="n">ROM</span><span class="p">:</span> <span class="n">IOS</span><span class="o">-</span><span class="n">XE</span> <span class="n">ROMMON</span>

<span class="n">Router</span> <span class="n">uptime</span> <span class="ow">is</span> <span class="mi">31</span> <span class="n">weeks</span><span class="p">,</span> <span class="mi">2</span> <span class="n">hours</span><span class="p">,</span> <span class="mi">15</span> <span class="n">minutes</span>
<span class="n">Uptime</span> <span class="k">for</span> <span class="n">this</span> <span class="n">control</span> <span class="n">processor</span> <span class="ow">is</span> <span class="mi">31</span> <span class="n">weeks</span><span class="p">,</span> <span class="mi">2</span> <span class="n">hours</span><span class="p">,</span> <span class="mi">18</span> <span class="n">minutes</span>
<span class="n">System</span> <span class="n">returned</span> <span class="n">to</span> <span class="n">ROM</span> <span class="n">by</span> <span class="n">reload</span>
<span class="n">System</span> <span class="n">image</span> <span class="n">file</span> <span class="ow">is</span> <span class="s2">&quot;bootflash:asr1000rp1-advipservices.03.07.00.S.152-4.S.bin&quot;</span>
<span class="n">Last</span> <span class="n">reload</span> <span class="n">reason</span><span class="p">:</span> <span class="n">PowerOn</span>


<span class="n">cisco</span> <span class="n">Router</span><span class="o">-</span><span class="n">F</span> <span class="p">(</span><span class="mi">2</span><span class="n">RU</span><span class="p">)</span> <span class="n">processor</span> <span class="k">with</span> <span class="mi">1698793</span><span class="n">K</span><span class="o">/</span><span class="mi">6147</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">memory</span><span class="o">.</span>
<span class="n">Processor</span> <span class="n">board</span> <span class="n">ID</span> <span class="n">FOX1405GDVK</span>
<span class="mi">12</span> <span class="n">Gigabit</span> <span class="n">Ethernet</span> <span class="n">interfaces</span>
<span class="mi">32768</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">non</span><span class="o">-</span><span class="n">volatile</span> <span class="n">configuration</span> <span class="n">memory</span><span class="o">.</span>
<span class="mi">4194304</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">physical</span> <span class="n">memory</span><span class="o">.</span>
<span class="mi">7798783</span><span class="n">K</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">eUSB</span> <span class="n">flash</span> <span class="n">at</span> <span class="n">bootflash</span><span class="p">:</span><span class="o">.</span>

<span class="n">Configuration</span> <span class="n">register</span> <span class="ow">is</span> <span class="mh">0x2102</span>

<span class="n">Router</span><span class="c1">#</span>

<span class="mi">2020</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">11</span> <span class="mi">16</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span><span class="mi">027</span><span class="p">:</span> <span class="o">%</span><span class="n">UNICON</span><span class="o">-</span><span class="n">INFO</span><span class="p">:</span> <span class="o">+++</span> <span class="n">Router</span><span class="p">:</span> <span class="n">config</span> <span class="o">+++</span>
<span class="n">config</span> <span class="n">term</span>
<span class="n">Enter</span> <span class="n">configuration</span> <span class="n">commands</span><span class="p">,</span> <span class="n">one</span> <span class="n">per</span> <span class="n">line</span><span class="o">.</span>  <span class="n">End</span> <span class="k">with</span> <span class="n">CNTL</span><span class="o">/</span><span class="n">Z</span><span class="o">.</span>
<span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#no logging console</span>
<span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#line console 0</span>
<span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1">#exec-timeout 0</span>
<span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1">#end</span>
<span class="n">Router</span><span class="c1">#</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="supported_platforms.html" class="btn btn-neutral float-left" title="Supported Platforms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="passwords.html" class="btn btn-neutral float-right" title="Password Handling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2020, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>