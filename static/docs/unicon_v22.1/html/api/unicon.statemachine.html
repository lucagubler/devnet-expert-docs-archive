

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>unicon.statemachine package &mdash; Unicon Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=82a976d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=1045b1b5" />

  
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="../changelog/index.html" />
    <link rel="prev" title="unicon.eal.backend package" href="unicon.eal.backend.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Unicon Plugins
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/supported_platforms.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/connection.html">Connection Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/passwords.html">Password Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/proxy.html">Connection Through Proxies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/services/index.html">API/Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/services/service_dialogs.html">Dialog Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../playback/index.html">Playback</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/plugins.html">Plugin Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/service_framework.html">How to write  a new Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/eal.html">Expect Abstraction Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/statemachine.html">State Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/unittests.html">Develop &amp; Run Unittests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Unicon API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="unicon.html">unicon package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="unicon.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="unicon.bases.html">unicon.bases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="unicon.core.html">unicon.core package</a></li>
<li class="toctree-l4"><a class="reference internal" href="unicon.database.html">unicon.database package</a></li>
<li class="toctree-l4"><a class="reference internal" href="unicon.eal.html">unicon.eal package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">unicon.statemachine package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon.logs">unicon.logs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon.patterns">unicon.patterns module</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon.settings">unicon.settings module</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon.type_checkers">unicon.type_checkers module</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon.utils">unicon.utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon.sshutils">unicon.sshutils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicon.html#module-unicon">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog_plugins/index.html">Plugins Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Unicon Plugins</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">Unicon API Reference</a></li>
          <li class="breadcrumb-item"><a href="unicon.html">unicon package</a></li>
      <li class="breadcrumb-item active">unicon.statemachine package</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="unicon-statemachine-package">
<h1>unicon.statemachine package<a class="headerlink" href="#unicon-statemachine-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-unicon.statemachine.statemachine">
<span id="unicon-statemachine-statemachine-module"></span><h2>unicon.statemachine.statemachine module<a class="headerlink" href="#module-unicon.statemachine.statemachine" title="Link to this heading">¶</a></h2>
<dl>
<dt>Module:</dt><dd><p>unicon.statemachine.statemachine</p>
</dd>
<dt>Authors:</dt><dd><p>Vivek Jha (vivejha), CSG STEP - India
Mohamed Nowfal(mohamoha), CSG STEP - India</p>
</dd>
<dt>Description:</dt><dd><p>This module defines State, Path and StateMachine classes.</p>
<p>Each device state shall be defined using the ‘State’ class
and link between two device state shall be defined using Path</p>
<p>State Machines consumes both State and Path instances, and provides
API’s for computing the path between two state and als
performing state change on the device</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.Path">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unicon.statemachine.statemachine.</span></span><span class="sig-name descname"><span class="pre">Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.Path" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This class defines a path between two device states</p>
<p>For changing a device state to any state, this path
has to be defined</p>
<dl class="simple">
<dt>Path takes the following inputs</dt><dd><ol class="arabic simple">
<li><p>From state (starting state of the path)</p></li>
<li><p>TO state (destination state of this path)</p></li>
<li><p>Command Which takes the device to the destination state</p></li>
<li><dl class="simple">
<dt>Dialog instance ( List of patterns/prompts which will</dt><dd><p>be encountered during this path)</p>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">path1</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">from_state</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span>
             <span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;config&#39;</span><span class="p">,</span>
             <span class="n">command</span><span class="o">=</span><span class="s1">&#39;config terminal&#39;</span>
             <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">path1</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">from_state</span><span class="o">=</span><span class="s1">&#39;disable&#39;</span><span class="p">,</span>
             <span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span>
             <span class="n">command</span><span class="o">=</span><span class="s1">&#39;en&#39;</span>
             <span class="n">dialog</span><span class="o">=</span><span class="n">Dialog</span><span class="p">([</span><span class="sa">r</span><span class="s1">&#39;password:&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">send_password</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]))</span>
</pre></div>
</div>
<p>Initializes path attributes and also validates them</p>
<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.Path.validate_update">
<span class="sig-name descname"><span class="pre">validate_update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.Path.validate_update" title="Link to this definition">¶</a></dt>
<dd><p>Validates the path attributes</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unicon.statemachine.statemachine.</span></span><span class="sig-name descname"><span class="pre">State</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.State" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Defines a device state</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">enable_state</span> <span class="o">=</span>  <span class="n">State</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;^.*Router|%N#&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Initializes the state</p>
<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State.add_state_pattern">
<span class="sig-name descname"><span class="pre">add_state_pattern</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.State.add_state_pattern" title="Link to this definition">¶</a></dt>
<dd><p>Appends state patterns to the existing list</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">state</span><span class="o">.</span><span class="n">add_state_pattern</span><span class="p">(</span><span class="s1">&#39;.*new pattern&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State.pattern">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pattern</span></span><a class="headerlink" href="#unicon.statemachine.statemachine.State.pattern" title="Link to this definition">¶</a></dt>
<dd><p>Return State pattern</p>
<p>Joins all the patterns for this state and returns, after doing
appropriate hostname substitution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State.restore_state_pattern">
<span class="sig-name descname"><span class="pre">restore_state_pattern</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.State.restore_state_pattern" title="Link to this definition">¶</a></dt>
<dd><p>Restore state pattern back to default one.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">state</span><span class="o">.</span><span class="n">restore_state_pattern</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State.substitute_hostname">
<span class="sig-name descname"><span class="pre">substitute_hostname</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.State.substitute_hostname" title="Link to this definition">¶</a></dt>
<dd><p>Perform hostname substitution in state patterns</p>
<p>Replaces all %N with the hostname, if hostname is provided</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State.substitute_learn_hostname">
<span class="sig-name descname"><span class="pre">substitute_learn_hostname</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.State.substitute_learn_hostname" title="Link to this definition">¶</a></dt>
<dd><p>Prepare pattern for hostname learning.
Substitute successive occurances of HOSTNAME_SUBST_PAT with
named sub-matches hostname0, hostname1, …
These sub-matches are processed in connection._get_learned_hostname.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.State.validate">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.State.validate" title="Link to this definition">¶</a></dt>
<dd><p>Validate the state parameters</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unicon.statemachine.statemachine.</span></span><span class="sig-name descname"><span class="pre">StateMachine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learn_hostname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>StateMachine for connection</p>
<p>StateMachine class has the detail of all supported
device state for any particular platform and
the connection between each of this state,
and also provide mechanism to change the device
state</p>
<p>This class performs the following</p>
<ol class="arabic simple">
<li><p>Collects and Validates supported device state</p></li>
<li><p>Collects path between any two defined state</p></li>
<li><p>Computes the transition path from one state
to any end state</p></li>
<li><p>Keeps in track of the current device state</p></li>
<li><p>constructs the Dialog for changing device state on
runtime</p></li>
<li><p>Enables hostname substitution</p></li>
<li><p>Provides methods to change a device state</p></li>
</ol>
<p>Each state created outside statemachine has to be
add to it</p>
<p>Initializes the state machine</p>
<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.add_default_statements">
<span class="sig-name descname"><span class="pre">add_default_statements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">statements</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.add_default_statements" title="Link to this definition">¶</a></dt>
<dd><p>Adds default Statements</p>
<p>This statement will be appended to all
state transitions</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stmt1</span> <span class="o">=</span>  <span class="n">Statement</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;.*[confirm]&#39;</span><span class="p">,</span>
                   <span class="n">action</span><span class="o">=</span><span class="k">lambda</span> <span class="n">spawn</span><span class="p">:</span><span class="n">spawn</span><span class="o">.</span><span class="n">sendline</span><span class="p">()</span>
                   <span class="n">loop_continue</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">stmt2</span> <span class="o">=</span>  <span class="n">Statement</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;.*[yes/no]&#39;</span><span class="p">,</span>
                   <span class="n">action</span><span class="o">=</span><span class="k">lambda</span> <span class="n">spawn</span><span class="p">:</span><span class="n">spawn</span><span class="o">.</span><span class="n">sendline</span><span class="p">(</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
                   <span class="n">loop_continue</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Adding default statements</span>
<span class="n">sm</span><span class="o">.</span><span class="n">add_default_statements</span><span class="p">(</span><span class="n">stm1</span><span class="p">)</span>
<span class="n">sm</span><span class="o">.</span><span class="n">add_default_statements</span><span class="p">(</span><span class="n">stm2</span><span class="p">)</span>

<span class="c1"># Adding a list of statements</span>
<span class="n">sm</span><span class="o">.</span><span class="n">add_default_statements</span><span class="p">([</span><span class="n">stm1</span><span class="p">,</span> <span class="n">stmt2</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.add_path">
<span class="sig-name descname"><span class="pre">add_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.add_path" title="Link to this definition">¶</a></dt>
<dd><p>Add path to the list of available paths</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a path instance first</span>
<span class="n">path1</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">,</span>
             <span class="n">command</span><span class="o">=</span><span class="s1">&#39;config terminal&#39;</span><span class="p">,</span>
             <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># Now add it to SM</span>
<span class="n">sm</span><span class="o">.</span><span class="n">add_path</span><span class="p">(</span><span class="n">path1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.add_state">
<span class="sig-name descname"><span class="pre">add_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.add_state" title="Link to this definition">¶</a></dt>
<dd><p>Appends a given state to the state machine</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">state</span> <span class="o">=</span> <span class="n">State</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="kc">None</span><span class="s1">&#39;)</span>
<span class="n">sm</span><span class="o">.</span><span class="n">add_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.create">
<span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.create" title="Link to this definition">¶</a></dt>
<dd><p>Create the statemachine</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.create_graph">
<span class="sig-name descname"><span class="pre">create_graph</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.create_graph" title="Link to this definition">¶</a></dt>
<dd><p>Creates a graph out of the all states available in SM</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.create_path">
<span class="sig-name descname"><span class="pre">create_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.create_path" title="Link to this definition">¶</a></dt>
<dd><p>Creates a Path and add it to the state machine</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">create_path</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;config&#39;</span><span class="p">,</span>
             <span class="n">command</span><span class="o">=</span><span class="s1">&#39;config terminal&#39;</span><span class="p">,</span>
             <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.create_state">
<span class="sig-name descname"><span class="pre">create_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.create_state" title="Link to this definition">¶</a></dt>
<dd><p>Creates a state and add it to State Machines</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">create_state</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="kc">None</span><span class="s1">&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.current_state">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">current_state</span></span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.current_state" title="Link to this definition">¶</a></dt>
<dd><p>Current device state property getter</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.detect_state">
<span class="sig-name descname"><span class="pre">detect_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spawn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.detect_state" title="Link to this definition">¶</a></dt>
<dd><p>Detect the device state by matching the prompt patterns from the device states
to the last matched pattern. If a prompt could not be matched, will use
sendline() to try and get the prompt and detect the new state. This will
detect the ‘last known’ state or try to detect the current state.</p>
<p>The detection on last match depends on the service implementation matching to known
prompts. If the service did not match to a known prompt before using detect_state,
a sendline() will be executed to detect the prompt.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.dotgraph">
<span class="sig-name descname"><span class="pre">dotgraph</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.dotgraph" title="Link to this definition">¶</a></dt>
<dd><p>Creates a graphviz/dot graph out of the all states available in SM.
You can use graphviz/dot to create a PNG statemachine image using “dot -T png -o sm.png sm.dot”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.find_all_paths">
<span class="sig-name descname"><span class="pre">find_all_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.find_all_paths" title="Link to this definition">¶</a></dt>
<dd><p>Return all possible paths from any given state to any state</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">find_all_paths</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;disable&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.get_path">
<span class="sig-name descname"><span class="pre">get_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.get_path" title="Link to this definition">¶</a></dt>
<dd><p>Get the path object for the given from and to state</p>
<p>This API is used for getting paths between directly linked
states</p>
<dl>
<dt>Usage:</dt><dd><p>sm.get_path(&lt;from_state&gt;, &lt;to_state&gt;)</p>
</dd>
<dt>Example::</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;disable&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.get_shortest_path">
<span class="sig-name descname"><span class="pre">get_shortest_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.get_shortest_path" title="Link to this definition">¶</a></dt>
<dd><p>Finds the shortest path from the list of possible paths</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">get_shortest_path</span><span class="p">(</span><span class="s1">&#39;rommon&#39;</span><span class="p">,</span> <span class="s1">&#39;enable&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.get_state">
<span class="sig-name descname"><span class="pre">get_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.get_state" title="Link to this definition">¶</a></dt>
<dd><p>Returns the state object for the given the name</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="s1">&#39;config&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.go_to">
<span class="sig-name descname"><span class="pre">go_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spawn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hop_wise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_recovery</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.go_to" title="Link to this definition">¶</a></dt>
<dd><p>Performs device state change</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>to_state</strong> – Destination state, or a list of state or a keyword ‘any’</p></li>
<li><p><strong>spawn</strong> – Device handle where the state change has to be performed</p></li>
<li><p><strong>dialog</strong> – Additional dialogs which has to be appended to the SM path</p></li>
<li><p><strong>prompt_recovery</strong> – Enable/Disable prompt_recovery feature</p></li>
<li><p><strong>timeout</strong> – timeout for this goto operation</p></li>
<li><p><strong>hop_wise</strong> – If enabled each path is processed separately
Default: False</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Changing to a particular state from the current state</span>
<span class="c1"># Here sm is the state machine instance</span>
<span class="n">sm</span><span class="o">.</span><span class="n">go_to</span><span class="p">(</span><span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span>
        <span class="n">spawn</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># Changing state to anyone state from the given list of states</span>
<span class="n">sm</span><span class="o">.</span><span class="n">go_to</span><span class="p">(</span><span class="n">to_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;disable&#39;</span><span class="p">],</span>
        <span class="n">spawn</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># Bring device to &#39;any&#39; valid available state in state machine</span>
<span class="c1"># ( Usually used for reading the device state)</span>

<span class="n">sm</span><span class="o">.</span><span class="n">go_to</span><span class="p">(</span><span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">,</span>
        <span class="n">spawn</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span>
        <span class="n">context</span><span class="o">=</span><span class="n">dev</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.hostname">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hostname</span></span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.hostname" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.learn_hostname">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">learn_hostname</span></span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.learn_hostname" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.learn_pattern">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">learn_pattern</span></span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.learn_pattern" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.remove_path">
<span class="sig-name descname"><span class="pre">remove_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.remove_path" title="Link to this definition">¶</a></dt>
<dd><p>Removes a particular path from SM</p>
<dl class="simple">
<dt>Usage:</dt><dd><p>sm.remove_path(&lt;from_state&gt;, &lt;to_state&gt;)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">remove_path</span><span class="p">(</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;disable&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.remove_state">
<span class="sig-name descname"><span class="pre">remove_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.remove_state" title="Link to this definition">¶</a></dt>
<dd><p>Removes a state from SM, given the string name</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sm</span><span class="o">.</span><span class="n">remove_state</span><span class="p">(</span><span class="s1">&#39;disable&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statemachine.StateMachine.update_cur_state">
<span class="sig-name descname"><span class="pre">update_cur_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statemachine.StateMachine.update_cur_state" title="Link to this definition">¶</a></dt>
<dd><p>Updates the current device state</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-unicon.statemachine.statetransition">
<span id="unicon-statemachine-statetransition-module"></span><h2>unicon.statemachine.statetransition module<a class="headerlink" href="#module-unicon.statemachine.statetransition" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt>Module:</dt><dd><p>unicon.statemachine.statetransition</p>
</dd>
<dt>Authors:</dt><dd><p>ATS TEAM( <a class="reference external" href="mailto:ats-dev&#37;&#52;&#48;cisco&#46;com">ats-dev<span>&#64;</span>cisco<span>&#46;</span>com</a>, CSG STEP - India)</p>
</dd>
<dt>Description:</dt><dd><p>This module defines State Transition classes
This define three types of state transitions</p>
</dd>
<dt>StateTransition:</dt><dd><p>Creates a single large dialog after
computing the path for all the hops involved in the
state change, which will be consumed by dialog processor</p>
</dd>
<dt>HopWiseStateTransition:</dt><dd><p>Creates separate dialog for each Hop involved
in the state change, which will be iterated
over to reach the destination</p>
</dd>
<dt>AnyStateTransition:</dt><dd><p>This takes a list of destination states or ‘any’ as input
Returns if any of the destination is reached, if ‘any’
is the input then takes the device to any of state machine
supported state</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.AnyStateTransition">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unicon.statemachine.statetransition.</span></span><span class="sig-name descname"><span class="pre">AnyStateTransition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spawn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_recovery</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.AnyStateTransition" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#unicon.statemachine.statetransition.StateTransition" title="unicon.statemachine.statetransition.StateTransition"><code class="xref py py-class docutils literal notranslate"><span class="pre">StateTransition</span></code></a></p>
<p>State transition for <code class="docutils literal notranslate"><span class="pre">any</span></code> state</p>
<p>Creates a transition object with all the expected state
input provided or all the states supported by SM</p>
<p>It takes a list of state as input, in this case
it tries brings the device to any of this state</p>
<p>Also it supports a special key ‘any’, in this case
it will try to bring the device to any of the
available state in state machine</p>
<dl>
<dt>Example1:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a transition object</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">AnyStateTransition</span><span class="p">(</span><span class="n">state_machine</span><span class="o">=</span><span class="n">sm</span><span class="p">,</span>
                     <span class="n">to_state</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span> <span class="s1">&#39;disable&#39;</span><span class="p">],</span>
                     <span class="n">spawn</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span>
                     <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">context</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># Perform the state change</span>
<span class="n">st</span><span class="o">.</span><span class="n">do_transition</span><span class="p">()</span>
</pre></div>
</div>
</dd>
<dt>Example1:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a transition object,</span>
<span class="c1"># This usually used to identify the device state</span>
<span class="c1"># mostly usefull in case of intial connection and reload</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">AnyStateTransition</span><span class="p">(</span><span class="n">state_machine</span><span class="o">=</span><span class="n">sm</span><span class="p">,</span>
                     <span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">,</span>
                     <span class="n">spawn</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span>
                     <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">context</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># Perform the state change</span>
<span class="n">st</span><span class="o">.</span><span class="n">do_transition</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
<p>Initialize</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state_machine</strong> – State Machine of the device</p></li>
<li><p><strong>to_state</strong> – Expected end state</p></li>
<li><p><strong>spawn</strong> – Device handle</p></li>
<li><p><strong>dialog</strong> – Additional Dialogs for this transition</p></li>
<li><p><strong>context</strong> – Device context</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.AnyStateTransition.create_statement_for_intermediate_state">
<span class="sig-name descname"><span class="pre">create_statement_for_intermediate_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.AnyStateTransition.create_statement_for_intermediate_state" title="Link to this definition">¶</a></dt>
<dd><p>Creates a Statement for intermediate State</p>
<p>with action as goto next state and loop continue
enabled</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.AnyStateTransition.create_transition_dialogs">
<span class="sig-name descname"><span class="pre">create_transition_dialogs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.AnyStateTransition.create_transition_dialogs" title="Link to this definition">¶</a></dt>
<dd><p>Creates a single large Dialog
with the list of transition path provided
Also adds the state pattern as a statement to
the dialog</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.AnyStateTransition.do_transitions">
<span class="sig-name descname"><span class="pre">do_transitions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.AnyStateTransition.do_transitions" title="Link to this definition">¶</a></dt>
<dd><p>Performs the state transition</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.HopWiseStateTransition">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unicon.statemachine.statetransition.</span></span><span class="sig-name descname"><span class="pre">HopWiseStateTransition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spawn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_recovery</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.HopWiseStateTransition" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#unicon.statemachine.statetransition.StateTransition" title="unicon.statemachine.statetransition.StateTransition"><code class="xref py py-class docutils literal notranslate"><span class="pre">StateTransition</span></code></a></p>
<p>Create state transition</p>
<p>Creates a transition object based on the
current state of device and the ‘to_state’
and also performs the state change</p>
<p>It creates a list, with the detail of the command
and dialog required for this transition,
the whole transition may involve multiple intermediate
state, each intermediate state transition is processed
with separate Dialog</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a transition object</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">HopWiseStateTransition</span><span class="p">(</span><span class="n">state_machine</span><span class="o">=</span><span class="n">sm</span><span class="p">,</span>
                            <span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span>
                            <span class="n">spawn</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">spawn</span><span class="p">,</span>
                            <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">context</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
<span class="c1"># Perform the state change</span>
<span class="n">st</span><span class="o">.</span><span class="n">do_transition</span><span class="p">()</span>
</pre></div>
</div>
<p>Initialize</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state_machine</strong> – State Machine of the device</p></li>
<li><p><strong>to_state</strong> – Expected end state</p></li>
<li><p><strong>spawn</strong> – Device handle</p></li>
<li><p><strong>dialog</strong> – Additional Dialogs for this transition</p></li>
<li><p><strong>context</strong> – Device context</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.HopWiseStateTransition.create_transition_dialogs">
<span class="sig-name descname"><span class="pre">create_transition_dialogs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.HopWiseStateTransition.create_transition_dialogs" title="Link to this definition">¶</a></dt>
<dd><p>Create dialog</p>
<p>Creates a individual Dialog for each path
Add add a statement with the states pattern
as the exit point</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">unicon.statemachine.statetransition.</span></span><span class="sig-name descname"><span class="pre">StateTransition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_machine</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spawn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_recovery</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>State transition class</p>
<p>Creates a transition object based on the
current state of device and the ‘to_state’
and also performs the state change</p>
<p>This class identifies the commands to perform the state
change and also the dialog required, it creates
a single large Dialog for whole the transition, which may
involve multiple intermediate state change transition
on the way to the destination state</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates a transition object</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">StateTransition</span><span class="p">(</span><span class="n">state_machine</span><span class="o">=</span><span class="n">sm</span><span class="p">,</span>
                     <span class="n">to_state</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span><span class="p">,</span>
                     <span class="n">spawn</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">spawn</span>
                     <span class="n">dialog</span><span class="o">=</span><span class="kc">None</span>
                     <span class="n">context</span><span class="o">=</span><span class="n">dev_handle</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>

<span class="c1"># Perform the state change</span>
<span class="n">st</span><span class="o">.</span><span class="n">do_transition</span><span class="p">()</span>
</pre></div>
</div>
<p>Initialize</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state_machine</strong> – State Machine of the device</p></li>
<li><p><strong>to_state</strong> – Expected end state</p></li>
<li><p><strong>spawn</strong> – Device handle</p></li>
<li><p><strong>dialog</strong> – Additional Dialogs for this transition</p></li>
<li><p><strong>prompt_recovery</strong> – Enable/Disable prompt recovery feature</p></li>
<li><p><strong>timeout</strong> – Overall timeout for this transition</p></li>
<li><p><strong>context</strong> – Device context</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.create_statement_for_expected_state">
<span class="sig-name descname"><span class="pre">create_statement_for_expected_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.create_statement_for_expected_state" title="Link to this definition">¶</a></dt>
<dd><p>Create a statement for end state</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.create_statement_for_intermediate_state">
<span class="sig-name descname"><span class="pre">create_statement_for_intermediate_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.create_statement_for_intermediate_state" title="Link to this definition">¶</a></dt>
<dd><p>Creates a Statement for intermediate State</p>
<p>with action as goto next state and loop continue
enabled</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.create_statement_for_state_pattern">
<span class="sig-name descname"><span class="pre">create_statement_for_state_pattern</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.create_statement_for_state_pattern" title="Link to this definition">¶</a></dt>
<dd><p>Create a statement from path.to_state.pattern</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.create_transition_dialogs">
<span class="sig-name descname"><span class="pre">create_transition_dialogs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.create_transition_dialogs" title="Link to this definition">¶</a></dt>
<dd><p>Creates a single large Dialog</p>
<p>With list of transition path provided creates a dialog
Also add statement for the expected states to the dialog</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.do_transitions">
<span class="sig-name descname"><span class="pre">do_transitions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.do_transitions" title="Link to this definition">¶</a></dt>
<dd><p>Perform the state transition</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.goto_next_state">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">goto_next_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spawn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.goto_next_state" title="Link to this definition">¶</a></dt>
<dd><p>Execute command to take to next state</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="unicon.statemachine.statetransition.StateTransition.update_cur_state">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">update_cur_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transition</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#unicon.statemachine.statetransition.StateTransition.update_cur_state" title="Link to this definition">¶</a></dt>
<dd><p>Updates the current state</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-unicon.statemachine">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-unicon.statemachine" title="Link to this heading">¶</a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="unicon.eal.backend.html" class="btn btn-neutral float-left" title="unicon.eal.backend package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../changelog/index.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2020, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>