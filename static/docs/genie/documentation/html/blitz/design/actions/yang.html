<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>yang &mdash; Genie Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/asciinema-player.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/genie_ico.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/asciinema-player.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Save action outputs" href="../save/index.html" />
    <link rel="prev" title="execute" href="actions_list.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            pyATS Library: Genie
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cookbooks/index.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../userguide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../clean/index.html">pyATS Clean</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">pyATS Blitz</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Design</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="actions.html">List of blitz actions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="actions_list.html">execute</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#configure">configure</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#configure-dual">configure_dual</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#parse">parse</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#api">api</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#tgn">tgn</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#rest">rest</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#sleep">sleep</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#learn">learn</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#print">print</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#bash-console">bash_console</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#configure-replace">configure_replace</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#save-config-snapshot">save_config_snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#restore-config-snapshot">restore_config_snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#yang-snapshot">yang_snapshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#yang-snapshot-restore">yang_snapshot_restore</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#run-genie-sdk">run_genie_sdk</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#diff">diff</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#compare">compare</a></li>
<li class="toctree-l4"><a class="reference internal" href="actions_list.html#dialog">dialog</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">yang</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../save/index.html">Save action outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../save/index.html#re-use-variables">Re-use variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../save/index.html#save-variables-in-testscript-level">Save variables in testscript level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../save/index.html#save-action-outputs-to-files">Save action outputs to files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../save/index.html#save-action-outputs-as-dictionary">Save action outputs as dictionary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../verification/index.html">Verifying actions output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced_actions/index.html">Advanced Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../customization/index.html">Customizing Blitz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../negative.html">Negative testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../terminate.html">Script termination on failure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reply.html">Replying to the prompt dialogue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../result_status.html">Changing the result status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../timeout.html">Trigger timeout/interval ratio adjustments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../steps.html">Customizing steps log messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tips.html">Useful tips and tricks in Blitz</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../usage/usage.html">Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../health/index.html">pyATS Health Check</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli/index.html">Genie Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../solutions/index.html">Genie Solutions</a></li>
<li class="toctree-l1"><a class="reference external" href="https://wiki.cisco.com/pages/viewpage.action?pageId=831194226">Internal Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/apis">Available APIs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/clean">Available Clean Stages</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/models">Available Models (Conf/Ops)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/parsers">Available Parsers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/triggers">Available Triggers</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pubhub.devnetcloud.com/media/genie-feature-browser/docs/#/verifications">Available Verifications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../abstract/index.html">Library Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../metaparser/index.html">Metaparsers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../parsergen/index.html">CLI Auto-Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../predcore/index.html">Predicates</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../roadmap/index.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog/index.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">pyATS Library: Genie</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">pyATS Blitz</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Design</a></li>
          <li class="breadcrumb-item"><a href="actions.html">List of blitz actions</a></li>
      <li class="breadcrumb-item active">yang</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="yang">
<span id="yang-action"></span><h1>yang<a class="headerlink" href="#yang" title="Permalink to this heading"></a></h1>
<p>YANG, “Yet Another Network Generation”, <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6020">RFC 6020</a>, is a data modeling language used to
model configuration and state data on network devices. The model is represented
in a hierachal fashion and can be presented in many ways, one of which is the
“Xpath”. The <code class="docutils literal notranslate"><span class="pre">content</span></code> of a simple YANG message can be boiled down to 3 required
components.</p>
<ul class="simple">
<li><p>Xpath based on <a class="reference external" href="https://www.w3.org/TR/1999/REC-xpath-19991116/">XML Path Language 1.0</a> identifying a resource</p></li>
</ul>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3.org/TR/REC-xml-names/">Namespaces in XML 1.0</a></p></li>
</ul>
<ul class="simple">
<li><p>The value you wish to set the resource to</p></li>
</ul>
<p>Several Xpath/value pairs can construct a complex message. This is the format the
<code class="docutils literal notranslate"><span class="pre">yang</span></code> action follows when defining simple or complex messages.</p>
<section id="description-of-available-yaml-components">
<h2>Description of Available YAML Components<a class="headerlink" href="#description-of-available-yaml-components" title="Permalink to this heading"></a></h2>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="c1"># device name or alias</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="c1"># device interface connection (in testbed file)</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w">  </span><span class="c1"># YANG message operation (based on NETCONF but mapped to other protocols)</span>
<span class="w">                </span><span class="c1"># * edit-config - see Content section &quot;edit-op&quot; for protocol mappings</span>
<span class="w">                </span><span class="c1"># * get-config  - mapped to &quot;get CONFIG mode&quot; for gNMI and GET for RESTCONF</span>
<span class="w">                </span><span class="c1"># * get         - mapped to &quot;get STATE mode&quot; for gNMI and GET for RESTCONF</span>
<span class="w">                </span><span class="c1"># * subscribe</span>
<span class="w">                </span><span class="c1"># * capabilities</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="c1"># [ netconf | gnmi | restconf ] - see Protocol Specifications section</span>
<span class="w">    </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="c1"># YANG datastores (if not defined Blitz will choose from device capabilities)</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="c1"># Various fomat options (see Format options below)</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="c1"># (optional) Prominant log message with borders</span>
<span class="w">    </span><span class="nt">log</span><span class="p">:</span><span class="w"> </span><span class="c1"># (optional) Log INFO message</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="c1"># Content of YANG message being sent (see Content section below)</span>
<span class="w">    </span><span class="nt">returns</span><span class="p">:</span><span class="w"> </span><span class="c1"># (optional) Expected return of YANG message (see Returns section below)</span>
</pre></div>
</div>
</section>
<section id="protocol-specifications">
<h2>Protocol Specifications<a class="headerlink" href="#protocol-specifications" title="Permalink to this heading"></a></h2>
<p>YANG modeling is a definition of network device management APIs, not the actual source code that
interacts with those APIs.  3 messaging protocols are specified to actually send the management
requests to the modeled APIs.  The details of those protocols are too extensive to get into for
this documentation.  Each have their advantages and disadvantages. The <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6241">NETCONF protocol</a>
has the most extensive functionality of all 3 protocols, but, it is transfered in XML format
which can be more taxing on network resources.  The <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md">gNMI protocol</a> is more efficient and flexible
but does not have all the options available with NETCONF.  The <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc8040">RESTCONF protocol</a> are basically
REST APIs that many engineers are comfortable with but it also does not have all the options
available with NETCONF.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">yang</span></code> action, will take the basic YANG metadata and construct the properly formed message
according to the “protocol” parameter setting and send the message using the chosen protocol
libraries.</p>
</section>
<section id="datastore-options">
<h2>Datastore Options<a class="headerlink" href="#datastore-options" title="Permalink to this heading"></a></h2>
<p>YANG Datastores, <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc8342">RFC 8342</a>, are a fundamental concept binding network management data models to
network management protocols such as NETCONF <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6241">RFC 6241</a> and RESTCONF <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc8040">RFC 8040</a>.  It is up to the
YANG server implementation to decide which datastore to support.  Blitz supports several types.  The
default is an empty string which indicates the type will be determined by device capabilities.  If
the device supports “candidate”, the candidate datastore is chosen for configuration operations.  If not
the “running” is chosen for configuration.  For all other operations, the “running” datastore is chosen.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">datastore</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w">    </span><span class="c1"># [candidate, running, startup, intent, operational]</span>
<span class="w">  </span><span class="nt">lock</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">  </span><span class="c1"># [true | false] lock datastore before access</span>
<span class="w">  </span><span class="nt">retry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span><span class="w">   </span><span class="c1"># If lock is refused, retry N times pausing 1 second between each retry</span>
</pre></div>
</div>
</section>
<section id="format-options">
<h2>Format Options<a class="headerlink" href="#format-options" title="Permalink to this heading"></a></h2>
<p>Some format options are available relating to the message and return handling. For example, if
the message is related to a <code class="docutils literal notranslate"><span class="pre">subscribe</span></code> operation, you will need to communicate the type of
subscription, or, you may expect the test to fail (referred to as a negative test).</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">format</span><span class="p">:</span>
<span class="w">  </span><span class="nt">request_mode</span><span class="p">:</span><span class="w">     </span><span class="c1"># [STREAM, ONCE, POLL] gNMI subscription mode</span>
<span class="w">  </span><span class="nt">sub_mode</span><span class="p">:</span><span class="w">         </span><span class="c1"># [ON_CHANGE, SAMPLE] gNMI subscription sub_mode</span>
<span class="w">  </span><span class="nt">encoding</span><span class="p">:</span><span class="w">         </span><span class="c1"># [JSON, JSON_IETF, PROTO, ASCII] gNMI val encoding</span>
<span class="w">  </span><span class="nt">prefix</span><span class="p">:</span><span class="w">           </span><span class="c1"># [true | false] gNMI message requires PATH prefix</span>
<span class="w">  </span><span class="nt">origin</span><span class="p">:</span><span class="w">           </span><span class="c1"># [openconfig | rfc7951 | module | &lt;device defined&gt; ] gNMI origin</span>
<span class="w">  </span><span class="nt">base64</span><span class="p">:</span><span class="w">           </span><span class="c1"># [true | false] gNMI set &quot;val&quot; requires Base64 encoding</span>
<span class="w">  </span><span class="nt">sample_poll</span><span class="p">:</span><span class="w">      </span><span class="c1"># number of seconds between SAMPLE sub_mode or POLL request_mod</span>
<span class="w">  </span><span class="nt">stream_max</span><span class="p">:</span><span class="w">       </span><span class="c1"># seconds to stop stream (default: 120, no max)</span>
<span class="w">  </span><span class="nt">auto-validate</span><span class="p">:</span><span class="w">    </span><span class="c1"># [true | false] automatically validate config messages</span>
<span class="w">  </span><span class="nt">negative_test</span><span class="p">:</span><span class="w">    </span><span class="c1"># [true | false] expecting device to return an error</span>
<span class="w">  </span><span class="nt">pause</span><span class="p">:</span><span class="w">            </span><span class="c1"># pause N seconds between each test (default: 0, no pause)</span>
<span class="w">  </span><span class="nt">transaction_time</span><span class="p">:</span><span class="w"> </span><span class="c1"># number of seconds that determines the maximum time that can pass between sending a request and receiving a response</span>
<span class="w">  </span><span class="nt">updates_only</span><span class="p">:</span><span class="w">     </span><span class="c1"># only for Subscribe requests, determines if only updates should be received (default: false)</span>
</pre></div>
</div>
<section id="request-mode">
<h3>request_mode<a class="headerlink" href="#request-mode" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#35-subscribing-to-telemetry-updates">gNMI subscriptions</a> are open gRPC channels to a device which receive telemetry updates associated to
a resource on the device.  The yang action subscribes to that resource.</p>
<ul class="simple">
<li><p>STREAM - the channel stays open and receives data until <em>stream_max</em> times out.</p></li>
<li><p>ONCE - the channel stays open and receives data until the first response is complete.</p></li>
<li><p>POLL - the channel stays open and receives data only when a POLL message is sent to the device.</p></li>
</ul>
</section>
<section id="sub-mode">
<h3>sub_mode<a class="headerlink" href="#sub-mode" title="Permalink to this heading"></a></h3>
<p>gNMI subscriptions can have sub-modes associated to a request_mode.</p>
<ul class="simple">
<li><p>ON_CHANGE - data is sent when the resource on the device has changed state either by a config change</p></li>
</ul>
<p>or a device runtime change depending on which resource you are monitoring.
- SAMPLE - data is sent in the specified sample_interval.</p>
</section>
<section id="encoding">
<h3>encoding<a class="headerlink" href="#encoding" title="Permalink to this heading"></a></h3>
<p>gNMI messaging can request different structured datatypes.</p>
<ul class="simple">
<li><p>JSON - defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc7159">RFC 7159</a></p></li>
<li><p>JSON_IETF - defined in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc8259">RFC 8259</a></p></li>
<li><p>PROTO - defined in gNMI specification <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#233-protobuf">2.3.3</a></p></li>
<li><p>ASCII - defined in gNMI specification <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#234-ascii">2.3.4</a></p></li>
</ul>
</section>
<section id="prefix">
<h3>prefix<a class="headerlink" href="#prefix" title="Permalink to this heading"></a></h3>
<p>gNMI messages contain a Path component that points to a specific resourse(s) on the device.  It is possible
to define a common Path called a <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#241-path-prefixes">prefix</a>.  If the prefix is defined, any Path definitions in the message
will be appended to this prefix.</p>
</section>
<section id="origin">
<h3>origin<a class="headerlink" href="#origin" title="Permalink to this heading"></a></h3>
<p>gNMI messages, as well as having a specified encoding, can also structured following a specific schema referred to
as the <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#222-paths">origin</a>.</p>
<ul class="simple">
<li><p>openconfig - the default schema</p></li>
<li><p>rfc7951 - follows the JSON schema</p></li>
<li><p>module - the schema is the YANG module that defines the resource that is the target of the message</p></li>
<li><p>device defined - any value that the specific device and client understand</p></li>
</ul>
</section>
<section id="base64">
<h3>base64<a class="headerlink" href="#base64" title="Permalink to this heading"></a></h3>
<p>gNMI JSON or JSON_IETF encoded messages can contain a <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#231-json-and-json_ietf">val</a> parameter.  This represents the body of the message
that a Path is pointing to.  Some clients compress the val into a Base64 encoding which allows for a more efficiant
use of badnwidth.  The device must be able to decode the Base64 val if this parameter is set.</p>
</section>
<section id="sample-poll">
<h3>sample_poll<a class="headerlink" href="#sample-poll" title="Permalink to this heading"></a></h3>
<p>gNMI STREAM subscriptions can ask for a sampling interval in which messages are sent.  The device will only send
data at these intervals.  Make sure STREAM sub_mode “SAMPLE” is less than the stream_max. For POLL it indicates how many seconds between POLL requests.
For SAMPLE sub_mode the field is equivalent to the <a class="reference external" href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md#35152-stream-subscriptions">sample_interval</a> field but value is defined in seconds. Default value is 5.</p>
</section>
<section id="stream-max">
<h3>stream_max<a class="headerlink" href="#stream-max" title="Permalink to this heading"></a></h3>
<p>gNMI STREAM subscriptions will last as long as the gRPC channel is open.  Without this parameter set,
the test may never end.  The parameter is set in seconds.</p>
</section>
<section id="auto-validate">
<h3>auto-validate<a class="headerlink" href="#auto-validate" title="Permalink to this heading"></a></h3>
<p>This is a general setting that instructs the infrastructure to automatically send a get related NETCONF or
gNMI message to ensure that any configuration message was successful.</p>
</section>
<section id="negative-test">
<h3>negative_test<a class="headerlink" href="#negative-test" title="Permalink to this heading"></a></h3>
<p>This is a general setting that instructs the infrastructure that the message sent is expected to return an
error.  The structure of the error can be defined in the return.  If the error is encountered, the test is
condidered successful.</p>
</section>
<section id="pause">
<h3>pause<a class="headerlink" href="#pause" title="Permalink to this heading"></a></h3>
<p>This is a general setting that instructs the infrastructure to stop between each message sent to the device.
The parameter is set in seconds.  It is primarily used to slow down test execution and is really just for
debugging purposes.  If a device needs you to slow down, it is not handling the messaging properly and this
should be further investigated.</p>
</section>
<section id="transaction-time">
<h3>transaction_time<a class="headerlink" href="#transaction-time" title="Permalink to this heading"></a></h3>
<p>For a GET, the maximum time that can elapse between sending a request and the response completing.
For gNMI subscriptions in STREAM mode, this is the time between a response arriving and the response completing. If time is exceeded, the test will fail.</p>
</section>
<section id="updates-only">
<h3>updates_only<a class="headerlink" href="#updates-only" title="Permalink to this heading"></a></h3>
<p>A boolean that causes the server to send only updates to the current state. For STREAM subscriptions, an update occurs upon the next sample
(in the case of SAMPLE subscriptions), or upon the next value change for ON_CHANGE subscriptions. For POLL and ONCE subscriptions,
the target should send only the sync_response message, before proceeding to process poll requests (in the case of POLL) or closing the RPC (in the case of ONCE).</p>
</section>
</section>
<section id="content">
<h2>Content<a class="headerlink" href="#content" title="Permalink to this heading"></a></h2>
<p>As explained above, <code class="docutils literal notranslate"><span class="pre">content</span></code> contains a reference to namespaces followed by a list of
Xpath/value pairs (nodes).  Namespace with mapped prefix is defined at the top of the
YANG file.  There is also an option, “rpc”, to use the string representation of the message.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># prefix: namespace examples:</span>
<span class="w">    </span><span class="nt">ios</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/Cisco-IOS-XE-native</span>
<span class="w">    </span><span class="nt">config-mda-cfg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XR-config-mda-cfg</span>
<span class="w">    </span><span class="nt">oc-if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://openconfig.net/yang/interfaces</span>
<span class="w">  </span><span class="nt">nodes</span><span class="p">:</span><span class="w"> </span><span class="c1"># List of:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">nodetype</span><span class="p">:</span><span class="w"> </span><span class="c1"># YANG defined statement such as leaf, container, etc.</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="c1"># Default value if not specifically set by client</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w">   </span><span class="c1"># Value Xpath points to which must match the defined datatype</span>
<span class="w">    </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="c1"># (Optional) Applies only to edit-config (default: merge)</span>
<span class="w">             </span><span class="c1"># These are mapped to gNMI and RESTCONF functionality.</span>
<span class="w">             </span><span class="c1">#  ---------------------------------</span>
<span class="w">             </span><span class="c1"># | NETCONF | RESTCONF | gNMI       |</span>
<span class="w">             </span><span class="c1">#  ---------------------------------</span>
<span class="w">             </span><span class="c1"># | create  | POST     | set/update |</span>
<span class="w">             </span><span class="c1"># | merge   | PATCH    | set/update |</span>
<span class="w">             </span><span class="c1"># | replace | PUT      | set/replace|</span>
<span class="w">             </span><span class="c1"># | delete  | DELETE   | set/delete |</span>
<span class="w">             </span><span class="c1"># | remove  | DELETE   | set/delete |</span>
<span class="w">             </span><span class="c1">#  ---------------------------------</span>
<span class="w">    </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="c1"># Xpath based on `XML Path Language 1.0`_ identifying a resource</span>
</pre></div>
</div>
<p>The “rpc” option can be any well-formed valid XML NETCONF rpc message.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rpc</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">&lt;rpc xmlns=&quot;urn:ietf:params:xml:ns:netconf:base:1.0&quot; message-id=&quot;101&quot;&gt;</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&lt;get&gt;</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;filter&gt;</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">&lt;interfaces xmlns=&quot;http://openconfig.net/yang/interfaces&quot;&gt;</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">&lt;interface&gt;</span>
<span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">&lt;state/&gt;</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">&lt;/interface&gt;</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">&lt;/interfaces&gt;</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;/filter&gt;</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&lt;/get&gt;</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">&lt;/rpc&gt;</span>
</pre></div>
</div>
<p>The “rpc” option can also accept a well-formed valid dictionary representing a gNMI message.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">content</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rpc</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
<span class="w">    </span><span class="s">&quot;subscribe&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
<span class="w">      </span><span class="s">&quot;prefix&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
<span class="w">        </span><span class="s">&quot;origin&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;rfc7951&quot;</span>
<span class="w">      </span><span class="p p-Indicator">},</span>
<span class="w">      </span><span class="s">&quot;subscription&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
<span class="w">        </span><span class="p p-Indicator">{</span>
<span class="w">          </span><span class="s">&quot;path&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
<span class="w">            </span><span class="s">&quot;elem&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
<span class="w">              </span><span class="p p-Indicator">{</span>
<span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Cisco-IOS-XE-lldp-oper:lldp-entries&quot;</span>
<span class="w">              </span><span class="p p-Indicator">},</span>
<span class="w">              </span><span class="p p-Indicator">{</span>
<span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;lldp-intf-details&quot;</span><span class="p p-Indicator">,</span>
<span class="w">                </span><span class="s">&quot;key&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
<span class="w">                  </span><span class="s">&quot;if-name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;TenGigabitEthernet1/0/1&quot;</span>
<span class="w">                </span><span class="p p-Indicator">}</span>
<span class="w">              </span><span class="p p-Indicator">}</span>
<span class="w">            </span><span class="p p-Indicator">]</span>
<span class="w">          </span><span class="p p-Indicator">},</span>
<span class="w">          </span><span class="s">&quot;mode&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;SAMPLE&quot;</span><span class="p p-Indicator">,</span>
<span class="w">          </span><span class="s">&quot;sampleInterval&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;5000000000&quot;</span>
<span class="w">        </span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">],</span>
<span class="w">      </span><span class="s">&quot;encoding&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;JSON_IETF&quot;</span>
<span class="w">    </span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</section>
<section id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Permalink to this heading"></a></h2>
<p>Expected return values can also be defined with the fexibility of approximation. The return
values are identified by the Xpath derived from the return message (without prefixes because
return prefixes may differ). The <code class="docutils literal notranslate"><span class="pre">op</span></code> is an operation performed between returned value and
expected value.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">==</span></code> equals</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!=</span></code> not equal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code> less than</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code> greater than</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> less than or equal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> greater than or equal</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">10</span></code> range (example)</p></li>
</ul>
</div></blockquote>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">returns</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w">       </span><span class="c1"># for referencing only</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w">     </span><span class="c1"># name of field for referencing only</span>
<span class="w">    </span><span class="nt">op</span><span class="p">:</span><span class="w">       </span><span class="c1"># operation performed between returned value and expected value (choices above)</span>
<span class="w">    </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="c1"># set this to ``false`` and field is ignored making it like a placeholder</span>
<span class="w">    </span><span class="nt">datatype</span><span class="p">:</span><span class="w"> </span><span class="c1"># datatype of field for general verification</span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w">    </span><span class="c1"># expected value to compare to returned value</span>
<span class="w">    </span><span class="nt">xpath</span><span class="p">:</span><span class="w">    </span><span class="c1"># Xpath to field in YANG model (without prefixes)</span>
</pre></div>
</div>
</section>
<section id="using-variables">
<h2>Using Variables<a class="headerlink" href="#using-variables" title="Permalink to this heading"></a></h2>
<p>You should think about the portability of your test. Using variables to refer
to parameters in the <code class="docutils literal notranslate"><span class="pre">yang</span></code> action will allow you to run the same set of tests
over different protocols by only changing a couple variables or changing the
file that contains your content. A variable can be defined by wrapping a YAML
location inside <code class="docutils literal notranslate"><span class="pre">%{</span> <span class="pre">my.variable</span> <span class="pre">}</span></code> and find the value at “my: variable: value”.
The location can also exist in a different file by adding <code class="docutils literal notranslate"><span class="pre">extends:</span> <span class="pre">mydata.yml</span></code>
at the top of the test file.</p>
<p>Example of variables in external data file:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_test_file.yml</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.device</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.connection</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edit-config</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.protocol</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">    </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.datastore</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YANG EDIT-CONFIG MESSAGE</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.content.1</span><span class="nv"> </span><span class="s">}&#39;</span>
</pre></div>
</div>
<p>Content in data_test_file.yml:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut1</span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">  </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">  </span><span class="nt">content</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ios-l2vpn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XE-l2vpn</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.10.10.2</span>
<span class="w">          </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/ios-l2vpn:l2vpn/ios-l2vpn:router-id</span>
<span class="w">          </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">merge</span>
</pre></div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>edit-config negative test using NETCONF</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut2</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">netconf</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-config</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">netconf</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NETCONF EDIT-CONFIG MESSAGE</span>
<span class="w">    </span><span class="nt">log</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Negative test case</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span>
<span class="w">      </span><span class="nt">auto-validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ios-l2vpn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XE-l2vpn</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/ios-l2vpn:l2vpn/ios-l2vpn:router-id</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;10.10.10.2&#39;</span>
<span class="w">        </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delete</span>
<span class="w">    </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router-id</span>
<span class="w">        </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">        </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">datatype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.10.10.2</span>
<span class="w">        </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/l2vpn/router-id</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Same edit-config using variables</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_test_file.yml</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- yang</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.device</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.connection</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edit-config</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.protocol</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.datastore</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.format.1</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YANG EDIT-CONFIG MESSAGE</span>
<span class="w">      </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.contents.1</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NETCONF EDIT-CONFIG MESSAGE</span>
<span class="w">      </span><span class="nt">log</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Negative test case</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># data_test_file.yml contents</span>

<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut2</span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">netconf</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">protocol:netconf</span>
<span class="w">  </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">candidate</span>

<span class="w">  </span><span class="nt">format</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">auto-validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">contents</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ios-l2vpn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XE-l2vpn</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/ios-l2vpn:l2vpn/ios-l2vpn:router-id</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&#39;10.10.10.2&#39;</span>
<span class="w">          </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delete</span>
<span class="w">  </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router-id</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">op</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">selected</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">datatype</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.10.10.2</span>
<span class="w">          </span><span class="l l-Scalar l-Scalar-Plain">xpath</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/l2vpn/router-id</span>
</pre></div>
</div>
<ul class="simple">
<li><p>edit-config negative test RPC error check using NETCONF</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut2</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">netconf</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edit-config</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">netconf</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NETCONF EDIT-CONFIG MESSAGE</span>
<span class="w">    </span><span class="nt">log</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Negative test case</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span>
<span class="w">      </span><span class="nt">auto-validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ios-l2vpn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XE-l2vpn</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/ios-l2vpn:l2vpn/ios-l2vpn:router-id</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;10.10.10.2&#39;</span>
<span class="w">        </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create</span>
<span class="w">    </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">error-tag</span>
<span class="w">        </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">        </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data-exists</span>
<span class="w">        </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/rpc-reply/rpc-error/error-tag</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Same edit-config RPC error check using variables</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">extends</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data_test_file.yml</span>

<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">- yang</span><span class="p p-Indicator">:</span>
<span class="w">      </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.device</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.connection</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edit-config</span>
<span class="w">      </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.protocol</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.datastore</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.format.2</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YANG EDIT-CONFIG MESSAGE</span>
<span class="w">      </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.contents.1</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">returns</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;%{</span><span class="nv"> </span><span class="s">data.returns.1</span><span class="nv"> </span><span class="s">}&#39;</span>
<span class="w">      </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NETCONF EDIT-CONFIG MESSAGE</span>
<span class="w">      </span><span class="nt">log</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Negative test case</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># data_test_file.yml contents</span>

<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut2</span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">netconf</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">protocol:netconf</span>
<span class="w">  </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">running</span>

<span class="w">  </span><span class="nt">format</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">auto-validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">    </span><span class="nt">2</span><span class="p">:</span>
<span class="w">      </span><span class="nt">auto-validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">contents</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ios-l2vpn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XE-l2vpn</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/ios-l2vpn:l2vpn/ios-l2vpn:router-id</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;10.10.10.2&#39;</span>
<span class="w">        </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create</span>
<span class="w">  </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">    </span><span class="nt">1</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">error-tag</span>
<span class="w">        </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">        </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data-exists</span>
<span class="w">        </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/rpc-reply/rpc-error/error-tag</span>
</pre></div>
</div>
<ul class="simple">
<li><p>get CONFIG state using gNMI with expected returns</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut2</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-config</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gNMI GET-CONFIG MESSAGE</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ios-l2vpn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/Cisco-IOS-XE-l2vpn</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/ios-l2vpn:l2vpn/ios-l2vpn:router-id</span>
<span class="w">    </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router-id</span>
<span class="w">        </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">        </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">        </span><span class="nt">datatype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.10.10.2</span>
<span class="w">        </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/native/l2vpn-config/l2vpn/router-id</span>
</pre></div>
</div>
<ul class="simple">
<li><p>gNMI STREAM subscribe testing IPv4 statistic values &gt;= n.</p></li>
</ul>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YANG SUBSCRIBE STREAM SAMPLING</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subscribe</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">    </span><span class="nt">datastore</span><span class="p">:</span>
<span class="w">      </span><span class="nt">lock</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">retry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span>
<span class="w">      </span><span class="nt">encoding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">JSON</span>
<span class="w">      </span><span class="nt">request_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STREAM</span>
<span class="w">      </span><span class="nt">sample_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">stream_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">      </span><span class="nt">auto_validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">    </span><span class="nt">log</span><span class="p">:</span>
<span class="w">      </span><span class="nt">category</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
<span class="w">      </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cisco-NX-OS-device</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nx-ipv4-stats</span>
<span class="w">      </span><span class="nt">revision</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2021-12-14&#39;</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">        </span><span class="nt">top</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/cisco-nx-os-device</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">datatype</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">edit-op</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">nodetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">container</span>
<span class="w">        </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/top:System/top:ipv4-items/top:inst-items/top:iptrafficstat-items</span>
<span class="w">    </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">consumed</span>
<span class="w">      </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&gt;=&#39;</span>
<span class="w">      </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;17852&#39;</span>
<span class="w">      </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/System/ipv4-items/inst-items/iptrafficstat-items/consumed</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;22&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">received</span>
<span class="w">      </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&gt;=&#39;</span>
<span class="w">      </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;452581&#39;</span>
<span class="w">      </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/System/ipv4-items/inst-items/iptrafficstat-items/received</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;23&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sent</span>
<span class="w">      </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&gt;=&#39;</span>
<span class="w">      </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;13102&#39;</span>
<span class="w">      </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/System/ipv4-items/inst-items/iptrafficstat-items/sent</span>
</pre></div>
</div>
<ul class="simple">
<li><p>gNMI ON_CHANGE subscribe testing config changes to a boolean.</p></li>
</ul>
<p><strong>NOTE:</strong>
For ON_CHANGE the returns must contain the base value of the resource as well
as any changes to the resource setup in the test.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">configure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CONFIG SETUP FOR ON_CHANGE</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ip igmp heavy-template</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">yang</span><span class="p">:</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">YANG SUBSCIBE ON_CHANGE</span>
<span class="w">    </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="nt">namespace</span><span class="p">:</span>
<span class="w">        </span><span class="nt">top</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://cisco.com/ns/yang/cisco-nx-os-device</span>
<span class="w">      </span><span class="nt">nodes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">datatype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span>
<span class="w">        </span><span class="nt">nodetype</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">leaf</span>
<span class="w">        </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/top:System/top:igmp-items/top:inst-items/top:heavyTemplate</span>
<span class="w">    </span><span class="nt">datastore</span><span class="p">:</span>
<span class="w">      </span><span class="nt">lock</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">retry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;running&#39;</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">format</span><span class="p">:</span>
<span class="w">      </span><span class="nt">encoding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">JSON</span>
<span class="w">      </span><span class="nt">request_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STREAM</span>
<span class="w">      </span><span class="nt">sub_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ON_CHANGE</span>
<span class="w">      </span><span class="nt">stream_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">      </span><span class="nt">auto_validate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">negative_test</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="nt">pause</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">    </span><span class="nt">log</span><span class="p">:</span>
<span class="w">      </span><span class="nt">category</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
<span class="w">      </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cisco-NX-OS-device</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">on_change</span>
<span class="w">      </span><span class="nt">revision</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2021-12-14&#39;</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subscribe</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gnmi</span>
<span class="w">    </span><span class="nt">returns</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">heavyTemplate</span>
<span class="w">      </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">      </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">                                         </span><span class="c1"># the base value</span>
<span class="w">      </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/System/igmp-items/inst-items/heavyTemplate</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">heavyTemplate</span>
<span class="w">      </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">==</span>
<span class="w">      </span><span class="nt">selected</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">                                     </span><span class="c1"># the change value</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">xpath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/System/igmp-items/inst-items/heavyTemplate</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">configure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CONFIG CHANGE FOR ON_CHANGE</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no ip igmp heavy-template</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">configure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CONFIG CHANGE FOR ON_CHANGE</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ip igmp heavy-template</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">configure</span><span class="p">:</span>
<span class="w">    </span><span class="nt">banner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CONFIG CHANGE FOR ON_CHANGE</span>
<span class="w">    </span><span class="nt">device</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uut</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no ip igmp heavy-template</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="actions_list.html" class="btn btn-neutral float-left" title="execute" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../save/index.html" class="btn btn-neutral float-right" title="Save action outputs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 30, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>