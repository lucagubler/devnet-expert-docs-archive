<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.99.1" />



<meta name="robots" content="noindex, nofollow">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicons/android-chrome-512x512.png" sizes="512x512">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/favicons/site.webmanifest">
<title>Asynchronous Callback API Tutorial | C&#43;&#43; | gRPC</title>
<meta name="description" content="This tutorial shows you how to write a simple server and client in C&#43;&#43; using
gRPC&rsquo;s asynchronous callback APIs. The example used in this …">
<meta property="og:title" content="Asynchronous Callback API Tutorial" />
<meta property="og:description" content="This tutorial shows you how to write a simple server and client in C&#43;&#43; using gRPC&rsquo;s asynchronous callback APIs. The example used in this tutorial follows the RouteGuide example.
Overview gRPC C&#43;&#43; offers two kinds of APIs: sync APIs and async APIs. More specifically, we have two kinds of async APIs: the old one is completion-queue based; the new one is callback-based, which is easier to use. In this tutorial, we will focus on the callback-based async APIs (callback APIs for short)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://grpc.io/docs/languages/cpp/callback/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-06-18T13:18:11-07:00" /><meta property="og:site_name" content="gRPC" />

<meta itemprop="name" content="Asynchronous Callback API Tutorial">
<meta itemprop="description" content="This tutorial shows you how to write a simple server and client in C&#43;&#43; using gRPC&rsquo;s asynchronous callback APIs. The example used in this tutorial follows the RouteGuide example.
Overview gRPC C&#43;&#43; offers two kinds of APIs: sync APIs and async APIs. More specifically, we have two kinds of async APIs: the old one is completion-queue based; the new one is callback-based, which is easier to use. In this tutorial, we will focus on the callback-based async APIs (callback APIs for short).">
<meta itemprop="dateModified" content="2024-06-18T13:18:11-07:00" />
<meta itemprop="wordCount" content="3624">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Asynchronous Callback API Tutorial"/>
<meta name="twitter:description" content="This tutorial shows you how to write a simple server and client in C&#43;&#43; using gRPC&rsquo;s asynchronous callback APIs. The example used in this tutorial follows the RouteGuide example.
Overview gRPC C&#43;&#43; offers two kinds of APIs: sync APIs and async APIs. More specifically, we have two kinds of async APIs: the old one is completion-queue based; the new one is callback-based, which is easier to use. In this tutorial, we will focus on the callback-based async APIs (callback APIs for short)."/>
<link href="/css/style.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="canonical" href="https://grpc.io/docs/languages/cpp/callback/">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@grpcio">
<meta name="twitter:creator" content="@grpcio">
<meta name="twitter:image" content="https://grpc.io/img/logos/grpc-icon-color.png">
<meta name="twitter:image:alt" content="gRPC color logo">

<meta property="og:url" content="https://grpc.io/docs/languages/cpp/callback/">
<meta property="og:title" content="Asynchronous Callback API Tutorial">
<meta property="og:description" content="A high-performance, open source universal RPC framework">
<meta property="og:type" content="article">
<meta property="og:site_name" content="gRPC">
<meta property="og:image" content="https://grpc.io/img/logos/grpc-icon-color.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:alt" content="gRPC color logo">
<meta property="og:locale" content="en_US">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" href="/favicons/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicons/android-chrome-512x512.png" sizes="512x512">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/favicons/site.webmanifest">
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 288 122.3333"><style>.st0{fill:#fff}.st2,.st3{clip-path:url(#SVGID_2_);fill:#73cbcb}.st3{fill:#72cbca}.st5,.st57,.st59,.st63,.st8{clip-path:url(#SVGID_2_);fill:#70caca}.st57,.st59,.st63,.st8{fill:#6dc9c9}.st57,.st59,.st63{fill:#00b5b2}.st59,.st63{fill:#00b3b0}.st63{fill:#00b0ad}.st120,.st121,.st70{clip-path:url(#SVGID_4_);fill:#6fcac9}.st120,.st121{fill:#00bab8}.st121{fill:#00b9b7}.st123,.st126,.st128,.st129{clip-path:url(#SVGID_4_);fill:#00b8b6}.st126,.st128,.st129{fill:#00b7b4}.st128,.st129{fill:#00b6b3}.st129{fill:#00b5b2}</style><path class="st0" d="M33.8581 102.699c2.0254 2.7248 4.6635 4.9082 7.9122 6.5503 3.2493 1.641 6.865 2.4626 10.8474 2.4626 3.493.0 6.462-.5075 8.9083-1.5194 2.4451-1.014 4.4181-2.3939 5.9212-4.1396 1.502-1.7478 2.5842-3.7906 3.2492-6.1316.663-2.341.9955-4.8385.9955-7.4924v-8.8036h-.2093c-2.2369 3.353-4.9622 5.7298-8.175 7.1266-3.2143 1.3978-6.6026 2.0957-10.166 2.0957-3.5632.0-6.9002-.6291-10.0083-1.8863-3.1103-1.2583-5.8171-2.987-8.1227-5.1874-2.3055-2.2014-4.1231-4.8374-5.4496-7.9133-1.328-3.0737-1.9915-6.3928-1.9915-9.956s.6291-6.8813 1.8868-9.9567c1.2572-3.0737 2.9865-5.7641 5.1874-8.0697 2.201-2.3056 4.821-4.1036 7.8604-5.3973 3.0394-1.292 6.3754-1.9392 10.009-1.9392 1.467.0 3.0214.1412 4.6634.4193 1.641.2802 3.2837.7697 4.9257 1.4676 1.641.6989 3.2657 1.66 4.8734 2.8818 1.6066 1.2234 3.108 2.7772 4.507 4.664h.2093v-8.175h6.9173V92.429c0 2.654-.3326 5.4834-.996 8.4884-.6646 3.003-1.9567 5.7648-3.8774 8.2791-1.9228 2.5155-4.5953 4.6122-8.0174 6.2892C62.2941 117.1616 57.8221 118 52.3032 118c-4.8914.0-9.2588-.8036-13.1001-2.4097-3.8435-1.6083-7.3365-4.0878-10.4806-7.4417l5.1356-5.4496zm1.2572-35.0038c0 2.5852.4716 5.014 1.4153 7.283.9432 2.2713 2.2352 4.2633 3.8773 5.9741 1.641 1.713 3.5633 3.0759 5.7642 4.0878 2.2009 1.013 4.5937 1.5194 7.1795 1.5194 2.5149.0 4.9077-.4536 7.1789-1.363 2.2696-.9071 4.2791-2.1823 6.0259-3.8244 1.7456-1.641 3.0917-3.6162 4.0354-5.9223.9431-2.305 1.3787-4.8892 1.31-7.7546.0-2.5847-.4192-5.013-1.2577-7.2841-.8385-2.2697-2.0619-4.2612-3.6685-5.9741-1.6077-1.7113-3.5633-3.0737-5.8689-4.0872-2.3055-1.012-4.8913-1.5194-7.7551-1.5194-2.5858.0-4.9786.5075-7.1795 1.5194-2.2009 1.0135-4.1232 2.3759-5.7642 4.0872-1.642 1.713-2.9341 3.7044-3.8773 5.974-.9437 2.2713-1.4153 4.6995-1.4153 7.2842zm71.6851 25.1524h-7.5458v-74.201h22.8468c7.5458.0 13.502 1.6425 17.8693 4.9256 4.3659 3.2852 6.5504 8.2453 6.5504 14.8823.0 5.1715-1.6246 9.521-4.8734 13.0483-3.2492 3.529-7.9487 5.5723-14.0961 6.1306l21.3803 35.2142h-9.2234l-20.3319-34.4804h-12.5762v34.4804zm0-41.3976h13.4147c3.354.0 6.1998-.3484 8.5413-1.0479 2.3405-.6973 4.2088-1.6246 5.6072-2.7771 1.3968-1.153 2.4108-2.5155 3.0394-4.0872.6286-1.5723.9431-3.2657.9431-5.0833.0-1.7457-.3145-3.4063-.9431-4.978-.6286-1.5723-1.6426-2.9511-3.0394-4.1401-1.3984-1.1869-3.2667-2.112-5.6072-2.7771-2.3415-.663-5.1874-.9955-8.5413-.9955h-13.4147V51.45zm55.1253-32.8035h21.5902c7.5453.0 13.5014 1.6426 17.8683 4.9257 4.3658 3.2852 6.5503 8.2453 6.5503 14.8823.0 6.6386-2.1845 11.6167-6.5503 14.9347-4.367 3.319-10.323 4.978-17.8683 4.978H169.472v34.4804h-7.5464v-74.201zm7.5464 32.8035h12.1574c3.353.0 6.1993-.3484 8.5414-1.0479 2.3399-.6973 4.2083-1.6246 5.6071-2.7771 1.3968-1.153 2.4098-2.5155 3.0389-4.0872.6291-1.5723.9432-3.2657.9432-5.0833.0-1.7457-.314-3.4063-.9432-4.978-.6291-1.5723-1.6421-2.9511-3.0389-4.1401-1.3988-1.1869-3.2672-2.112-5.6071-2.7771-2.342-.663-5.1885-.9955-8.5414-.9955h-12.1574V51.45zM283.7057 81.1099c-1.2572 1.8863-2.8125 3.668-4.663 5.345-1.8524 1.6769-3.966 3.1276-6.3409 4.3488-2.3759 1.2234-4.9442 2.1835-7.7028 2.8824-2.7608.6978-5.678 1.0478-8.7518 1.0478-5.5194.0-10.637-.979-15.3528-2.9341-4.7169-1.9551-8.8035-4.664-12.2622-8.1227-3.4586-3.4586-6.1675-7.5622-8.1226-12.314-1.9572-4.7506-2.9341-9.9565-2.9341-15.616s.977-10.8633 2.9341-15.6156c1.955-4.7507 4.664-8.856 8.1226-12.3145s7.5453-6.1655 12.2622-8.1221c4.7158-1.9556 9.8334-2.9347 15.3528-2.9347 4.6122.0 9.2234.9088 13.8345 2.7248 4.6111 1.8176 8.5582 4.821 11.8424 9.0134l-6.6022 4.9257c-.7697-1.1874-1.8176-2.3748-3.1445-3.5633-1.328-1.1874-2.8475-2.2352-4.5583-3.144-1.713-.9072-3.5474-1.641-5.5025-2.2009-1.9571-.5588-3.9133-.8385-5.8694-.8385-4.7517.0-9.0129.8745-12.7855 2.6202-3.7727 1.7472-6.969 4.0872-9.5892 7.0213-2.6201 2.9347-4.6302 6.341-6.027 10.2189-1.3978 3.8773-2.0956 7.9486-2.0956 12.2093.0 4.2627.6978 8.332 2.0957 12.2093 1.3967 3.8783 3.4068 7.284 6.0269 10.2183 2.6201 2.9352 5.8165 5.2762 9.5892 7.0219 3.7726 1.7478 8.0338 2.62 12.7855 2.62 1.9561.0 3.8943-.1733 5.8166-.5233 1.9212-.349 3.8075-.9432 5.66-1.7816 1.8504-.8385 3.597-1.9741 5.2402-3.4068 1.641-1.4307 3.1605-3.2303 4.5583-5.3968l6.1834 4.4018z"/><defs><path id="SVGID_1_" transform="rotate(-135.2127 22.2272 23.47)" d="M8.4598 9.7025h27.535v27.535H8.4598z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_2_)" fill="#74cbcb" d="M3.1017 4l-.3445 3.0493V4z"/><path class="st2" d="M3.557 4l-.7998 7.078V7.0493L3.1017 4z"/><path class="st2" d="M4.0122 4l-1.255 11.1067V11.078L3.557 4z"/><path class="st3" d="M4.4674 4 2.7572 19.1354v-4.0287L4.0122 4z"/><path class="st3" d="M4.9226 4 2.7572 23.1641v-4.0287L4.4674 4z"/><path clip-path="url(#SVGID_2_)" fill="#71caca" d="M5.3778 4 2.7572 27.1928v-4.0287L4.9226 4z"/><path class="st5" d="M5.833 4 2.7572 31.2216v-4.0288L5.3778 4z"/><path class="st5" d="M6.2882 4l-3.531 31.2503v-4.0287L5.833 4z"/><path clip-path="url(#SVGID_2_)" fill="#6fcac9" d="M6.7434 4 2.7572 39.279v-4.0287L6.2882 4z"/><path clip-path="url(#SVGID_2_)" fill="#6ecac9" d="M7.1986 4 2.8014 42.9162l-.0442-.005V39.279L6.7434 4z"/><path class="st8" d="M7.6538 4 3.2539 42.94h-.2414l-.211-.0238L7.1985 4z"/><path class="st8" d="M8.109 4 3.7092 42.94h-.4553L7.6538 4z"/><path clip-path="url(#SVGID_2_)" fill="#6cc9c8" d="M8.5642 4 4.1644 42.94h-.4552L8.109 4z"/><path clip-path="url(#SVGID_2_)" fill="#6bc9c8" d="M9.0194 4 4.6196 42.94h-.4552L8.5642 4z"/><path clip-path="url(#SVGID_2_)" fill="#6ac9c8" d="M9.4746 4 5.0748 42.94h-.4552L9.0194 4z"/><path clip-path="url(#SVGID_2_)" fill="#69c8c8" d="M9.9298 4 5.53 42.94h-.4552L9.4746 4z"/><path clip-path="url(#SVGID_2_)" fill="#68c8c7" d="M10.385 4 5.9852 42.94H5.53L9.9298 4z"/><path clip-path="url(#SVGID_2_)" fill="#67c8c7" d="M10.8402 4 6.4404 42.94h-.4552L10.385 4z"/><path clip-path="url(#SVGID_2_)" fill="#66c7c7" d="M11.2954 4 6.8956 42.94h-.4552L10.8402 4z"/><path clip-path="url(#SVGID_2_)" fill="#65c7c6" d="M11.7506 4 7.3508 42.94h-.4552L11.2954 4z"/><path clip-path="url(#SVGID_2_)" fill="#64c7c6" d="M12.2059 4 7.806 42.94h-.4552L11.7506 4z"/><path clip-path="url(#SVGID_2_)" fill="#62c7c6" d="M12.661 4 8.2613 42.94H7.806L12.2059 4z"/><path clip-path="url(#SVGID_2_)" fill="#61c6c6" d="M13.1163 4 8.7164 42.94h-.4552L12.6611 4z"/><path clip-path="url(#SVGID_2_)" fill="#60c6c5" d="M13.5715 4 9.1716 42.94h-.4552L13.1163 4z"/><path clip-path="url(#SVGID_2_)" fill="#5ec6c5" d="M14.0267 4 9.6268 42.94h-.4552L13.5715 4z"/><path clip-path="url(#SVGID_2_)" fill="#5dc5c5" d="M14.4819 4 10.082 42.94h-.4552L14.0267 4z"/><path clip-path="url(#SVGID_2_)" fill="#5bc5c4" d="M14.937 4l-4.3998 38.94h-.4552L14.482 4z"/><path clip-path="url(#SVGID_2_)" fill="#5ac5c4" d="M15.3923 4l-4.3999 38.94h-.4552L14.9371 4z"/><path clip-path="url(#SVGID_2_)" fill="#58c4c3" d="M15.8475 4l-4.3999 38.94h-.4552L15.3923 4z"/><path clip-path="url(#SVGID_2_)" fill="#57c4c3" d="M16.3027 4l-4.3998 38.94h-.4553L15.8475 4z"/><path clip-path="url(#SVGID_2_)" fill="#55c4c3" d="M16.758 4l-4.4 38.94h-.4551L16.3027 4z"/><path clip-path="url(#SVGID_2_)" fill="#53c3c2" d="M17.2131 4l-4.3998 38.94h-.4552L16.7579 4z"/><path clip-path="url(#SVGID_2_)" fill="#51c3c2" d="M17.6683 4l-4.3998 38.94h-.4552L17.213 4z"/><path clip-path="url(#SVGID_2_)" fill="#4fc3c1" d="M18.1235 4l-4.3998 38.94h-.4552L17.6683 4z"/><path clip-path="url(#SVGID_2_)" fill="#4dc2c1" d="M18.5787 4 14.179 42.94h-.4552L18.1235 4z"/><path clip-path="url(#SVGID_2_)" fill="#4bc2c0" d="M19.034 4l-4.4 38.94h-.4551L18.5787 4z"/><path clip-path="url(#SVGID_2_)" fill="#49c1c0" d="M19.4891 4l-4.3998 38.94h-.4552L19.0339 4z"/><path clip-path="url(#SVGID_2_)" fill="#46c1c0" d="M19.9443 4l-4.3998 38.94h-.4552L19.489 4z"/><path clip-path="url(#SVGID_2_)" fill="#44c0bf" d="M20.3996 4l-4.3999 38.94h-.4552L19.9443 4z"/><path clip-path="url(#SVGID_2_)" fill="#41c0bf" d="M20.8548 4l-4.3999 38.94h-.4552L20.3996 4z"/><path clip-path="url(#SVGID_2_)" fill="#3ec0be" d="M21.31 4l-4.4 38.94h-.4552L20.8548 4z"/><path clip-path="url(#SVGID_2_)" fill="#3bbfbe" d="M21.7652 4l-4.3999 38.94h-.4552L21.31 4z"/><path clip-path="url(#SVGID_2_)" fill="#38bfbd" d="M22.2204 4l-4.3999 38.94h-.4552L21.7652 4z"/><path clip-path="url(#SVGID_2_)" fill="#34bebd" d="M22.6756 4l-4.3999 38.94h-.4552L22.2204 4z"/><path clip-path="url(#SVGID_2_)" fill="#30bebc" d="M23.1308 4l-4.3999 38.94h-.4552L22.6756 4z"/><path clip-path="url(#SVGID_2_)" fill="#2cbdbb" d="M23.586 4l-4.4 38.94h-.4552L23.1308 4z"/><path clip-path="url(#SVGID_2_)" fill="#27bdbb" d="M24.0412 4l-4.3999 38.94h-.4552L23.586 4z"/><path clip-path="url(#SVGID_2_)" fill="#21bcba" d="M24.4964 4l-4.3999 38.94h-.4552L24.0412 4z"/><path clip-path="url(#SVGID_2_)" fill="#1abcba" d="M24.9516 4l-4.3998 38.94h-.4553L24.4964 4z"/><path clip-path="url(#SVGID_2_)" fill="#10bbb9" d="M25.4068 4 21.007 42.94h-.4552L24.9516 4z"/><path clip-path="url(#SVGID_2_)" fill="#00bbb9" d="M25.862 4l-4.3998 38.94h-.4552L25.4068 4z"/><path clip-path="url(#SVGID_2_)" fill="#00bab8" d="M26.3172 4l-4.3998 38.94h-.4552L25.862 4z"/><path clip-path="url(#SVGID_2_)" fill="#00bab7" d="M26.7724 4l-4.3998 38.94h-.4552L26.3172 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b9b7" d="M27.2276 4l-4.3998 38.94h-.4552L26.7724 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b9b6" d="M27.6828 4 23.283 42.94h-.4552L27.2276 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b8b6" d="M28.138 4l-4.3998 38.94h-.4552L27.6828 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b7b5" d="M28.5932 4l-4.3998 38.94h-.4552L28.138 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b7b4" d="M29.0485 4l-4.3999 38.94h-.4552L28.5932 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b6b4" d="M29.5037 4l-4.3999 38.94h-.4552L29.0485 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b6b3" d="M29.9589 4 25.559 42.94h-.4552L29.5037 4z"/><path class="st57" d="M30.414 4l-4.3998 38.94h-.4552L29.959 4z"/><path class="st57" d="M30.8693 4l-4.3999 38.94h-.4552L30.4141 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b4b1" d="M31.3245 4l-4.3999 38.94h-.4552L30.8693 4z"/><path class="st59" d="M31.7797 4l-4.3999 38.94h-.4552L31.3245 4z"/><path class="st59" d="M32.2349 4 27.835 42.94h-.4552L31.7797 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b2af" d="M32.6901 4l-4.3999 38.94h-.4552L32.235 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b2ae" d="M33.1453 4l-4.3998 38.94h-.4553L32.6901 4z"/><path clip-path="url(#SVGID_2_)" fill="#00b1ad" d="M33.6005 4l-4.3998 38.94h-.4552L33.1453 4z"/><path class="st63" d="M34.0557 4 29.656 42.94h-.4552L33.6005 4z"/><path class="st63" d="M41.442 4l.2553.0288v38.9113H29.6559L34.0557 4z"/><g><defs><path id="SVGID_3_" transform="rotate(-135.2127 75.4332 23.2399)" d="M67.3578 15.1645h16.1509v16.1509H67.3578z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" overflow="visible"/></clipPath><path clip-path="url(#SVGID_4_)" fill="#74cbcb" d="M86.8535 18.4911l-.3107-6.6715h.3107z"/><path clip-path="url(#SVGID_4_)" fill="#73cbcb" d="M86.8535 25.5011l-.6372-13.6815h.3265l.3107 6.6715z"/><path clip-path="url(#SVGID_4_)" fill="#73cbca" d="M86.8535 32.5111l-.9637-20.6915h.3265l.6372 13.6815z"/><path clip-path="url(#SVGID_4_)" fill="#72cbca" d="M86.6271 34.6602l-1.0638-22.8406h.3265l.9637 20.6915v2.1491z"/><path clip-path="url(#SVGID_4_)" fill="#71caca" d="M86.3006 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#70caca" d="M85.9741 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st70" d="M85.6476 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st70" d="M85.3211 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#6ec9c9" d="M84.9946 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#6dc9c9" d="M84.6681 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#6cc9c8" d="M84.3416 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#6bc9c8" d="M84.0151 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#6ac8c8" d="M83.6886 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#69c8c8" d="M83.3621 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#68c8c7" d="M83.0356 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#67c8c7" d="M82.709 34.6602l-1.0637-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#66c7c7" d="M82.3826 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#65c7c6" d="M82.056 34.6602l-1.0637-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#63c7c6" d="M81.7296 34.6602l-1.0639-22.8406h.3266l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#62c7c6" d="M81.403 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#61c6c6" d="M81.0766 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#60c6c5" d="M80.75 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#5fc6c5" d="M80.4236 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#5dc5c5" d="M80.097 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#5cc5c4" d="M79.7706 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#5bc5c4" d="M79.444 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#59c5c4" d="M79.1176 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#58c4c3" d="M78.791 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#57c4c3" d="M78.4646 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#55c4c3" d="M78.138 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#54c3c2" d="M77.8116 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#52c3c2" d="M77.485 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#50c3c2" d="M77.1586 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#4fc2c1" d="M76.832 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#4dc2c1" d="M76.5056 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#4bc2c1" d="M76.179 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#4ac1c0" d="M75.8526 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#48c1c0" d="M75.526 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#46c1c0" d="M75.1996 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#44c1bf" d="M74.873 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#42c0bf" d="M74.5466 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#40c0be" d="M74.22 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#3ec0be" d="M73.8936 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#3cbfbe" d="M73.567 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#39bfbd" d="M73.2406 34.6602l-1.0639-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#37bfbd" d="M72.914 34.6602l-1.0638-22.8406h.3265l1.0639 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#34bebd" d="M72.5875 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#32bebc" d="M72.261 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#2fbdbc" d="M71.9345 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#2cbdbb" d="M71.608 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#28bdbb" d="M71.2815 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#25bcbb" d="M70.955 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#21bcba" d="M70.6285 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#1cbcba" d="M70.302 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#16bbba" d="M69.9755 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#0fbbb9" d="M69.649 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#04bbb9" d="M69.3225 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st120" d="M68.996 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st120" d="M68.6695 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st120" d="M68.343 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st121" d="M68.0165 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st121" d="M67.69 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#00b9b6" d="M67.3635 34.6602l-1.0638-22.8406h.3265L67.69 34.6602z"/><path class="st123" d="M67.037 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406zM66.7105 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#00b8b5" d="M66.384 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#00b7b5" d="M66.0575 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st126" d="M65.731 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st126" d="M65.4045 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path clip-path="url(#SVGID_4_)" fill="#00b6b4" d="M65.078 34.6602l-1.0638-22.8406h.3265l1.0638 22.8406z"/><path class="st128" d="M64.7515 34.6602 64.013 18.802v-6.9823h.0013l1.0638 22.8406z"/><path class="st128" d="M64.425 34.6602l-.4121-8.8483v-7.01l.7386 15.8583z"/><path class="st129" d="M64.0985 34.6602l-.0856-1.8383v-7.01l.4121 8.8483z"/><path class="st129" d="M64.0129 32.8219l.0856 1.8383h-.0856z"/></g><g><path class="st0" d="M23.0105 11.6979 11.2639 23.5324l11.8342 11.7468 10.0115-.0372-10.4982-10.4145 51.842-.1923-4.5437 4.5747 5.0057-.0186 5.8734-5.9171-5.917-5.8733-5.0057.0186 4.5776 4.5412-51.8418.1922 10.4203-10.492z"/></g></svg></span><span class="font-weight-bold">gRPC</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/about/" ><span>About</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/meet/" ><span>Meet</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Docs</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/docs/guides/" ><span>Guides</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/videos/" ><span>Videos</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/showcase/" ><span>Showcase</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

      
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="Documentation" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Docs</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docswhat-is-grpc-li">
  <a href="/docs/what-is-grpc/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docswhat-is-grpc"><span class="">What is gRPC?</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhat-is-grpcintroduction-li">
  <a href="/docs/what-is-grpc/introduction/" title="Introduction to gRPC" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhat-is-grpcintroduction"><span class="">Introduction</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhat-is-grpccore-concepts-li">
  <a href="/docs/what-is-grpc/core-concepts/" title="Core concepts, architecture and lifecycle" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhat-is-grpccore-concepts"><span class="">Core concepts</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docswhat-is-grpcfaq-li">
  <a href="/docs/what-is-grpc/faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docswhat-is-grpcfaq"><span class="">FAQ</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docslanguages-li">
  <a href="/docs/languages/" title="Supported languages" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguages"><span class="">Languages</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagescsharp-li">
  <a href="/docs/languages/csharp/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagescsharp"><span class="">C# / .NET</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagescsharpapi-li">
  <a href="/docs/languages/csharp/api/" title="API reference (legacy Grpc.Core only)" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescsharpapi"><span class="">API (legacy)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagescsharpdaily-builds-li">
  <a href="/docs/languages/csharp/daily-builds/" title="Daily builds (Grpc.Tools nuget only)" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescsharpdaily-builds"><span class="">Daily builds (legacy)</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docslanguagescpp-li">
  <a href="/docs/languages/cpp/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagescpp"><span class="">C&#43;&#43;</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguagescppquickstart-li">
  <a href="/docs/languages/cpp/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguagescppbasics-li">
  <a href="/docs/languages/cpp/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppbasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguagescppasync-li">
  <a href="/docs/languages/cpp/async/" title="Asynchronous-API tutorial" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppasync"><span class="">Async-API tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docslanguagescppcallback-li">
  <a href="/docs/languages/cpp/callback/" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppcallback"><span class="td-sidebar-nav-active-item">Asynchronous Callback API Tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguagescppbest_practices-li">
  <a href="/docs/languages/cpp/best_practices/" title="Best Practices" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppbest_practices"><span class="">Best Practices for gRPC C&#43;&#43; API and FAQ</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguagescppalts-li">
  <a href="/docs/languages/cpp/alts/" title="ALTS authentication" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppalts"><span class="">ALTS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguagescppapi-li">
  <a href="/docs/languages/cpp/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagescppapi"><span class="">API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesdart-li">
  <a href="/docs/languages/dart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesdart"><span class="">Dart</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesdartquickstart-li">
  <a href="/docs/languages/dart/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesdartquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesdartbasics-li">
  <a href="/docs/languages/dart/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesdartbasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesdartapi-li">
  <a href="/docs/languages/dart/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesdartapi"><span class="">API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesgo-li">
  <a href="/docs/languages/go/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesgo"><span class="">Go</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesgoquickstart-li">
  <a href="/docs/languages/go/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesgoquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesgobasics-li">
  <a href="/docs/languages/go/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesgobasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesgoalts-li">
  <a href="/docs/languages/go/alts/" title="ALTS authentication" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesgoalts"><span class="">ALTS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesgoapi-li">
  <a href="/docs/languages/go/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesgoapi"><span class="">API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesgogenerated-code-li">
  <a href="/docs/languages/go/generated-code/" title="Generated-code reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesgogenerated-code"><span class="">Generated code</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesgogenerated-code-old-li">
  <a href="/docs/languages/go/generated-code-old/" title="Generated-code (legacy non-generic) reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesgogenerated-code-old"><span class="">Generated-code (legacy)</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesjava-li">
  <a href="/docs/languages/java/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesjava"><span class="">Java</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesjavaquickstart-li">
  <a href="/docs/languages/java/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesjavaquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesjavabasics-li">
  <a href="/docs/languages/java/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesjavabasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesjavaalts-li">
  <a href="/docs/languages/java/alts/" title="ALTS authentication" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesjavaalts"><span class="">ALTS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesjavaapi-li">
  <a href="/docs/languages/java/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesjavaapi"><span class="">API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesjavagenerated-code-li">
  <a href="/docs/languages/java/generated-code/" title="Generated-code reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesjavagenerated-code"><span class="">Generated code</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguageskotlin-li">
  <a href="/docs/languages/kotlin/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguageskotlin"><span class="">Kotlin</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguageskotlinquickstart-li">
  <a href="/docs/languages/kotlin/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguageskotlinquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguageskotlinbasics-li">
  <a href="/docs/languages/kotlin/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguageskotlinbasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguageskotlinapi-li">
  <a href="/docs/languages/kotlin/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguageskotlinapi"><span class="">API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesnode-li">
  <a href="/docs/languages/node/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesnode"><span class="">Node</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesnodequickstart-li">
  <a href="/docs/languages/node/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesnodequickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesnodebasics-li">
  <a href="/docs/languages/node/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesnodebasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesnodeapi-li">
  <a href="/docs/languages/node/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesnodeapi"><span class="">API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesobjective-c-li">
  <a href="/docs/languages/objective-c/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesobjective-c"><span class="">Objective-C</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesobjective-cquickstart-li">
  <a href="/docs/languages/objective-c/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesobjective-cquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesobjective-cbasics-li">
  <a href="/docs/languages/objective-c/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesobjective-cbasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesobjective-coauth2-li">
  <a href="/docs/languages/objective-c/oauth2/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesobjective-coauth2"><span class="">OAuth2</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesobjective-capi-li">
  <a href="/docs/languages/objective-c/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesobjective-capi"><span class="">API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesphp-li">
  <a href="/docs/languages/php/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesphp"><span class="">PHP</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesphpquickstart-li">
  <a href="/docs/languages/php/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesphpquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesphpbasics-li">
  <a href="/docs/languages/php/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesphpbasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesphpapi-li">
  <a href="/docs/languages/php/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesphpapi"><span class="">API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesphpdaily-builds-li">
  <a href="/docs/languages/php/daily-builds/" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesphpdaily-builds"><span class="">Daily builds</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagespython-li">
  <a href="/docs/languages/python/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagespython"><span class="">Python</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagespythonquickstart-li">
  <a href="/docs/languages/python/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagespythonquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagespythonbasics-li">
  <a href="/docs/languages/python/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagespythonbasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagespythonalts-li">
  <a href="/docs/languages/python/alts/" title="ALTS authentication" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagespythonalts"><span class="">ALTS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagespythongenerated-code-li">
  <a href="/docs/languages/python/generated-code/" title="Generated-code reference" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagespythongenerated-code"><span class="">Generated code</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagespythonapi-li">
  <a href="/docs/languages/python/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagespythonapi"><span class="">API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagespythondaily-builds-li">
  <a href="/docs/languages/python/daily-builds/" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagespythondaily-builds"><span class="">Daily builds</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguagesruby-li">
  <a href="/docs/languages/ruby/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguagesruby"><span class="">Ruby</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesrubyquickstart-li">
  <a href="/docs/languages/ruby/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesrubyquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesrubybasics-li">
  <a href="/docs/languages/ruby/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesrubybasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesrubyapi-li">
  <a href="/docs/languages/ruby/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesrubyapi"><span class="">API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguagesrubydaily-builds-li">
  <a href="/docs/languages/ruby/daily-builds/" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguagesrubydaily-builds"><span class="">Daily builds</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsplatforms-li">
  <a href="/docs/platforms/" title="Supported platforms" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsplatforms"><span class="">Platforms</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id="m-docsplatformsandroid-li">
  <a href="/docs/platforms/android/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsplatformsandroid"><span class="">Android</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id="m-docsplatformsandroidjava-li">
  <a href="/docs/platforms/android/java/" title="Android Java" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsplatformsandroidjava"><span class="">Java</span></a>
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformsandroidjavaquickstart-li">
  <a href="/docs/platforms/android/java/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformsandroidjavaquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformsandroidjavabasics-li">
  <a href="/docs/platforms/android/java/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformsandroidjavabasics"><span class="">Basics tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformsandroidjavaapi-li">
  <a href="/docs/platforms/android/java/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformsandroidjavaapi"><span class="">API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id="m-docsplatformsandroidkotlin-li">
  <a href="/docs/platforms/android/kotlin/" title="Kotlin for Android" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsplatformsandroidkotlin"><span class="">Kotlin</span></a>
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformsandroidkotlinquickstart-li">
  <a href="/docs/platforms/android/kotlin/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformsandroidkotlinquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformsandroidkotlinapi-li">
  <a href="/docs/platforms/android/kotlin/api/" title="API reference" target="_blank" rel="noopener" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformsandroidkotlinapi"><span class="">API</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id="m-docsplatformsweb-li">
  <a href="/docs/platforms/web/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsplatformsweb"><span class="">Web</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformswebquickstart-li">
  <a href="/docs/platforms/web/quickstart/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformswebquickstart"><span class="">Quick start</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsplatformswebbasics-li">
  <a href="/docs/platforms/web/basics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsplatformswebbasics"><span class="">Basics tutorial</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsguides-li">
  <a href="/docs/guides/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsguides"><span class="">Guides</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesauth-li">
  <a href="/docs/guides/auth/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesauth"><span class="">Authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesbenchmarking-li">
  <a href="/docs/guides/benchmarking/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesbenchmarking"><span class="">Benchmarking</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidescancellation-li">
  <a href="/docs/guides/cancellation/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidescancellation"><span class="">Cancellation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidescompression-li">
  <a href="/docs/guides/compression/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidescompression"><span class="">Compression</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidescustom-backend-metrics-li">
  <a href="/docs/guides/custom-backend-metrics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidescustom-backend-metrics"><span class="">Custom Backend Metrics</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidescustom-load-balancing-li">
  <a href="/docs/guides/custom-load-balancing/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidescustom-load-balancing"><span class="">Custom Load Balancing Policies</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidescustom-name-resolution-li">
  <a href="/docs/guides/custom-name-resolution/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidescustom-name-resolution"><span class="">Custom Name Resolution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesdeadlines-li">
  <a href="/docs/guides/deadlines/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesdeadlines"><span class="">Deadlines</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesdebugging-li">
  <a href="/docs/guides/debugging/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesdebugging"><span class="">Debugging</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguideserror-li">
  <a href="/docs/guides/error/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguideserror"><span class="">Error handling</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesflow-control-li">
  <a href="/docs/guides/flow-control/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesflow-control"><span class="">Flow Control</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguideshealth-checking-li">
  <a href="/docs/guides/health-checking/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguideshealth-checking"><span class="">Health Checking</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesinterceptors-li">
  <a href="/docs/guides/interceptors/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesinterceptors"><span class="">Interceptors</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguideskeepalive-li">
  <a href="/docs/guides/keepalive/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguideskeepalive"><span class="">Keepalive</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesmetadata-li">
  <a href="/docs/guides/metadata/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesmetadata"><span class="">Metadata</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesopentelemetry-metrics-li">
  <a href="/docs/guides/opentelemetry-metrics/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesopentelemetry-metrics"><span class="">OpenTelemetry Metrics</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesperformance-li">
  <a href="/docs/guides/performance/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesperformance"><span class="">Performance Best Practices</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesreflection-li">
  <a href="/docs/guides/reflection/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesreflection"><span class="">Reflection</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesrequest-hedging-li">
  <a href="/docs/guides/request-hedging/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesrequest-hedging"><span class="">Request Hedging</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesretry-li">
  <a href="/docs/guides/retry/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesretry"><span class="">Retry</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesservice-config-li">
  <a href="/docs/guides/service-config/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesservice-config"><span class="">Service Config</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguidesstatus-codes-li">
  <a href="/docs/guides/status-codes/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguidesstatus-codes"><span class="">Status Codes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsguideswait-for-ready-li">
  <a href="/docs/guides/wait-for-ready/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsguideswait-for-ready"><span class="">Wait-for-Ready</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/grpc/grpc.io/tree/main/content/en/docs/languages/cpp/callback.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/grpc/grpc.io/edit/main/content/en/docs/languages/cpp/callback.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/grpc/grpc.io/new/main/content/en/docs/languages/cpp/callback.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/grpc/grpc.io/issues/new?title=Asynchronous%20Callback%20API%20Tutorial" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/grpc/grpc.io/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#example-code">Example Code</a></li>
    <li><a href="#service-to-implement">Service to Implement</a></li>
    <li><a href="#unary-rpc">Unary RPC</a>
      <ul>
        <li><a href="#server">Server</a></li>
        <li><a href="#custom-unary-reactor">Custom Unary Reactor</a></li>
        <li><a href="#client">Client</a></li>
      </ul>
    </li>
    <li><a href="#server-side-streaming-rpc">Server-side streaming RPC</a>
      <ul>
        <li><a href="#server-1">Server</a></li>
        <li><a href="#client-1">Client</a></li>
      </ul>
    </li>
    <li><a href="#client-side-streaming-rpc">Client-side streaming RPC</a>
      <ul>
        <li><a href="#server-2">Server</a></li>
        <li><a href="#client-2">Client</a></li>
      </ul>
    </li>
    <li><a href="#bidirectional-streaming-rpc">Bidirectional streaming RPC</a>
      <ul>
        <li><a href="#server-3">Server</a></li>
        <li><a href="#client-3">Client</a></li>
      </ul>
    </li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://grpc.io/docs/">Docs</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://grpc.io/docs/languages/">Languages</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://grpc.io/docs/languages/cpp/">C&#43;&#43;</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://grpc.io/docs/languages/cpp/callback/" aria-disabled="true" class="btn-link disabled">Asynchronous Callback API Tutorial</a>
  </li>
  </ol>
</nav>
            
<h1 class="mb-4 font-weight-bold">Asynchronous Callback API Tutorial</h1>
<p class="lead pb-2"></p>
<div class="d-xl-none td-toc td-toc--inline d-print-none">
  
  
    
      <a id="td-content__toc-link" href="#td-content__toc" data-toggle="collapse" aria-controls="td-docs-toc" aria-expanded="false" aria-label="Toggle toc navigation">
        <span class="lead">Contents<i class="fas fa-chevron-right ml-2"></i></span>
      </a>
      <div id="td-content__toc" class="collapse">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#example-code">Example Code</a></li>
    <li><a href="#service-to-implement">Service to Implement</a></li>
    <li><a href="#unary-rpc">Unary RPC</a>
      <ul>
        <li><a href="#server">Server</a></li>
        <li><a href="#custom-unary-reactor">Custom Unary Reactor</a></li>
        <li><a href="#client">Client</a></li>
      </ul>
    </li>
    <li><a href="#server-side-streaming-rpc">Server-side streaming RPC</a>
      <ul>
        <li><a href="#server-1">Server</a></li>
        <li><a href="#client-1">Client</a></li>
      </ul>
    </li>
    <li><a href="#client-side-streaming-rpc">Client-side streaming RPC</a>
      <ul>
        <li><a href="#server-2">Server</a></li>
        <li><a href="#client-2">Client</a></li>
      </ul>
    </li>
    <li><a href="#bidirectional-streaming-rpc">Bidirectional streaming RPC</a>
      <ul>
        <li><a href="#server-3">Server</a></li>
        <li><a href="#client-3">Client</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
      <button id="td-content__toc-link-expanded" href="#td-content__toc" class="btn btn-small ml-1 my-2 py-0 px-3" data-toggle="collapse" aria-controls="td-docs-toc" aria-expanded="true" aria-label="Toggle toc navigation">
      </button>
    
  


</div>
<div class="td-content">
	<h1>Asynchronous Callback API Tutorial</h1>
	
	<header class="article-meta">
		

  
    


  
    


  

		
	</header>    
	<p>This tutorial shows you how to write a simple server and client in C++ using
gRPC&rsquo;s asynchronous callback APIs. The example used in this tutorial follows the
<a href="https://github.com/grpc/grpc/tree/v1.66.0/examples/cpp/route_guide" target="_blank" rel="noopener">RouteGuide example<i class="fas fa-external-link-alt"></i></a>.</p>
<h2 id="overview">Overview</h2>
<p>gRPC C++ offers two kinds of APIs: sync APIs and async APIs. More specifically,
we have two kinds of async APIs: the old one is completion-queue based; the new
one is callback-based, which is easier to use. In this tutorial, we will focus
on the callback-based async APIs (callback APIs for short). You will learn how
to use the callback APIs to implement the server and the client for the
following kinds of RPCs:</p>
<ul>
<li>Unary RPC</li>
<li>Server-side streaming RPC</li>
<li>Client-side streaming RPC</li>
<li>Bidirectional streaming RPC</li>
</ul>
<h2 id="example-code">Example Code</h2>
<p>In this tutorial, we are going to create a route guiding application. The
clients can get information about features on their route, create a summary of
their route, and exchange route information such as traffic updates with the
server and other clients.</p>
<p>Below is the service interface defined in Protocol Buffers.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-protobuf" data-lang="protobuf"><span style="display:flex;"><span><span style="color:#09f;font-style:italic">// Interface exported by the server.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">service</span> RouteGuide {<span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa"></span>  <span style="color:#09f;font-style:italic">// A simple RPC.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// Obtains the feature at a given position.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// A feature with an empty name is returned if there&#39;s no feature at the given
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// position.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#069;font-weight:bold">rpc</span> GetFeature(Point) <span style="color:#069;font-weight:bold">returns</span> (Feature) {}<span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa"></span>  <span style="color:#09f;font-style:italic">// A server-to-client streaming RPC.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// Obtains the Features available within the given Rectangle.  Results are
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// streamed rather than returned at once (e.g. in a response message with a
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// repeated field), as the rectangle may cover a large area and contain a
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// huge number of features.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#069;font-weight:bold">rpc</span> ListFeatures(Rectangle) <span style="color:#069;font-weight:bold">returns</span> (stream Feature) {}<span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa"></span>  <span style="color:#09f;font-style:italic">// A client-to-server streaming RPC.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// Accepts a stream of Points on a route being traversed, returning a
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// RouteSummary when traversal is completed.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#069;font-weight:bold">rpc</span> RecordRoute(stream Point) <span style="color:#069;font-weight:bold">returns</span> (RouteSummary) {}<span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa"></span>  <span style="color:#09f;font-style:italic">// A Bidirectional streaming RPC.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">//
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// Accepts a stream of RouteNotes sent while a route is being traversed,
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#09f;font-style:italic">// while receiving other RouteNotes (e.g. from other users).
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>  <span style="color:#069;font-weight:bold">rpc</span> RouteChat(stream RouteNote) <span style="color:#069;font-weight:bold">returns</span> (stream RouteNote) {}<span style="color:#a00;background-color:#faa">
</span></span></span><span style="display:flex;"><span><span style="color:#a00;background-color:#faa"></span>}<span style="color:#a00;background-color:#faa">
</span></span></span></code></pre></div><p>The same example is also implemented using the <em>sync</em> APIs. If you are
interested, you can compare the two implementations.</p>
<h2 id="service-to-implement">Service to Implement</h2>
<p>Since we want to implement the service using the callback APIs, the service
interface we should implement is <code>RouteGuide::CallbackService</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">RouteGuideImpl</span> <span style="color:#069;font-weight:bold">final</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> RouteGuide<span style="color:#555">::</span>CallbackService {
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>We will implement all the four RPCs in this service in the <code>Server</code> subsections
of the following sections.</p>
<h2 id="unary-rpc">Unary RPC</h2>
<p>Let&rsquo;s begin with the simplest RPC: <code>GetFeature</code>, which is a unary RPC. By
<code>GetFeature</code>, the client sends a <code>Point</code> to the server, and then the server
returns the <code>Feature</code> of that <code>Point</code> to the client.</p>
<h3 id="server">Server</h3>
<p>The implementation of this RPC is quite simple and straightforward.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  grpc<span style="color:#555">::</span>ServerUnaryReactor<span style="color:#555">*</span> GetFeature(CallbackServerContext<span style="color:#555">*</span> context,
</span></span><span style="display:flex;"><span>                                       <span style="color:#069;font-weight:bold">const</span> Point<span style="color:#555">*</span> point,
</span></span><span style="display:flex;"><span>                                       Feature<span style="color:#555">*</span> feature) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>    feature<span style="color:#555">-&gt;</span>set_name(GetFeatureName(<span style="color:#555">*</span>point, feature_list_));
</span></span><span style="display:flex;"><span>    feature<span style="color:#555">-&gt;</span>mutable_location()<span style="color:#555">-&gt;</span>CopyFrom(<span style="color:#555">*</span>point);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">auto</span><span style="color:#555">*</span> reactor <span style="color:#555">=</span> context<span style="color:#555">-&gt;</span>DefaultReactor();
</span></span><span style="display:flex;"><span>    reactor<span style="color:#555">-&gt;</span>Finish(Status<span style="color:#555">::</span>OK);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> reactor;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>After setting the output fields of <code>Feature</code>, we return the final status via the
<code>ServerUnaryReactor</code>.</p>
<h3 id="custom-unary-reactor">Custom Unary Reactor</h3>
<p>The above example uses the Default Reactor. We could also use a custom reactor
here if we want to handle specific actions such as RPC cancellation or run an
action asynchronously when the RPC is done. In the below example we add logs for
both actions.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  grpc<span style="color:#555">::</span>ServerUnaryReactor<span style="color:#555">*</span> GetFeature(grpc<span style="color:#555">::</span>CallbackServerContext<span style="color:#555">*</span> context,
</span></span><span style="display:flex;"><span>                                       <span style="color:#069;font-weight:bold">const</span> Point<span style="color:#555">*</span> point,
</span></span><span style="display:flex;"><span>                                       Feature<span style="color:#555">*</span> feature) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Reactor</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ServerUnaryReactor {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      Reactor(<span style="color:#069;font-weight:bold">const</span> Point<span style="color:#555">&amp;</span> point, <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;&amp;</span> feature_list,
</span></span><span style="display:flex;"><span>              Feature<span style="color:#555">*</span> feature) {
</span></span><span style="display:flex;"><span>        feature<span style="color:#555">-&gt;</span>set_name(GetFeatureName(point, feature_list));
</span></span><span style="display:flex;"><span>        <span style="color:#555">*</span>feature<span style="color:#555">-&gt;</span>mutable_location() <span style="color:#555">=</span> point;
</span></span><span style="display:flex;"><span>        Finish(grpc<span style="color:#555">::</span>Status<span style="color:#555">::</span>OK);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> OnDone() <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        LOG(INFO) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Completed&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">delete</span> <span style="color:#069;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnCancel</span>() <span style="color:#069;font-weight:bold">override</span> { LOG(ERROR) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Cancelled&#34;</span>; }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#069;font-weight:bold">new</span> <span style="color:#c0f">Reactor</span>(<span style="color:#555">*</span>point, feature_list_, feature);
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>For <code>ServerUnaryReactor</code>, we need to override <code>OnDone()</code>, and optionally
<code>OnCancel()</code>.</p>
<blockquote>
<p><strong>NOTE</strong> The callback methods (e.g., <code>OnDone()</code>) are supposed to return
quickly. Never perform blocking work (e.g., waiting for an event) in such
callbacks.</p>
</blockquote>
<p>The <code>ServerUnaryReactor</code>&rsquo;s constructor is called when <code>GetFeature()</code> constructs
and provides the reactor in response to the started RPC. It collects the request
<code>Point</code>, the response <code>Feature</code> and the <code>feature_list</code>. It then gets the
response <code>Feature</code> from the <code>Point</code> and adds it to the feature_list as well. To
finish the RPC we call <code>Finish(Status::OK)</code>.</p>
<p><code>OnDone()</code> reacts to the RPC completion. We will do the final cleanup in
<code>OnDone()</code> and log the end of the RPC.</p>
<p><code>OnCancel()</code> reacts to the cancellation of the RPC. Here, we log the occurrence
of a cancellation in this method.</p>
<h3 id="client">Client</h3>
<p>NOTE: For simplicity, we will not discuss how to create a channel and a stub in
this tutorial. Please refer to <a href="/docs/languages/cpp/basics/">Basics tutorial</a>
for that.</p>
<p>To start a <code>GetFeature</code> RPC, besides a <code>ClientContext</code>, a request (i.e.,
<code>Point</code>), and a response (i.e., <code>Feature</code>), the client also needs to pass a
callback (i.e., <code>std::function&lt;void(::grpc::Status)&gt;</code>) to
<code>stub_-&gt;async()-&gt;GetFeature()</code>. The callback will be invoked after the server
has fulfilled the request and the RPC is finished.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  <span style="color:#078;font-weight:bold">bool</span> <span style="color:#c0f">GetOneFeature</span>(<span style="color:#069;font-weight:bold">const</span> Point<span style="color:#555">&amp;</span> point, Feature<span style="color:#555">*</span> feature) {
</span></span><span style="display:flex;"><span>    ClientContext context;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">bool</span> result;
</span></span><span style="display:flex;"><span>    std<span style="color:#555">::</span>mutex mu;
</span></span><span style="display:flex;"><span>    std<span style="color:#555">::</span>condition_variable cv;
</span></span><span style="display:flex;"><span>    <span style="color:#078;font-weight:bold">bool</span> done <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    stub_<span style="color:#555">-&gt;</span>async()<span style="color:#555">-&gt;</span>GetFeature(
</span></span><span style="display:flex;"><span>        <span style="color:#555">&amp;</span>context, <span style="color:#555">&amp;</span>point, feature,
</span></span><span style="display:flex;"><span>        [<span style="color:#555">&amp;</span>result, <span style="color:#555">&amp;</span>mu, <span style="color:#555">&amp;</span>cv, <span style="color:#555">&amp;</span>done, feature, <span style="color:#069;font-weight:bold">this</span>](Status status) {
</span></span><span style="display:flex;"><span>          <span style="color:#078;font-weight:bold">bool</span> ret;
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>status.ok()) {
</span></span><span style="display:flex;"><span>            std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;GetFeature rpc failed.&#34;</span> <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>            ret <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>          } <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>feature<span style="color:#555">-&gt;</span>has_location()) {
</span></span><span style="display:flex;"><span>            std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Server returns incomplete feature.&#34;</span> <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>            ret <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>          } <span style="color:#069;font-weight:bold">else</span> <span style="color:#069;font-weight:bold">if</span> (feature<span style="color:#555">-&gt;</span>name().empty()) {
</span></span><span style="display:flex;"><span>            std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Found no feature at &#34;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#555">&lt;&lt;</span> feature<span style="color:#555">-&gt;</span>location().latitude() <span style="color:#555">/</span> kCoordFactor_ <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#555">&lt;&lt;</span> feature<span style="color:#555">-&gt;</span>location().longitude() <span style="color:#555">/</span> kCoordFactor_
</span></span><span style="display:flex;"><span>                      <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>            ret <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>          } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Found feature called &#34;</span> <span style="color:#555">&lt;&lt;</span> feature<span style="color:#555">-&gt;</span>name() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; at &#34;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#555">&lt;&lt;</span> feature<span style="color:#555">-&gt;</span>location().latitude() <span style="color:#555">/</span> kCoordFactor_ <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#555">&lt;&lt;</span> feature<span style="color:#555">-&gt;</span>location().longitude() <span style="color:#555">/</span> kCoordFactor_
</span></span><span style="display:flex;"><span>                      <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>            ret <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          std<span style="color:#555">::</span>lock_guard<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> lock(mu);
</span></span><span style="display:flex;"><span>          result <span style="color:#555">=</span> ret;
</span></span><span style="display:flex;"><span>          done <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>          cv.notify_one();
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> lock(mu);
</span></span><span style="display:flex;"><span>    cv.wait(lock, [<span style="color:#555">&amp;</span>done] { <span style="color:#069;font-weight:bold">return</span> done; });
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> result;
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>A callback can do various follow-up work for a unary RPC. For example, the
callback in the above snippet checks the status and the returned feature, frees
the heap-allocated objects for this call, and finally notifies that the RPC is
done.</p>
<p>For simplicity, the example shows the same function waiting on the notification
for the RPC completion, but that&rsquo;s not necessary.</p>
<h2 id="server-side-streaming-rpc">Server-side streaming RPC</h2>
<p>Now let&rsquo;s look at a more complex RPC - <code>ListFeatures</code>. <code>ListFeatures</code> is a
server-side streaming RPC. The client sends a <code>Rectangle</code> to the server, and the
server will return a sequence of <code>Feature</code>s to the client, each of which is sent
in a separate message.</p>
<h3 id="server-1">Server</h3>
<p>For any streaming RPC, including the server-side streaming RPC, the RPC
handler&rsquo;s interface is similar. The handler does not have any input parameters;
the return type is some kind of server reactor, which handles all the business
logic for one RPC.</p>
<p>Below is the handler interface of <code>ListFeatures</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  grpc<span style="color:#555">::</span>ServerWriteReactor<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> ListFeatures(
</span></span><span style="display:flex;"><span>      CallbackServerContext<span style="color:#555">*</span> context,
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> routeguide<span style="color:#555">::</span>Rectangle<span style="color:#555">*</span> rectangle);
</span></span></code></pre></div><p>Because <code>ListFeatures</code> is a server-streaming RPC, the return type should be
<code>ServerWriteReactor</code>. <code>ServerWriteReactor</code> has two template parameters:
<code>Rectangle</code> is the type of the request from the client; <code>Feature</code> is the type of
each response message from the server.</p>
<p>The complexity of handling an RPC is delegated to the <code>ServerWriteReactor</code>.
Below is how we implement the <code>ServerWriteReactor</code> to handle a <code>ListFeatures</code>
RPC.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  grpc<span style="color:#555">::</span>ServerWriteReactor<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> ListFeatures(
</span></span><span style="display:flex;"><span>      CallbackServerContext<span style="color:#555">*</span> context,
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> routeguide<span style="color:#555">::</span>Rectangle<span style="color:#555">*</span> rectangle) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Lister</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ServerWriteReactor<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      Lister(<span style="color:#069;font-weight:bold">const</span> routeguide<span style="color:#555">::</span>Rectangle<span style="color:#555">*</span> rectangle,
</span></span><span style="display:flex;"><span>             <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> feature_list)
</span></span><span style="display:flex;"><span>          <span style="color:#555">:</span> left_((std<span style="color:#555">::</span>min)(rectangle<span style="color:#555">-&gt;</span>lo().longitude(),
</span></span><span style="display:flex;"><span>                             rectangle<span style="color:#555">-&gt;</span>hi().longitude())),
</span></span><span style="display:flex;"><span>            right_((std<span style="color:#555">::</span>max)(rectangle<span style="color:#555">-&gt;</span>lo().longitude(),
</span></span><span style="display:flex;"><span>                              rectangle<span style="color:#555">-&gt;</span>hi().longitude())),
</span></span><span style="display:flex;"><span>            top_((std<span style="color:#555">::</span>max)(rectangle<span style="color:#555">-&gt;</span>lo().latitude(),
</span></span><span style="display:flex;"><span>                            rectangle<span style="color:#555">-&gt;</span>hi().latitude())),
</span></span><span style="display:flex;"><span>            bottom_((std<span style="color:#555">::</span>min)(rectangle<span style="color:#555">-&gt;</span>lo().latitude(),
</span></span><span style="display:flex;"><span>                               rectangle<span style="color:#555">-&gt;</span>hi().latitude())),
</span></span><span style="display:flex;"><span>            feature_list_(feature_list),
</span></span><span style="display:flex;"><span>            next_feature_(feature_list_<span style="color:#555">-&gt;</span>begin()) {
</span></span><span style="display:flex;"><span>        NextWrite();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnWriteDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>ok) {
</span></span><span style="display:flex;"><span>          Finish(Status(grpc<span style="color:#555">::</span>StatusCode<span style="color:#555">::</span>UNKNOWN, <span style="color:#c30">&#34;Unexpected Failure&#34;</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        NextWrite();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnDone</span>() <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        LOG(INFO) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Completed&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">delete</span> <span style="color:#069;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnCancel</span>() <span style="color:#069;font-weight:bold">override</span> { LOG(ERROR) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Cancelled&#34;</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> NextWrite() {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">while</span> (next_feature_ <span style="color:#555">!=</span> feature_list_<span style="color:#555">-&gt;</span>end()) {
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">const</span> Feature<span style="color:#555">&amp;</span> f <span style="color:#555">=</span> <span style="color:#555">*</span>next_feature_;
</span></span><span style="display:flex;"><span>          next_feature_<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">if</span> (f.location().longitude() <span style="color:#555">&gt;=</span> left_ <span style="color:#555">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>              f.location().longitude() <span style="color:#555">&lt;=</span> right_ <span style="color:#555">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>              f.location().latitude() <span style="color:#555">&gt;=</span> bottom_ <span style="color:#555">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>              f.location().latitude() <span style="color:#555">&lt;=</span> top_) {
</span></span><span style="display:flex;"><span>            StartWrite(<span style="color:#555">&amp;</span>f);
</span></span><span style="display:flex;"><span>            <span style="color:#069;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// Didn&#39;t write anything, all is done.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        Finish(Status<span style="color:#555">::</span>OK);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">long</span> left_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">long</span> right_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">long</span> top_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> <span style="color:#078;font-weight:bold">long</span> bottom_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> feature_list_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;::</span>const_iterator next_feature_;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#069;font-weight:bold">new</span> <span style="color:#c0f">Lister</span>(rectangle, <span style="color:#555">&amp;</span>feature_list_);
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>Different reactors have different callback methods. We need to override the
methods we are interested in to implement our RPC. For <code>ListFeatures</code>, we need
to override <code>OnWriteDone()</code>, <code>OnDone()</code> and optionally <code>OnCancel</code>.</p>
<p>The <code>ServerWriteReactor</code>&rsquo;s constructor is called when <code>ListFeatures()</code>
constructs and provides the reactor in response to the started RPC. It collects
all the <code>Feature</code>s within <code>rectangle</code> into <code>features_to_send_</code>, and starts
sending them, if any.</p>
<p><code>OnWriteDone()</code> reacts to a write completion. If the write was done
successfully, we continue to send the next <code>Feature</code> until <code>features_to_send_</code>
is empty, at which point we will call <code>Finish(Status::OK)</code> to finish the call.</p>
<p><code>OnDone()</code> reacts to the RPC completion. We will do the final cleanup in
<code>OnDone()</code>.</p>
<p><code>OnCancel()</code> reacts to the cancellation of the RPC. We log the occurrence of a
cancellation in this method.</p>
<h3 id="client-1">Client</h3>
<p>Similar to the server side, the client side needs to implement some kind of
client reactor to interact with the server. A client reactor encapsulates all
the operations needed to process an RPC.</p>
<p>Since <code>ListFeatures</code> is server-streaming, we should implement a
<code>ClientReadReactor</code>, which has a name that is symmetric to <code>ServerWriteReactor</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Reader</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ClientReadReactor<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      Reader(RouteGuide<span style="color:#555">::</span>Stub<span style="color:#555">*</span> stub, <span style="color:#078;font-weight:bold">float</span> coord_factor,
</span></span><span style="display:flex;"><span>             <span style="color:#069;font-weight:bold">const</span> routeguide<span style="color:#555">::</span>Rectangle<span style="color:#555">&amp;</span> rect)
</span></span><span style="display:flex;"><span>          <span style="color:#555">:</span> coord_factor_(coord_factor) {
</span></span><span style="display:flex;"><span>        stub<span style="color:#555">-&gt;</span>async()<span style="color:#555">-&gt;</span>ListFeatures(<span style="color:#555">&amp;</span>context_, <span style="color:#555">&amp;</span>rect, <span style="color:#069;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        StartRead(<span style="color:#555">&amp;</span>feature_);
</span></span><span style="display:flex;"><span>        StartCall();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnReadDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (ok) {
</span></span><span style="display:flex;"><span>          std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Found feature called &#34;</span> <span style="color:#555">&lt;&lt;</span> feature_.name() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; at &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> feature_.location().latitude() <span style="color:#555">/</span> coord_factor_ <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> feature_.location().longitude() <span style="color:#555">/</span> coord_factor_
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>          StartRead(<span style="color:#555">&amp;</span>feature_);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnDone</span>(<span style="color:#069;font-weight:bold">const</span> Status<span style="color:#555">&amp;</span> s) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> l(mu_);
</span></span><span style="display:flex;"><span>        status_ <span style="color:#555">=</span> s;
</span></span><span style="display:flex;"><span>        done_ <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>        cv_.notify_one();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      Status <span style="color:#c0f">Await</span>() {
</span></span><span style="display:flex;"><span>        std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> l(mu_);
</span></span><span style="display:flex;"><span>        cv_.wait(l, [<span style="color:#069;font-weight:bold">this</span>] { <span style="color:#069;font-weight:bold">return</span> done_; });
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> std<span style="color:#555">::</span>move(status_);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      ClientContext context_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">float</span> coord_factor_;
</span></span><span style="display:flex;"><span>      Feature feature_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>mutex mu_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>condition_variable cv_;
</span></span><span style="display:flex;"><span>      Status status_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">bool</span> done_ <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    };
</span></span></code></pre></div><p>The <code>ClientReadReactor</code> is templatized with one parameter, <code>Feature</code>, which is
the type of response message from the server.</p>
<p>In the constructor of <code>Reader</code>, we pass the <code>ClientContext</code>, <code>&amp;rectangle_</code> (the
request object), and the <code>Reader</code> to the RPC method
<code>stub-&gt;async()-&gt;ListFeatures()</code>. Then we pass the <code>&amp;feature_</code> to <code>StartRead()</code>
to specify where to store the received response. Finally, we call <code>StartCall()</code>
to activate the RPC!</p>
<p><code>OnReadDone()</code> reacts to read completion. If the read was done successfully, we
continue to read the next <code>Feature</code> until we fail to do so, indicated by <code>ok</code>
being <code>false</code>.</p>
<p><code>OnDone()</code> reacts to the RPC completion. It checks the RPC status outcome and
notifies the conditional variable waiting for <code>OnDone()</code>.</p>
<p><code>Await()</code> is not a method of <code>ClientReadReactor</code>. This is just added for
simplicity, so that the example knows that the RPC is done. Alternatively, if
there were no need for a notification on completion, <code>OnDone()</code> could simply
perform return after cleanup, for example, freeing up heap allocated objects.</p>
<p>To initiate an RPC, the client simply instantiates a <code>ReadReactor</code> and waits for
the RPC completion.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>    routeguide<span style="color:#555">::</span>Rectangle rect;
</span></span><span style="display:flex;"><span>    Feature feature;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    rect.mutable_lo()<span style="color:#555">-&gt;</span>set_latitude(<span style="color:#f60">400000000</span>);
</span></span><span style="display:flex;"><span>    rect.mutable_lo()<span style="color:#555">-&gt;</span>set_longitude(<span style="color:#555">-</span><span style="color:#f60">750000000</span>);
</span></span><span style="display:flex;"><span>    rect.mutable_hi()<span style="color:#555">-&gt;</span>set_latitude(<span style="color:#f60">420000000</span>);
</span></span><span style="display:flex;"><span>    rect.mutable_hi()<span style="color:#555">-&gt;</span>set_longitude(<span style="color:#555">-</span><span style="color:#f60">730000000</span>);
</span></span><span style="display:flex;"><span>    std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Looking for features between 40, -75 and 42, -73&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Reader <span style="color:#c0f">reader</span>(stub_.get(), kCoordFactor_, rect);
</span></span><span style="display:flex;"><span>    Status status <span style="color:#555">=</span> reader.Await();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (status.ok()) {
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;ListFeatures rpc succeeded.&#34;</span> <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>    } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;ListFeatures rpc failed.&#34;</span> <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="client-side-streaming-rpc">Client-side streaming RPC</h2>
<p>Once you understand the idea of server-side streaming RPC in the previous
section, you should find the client-side streaming RPC easy to learn.</p>
<p><code>RecordRoute</code> is the client-side streaming RPC we will discuss. The client sends
a sequence of <code>Point</code>s to the server, and the server will return a
<code>RouteSummary</code> after the client has finished sending the <code>Point</code>s.</p>
<h3 id="server-2">Server</h3>
<p>The RPC handler&rsquo;s interface for a client-side streaming RPC does not have any
input parameters, and its return type is a server reactor, namely, a
<code>ServerReadReactor</code>.</p>
<p>The <code>ServerReadReactor</code> has two template parameters: <code>Point</code> is the type of each
request message from the client; <code>RouteSummary</code> is the type of the response from
the server.</p>
<p>Similar to <code>ServerWriteReactor</code>, <code>ServerReadReactor</code> is the class that handles
an RPC.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>grpc<span style="color:#555">::</span>ServerReadReactor<span style="color:#555">&lt;</span>Point<span style="color:#555">&gt;*</span> RecordRoute(CallbackServerContext<span style="color:#555">*</span> context,
</span></span><span style="display:flex;"><span>                                              RouteSummary<span style="color:#555">*</span> summary) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Recorder</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ServerReadReactor<span style="color:#555">&lt;</span>Point<span style="color:#555">&gt;</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      Recorder(RouteSummary<span style="color:#555">*</span> summary, <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> feature_list)
</span></span><span style="display:flex;"><span>          <span style="color:#555">:</span> start_time_(system_clock<span style="color:#555">::</span>now()),
</span></span><span style="display:flex;"><span>            summary_(summary),
</span></span><span style="display:flex;"><span>            feature_list_(feature_list) {
</span></span><span style="display:flex;"><span>        StartRead(<span style="color:#555">&amp;</span>point_);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnReadDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (ok) {
</span></span><span style="display:flex;"><span>          point_count_<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>GetFeatureName(point_, <span style="color:#555">*</span>feature_list_).empty()) {
</span></span><span style="display:flex;"><span>            feature_count_<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">if</span> (point_count_ <span style="color:#555">!=</span> <span style="color:#f60">1</span>) {
</span></span><span style="display:flex;"><span>            distance_ <span style="color:#555">+=</span> GetDistance(previous_, point_);
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          previous_ <span style="color:#555">=</span> point_;
</span></span><span style="display:flex;"><span>          StartRead(<span style="color:#555">&amp;</span>point_);
</span></span><span style="display:flex;"><span>        } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          summary_<span style="color:#555">-&gt;</span>set_point_count(point_count_);
</span></span><span style="display:flex;"><span>          summary_<span style="color:#555">-&gt;</span>set_feature_count(feature_count_);
</span></span><span style="display:flex;"><span>          summary_<span style="color:#555">-&gt;</span>set_distance(<span style="color:#069;font-weight:bold">static_cast</span><span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">long</span><span style="color:#555">&gt;</span>(distance_));
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">auto</span> secs <span style="color:#555">=</span> std<span style="color:#555">::</span>chrono<span style="color:#555">::</span>duration_cast<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>chrono<span style="color:#555">::</span>seconds<span style="color:#555">&gt;</span>(
</span></span><span style="display:flex;"><span>              system_clock<span style="color:#555">::</span>now() <span style="color:#555">-</span> start_time_);
</span></span><span style="display:flex;"><span>          summary_<span style="color:#555">-&gt;</span>set_elapsed_time(secs.count());
</span></span><span style="display:flex;"><span>          Finish(Status<span style="color:#555">::</span>OK);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnDone</span>() <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        LOG(INFO) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Completed&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">delete</span> <span style="color:#069;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnCancel</span>() <span style="color:#069;font-weight:bold">override</span> { LOG(ERROR) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Cancelled&#34;</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      system_clock<span style="color:#555">::</span>time_point start_time_;
</span></span><span style="display:flex;"><span>      RouteSummary<span style="color:#555">*</span> summary_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> feature_list_;
</span></span><span style="display:flex;"><span>      Point point_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">int</span> point_count_ <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">int</span> feature_count_ <span style="color:#555">=</span> <span style="color:#f60">0</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">float</span> distance_ <span style="color:#555">=</span> <span style="color:#f60">0.0</span>;
</span></span><span style="display:flex;"><span>      Point previous_;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#069;font-weight:bold">new</span> <span style="color:#c0f">Recorder</span>(summary, <span style="color:#555">&amp;</span>feature_list_);
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>The <code>ServerReadReactor</code>&rsquo;s constructor is called when <code>RecordRoute()</code> constructs
and provides the reactor in response to the started RPC. The constructor stores
the <code>RouteSummary*</code> to return the response later, and initiates a read operation
by calling <code>StartRead(&amp;point_)</code>.</p>
<p><code>OnReadDone()</code> reacts to a read completion. If the read was done successfully,
we update the stats with the newly received <code>Point</code>, and continue to read next
<code>Point</code> until we fail to do so, indicated by <code>ok</code> being <code>false</code>. Upon read
failure, the server will set the response into <code>summary_</code> and call
<code>Finish(Status::OK)</code> to finish the RPC.</p>
<p><code>OnDone()</code> reacts to the RPC completion. We will do the final cleanup in
<code>OnDone()</code>.</p>
<p><code>OnCancel()</code> reacts to the cancellation of the RPC. We log the occurrence of a
cancellation in this method.</p>
<h3 id="client-2">Client</h3>
<p>Unsurprisingly, we need to implement a client reactor for the client side, and
that client reactor is called <code>ClientWriteReactor</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Recorder</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ClientWriteReactor<span style="color:#555">&lt;</span>Point<span style="color:#555">&gt;</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      Recorder(RouteGuide<span style="color:#555">::</span>Stub<span style="color:#555">*</span> stub, <span style="color:#078;font-weight:bold">float</span> coord_factor,
</span></span><span style="display:flex;"><span>               <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> feature_list)
</span></span><span style="display:flex;"><span>          <span style="color:#555">:</span> coord_factor_(coord_factor),
</span></span><span style="display:flex;"><span>            feature_list_(feature_list),
</span></span><span style="display:flex;"><span>            generator_(
</span></span><span style="display:flex;"><span>                std<span style="color:#555">::</span>chrono<span style="color:#555">::</span>system_clock<span style="color:#555">::</span>now().time_since_epoch().count()),
</span></span><span style="display:flex;"><span>            feature_distribution_(<span style="color:#f60">0</span>, feature_list<span style="color:#555">-&gt;</span>size() <span style="color:#555">-</span> <span style="color:#f60">1</span>),
</span></span><span style="display:flex;"><span>            delay_distribution_(<span style="color:#f60">500</span>, <span style="color:#f60">1500</span>) {
</span></span><span style="display:flex;"><span>        stub<span style="color:#555">-&gt;</span>async()<span style="color:#555">-&gt;</span>RecordRoute(<span style="color:#555">&amp;</span>context_, <span style="color:#555">&amp;</span>stats_, <span style="color:#069;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// Use a hold since some StartWrites are invoked indirectly from a
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">// delayed lambda in OnWriteDone rather than directly from the reaction
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        <span style="color:#09f;font-style:italic">// itself
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        AddHold();
</span></span><span style="display:flex;"><span>        NextWrite();
</span></span><span style="display:flex;"><span>        StartCall();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnWriteDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#09f;font-style:italic">// Delay and then do the next write or WritesDone
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>        alarm_.Set(
</span></span><span style="display:flex;"><span>            std<span style="color:#555">::</span>chrono<span style="color:#555">::</span>system_clock<span style="color:#555">::</span>now() <span style="color:#555">+</span>
</span></span><span style="display:flex;"><span>                std<span style="color:#555">::</span>chrono<span style="color:#555">::</span>milliseconds(delay_distribution_(generator_)),
</span></span><span style="display:flex;"><span>            [<span style="color:#069;font-weight:bold">this</span>](<span style="color:#078;font-weight:bold">bool</span> <span style="color:#09f;font-style:italic">/*ok*/</span>) { NextWrite(); });
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnDone</span>(<span style="color:#069;font-weight:bold">const</span> Status<span style="color:#555">&amp;</span> s) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> l(mu_);
</span></span><span style="display:flex;"><span>        status_ <span style="color:#555">=</span> s;
</span></span><span style="display:flex;"><span>        done_ <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>        cv_.notify_one();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      Status <span style="color:#c0f">Await</span>(RouteSummary<span style="color:#555">*</span> stats) {
</span></span><span style="display:flex;"><span>        std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> l(mu_);
</span></span><span style="display:flex;"><span>        cv_.wait(l, [<span style="color:#069;font-weight:bold">this</span>] { <span style="color:#069;font-weight:bold">return</span> done_; });
</span></span><span style="display:flex;"><span>        <span style="color:#555">*</span>stats <span style="color:#555">=</span> stats_;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> std<span style="color:#555">::</span>move(status_);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> NextWrite() {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (points_remaining_ <span style="color:#555">!=</span> <span style="color:#f60">0</span>) {
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">const</span> Feature<span style="color:#555">&amp;</span> f <span style="color:#555">=</span>
</span></span><span style="display:flex;"><span>              (<span style="color:#555">*</span>feature_list_)[feature_distribution_(generator_)];
</span></span><span style="display:flex;"><span>          std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Visiting point &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> f.location().latitude() <span style="color:#555">/</span> coord_factor_ <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> f.location().longitude() <span style="color:#555">/</span> coord_factor_ <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>          StartWrite(<span style="color:#555">&amp;</span>f.location());
</span></span><span style="display:flex;"><span>          points_remaining_<span style="color:#555">--</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          StartWritesDone();
</span></span><span style="display:flex;"><span>          RemoveHold();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      ClientContext context_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">float</span> coord_factor_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">int</span> points_remaining_ <span style="color:#555">=</span> <span style="color:#f60">10</span>;
</span></span><span style="display:flex;"><span>      Point point_;
</span></span><span style="display:flex;"><span>      RouteSummary stats_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>Feature<span style="color:#555">&gt;*</span> feature_list_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>default_random_engine generator_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>uniform_int_distribution<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> feature_distribution_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>uniform_int_distribution<span style="color:#555">&lt;</span><span style="color:#078;font-weight:bold">int</span><span style="color:#555">&gt;</span> delay_distribution_;
</span></span><span style="display:flex;"><span>      grpc<span style="color:#555">::</span>Alarm alarm_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>mutex mu_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>condition_variable cv_;
</span></span><span style="display:flex;"><span>      Status status_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">bool</span> done_ <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    };
</span></span></code></pre></div><p>The <code>ClientWriteReactor</code> is templatized with one parameter, <code>Point</code>, which is
the type of request message from the client.</p>
<p>In the constructor of <code>Recorder</code>, we pass the <code>ClientContext</code>, <code>&amp;stats_</code> (the
response object), and the <code>Recorder</code> to the RPC method
s<code>stub-&gt;async()-&gt;RecordRoute()</code>. Then we add an operation to send the first
<code>Point</code> in <code>points_to_send_</code>, if any. Note that if there is nothing to send at
the startup of the RPC, we need to call <code>StartWritesDone()</code> to inform the server
that we are done with writes. Finally, calling <code>StartCall()</code> activates the RPC.</p>
<p><code>OnWriteDone()</code> reacts to write completion. If the write was done successfully,
we continue to write the next <code>Point</code> until <code>points_to_send_</code> is empty. For the
last <code>Point</code> to send, we call <code>StartWriteLast()</code> to piggyback the signal that
writes are done. <code>StartWriteLast()</code> is effectively the same with combined
<code>StartWrite()</code> and <code>StartWritesDone()</code>, but is more efficient.</p>
<p><code>OnDone()</code> reacts to the RPC completion. It checks the RPC status outcome and
the response in <code>stats_</code>, and notifies the conditional variable waiting for
<code>OnDone()</code>.</p>
<p><code>Await()</code> is not a method of <code>ClientWriteReactor</code>. We add <code>Await()</code> so that the
caller can wait until the RPC is done.</p>
<p>To initiate an RPC, the client simply instantiates a <code>Recorder</code> and waits for
the RPC completion.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>    Recorder <span style="color:#c0f">recorder</span>(stub_.get(), kCoordFactor_, <span style="color:#555">&amp;</span>feature_list_);
</span></span><span style="display:flex;"><span>    RouteSummary stats;
</span></span><span style="display:flex;"><span>    Status status <span style="color:#555">=</span> recorder.Await(<span style="color:#555">&amp;</span>stats);
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (status.ok()) {
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Finished trip with &#34;</span> <span style="color:#555">&lt;&lt;</span> stats.point_count() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; points</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Passed &#34;</span> <span style="color:#555">&lt;&lt;</span> stats.feature_count() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; features</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Travelled &#34;</span> <span style="color:#555">&lt;&lt;</span> stats.distance() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; meters</span><span style="color:#c30;font-weight:bold">\n</span><span style="color:#c30">&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;It took &#34;</span> <span style="color:#555">&lt;&lt;</span> stats.elapsed_time() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; seconds&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>    } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RecordRoute rpc failed.&#34;</span> <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="bidirectional-streaming-rpc">Bidirectional streaming RPC</h2>
<p>Finally, we will look at the bidirectional streaming RPC <code>RouteChat</code>. In this
case, the client sends a sequence of <code>RouteNote</code>s to the server. Each time a
<code>RouteNote</code> at a <code>Point</code> is sent, the server will return a sequence of
<code>RouteNote</code>s at the same <code>Point</code> that have been sent by all the clients before.</p>
<h3 id="server-3">Server</h3>
<p>Again, the RPC handler&rsquo;s interface for a bidirectional streaming RPC does not
have any input parameters, and its return type is a server reactor, namely, a
<code>ServerBidiReactor</code>.</p>
<p>The <code>ServerBidiReactor</code> has two template parameters, both of which are
<code>RouteNote</code>, because <code>RouteNote</code> is the message type of both request and
response. After all, <code>RouteChat</code> means to let clients chat and share information
with each other!</p>
<p>Since we have already discussed <code>ServerWriteReactor</code> and <code>ServerReadReactor</code>,
<code>ServerBidiReactor</code> should be quite straightforward.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>  grpc<span style="color:#555">::</span>ServerBidiReactor<span style="color:#555">&lt;</span>RouteNote, RouteNote<span style="color:#555">&gt;*</span> RouteChat(
</span></span><span style="display:flex;"><span>      CallbackServerContext<span style="color:#555">*</span> context) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Chatter</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ServerBidiReactor<span style="color:#555">&lt;</span>RouteNote, RouteNote<span style="color:#555">&gt;</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      Chatter(absl<span style="color:#555">::</span>Mutex<span style="color:#555">*</span> mu, std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>RouteNote<span style="color:#555">&gt;*</span> received_notes)
</span></span><span style="display:flex;"><span>          <span style="color:#555">:</span> mu_(mu), received_notes_(received_notes) {
</span></span><span style="display:flex;"><span>        StartRead(<span style="color:#555">&amp;</span>note_);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnReadDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (ok) {
</span></span><span style="display:flex;"><span>          <span style="color:#09f;font-style:italic">// Unlike the other example in this directory that&#39;s not using
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          <span style="color:#09f;font-style:italic">// the reactor pattern, we can&#39;t grab a local lock to secure the
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          <span style="color:#09f;font-style:italic">// access to the notes vector, because the reactor will most likely
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          <span style="color:#09f;font-style:italic">// make us jump threads, so we&#39;ll have to use a different locking
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          <span style="color:#09f;font-style:italic">// strategy. We&#39;ll grab the lock locally to build a copy of the
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          <span style="color:#09f;font-style:italic">// list of nodes we&#39;re going to send, then we&#39;ll grab the lock
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          <span style="color:#09f;font-style:italic">// again to append the received note to the existing vector.
</span></span></span><span style="display:flex;"><span><span style="color:#09f;font-style:italic"></span>          mu_<span style="color:#555">-&gt;</span>Lock();
</span></span><span style="display:flex;"><span>          std<span style="color:#555">::</span>copy_if(received_notes_<span style="color:#555">-&gt;</span>begin(), received_notes_<span style="color:#555">-&gt;</span>end(),
</span></span><span style="display:flex;"><span>                       std<span style="color:#555">::</span>back_inserter(to_send_notes_),
</span></span><span style="display:flex;"><span>                       [<span style="color:#069;font-weight:bold">this</span>](<span style="color:#069;font-weight:bold">const</span> RouteNote<span style="color:#555">&amp;</span> note) {
</span></span><span style="display:flex;"><span>                         <span style="color:#069;font-weight:bold">return</span> note.location().latitude() <span style="color:#555">==</span>
</span></span><span style="display:flex;"><span>                                    note_.location().latitude() <span style="color:#555">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>                                note.location().longitude() <span style="color:#555">==</span>
</span></span><span style="display:flex;"><span>                                    note_.location().longitude();
</span></span><span style="display:flex;"><span>                       });
</span></span><span style="display:flex;"><span>          mu_<span style="color:#555">-&gt;</span>Unlock();
</span></span><span style="display:flex;"><span>          notes_iterator_ <span style="color:#555">=</span> to_send_notes_.begin();
</span></span><span style="display:flex;"><span>          NextWrite();
</span></span><span style="display:flex;"><span>        } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          Finish(Status<span style="color:#555">::</span>OK);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnWriteDone</span>(<span style="color:#078;font-weight:bold">bool</span> <span style="color:#09f;font-style:italic">/*ok*/</span>) <span style="color:#069;font-weight:bold">override</span> { NextWrite(); }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnDone</span>() <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        LOG(INFO) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Completed&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">delete</span> <span style="color:#069;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnCancel</span>() <span style="color:#069;font-weight:bold">override</span> { LOG(ERROR) <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RPC Cancelled&#34;</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> NextWrite() {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (notes_iterator_ <span style="color:#555">!=</span> to_send_notes_.end()) {
</span></span><span style="display:flex;"><span>          StartWrite(<span style="color:#555">&amp;*</span>notes_iterator_);
</span></span><span style="display:flex;"><span>          notes_iterator_<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          mu_<span style="color:#555">-&gt;</span>Lock();
</span></span><span style="display:flex;"><span>          received_notes_<span style="color:#555">-&gt;</span>push_back(note_);
</span></span><span style="display:flex;"><span>          mu_<span style="color:#555">-&gt;</span>Unlock();
</span></span><span style="display:flex;"><span>          StartRead(<span style="color:#555">&amp;</span>note_);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      RouteNote note_;
</span></span><span style="display:flex;"><span>      absl<span style="color:#555">::</span>Mutex<span style="color:#555">*</span> mu_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>RouteNote<span style="color:#555">&gt;*</span> received_notes_ ABSL_GUARDED_BY(mu_);
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>RouteNote<span style="color:#555">&gt;</span> to_send_notes_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>RouteNote<span style="color:#555">&gt;::</span>iterator notes_iterator_;
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">return</span> <span style="color:#069;font-weight:bold">new</span> <span style="color:#c0f">Chatter</span>(<span style="color:#555">&amp;</span>mu_, <span style="color:#555">&amp;</span>received_notes_);
</span></span><span style="display:flex;"><span>  }
</span></span></code></pre></div><p>The <code>ServerBidiReactor</code>&rsquo;s constructor is called when <code>RouteChat()</code> constructs
and provides the reactor in response to the started RPC. The constructor
initiates a read operation by calling <code>StartRead(&amp;received_note_)</code>.</p>
<p><code>OnReadDone()</code> reacts to a read completion. If the read was done successfully
(i.e., <code>ok</code> is <code>true</code>), we will continue to read next <code>RouteNote</code>; otherwise, we
will record that reads are all finished, and finish the RPC. As for the newly
received <code>RouteNote</code> upon a successful read, we add it to <code>received_notes_</code>, and
append the previously received notes at the same <code>Point</code> to <code>to_send_notes_</code>.
Whenever <code>to_send_notes_</code> becomes non-empty, we start to send the <code>RouteNote</code>s
in <code>to_send_notes_</code>.</p>
<p><code>OnWriteDone()</code> reacts to a write completion. If the write was done
successfully, we continue to send next <code>RouteNote</code> until <code>to_send_notes_</code> is
empty, at which point we will continue reading next <code>RouteNote</code> or finish the
RPC if reads are also finished.</p>
<p><code>OnDone()</code> reacts to the RPC completion. We will do the final cleanup in
<code>OnDone()</code>.</p>
<p><code>OnCancel()</code> reacts to the cancellation of the RPC. We log the occurrence of a
cancellation in this method.</p>
<h3 id="client-3">Client</h3>
<p>Yes, the client reactor for a bidirectional streaming RPC is
<code>ClientBidiReactor</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">class</span> <span style="color:#0a8;font-weight:bold">Chatter</span> <span style="color:#555">:</span> <span style="color:#069;font-weight:bold">public</span> grpc<span style="color:#555">::</span>ClientBidiReactor<span style="color:#555">&lt;</span>RouteNote, RouteNote<span style="color:#555">&gt;</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">public</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">explicit</span> Chatter(RouteGuide<span style="color:#555">::</span>Stub<span style="color:#555">*</span> stub)
</span></span><span style="display:flex;"><span>          <span style="color:#555">:</span> notes_{MakeRouteNote(<span style="color:#c30">&#34;First message&#34;</span>, <span style="color:#f60">0</span>, <span style="color:#f60">0</span>),
</span></span><span style="display:flex;"><span>                   MakeRouteNote(<span style="color:#c30">&#34;Second message&#34;</span>, <span style="color:#f60">0</span>, <span style="color:#f60">1</span>),
</span></span><span style="display:flex;"><span>                   MakeRouteNote(<span style="color:#c30">&#34;Third message&#34;</span>, <span style="color:#f60">1</span>, <span style="color:#f60">0</span>),
</span></span><span style="display:flex;"><span>                   MakeRouteNote(<span style="color:#c30">&#34;Fourth message&#34;</span>, <span style="color:#f60">0</span>, <span style="color:#f60">0</span>)},
</span></span><span style="display:flex;"><span>            notes_iterator_(notes_.begin()) {
</span></span><span style="display:flex;"><span>        stub<span style="color:#555">-&gt;</span>async()<span style="color:#555">-&gt;</span>RouteChat(<span style="color:#555">&amp;</span>context_, <span style="color:#069;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        NextWrite();
</span></span><span style="display:flex;"><span>        StartRead(<span style="color:#555">&amp;</span>server_note_);
</span></span><span style="display:flex;"><span>        StartCall();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnWriteDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (ok) {
</span></span><span style="display:flex;"><span>          NextWrite();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnReadDone</span>(<span style="color:#078;font-weight:bold">bool</span> ok) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (ok) {
</span></span><span style="display:flex;"><span>          std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Got message &#34;</span> <span style="color:#555">&lt;&lt;</span> server_note_.message() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; at &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> server_note_.location().latitude() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> server_note_.location().longitude() <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>          StartRead(<span style="color:#555">&amp;</span>server_note_);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> <span style="color:#c0f">OnDone</span>(<span style="color:#069;font-weight:bold">const</span> Status<span style="color:#555">&amp;</span> s) <span style="color:#069;font-weight:bold">override</span> {
</span></span><span style="display:flex;"><span>        std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> l(mu_);
</span></span><span style="display:flex;"><span>        status_ <span style="color:#555">=</span> s;
</span></span><span style="display:flex;"><span>        done_ <span style="color:#555">=</span> <span style="color:#366">true</span>;
</span></span><span style="display:flex;"><span>        cv_.notify_one();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      Status <span style="color:#c0f">Await</span>() {
</span></span><span style="display:flex;"><span>        std<span style="color:#555">::</span>unique_lock<span style="color:#555">&lt;</span>std<span style="color:#555">::</span>mutex<span style="color:#555">&gt;</span> l(mu_);
</span></span><span style="display:flex;"><span>        cv_.wait(l, [<span style="color:#069;font-weight:bold">this</span>] { <span style="color:#069;font-weight:bold">return</span> done_; });
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">return</span> std<span style="color:#555">::</span>move(status_);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     <span style="color:#069;font-weight:bold">private</span><span style="color:#555">:</span>
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">void</span> NextWrite() {
</span></span><span style="display:flex;"><span>        <span style="color:#069;font-weight:bold">if</span> (notes_iterator_ <span style="color:#555">!=</span> notes_.end()) {
</span></span><span style="display:flex;"><span>          <span style="color:#069;font-weight:bold">const</span> <span style="color:#069;font-weight:bold">auto</span><span style="color:#555">&amp;</span> note <span style="color:#555">=</span> <span style="color:#555">*</span>notes_iterator_;
</span></span><span style="display:flex;"><span>          std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;Sending message &#34;</span> <span style="color:#555">&lt;&lt;</span> note.message() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34; at &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> note.location().latitude() <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;, &#34;</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#555">&lt;&lt;</span> note.location().longitude() <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>          StartWrite(<span style="color:#555">&amp;</span>note);
</span></span><span style="display:flex;"><span>          notes_iterator_<span style="color:#555">++</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#069;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>          StartWritesDone();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      ClientContext context_;
</span></span><span style="display:flex;"><span>      <span style="color:#069;font-weight:bold">const</span> std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>RouteNote<span style="color:#555">&gt;</span> notes_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>vector<span style="color:#555">&lt;</span>RouteNote<span style="color:#555">&gt;::</span>const_iterator notes_iterator_;
</span></span><span style="display:flex;"><span>      RouteNote server_note_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>mutex mu_;
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>condition_variable cv_;
</span></span><span style="display:flex;"><span>      Status status_;
</span></span><span style="display:flex;"><span>      <span style="color:#078;font-weight:bold">bool</span> done_ <span style="color:#555">=</span> <span style="color:#366">false</span>;
</span></span><span style="display:flex;"><span>    };
</span></span></code></pre></div><p>The <code>ClientBidiReactor</code> is templatized with two parameters, the message types of
the request and the response, which are both <code>RouteNote</code> in the case of RPC
<code>RouteChat</code>.</p>
<p>In the constructor of <code>Chatter</code>, we pass the <code>ClientContext</code> and the <code>Chatter</code>
to the RPC method <code>stub-&gt;async()-&gt;RouteChat()</code>. Then we add an operation to send
the first <code>RouteNote</code> in <code>notes_</code>, if any. Note that if there is nothing to send
at the startup of the RPC, we need to call <code>StartWritesDone()</code> to inform the
server that we are done with writes. We also call <code>StartRead()</code> to add a read
operation. Finally, calling <code>StartCall()</code> activates the RPC.</p>
<p><code>OnReadDone()</code> reacts to read completion. If the read was done successfully, we
continue to read next <code>RouteNote</code> until we fail to do so, indicated by <code>ok</code>
being <code>false</code>.</p>
<p><code>OnWriteDone()</code> reacts to write completion. If the write was done successfully,
we continue to write next <code>RouteNote</code> until <code>notes_</code> is empty. For the last
<code>RouteNote</code> to send, we call <code>StartWriteLast()</code> to piggyback the signal that
writes are done. <code>StartWriteLast()</code> is effectively the same with combined
<code>StartWrite()</code> and <code>StartWritesDone()</code>, but is more efficient.</p>
<p><code>OnDone()</code> reacts to the RPC completion. It checks the RPC status outcome and
the message stats, and notifies the conditional variable waiting for <code>OnDone()</code>.</p>
<p><code>Await()</code> is not a method of <code>ClientBidiReactor</code>. We add <code>Await()</code> so that the
caller can wait until the RPC is done.</p>
<p>To initiate an RPC, the client simply instantiates a <code>Chatter</code> and waits for the
RPC completion.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>    Chatter <span style="color:#c0f">chatter</span>(stub_.get());
</span></span><span style="display:flex;"><span>    Status status <span style="color:#555">=</span> chatter.Await();
</span></span><span style="display:flex;"><span>    <span style="color:#069;font-weight:bold">if</span> (<span style="color:#555">!</span>status.ok()) {
</span></span><span style="display:flex;"><span>      std<span style="color:#555">::</span>cout <span style="color:#555">&lt;&lt;</span> <span style="color:#c30">&#34;RouteChat rpc failed.&#34;</span> <span style="color:#555">&lt;&lt;</span> std<span style="color:#555">::</span>endl;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified June 18, 2024: <a href="https://github.com/grpc/grpc.io/commit/18b12d64258c2be5e27d9bddf2c82cfd8da6a419">C&#43;&#43; Callback API Tutorial (#1305) (18b12d6)</a>
</div>

</div>

<div class="c-global-meta-links">
  
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/grpc/grpc.io/tree/main/content/en/docs/languages/cpp/callback.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/grpc/grpc.io/edit/main/content/en/docs/languages/cpp/callback.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/grpc/grpc.io/new/main/content/en/docs/languages/cpp/callback.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/grpc/grpc.io/issues/new?title=Asynchronous%20Callback%20API%20Tutorial" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/grpc/grpc.io/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/grpcio" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Google Groups" aria-label="Google Groups">
    <a class="text-white" target="_blank" rel="noopener" href="https://groups.google.com/g/grpc-io" aria-label="Google Groups">
      <i class="fab fa-google"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Gitter" aria-label="Gitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://gitter.im/grpc/grpc" aria-label="Gitter">
      <i class="fab fa-gitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="YouTube" aria-label="YouTube">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.youtube.com/@grpcio" aria-label="YouTube">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/grpc" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 gRPC Authors
          
        </small>
        
        
      </div>
    </div>
    <div class="row text-center text-white small">
      <div class="col-12 text-center py-2 order-sm-2">
        <a href="https://www.linuxfoundation.org/terms" target="_blank" rel="noopener">Terms</a> |
        <a href="https://www.linuxfoundation.org/privacy" target="_blank" rel="noopener">Privacy</a> |
        <a href="https://www.linuxfoundation.org/trademark-usage" target="_blank" rel="noopener">Trademarks</a> |
        <a href="https://github.com/grpc/grpc.io/blob/main/LICENSE" target="_blank" rel="noopener">License</a> |
        <a href="/about/">About</a>
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>


<script src="https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js" integrity="sha512-JERecFUBbsm75UpkVheAuDOE8NdHjQBrPACfEQYPwvPG+fjgCpHAz1Jw2ci9EXmd3DdfiWth3O3CQvcfEg8gsA==" crossorigin="anonymous"></script>




<script src='/js/tabpane-persist.js'></script>

















<script src="/js/main.js"></script>



 


  </body>
</html>
