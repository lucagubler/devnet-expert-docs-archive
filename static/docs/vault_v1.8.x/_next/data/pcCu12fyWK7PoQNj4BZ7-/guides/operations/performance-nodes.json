{"pageProps":{"currentPath":"operations/performance-nodes","frontMatter":{"layout":"guides","page_title":"Performance Standby Nodes - Guides","description":"This guide will walk you through a simple Vault Highly Available (HA) cluster\nimplementation. While this is not an exhaustive or prescriptive guide that\ncan be used as a drop-in production example, it covers the basics enough to\ninform your own production setup."},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/operations/performance-nodes.mdx","mdxSource":{"compiledSource":"var d=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var s=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable;var i=(a,t,n)=>t in a?d(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,e=(a,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(a,n,t[n]);if(s)for(var n of s(t))l.call(t,n)&&i(a,n,t[n]);return a};var p=(a,t)=>{var n={};for(var r in a)o.call(a,r)&&t.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&s)for(var r of s(a))t.indexOf(r)<0&&l.call(a,r)&&(n[r]=a[r]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var r=n,{components:a}=r,t=p(r,[\"components\"]);return mdx(MDXLayout,e(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{className:\"g-type-display-2\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#performance-standby-nodes\",\"aria-label\":\"performance standby nodes permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h1\"},{className:\"__target-h\",id:\"performance-standby-nodes\",\"aria-hidden\":\"\"})),\"Performance Standby Nodes\"),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"Enterprise Only:\"),\" Performance Standby Nodes feature is a part of \",mdx(\"em\",{parentName:\"p\"},\"Vault Enterprise\"),\".\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In \",mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/operations/vault-ha-consul\"}),\"Vault High Availability\"),` guide, it\nwas explained that only one Vault server will be `,mdx(\"em\",{parentName:\"p\"},\"active\"),` in a cluster and\nhandles `,mdx(\"strong\",{parentName:\"p\"},\"all\"),` requests (reads and writes). The rest of the servers become the\n`,mdx(\"em\",{parentName:\"p\"},\"standby\"),\" nodes and simply forward requests to the \",mdx(\"em\",{parentName:\"p\"},\"active\"),\" node.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-ha-consul-3.png\",alt:\"HA Architecture\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"If you are running \",mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"Vault Enterprise\"),\" 0.11\"),` or later with the Consul storage\nbackend, those standby nodes can handle most read-only requests. For example,\nperformance standbys can handle encryption/decryption of data using\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/secrets/transit\"}),\"transit\"),` keys, GET requests of key/value\nsecrets and other requests that do not change underlying storage. This can\nprovide considerable improvements in throughput for traffic of this type,\nresulting in aggregate performance increase linearly correlated to the number\nof performance standby nodes deployed in a cluster.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-materials\",\"aria-label\":\"reference materials permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-materials\",\"aria-hidden\":\"\"})),\"Reference Materials\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/performance-standby\"}),\"Performance Standby Nodes\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/concepts/ha\"}),\"High Availability Mode\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/configuration/storage/consul\"}),\"Consul Storage Backend\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/operations/reference-architecture\"}),\"Vault Reference Architecture\"))),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#server-configuration\",\"aria-label\":\"server configuration permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"server-configuration\",\"aria-hidden\":\"\"})),\"Server Configuration\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Performance standbys are enabled by default when the Vault Enterprise license\nincludes this feature. If you wish to disable the performance standbys, you can\ndo so by setting the\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/configuration#vault-enterprise-parameters\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"disable_performance_standby\")),`\nflag to `,mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Since any of the nodes in a cluster can get elected as active, it is recommended\nto keep this setting consistent across all nodes in the cluster.`),mdx(\"div\",e({},{className:\"alert alert-danger g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"Consider a scenario where a node with performance standby \",mdx(\"em\",{parentName:\"p\"},\"disabled\"),`\nbecomes the active node. The performance standby feature is\ndisabled for the whole cluster although it is enabled on other nodes.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#enterprise-cluster\",\"aria-label\":\"enterprise cluster permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"enterprise-cluster\",\"aria-hidden\":\"\"})),\"Enterprise Cluster\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`A highly available Vault Enterprise cluster consists of multiple servers, and\nthere will be only one active node. The rest can serve as performance standby\nnodes handling read-only requests locally.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-perf-standby-1.png\",alt:\"Cluster Architecture\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The number of performance standby nodes within a cluster depends on your Vault\nEnterprise license.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Consider the following scenario:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"A cluster contains \",mdx(\"strong\",{parentName:\"li\"},\"five\"),\" Vault servers\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Your Vault Enterprise license allows \",mdx(\"strong\",{parentName:\"li\"},\"two\"),\" performance standby nodes\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-perf-standby.png\",alt:\"Cluster Architecture\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In this scenario, the performance standby nodes running on VM 8 and VM 9 can\nprocess read-only requests. However, the `,mdx(\"em\",{parentName:\"p\"},\"standby\"),` nodes running on VM 6 and VM\n10 simply forward all requests to the active node running on VM 7.`),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` The selection of performance standby node is determined by the\nactive node. When a node is selected, it gets promoted to become a performance\nstandby. This is a race condition that there is no configuration\nparameter to specify which nodes to become performance standbys.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Read \",mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/operations/production\"}),\"Production Hardening\"),` to learn best\npractices for a production hardening deployment of Vault.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying & Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup & Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities & Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true}