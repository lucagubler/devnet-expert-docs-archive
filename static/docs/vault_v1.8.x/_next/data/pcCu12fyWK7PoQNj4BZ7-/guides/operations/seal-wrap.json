{"pageProps":{"currentPath":"operations/seal-wrap","frontMatter":{"layout":"guides","page_title":"Seal Wrap / FIPS 140-2 - Guides","description":"In this guide,"},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/operations/seal-wrap.mdx","mdxSource":{"compiledSource":"var c=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var p=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable;var l=(a,n,s)=>n in a?c(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=>{for(var s in n||(n={}))o.call(n,s)&&l(a,s,n[s]);if(p)for(var s of p(n))r.call(n,s)&&l(a,s,n[s]);return a};var m=(a,n)=>{var s={};for(var t in a)o.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&p)for(var t of p(a))n.indexOf(t)<0&&r.call(a,t)&&(s[t]=a[t]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=m(t,[\"components\"]);return mdx(MDXLayout,e(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{className:\"g-type-display-2\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#seal-wrap-fips-140-2\",\"aria-label\":\"seal wrap fips 140 2 permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h1\"},{className:\"__target-h\",id:\"seal-wrap-fips-140-2\",\"aria-hidden\":\"\"})),\"Seal Wrap / FIPS 140-2\"),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"Enterprise Only:\"),` Vault's HSM auto-unseal and Seal Wrap features are a\npart of `,mdx(\"em\",{parentName:\"p\"},\"Vault Enterprise\"),\".\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"Vault Enterprise\")),\" integrates with \",mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/enterprise/hsm\"}),\"HSM platforms\"),`\nto opt-in automatic `,mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/concepts/seal#unsealing\"}),\"unsealing\"),`.\nHSM integration provides three pieces of special functionality:`),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},\"Master Key Wrapping\"),`: Vault protects its master key by transiting it through\nthe HSM for encryption rather than splitting into key shares`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},\"Automatic Unsealing\"),`: Vault stores its encrypted master key in storage,\nallowing for automatic unsealing`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},\"Seal Wrapping\"),\" to provide FIPS KeyStorage-conforming functionality for Critical Security Parameters\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-hsm-autounseal.png\",alt:\"Unseal with HSM\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In some large organizations, there is a fair amount of complexity in designating\nkey officers, who might be available to unseal Vault installations as the most\ncommon pattern is to deploy Vault immutably. As such automating unseal using an\nHSM provides a simplified yet secure way of unsealing Vault nodes as they get\ndeployed.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Vault pulls its encrypted master key from storage and transit it through the\nHSM for decryption via `,mdx(\"strong\",{parentName:\"p\"},\"PKCS \",\"#\",\"11 API\"),`. Once the master key is decrypted,\nVault uses the master key to decrypt the encryption key to resume with Vault\noperations.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-material\",\"aria-label\":\"reference material permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-material\",\"aria-hidden\":\"\"})),\"Reference Material\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.hashicorp.com/resources/hashicorp-and-aws-integrating-cloudhsm-with-vault-e\"}),\"HashiCorp + AWS: Integrating CloudHSM with Vault Enterprise\"),\" webinar\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/sealwrap\"}),\"Seal Wrap documentation\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/configuration/seal/pkcs11\"}),\"Vault Configuration - pkcs11 Seal\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/hsm\"}),\"Vault Enterprise HSM Support\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"https://nvd.nist.gov/800-53/Rev4/control/SC-12\"}),\"NIST SC-12: Cryptographic Key Establishment and Management\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"https://nvd.nist.gov/800-53/Rev4/control/SC-13\"}),\"NIST SC-13: Cryptographic Protection\"))),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#estimated-time-to-complete\",\"aria-label\":\"estimated time to complete permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"estimated-time-to-complete\",\"aria-hidden\":\"\"})),\"Estimated Time to Complete\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"10 minutes\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#challenge\",\"aria-label\":\"challenge permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"challenge\",\"aria-hidden\":\"\"})),\"Challenge\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The Federal Information Processing Standard (FIPS) 140-2 is a U.S. Government\ncomputer security standard used to accredit cryptography modules. If your\nproduct or service does not follow FIPS' security requirements, it may\ncomplicate your ability to operate with U.S. Government data.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Aside from doing business with U.S. government, your organization may care about\nFIPS which approves various cryptographic ciphers for hashing, signature, key\nexchange, and encryption for security.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#solution\",\"aria-label\":\"solution permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"solution\",\"aria-hidden\":\"\"})),\"Solution\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Integrate Vault with FIPS 140-2 certified HSM and enable the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"Seal Wrap\")),`\nfeature to protect your data.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Vault encrypts secrets using 256-bit AES in GCM mode with a randomly generated\nnonce prior to writing them to its persistent storage. By enabling seal wrap,\nVault wraps your secrets with `,mdx(\"strong\",{parentName:\"p\"},\"an extra layer of encryption\"),` leveraging the\nHSM encryption and decryption.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-seal-wrap.png\",alt:\"Seal Wrap\"}))),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#benefits-of-the-seal-wrap\",\"aria-label\":\"benefits of the seal wrap permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"benefits-of-the-seal-wrap\",\"aria-hidden\":\"\"})),\"Benefits of the Seal Wrap:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Conformance with FIPS 140-2 directives on Key Storage and Key Transport as \",mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/sealwrap#fips-140-2-compliance\"}),\"certified by Leidos\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Supports FIPS level of security equal to HSM\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`For example, if you use Level 3 hardware encryption on an HSM, Vault will be\nusing FIPS 140-2 Level 3 cryptography`))),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Allows Vault to be deployed in high security \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://en.wikipedia.org/wiki/Governance,_risk_management,_and_compliance\"}),\"GRC\"),`\nenvironments (e.g. PCI-DSS, HIPAA) where FIPS guidelines important for external audits`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Pathway for Vault's use in managing Department of Defense's (DOD) or North\nAtlantic Treaty Organization (NATO) military secrets`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#prerequisites\",\"aria-label\":\"prerequisites permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"prerequisites\",\"aria-hidden\":\"\"})),\"Prerequisites\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This intermediate operations guide assumes that you have:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"A \",mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/hsm\"}),\"supported HSM\"),` cluster to be integrated\nwith Vault`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Vault Enterprise Premium\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#steps\",\"aria-label\":\"steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"steps\",\"aria-hidden\":\"\"})),\"Steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This guide walks you through the following steps:\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step1\"}),\"Configure HSM Auto-unseal\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step2\"}),\"Enable Seal Wrap\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step3\"}),\"Test the Seal Wrap Feature\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step1\",\"aria-label\":\"step 1 configure hsm auto unseal permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step1\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-1-configure-hsm-auto-unseal\",\"aria-hidden\":\"\"})),\"Step 1: Configure HSM Auto-unseal\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When a Vault server is started, it normally starts in a sealed state where a\nquorum of existing unseal keys is required to unseal it. By integrating Vault\nwith HSM, your Vault server can be automatically unsealed by the trusted HSM key\nprovider.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#task-1-write-a-vault-configuration-file\",\"aria-label\":\"task 1 write a vault configuration file permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"task-1-write-a-vault-configuration-file\",\"aria-hidden\":\"\"})),\"Task 1: Write a Vault configuration file\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To integrate your Vault Enterprise server with an HSM cluster, the configuration\nfile must define the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/configuration/seal/pkcs11\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"PKCS11 seal\"),\" stanza\"),`\nproviding necessary connection information.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example: \",mdx(\"inlineCode\",{parentName:\"strong\"},\"config-hsm.hcl\"))),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Provide your AWS CloudHSM cluster connection information\"),`\n`,\"seal \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"pkcs11\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  lib \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"/opt/cloudhsm/lib/libcloudhsm_pkcs11.so\"'),`\n`,\"  slot \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"1\"'),`\n`,\"  pin \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"vault:Password1\"'),`\n`,\"  key_label \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"hsm_demo\"'),`\n`,\"  hmac_key_label \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"hsm_hmac_demo\"'),`\n`,\"  generate_key \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"true\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Configure the storage backend for Vault\"),`\n`,\"storage \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"file\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"/tmp/vault\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Addresses and ports on which Vault will respond to requests\"),`\n`,\"listener \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"tcp\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  address     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"127.0.0.1:8200\"'),`\n`,\"  tls_disable \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"ui \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`)),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` For the purpose of this guide, the storage backend is set to the\nlocal file system (`,mdx(\"inlineCode\",{parentName:\"p\"},\"/tmp/vault\"),\") to make the verification step easy.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The example configuration defines the following in its \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"seal\")),\" stanza:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"lib\")),\" is set to the path to the PKCS \",\"#\",`11 library on the virtual machine\nwhere Vault Enterprise is installed`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"slot\")),\" should be set to the slot number to use\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"pin\")),\" is the PKCS \",\"#\",\"11 PIN for login\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"key_label\")),\" defines the label of the key you want to use\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"hmac_key_label\")),` defines the label of the key you want to use for HMACing.\n(NOTE: HMAC is optional and only used for mechanisms that do not support\nauthenticated data.)`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"generate_key\")),\" is set to \",mdx(\"inlineCode\",{parentName:\"li\"},\"true\"),`. If no existing key with the label\nspecified by `,mdx(\"inlineCode\",{parentName:\"li\"},\"key_label\"),` can be found at Vault initialization time, Vault\ngenerates a key`)),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"IMPORTANT:\"),` Having Vault generate its own key is the easiest way to get up\nand running, but for security, Vault marks the key as `,mdx(\"strong\",{parentName:\"p\"},\"non-exportable\"),`. If\nyour HSM key backup strategy requires the key to be exportable, you should\ngenerate the key yourself. Refer to the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/configuration/seal/pkcs11#vault-key-generation-attributes\"}),\"key generation attributes\"),\".\")),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#task-2-initialize-your-vault-enterprise-server\",\"aria-label\":\"task 2 initialize your vault enterprise server permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"task-2-initialize-your-vault-enterprise-server\",\"aria-hidden\":\"\"})),\"Task 2: Initialize your Vault Enterprise server\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Start the Vault server with your Vault configuration file. For example, if your\nconfiguration file is located at `,mdx(\"inlineCode\",{parentName:\"p\"},\"/home/ec2-user/config-hsm.hcl\"),`, the command\nwould look like:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault server -config\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"/home/ec2-user/config-hsm.hcl\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  SDK Version: 2.03\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"==> Vault server configuration:\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   HSM PKCS#11 Version: 2.40\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"           HSM Library: Cavium PKCS#11 Interface\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   HSM Library Version: 1.0\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   HSM Manufacturer ID: Cavium Networks\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"              HSM Type: pkcs11\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"                   Cgo: enabled\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'            Listener 1: tcp (addr: \"127.0.0.1:8200\", cluster address: \"127.0.0.1:8201\", tls: \"disabled\")'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"             Log Level: info\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"                 Mlock: supported: true, enabled: false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"               Storage: file\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"               Version: Vault v0.10.1+ent.hsm\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"           Version Sha: 0e628142d6b6e5cabfdb9680a6d669d38f15574f\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"==> Vault server started! Log data will stream in below:\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In another terminal, set the \",mdx(\"inlineCode\",{parentName:\"p\"},\"VAULT_ADDR\"),\" environment variable, and \",mdx(\"a\",e({parentName:\"p\"},{href:\"/intro/getting-started/deploy#initializing-the-vault\"}),\"initialize\"),\" your Vault server.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Set the VAULT_ADDR environment variable\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"export\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"VAULT_ADDR\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"http://127.0.0.1:8200\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Initialize Vault\"),`\n`,\"$ vault operator init\",`\n`,`\n`,\"Recovery Key \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),\": 2bU2wOfmyMqYcsEYo4Mo9q4s/KAODgHHjcmZmFOo+XY\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),`\n`,\"Initial Root Token: 8d726c6b-98ba-893f-23d5-be3d2fec480e\",`\n`,`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Vault is initialized\",`\n`,`\n`,\"Recovery key initialized with \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),\" key shares and a key threshold of \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),\". Please\",`\n`,\"securely distribute the key shares printed above.\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`There is only a single master key created which is encrypted by the HSM using\nPKCS `,\"#\",`11, and then placed in the storage. When Vault needs to be unsealed, it\ngrabs the HSM encrypted master key from the storage, round trips it through the\nHSM to decrypt the master key.`),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` When Vault is initialized while using an HSM, rather than unseal\nkeys being returned to the operator, `,mdx(\"strong\",{parentName:\"p\"},\"recovery keys\"),` are returned. These are\ngenerated from an internal recovery key that is `,mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/enterprise/hsm/behavior#initialization\"}),`split via Shamir's Secret\nSharing`),`, similar to Vault's\ntreatment of unseal keys when running without an HSM. Some Vault operations such\nas generation of a root token require these recovery keys.`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Login to the Vault using the generated root token to verify.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault login 8d726c6b-98ba-893f-23d5-be3d2fec480e\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#task-3-verification\",\"aria-label\":\"task 3 verification permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"task-3-verification\",\"aria-hidden\":\"\"})),\"Task 3: Verification\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Stop and restart the Vault server and then verify its status:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault status\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                      Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                      -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Recovery Seal Type       shamir\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Sealed                   false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Total Recovery Shares    1\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Threshold                1\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Version                  0.10.1+ent.hsm\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Cluster Name             vault-cluster-80556565\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Cluster ID               40316cdd-3d42-ec36-e7b0-6a7a0684568c\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"HA Enabled               false\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"Sealed\"),\" status is \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"false\")),` which means that the Vault was automatically\nunsealed upon its start. You can proceed with Vault operations.`),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step2\",\"aria-label\":\"step 2 enable seal wrap permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step2\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-2-enable-seal-wrap\",\"aria-hidden\":\"\"})),\"Step 2: Enable Seal Wrap\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` For FIPS 140-2 compliance, seal wrap requires FIPS\n140-2 Certified HSM which is supported by `,mdx(\"em\",{parentName:\"p\"},\"Vault Enterprise Premium\"),\".\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"For some values, seal wrapping is \",mdx(\"strong\",{parentName:\"p\"},\"always enabled\"),` including the recovery key, any\nstored key shares, the master key, the keyring, and more. When working with the\nkey/value secret engine, you can enable seal wrap to wrap all data.`),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#cli-command\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"cli-command\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Check the enabled secret engines.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault secrets list -format\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"json\")),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"secret/\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"type\": \"kv\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"description\": \"key/value secret storage\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"kv_75820543\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"config\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"default_lease_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"max_lease_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"force_no_cache\": false'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"options\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"version\": \"1\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"local\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"seal_wrap\": false'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"seal_wrap\"),\" parameter is set to \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"false\")),\".\"),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),`For the purpose of comparing seal wrapped data against unwrapped data, enable\nadditional key/value secret engine at the `,mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/\"),\" path.\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Pass the '-seal-wrap' flag when you enable the KV workflow\"),`\n`,\"$ vault secrets \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -path\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"secret2/ -version\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),\" -seal-wrap kv\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The above command enabled \",mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/secrets/kv/kv-v1\"}),\"key/value version 1\"),` with\nseal wrap feature enabled.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault secrets list -format\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"json\")),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"secret2/\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"type\": \"kv\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"description\": \"\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"kv_bdd74241\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"config\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"default_lease_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"max_lease_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"force_no_cache\": false'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"options\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"version\": \"1\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"local\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"seal_wrap\": true'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"seal_wrap\"),\" parameter is set to \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"true\")),\" at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/\"),\".\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Check the enabled secret engines.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/sys/mounts | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"secret/\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"kv_f05b8b9c\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"config\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"default_lease_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"force_no_cache\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"max_lease_ttl\": 0'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"description\": \"key/value secret storage\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"local\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"options\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"version\": \"2\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"seal_wrap\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"type\": \"kv\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"seal_wrap\"),\" parameter is set to \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"false\")),\".\"),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),`For the purpose of comparing seal wrapped data against unwrapped data, enable\nadditional key/value secret engine at the `,mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/\"),\" path.\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Set the seal_wrap parameter to true in the request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"type\": \"kv\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"options\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'    \"version\": \"1\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"  },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"seal_wrap\": true'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable kv secret engine at secret2/\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/sys/mounts/secret2\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The above command enabled \",mdx(\"a\",e({parentName:\"p\"},{href:\"/docs/secrets/kv/kv-v1\"}),\"key/value version 1\"),` with\nseal wrap feature enabled.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/sys/mounts | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"secret2/\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"kv_724c81c9\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"config\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"default_lease_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"force_no_cache\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"max_lease_ttl\": 0'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"description\": \"\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"local\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"options\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"version\": \"1\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"seal_wrap\": true,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"type\": \"kv\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"seal_wrap\"),\" parameter is set to \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"true\")),\" at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/\"),\".\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"inlineCode\",{parentName:\"p\"},\"http://127.0.0.1:8200/ui\"),`) and\nthen login.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-seal-wrap-2.png\",alt:\"Enable Secret Engine\"}))),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),`For the purpose of comparing seal wrapped data against unwrapped data, enable\nadditional key/value secret engine at the `,mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/\"),\" path.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\".\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"secret2\")),\" in the path field\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"li\"},\"Version 1\"),\" for KV version\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Select the check box for \",mdx(\"strong\",{parentName:\"li\"},\"Seal Wrap\"))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-seal-wrap-3.png\",alt:\"Enable Secret Engine\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\".\"),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step3\",\"aria-label\":\"step 3 test the seal wrap feature permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step3\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-3-test-the-seal-wrap-feature\",\"aria-hidden\":\"\"})),\"Step 3: Test the Seal Wrap Feature\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In this step, you are going to:\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"Write some test data\"),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#view-the-encrypted-secrets\"}),\"View the encrypted secrets\"))),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-1\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-1\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Write a secret at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/unwrapped\"),\".\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Write a key named 'password' with its value 'my-long-password'\"),`\n`,\"$ vault kv put secret/unwrapped \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"my-long-password\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Read the path to verify\"),`\n`,\"$ vault kv get secret/unwrapped\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),\" Data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),`\n`,\"Key         Value\",`\n`,\"---         -----\",`\n`,\"password    my-long-password\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Write the same secret at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/wrapped\"),\".\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Write a key named 'password' with its value 'my-long-password'\"),`\n`,\"$ vault kv put secret2/wrapped \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"my-long-password\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Read the path to verify\"),`\n`,\"$ vault kv get secret2/wrapped\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),\" Data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),`\n`,\"Key         Value\",`\n`,\"---         -----\",`\n`,\"password    my-long-password\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Using a valid token, you can write and read secrets the same way\nregardless of the seal wrap.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-1\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-1\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Write a secret at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/unwrapped\"),\".\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"data\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'    \"password\": \"my-long-password\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"  }\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Write secret at 'secret/unwrapped'\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/secret/unwrapped\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Read the path to verify\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/secret/unwrapped \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"request_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"cef0b061-3860-6a3c-8bba-1fdbf7be7bf1\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"renewable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" false,\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_duration\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"2764800\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"       \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"password\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"my-long-password\"'),`\n`,\"     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"wrap_info\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null,\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"warnings\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null,\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"auth\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Write the same secret at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/wrapped\"),\".\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Write the same secret at 'secret2/wrapped'\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/secret2/wrapped\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Read the path to verify\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"      http://127.0.0.1:8200/v1/secret2/wrapped \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"request_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"cc9ce831-2ca7-7115-a899-ce33767bdc2c\"'),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"\"'),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"renewable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" false,\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_duration\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"2764800\"),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"password\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"my-long-password\"'),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"wrap_info\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null,\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"warnings\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null,\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"auth\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Using a valid token, you can write and read secrets the same way regardless of\nthe seal wrap.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-1\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-1\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"secret\"),\" and click \",mdx(\"strong\",{parentName:\"p\"},\"Create secret\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-seal-wrap-4.png\",alt:\"Enable Secret Engine\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Enter the following:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"PATH FOR THIS SECTE: \",mdx(\"inlineCode\",{parentName:\"li\"},\"unwrapped\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"key: \",mdx(\"inlineCode\",{parentName:\"li\"},\"password\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"value: \",mdx(\"inlineCode\",{parentName:\"li\"},\"my-long-password\"))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-seal-wrap-5.png\",alt:\"Enable Secret Engine\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Repeat the same step for \",mdx(\"strong\",{parentName:\"p\"},\"secret2\"),` to write the same secret at the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/wrapped\"),\" path.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-seal-wrap-6.png\",alt:\"Enable Secret Engine\"})),`\nClick `,mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Using a valid token, you can write and read secrets the same way\nregardless of the seal wrap.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#view-the-encrypted-secrets\",\"aria-label\":\"view the encrypted secrets permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"view-the-encrypted-secrets\",\"aria-hidden\":\"\"})),\"View the encrypted secrets\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Remember that the Vault server was configured to use the local file system\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"/tmp/vault\"),\") as its storage backend in this example.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Configure the storage backend for Vault\"),`\n`,\"storage \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"file\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"/tmp/vault\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`SSH into the machine where the Vault server is running, and check the stored\nvalues in the `,mdx(\"inlineCode\",{parentName:\"p\"},\"/tmp/vault\"),\" directory.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"cd\"),\" /tmp/vault/sdk/logical\")),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Under the \",mdx(\"inlineCode\",{parentName:\"p\"},\"/tmp/vault/sdk/logical\"),` directory, there are two sub-directories. One\nmaps to `,mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" and another maps to \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret2/\"),` although you cannot tell by\nthe folder names.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"View the secret at rest.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# One of the directory maps to secret/unwrapped\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"cd\"),\" 2da357cd-55f2-7eed-c46e-c477b70bed18\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# View its content - password value is encrypted\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"cat\"),\" _unwrapped\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Value\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"AAAAAQICk547prhuhMiBXLq2lx8ZkMpSB3p+GKHAwuMhKrZGSeqsFevMS6YoqTVlbvpU9B4zWPZ2HA'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'SeNZ3YMw==\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Another directory maps to secret2/wrapped\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"cd\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\"/5bcea44d-28a3-87af-393b-c6d398fe41d8\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# View its content - password value is encrypted\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"cat\"),\" _wrapped\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Value\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ClBAg9oN7zBBaDBZcsilDAyGkL7soPe7vBA5+ADADuyzo8GuHZHb9UFN2nF1h0OpKEgCIkG3JNHcXt'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"tZqCi6szcuNBgF3pwhWGwB4FREM3b5CRIQYK7239Q92gRGrcBBeZD6ghogEtSBDmZJBahk7n4lIYF3X4iBqmwZgH\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'Vo4lzWur7rzncgASofCIIhENEEGghoc21fZGVtbyINaHNtX2htYWNfZGVtb3M=\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Secrets are encrypted regardless; however, the seal-wrapped value is\nsignificantly longer despite the fact that both values are the same,\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"my-long-password\"),\".\"),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),`When Vault's Seal Wrap feature is used with a FIPS 140-2 certified HSM, Vault\nwill store Critical Security Parameters (CSPs) in a manner that is compliant\nwith KeyStorage and KeyTransit requirements.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This guide used the local file system as the storage backend to keep it simple.\nTo learn more about making your Vault cluster highly available, read the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/operations/vault-ha-consul\"}),`Vault\nHA with Consul`),\" guide.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying & Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup & Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities & Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true}