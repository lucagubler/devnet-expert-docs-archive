{"pageProps":{"currentPath":"encryption/transit","frontMatter":{"layout":"guides","page_title":"Encryption as a Service - Guides","description":"HashiCorp Vault's transit secrets engine handles cryptographic functions on data in-transit. It can also viewed as _encryption as a service_."},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/encryption/transit.mdx","mdxSource":{"compiledSource":"var i=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var p=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable;var l=(a,n,s)=>n in a?i(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=>{for(var s in n||(n={}))o.call(n,s)&&l(a,s,n[s]);if(p)for(var s of p(n))r.call(n,s)&&l(a,s,n[s]);return a};var m=(a,n)=>{var s={};for(var t in a)o.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&p)for(var t of p(a))n.indexOf(t)<0&&r.call(a,t)&&(s[t]=a[t]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=m(t,[\"components\"]);return mdx(MDXLayout,e(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{className:\"g-type-display-2\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#encryption-as-a-service-transit-secrets-engine\",\"aria-label\":\"encryption as a service transit secrets engine permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h1\"},{className:\"__target-h\",id:\"encryption-as-a-service-transit-secrets-engine\",\"aria-hidden\":\"\"})),\"Encryption as a Service: Transit Secrets Engine\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Vault's \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),` secrets engine handles cryptographic functions on\ndata-in-transit. Vault doesn't store the data sent to the secrets engine, so it\ncan also be viewed as `,mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"encryption as a service\")),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Although the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),` secrets engine provides additional features (sign and\nverify data, generate hashes and HMACs of data, and act as a source of random\nbytes), its primary use case is to encrypt data. This relieves the burden of\nproper encryption/decryption from application developers and pushes the burden\nonto the operators of Vault.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-materials\",\"aria-label\":\"reference materials permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-materials\",\"aria-hidden\":\"\"})),\"Reference Materials\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/secrets/transit\"}),\"Transit Secret Engine\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/api/secret/transit\"}),\"Transit Secret Engine API\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.hashicorp.com/blog/transparent-data-encryption-in-the-modern-datacenter\"}),\"Transparent Data Encryption in the Modern Datacenter\"))),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" An \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.katacoda.com/hashicorp/scenarios/vault-transit\"}),`interactive\ntutorial`),` is\nalso available if you do not have a Vault environment to perform the steps\ndescribed in this guide.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#estimated-time-to-complete\",\"aria-label\":\"estimated time to complete permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"estimated-time-to-complete\",\"aria-hidden\":\"\"})),\"Estimated Time to Complete\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"10 minutes\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#personas\",\"aria-label\":\"personas permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"personas\",\"aria-hidden\":\"\"})),\"Personas\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The end-to-end scenario described in this guide involves two personas:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},\"operator\"),\" with privileged permissions to manage the encryption keys\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},\"app\"),\" with un-privileged permissions encrypt/decrypt secrets via API\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#challenge\",\"aria-label\":\"challenge permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"challenge\",\"aria-hidden\":\"\"})),\"Challenge\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Think of the following scenario:\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"em\",{parentName:\"p\"},\"Example Inc.\"),` recently made headlines for a massive data breach which exposed\nmillions of their users' payment card accounts online. When they tracked down the\nproblem they found that a new HVAC system with management software had been put\ninto their data centers and had created vulnerabilities in their networks and\nexposed ports and IPs to the databases publicly.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#solutions\",\"aria-label\":\"solutions permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"solutions\",\"aria-hidden\":\"\"})),\"Solutions\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),` secrets engine enables security teams to fortify data during\ntransit and at rest. So even if an intrusion occurs, your data is encrypted with\nAES 256-bit CBC encryption (TLS in transit). Even if an attacker were able to\naccess the raw data, they would only have encrypted bits. This means attackers\nwould need to compromise multiple systems before exfiltrating data.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-encryption.png\",alt:\"Encryption as a Service\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This guide demonstrates the basics of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),\" secrets engine.\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#prerequisites\",\"aria-label\":\"prerequisites permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"prerequisites\",\"aria-hidden\":\"\"})),\"Prerequisites\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To perform the tasks described in this guide, you need to have a Vault\nenvironment. Refer to the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/intro/getting-started/install\"}),`Getting\nStarted`),` guide to install Vault. Make sure\nthat your Vault server has been `,mdx(\"a\",e({parentName:\"p\"},{href:\"/intro/getting-started/deploy\"}),`initialized and\nunsealed`),\".\"),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#policy-requirements\",\"aria-label\":\"policy requirements permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"policy-requirements\",\"aria-hidden\":\"\"})),\"Policy requirements\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" For the purpose of this guide, you can use \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"root\")),` token to work\nwith Vault. However, it is recommended that root tokens are only used for just\nenough initial setup or in emergencies. As a best practice, use tokens with\nappropriate set of policies based on your role in the organization.`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To perform all tasks demonstrated in this guide, your policy must include the\nfollowing permissions:`),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable transit secrets engine\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/transit\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# To read enabled secrets engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage the transit secrets engine\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"transit/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If you are not familiar with policies, complete the\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/policies\"}),\"policies\"),\" guide.\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#steps\",\"aria-label\":\"steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"steps\",\"aria-hidden\":\"\"})),\"Steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"You will perform the following:\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step1\"}),\"Configure Transit Secret Engine\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step2\"}),\"Encrypt Secrets\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step3\"}),\"Decrypt a cipher-text\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step4\"}),\"Rotate the Encryption Key\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step5\"}),\"Update Key Configuration\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step1\",\"aria-label\":\"step 1 configure transit secret engine permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step1\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-1-configure-transit-secret-engine\",\"aria-hidden\":\"\"})),\"Step 1: Configure Transit Secret Engine\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),` secrets engine must be configured before it can perform its\noperations. This step is usually done by an `,mdx(\"strong\",{parentName:\"p\"},\"operator\"),` or configuration\nmanagement tool.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Enable the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),\" secret engine by executing the following command:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault secrets \",mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"enable\"),\" transit\")),`\n`)),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),`By default, the secrets engine will mount at the name of the engine. If you\nwish to enable it at a different path, use the `,mdx(\"inlineCode\",{parentName:\"p\"},\"-path\"),\" argument.\")),mdx(\"blockquote\",null,mdx(\"p\",e({parentName:\"blockquote\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\"),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault secrets enable -path=encryption transit\"))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, create an encryption key ring named, \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),` by executing the following\ncommand:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" -f transit/keys/orders\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Enable \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),\" secret engine using \",mdx(\"inlineCode\",{parentName:\"p\"},\"/sys/mounts\"),\" endpoint:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: <TOKEN>\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --data <PARAMETERS> \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       <VAULT_ADDRESS>/v1/sys/mounts/<PATH>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Where \",mdx(\"inlineCode\",{parentName:\"p\"},\"<TOKEN>\"),\" is your valid token, and \",mdx(\"inlineCode\",{parentName:\"p\"},\"<PARAMETERS>\"),\" holds \",mdx(\"a\",e({parentName:\"p\"},{href:\"/api/system/mounts#enable-secrets-engine\"}),`configuration\nparameters`),\" of the secret engine.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The following example enables transit secret engine at \",mdx(\"inlineCode\",{parentName:\"p\"},\"sys/mounts/transit\"),`\npath, and passed the secret engine type (`,mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),\") in the request payload.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"type\":\"transit\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/sys/mounts/transit\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, create an encryption key ring named, \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),\" using the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/keys\"),`\nendpoint:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/keys/orders\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.0.1:8200/ui\"}),\"http://127.0.0.1:8200/ui\"),\") and then login.\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\" and select \",mdx(\"strong\",{parentName:\"p\"},\"Transit\"),\" from \",mdx(\"strong\",{parentName:\"p\"},\"Secrets engine type\"),`\ndrop-down list.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-secrets-enable.png\",alt:\"Enable new engine\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Create encryption key\"),\" and enter \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),` field.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-transit-1.png\",alt:\"Create a key\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create encryption key\"),\" to complete.\"))),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` Typically, you want to create an encryption key ring for each\napplication.`)),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step2\",\"aria-label\":\"step 2 encrypt secrets permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step2\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-2-encrypt-secrets\",\"aria-hidden\":\"\"})),\"Step 2: Encrypt Secrets\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Once the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),` secrets engine has been configured, any client with a valid\ntoken with proper permission can send data to encrypt.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Here, you are going to encrypt a plaintext, \",mdx(\"em\",{parentName:\"p\"},'\"credit-card-number\"'),\".\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` You can pass non-text binary file such as a PDF or image.\nWhen you encrypt a plaintext, it must be base64-encoded.`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-1\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-1\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To encrypt your secret, use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/encrypt\"),\" endpoint:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" transit/encrypt/\")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"<key_ring_name>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Execute the following command to encrypt a plaintext:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" transit/encrypt/orders \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"plaintext\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"$(\"),\"base64 \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'<<< \"credit-card-number\")'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key           Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---           -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"ciphertext    vault:v1:cZNHVx+sxdMErXRSuDa1q/pz49fXTn1PScKfhf+PIZPvy8xKfkytpwKcbC0fF2U=\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Vault does \",mdx(\"em\",{parentName:\"p\"},\"NOT\"),` store any of this data. The output you received is the\nciphertext. You can store this ciphertext at the desired location (e.g. MySQL\ndatabase) or pass it to another application.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-1\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-1\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To encrypt your secret, use the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/api/secret/transit#encrypt-data\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"transit/encrypt\"),`\nendpoint`),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Generate base64-encoded plaintext\"),`\n`,\"$ base64 \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<<\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"credit-card-number\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"Y3JlZGl0LWNhcmQtbnVtYmVyCg\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"==\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Pass the base64-encoded plaintext in the request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"plaintext\": \"Y3JlZGl0LWNhcmQtbnVtYmVyCg==\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/transit/encrypt/orders \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"request_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"f483d9b6-8132-782e-1665-ad432c2461ab\"'),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"\"'),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"renewable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" false,\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_duration\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"0\"),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ciphertext\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"vault:v1:/9hdQutaWpZR72s3+VSCLK1JNhV1wKM49hYVjh7RjmuxIy/OvshtgV4L4uVB+aQ=\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Vault does \",mdx(\"em\",{parentName:\"p\"},\"NOT\"),` store any of this data. The output you received is the\nciphertext. You can store this ciphertext at the desired location (e.g. MySQL\ndatabase) or pass it to another application.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-1\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-1\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},\"orders\"),\" encryption key.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Key actions\"),`.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-transit-2.png\",alt:\"Key action\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Make sure that \",mdx(\"strong\",{parentName:\"p\"},\"Encrypt\"),\" is selected under \",mdx(\"strong\",{parentName:\"p\"},\"TRANSIT ACTIONS\"),`, and then\nenter \"credit-card-number\" in the `,mdx(\"strong\",{parentName:\"p\"},\"Plaintext\"),` field.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-transit-3.png\",alt:\"Encrypt plaintext\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Encode to base64\"),\" to encode the plaintext.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Encrypt\"),`.\nVault does `,mdx(\"em\",{parentName:\"p\"},\"NOT\"),` store any of this data. The output you received is the\nciphertext. You can click `,mdx(\"strong\",{parentName:\"p\"},\"Copy\"),` to copy the resulting ciphertext and store it\nat the desired location (e.g. MySQL database) or pass it to another application.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-transit-4.png\",alt:\"Encrypt plaintext\"}))))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step3\",\"aria-label\":\"step 3 decrypt a cipher text permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step3\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-3-decrypt-a-cipher-text\",\"aria-hidden\":\"\"})),\"Step 3: Decrypt a cipher-text\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Any client with a valid token with proper permission can decrypt the ciphertext\ngenerated by Vault. To decrypt the ciphertext, invoke the `,mdx(\"inlineCode\",{parentName:\"p\"},\"transit/decrypt\"),`\nendpoint.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-2\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-2\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Execute the following command to decrypt the ciphertext resulted in \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),`Step\n2`),\":\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" transit/decrypt/orders \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        ciphertext=\"vault:v1:cZNHVx+sxdMErXRSuDa1q/pz49fXTn1PScKfhf+PIZPvy8xKfkytpwKcbC0fF2U=\" \\\\'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key          Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---          -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"plaintext    Y3JlZGl0LWNhcmQtbnVtYmVyCg==\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The resulting data is base64-encoded. To reveal the original plaintext, run the\nfollowing command:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"base64 --decode \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'<<< \"Y3JlZGl0LWNhcmQtbnVtYmVyCg==\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"credit-card-number\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-2\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-2\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/decrypt\"),\" endpoint to decrypt the ciphertext resulted in \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),`Step\n2`),\":\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Pass the ciphertext in the request payload to decode\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"ciphertext\": \"vault:v1:/9hdQutaWpZR72s3+VSCLK1JNhV1wKM49hYVjh7RjmuxIy/OvshtgV4L4uVB+aQ=\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/transit/decrypt/orders \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"request_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"062d7998-8932-76f2-f96c-5938a55ff005\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_id\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"renewable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" false,\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_duration\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"0\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"plaintext\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Y3JlZGl0LWNhcmQtbnVtYmVyCg==\"'),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# The resulting data is base64-encoded that it must be decoded to reveal the plaintext\"),`\n`,\"$ base64 --decode \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<<\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Y3JlZGl0LWNhcmQtbnVtYmVyCg==\"'),`\n`,\"credit-card-number\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-2\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-2\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},\"orders\"),\" encryption key.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Key actions\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Make sure that \",mdx(\"strong\",{parentName:\"p\"},\"Decrypt\"),\" is selected under \",mdx(\"strong\",{parentName:\"p\"},\"TRANSIT ACTIONS\"),`, and then\nenter the ciphertext you wish to decrypt.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-transit-5.png\",alt:\"Decrypt ciphertext\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Decrypt\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"The resulting data is base64-encoded. Click \",mdx(\"strong\",{parentName:\"p\"},\"Decode from base64\"),` to reveal\nthe plaintext.`))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step4\",\"aria-label\":\"step 4 rotate the encryption key permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step4\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-4-rotate-the-encryption-key\",\"aria-hidden\":\"\"})),\"Step 4: Rotate the Encryption Key\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"One of the benefits of using the Vault \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit\"),` secrets engine is its ability\nto easily rotate the encryption keys. Keys can be rotated manually by a human,\nor an automated process which invokes the key rotation API endpoint through\ncron, a CI pipeline, a periodic Nomad batch job, Kubernetes Job, etc.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Vault maintains the versioned keyring and the operator can decide the minimum\nversion allowed for decryption operations. When data is encrypted using Vault,\nthe resulting ciphertext is prepended with the version of the key used to\nencrypt it.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-3\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-3\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To rotate the encryption key, invoke the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/keys/<key_ring_name>/rotate\"),`\nendpoint.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" -f transit/keys/orders/rotate\")),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Let's encrypt another data:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" transit/encrypt/orders \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"plaintext\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token punctuation\"}),\"$(\"),\"base64 \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'<<< \"visa-card-number\")'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key           Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---           -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"ciphertext    vault:v2:45f9zW6cglbrzCjI0yCyC6DBYtSBSxnMgUn9B5aHcGEit71xefPEmmjMbrk3\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Compare the ciphertexts from \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),\".\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),\"ciphertext    vault:v1:cZNHVx+sxdMErXRSuDa1q/pz49fXTn1PScKfhf+PIZPvy8xKfkytpwKcbC0fF2U=\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),'Notice that the first ciphertext starts with \"',mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault:v1:\")),`\". After rotating\nthe encryption key, the ciphertext starts with \"`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault:v2:\")),`\". This indicates\nthat the data gets encrypted using the latest version of the key after the\nrotation.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Execute the following command to rewrap your ciphertext from \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),`\nwith the latest version of the encryption key:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" transit/rewrap/orders \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        ciphertext=\"vault:v1:cZNHVx+sxdMErXRSuDa1q/pz49fXTn1PScKfhf+PIZPvy8xKfkytpwKcbC0fF2U=\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key           Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---           -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"ciphertext    vault:v2:kChHZ9w4ILRfw+DzO53IZ8m5PyB2yp2/tKbub34uB+iDqtDRB+NLCPrpzTtJHJ4=\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),'Notice that the resulting ciphertext now starts with \"',mdx(\"inlineCode\",{parentName:\"p\"},\"vault:v2:\"),'\".'),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This operation does not reveal the plaintext data. But Vault will decrypt the\nvalue using the appropriate key in the keyring and then encrypted the resulting\nplaintext with the newest key in the keyring.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-3\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-3\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To rotate the encryption key, invoke the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/keys/<key_ring_name>/rotate\"),`\nendpoint.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/keys/orders/rotate\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Let's encrypt another data:\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Generate base64-encoded plaintext\"),`\n`,\"$ base64 \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<<\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"visa-card-number\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"dmlzYS1jYXJkLW51bWJlcgo\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Pass the base64-encoded plaintext in the request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"plaintext\": \"dmlzYS1jYXJkLW51bWJlcgo=\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/transit/encrypt/orders \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ciphertext\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"vault:v2:et873RqkfLlS268LqYspVUnqhqZm0flNwhthe4ZzfcuZQab1TnirQ8/hMNYA\"'),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\",\",`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Compare the ciphertexts from \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),\".\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),\"ciphertext    vault:v1:cZNHVx+sxdMErXRSuDa1q/pz49fXTn1PScKfhf+PIZPvy8xKfkytpwKcbC0fF2U=\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),'Notice that the first ciphertext starts with \"',mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault:v1:\")),`\". After rotating\nthe encryption key, the ciphertext starts with \"`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault:v2:\")),`\". This indicates\nthat the data gets encrypted using the latest version of the key after the\nrotation.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Execute the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/rewrap\"),\" endpoint to rewrap your ciphertext from \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),`\nwith the latest version of the encryption key:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"ciphertext\": \"vault:v1:/9hdQutaWpZR72s3+VSCLK1JNhV1wKM49hYVjh7RjmuxIy/OvshtgV4L4uVB+aQ=\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/rewrap/orders | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\" ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),' \"data\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"ciphertext\": \"vault:v2:ykqXDP65tLVSrqxoNZh51gIobYQSwNGT+SbiD/2nl8rrhF2md+wplBGdXlhDzd4=\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\" ...\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),'Notice that the resulting ciphertext now starts with \"',mdx(\"inlineCode\",{parentName:\"p\"},\"vault:v2:\"),'\".'),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This operation does not reveal the plaintext data. But Vault will decrypt the\nvalue using the appropriate key in the keyring and then encrypted the resulting\nplaintext with the newest key in the keyring.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#step5\",\"aria-label\":\"step 5 update key configuration permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h __compat\",id:\"step5\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"step-5-update-key-configuration\",\"aria-hidden\":\"\"})),\"Step 5: Update Key Configuration\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The operators can \",mdx(\"a\",e({parentName:\"p\"},{href:\"/api/secret/transit#update-key-configuration\"}),`update the encryption key\nconfiguration`),` to\nspecify the minimum version of ciphertext allowed to be decrypted, the minimum\nversion of the key that can be used to encrypt the plaintext, the key is allowed\nto be deleted, etc.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This helps further tightening the data encryption rule.\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-4\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-4\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Execute the key rotation command a few times to generate multiple versions of\nthe key:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" -f transit/keys/orders/rotate\")),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, read the \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),\" key information:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" transit/keys/orders\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                       Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                       -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"keys                      map[6:1531439714 1:1531439594 2:1531439667 3:1531439714 4:1531439714 5:1531439714]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"latest_version            6\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"min_decryption_version    1\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"min_encryption_version    0\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In the example, the current version of the key is \",mdx(\"strong\",{parentName:\"p\"},\"6\"),`. However, there is no\nrestriction about the minimum encryption key version, and any of the key\nversions can decrypt the data (`,mdx(\"inlineCode\",{parentName:\"p\"},\"min_decryption_version\"),\").\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Run the following command to enforce the use of the encryption key at version\n`,mdx(\"strong\",{parentName:\"p\"},\"5\"),\" or later to decrypt the data.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" transit/keys/orders/config \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"min_decryption_version\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token number\"}),\"5\"))),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, verify the \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),\" key configuration:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" transit/keys/orders\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                       Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                       -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"allow_plaintext_backup    false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"deletion_allowed          false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"derived                   false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"exportable                false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"keys                      map[5:1531811719 6:1531811721]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"latest_version            6\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"min_decryption_version    5\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"min_encryption_version    0\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-4\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-4\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Execute the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/keys/<key_ring_name>/rotate\"),` endpoint a few times key\nrotation command a few times to generate multiple versions of the key:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/keys/orders/rotate\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Read the \",mdx(\"inlineCode\",{parentName:\"p\"},\"transit/keys/orders\"),\" endpoint to review the \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),` key\ndetail:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/keys/orders | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"keys\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"1\": 1531804669,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"2\": 1531810236,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"3\": 1531811712,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"4\": 1531811715,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"5\": 1531811719,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"6\": 1531811721'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"latest_version\": 6,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"min_decryption_version\": 1,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"min_encryption_version\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   ...\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In the example, the current version of the key is \",mdx(\"strong\",{parentName:\"p\"},\"6\"),`. However, there is no\nrestriction about the minimum encryption key version, and any of the key\nversions can decrypt the data (`,mdx(\"inlineCode\",{parentName:\"p\"},\"min_decryption_version\"),\").\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Run the following command to enforce the use of the encryption key at version\n`,mdx(\"strong\",{parentName:\"p\"},\"5\"),\" or later to decrypt the data.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"min_decryption_version\": 5}'`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/keys/orders/config\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, verify the \",mdx(\"inlineCode\",{parentName:\"p\"},\"orders\"),\" key configuration:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       https://127.0.0.1:8200/v1/transit/keys/orders | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"keys\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"5\": 1531811719,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"6\": 1531811721'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"latest_version\": 6,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"min_decryption_version\": 5,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"min_encryption_version\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   ...\"),`\n`)),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` Notice that the output only displays two valid encryption key\nversions (`,mdx(\"inlineCode\",{parentName:\"p\"},\"5\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"6\"),\").\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/encryption/transit-rewrap\"}),\"Transit Secrets Re-wrapping\"),` guide\nintroduces a sample application which re-wraps data after rotating an encryption\nkey in the transit engine in Vault.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying & Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup & Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities & Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true}