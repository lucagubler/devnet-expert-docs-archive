{"pageProps":{"currentPath":"identity/lease","frontMatter":{"layout":"guides","page_title":"Tokens and Leases - Guides","description":"Tokens are the core method for authentication within Vault. For every\nauthentication token and dynamic secret, Vault creates a lease\ncontaining information such as duration, renewability, and more.\nUnderstanding the lifecycle of leases means understanding the lifecycle of\ntokens in some sense."},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/identity/lease.mdx","mdxSource":{"compiledSource":"var c=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var p=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable;var r=(a,n,s)=>n in a?c(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,e=(a,n)=>{for(var s in n||(n={}))o.call(n,s)&&r(a,s,n[s]);if(p)for(var s of p(n))l.call(n,s)&&r(a,s,n[s]);return a};var m=(a,n)=>{var s={};for(var t in a)o.call(a,t)&&n.indexOf(t)<0&&(s[t]=a[t]);if(a!=null&&p)for(var t of p(a))n.indexOf(t)<0&&l.call(a,t)&&(s[t]=a[t]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var t=s,{components:a}=t,n=m(t,[\"components\"]);return mdx(MDXLayout,e(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{className:\"g-type-display-2\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#tokens-and-leases\",\"aria-label\":\"tokens and leases permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h1\"},{className:\"__target-h\",id:\"tokens-and-leases\",\"aria-hidden\":\"\"})),\"Tokens and Leases\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Almost everything in Vault has an associated lease, and when the lease is\nexpired, the secret is revoked. Tokens are not an exception. Every non-root\ntoken has a time-to-live (TTL) associated with it. When a token expires and it's\nnot renewed, the token is automatically revoked.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#lease-hierarchy\",\"aria-label\":\"lease hierarchy permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"lease-hierarchy\",\"aria-hidden\":\"\"})),\"Lease Hierarchy\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When a new token or secret is created, it is a child of the creator. If the\nparent is revoked or expires, so do all its children regardless of their own\nleases. A child may be a token, secret, or authentication created by a parent. A\nparent is almost always a `,mdx(\"strong\",{parentName:\"p\"},\"token\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Suppose a hierarchy exists with respective TTL as follows:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{}),\"    b519c6aa... (3h)\",`\n`,\"        6a2cf3e7... (4h)\",`\n`,\"        1d3fd4b2... (1h)\",`\n`,\"            794b6f2f... (2h)\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In this scenario, the lease ID of \",mdx(\"inlineCode\",{parentName:\"p\"},\"1d3fd4b2..\"),` will expire in an hour. If a\ntoken or secret with a lease is not renewed before the lease expires, it will be\nrevoked by the Vault server. When it's revoked, it takes its child\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"794b6f2f...\"),`) although the child has one more hour before it expires. Then,\ntwo hours later, `,mdx(\"inlineCode\",{parentName:\"p\"},\"b519c6aa...\"),` will be revoked and takes its child\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"6a2cf3e7...\"),\") with it.\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-material\",\"aria-label\":\"reference material permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-material\",\"aria-hidden\":\"\"})),\"Reference Material\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"The \",mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/secret-mgmt/dynamic-secrets#validation\"}),\"Validation\"),` section of the\n`,mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/secret-mgmt/dynamic-secrets\"}),\"Secret as a Service\"),` guide demonstrates lease\nrenewal and revocation`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/concepts/tokens\"}),\"Tokens documentation\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/api/auth/token\"}),\"Token Auth Method (API)\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/concepts/lease\"}),\"Lease, Renew, and Revoke\"))),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" An \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.katacoda.com/hashicorp/scenarios/vault-tokens\"}),`interactive\ntutorial`),` is\nalso available if you do not have a Vault environment to perform the steps\ndescribed in this guide.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#estimated-time-to-complete\",\"aria-label\":\"estimated time to complete permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"estimated-time-to-complete\",\"aria-hidden\":\"\"})),\"Estimated Time to Complete\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"10 minutes\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#personas\",\"aria-label\":\"personas permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"personas\",\"aria-hidden\":\"\"})),\"Personas\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The end-to-end scenario described in this guide involves one persona:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"admin\")),\" with privileged permissions to create and manage tokens\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"See the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#policy-requirements\"}),\"policy requirements\"),\" section for details.\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#challenge\",\"aria-label\":\"challenge permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"challenge\",\"aria-hidden\":\"\"})),\"Challenge\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Consider the following scenarios often encountered outside of Vault:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"There is no \",mdx(\"strong\",{parentName:\"li\"},\"break glass\"),` procedure available for revoking\naccess to credentials in the event of a breach`),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Credentials for external systems (e.g. AWS, MySQL) are shared\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Need temporal access to a database in a specific scenario\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#solution\",\"aria-label\":\"solution permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"solution\",\"aria-hidden\":\"\"})),\"Solution\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Vault has built-in support for secret revocation. Vault can revoke not only\na single secret, but also a tree of secrets. For example, Vault can revoke all\nsecrets read by a specific `,mdx(\"strong\",{parentName:\"p\"},\"user\"),\" or all secrets of a specific \",mdx(\"strong\",{parentName:\"p\"},\"type\"),`.\nRevocation assists in key rolling as well as locking down systems in the case of\nan intrusion.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If a user or machine needs a temporal access to Vault, you can set a short TTL\nor a number of uses to a token so the token is automatically revoked at the\nend of its life.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This also allows for organizations to plan and train for various\n\"break glass\" procedures.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#prerequisites\",\"aria-label\":\"prerequisites permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"prerequisites\",\"aria-hidden\":\"\"})),\"Prerequisites\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To perform the tasks described in this guide, you need to have a Vault\nenvironment. Refer to the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/intro/getting-started/install\"}),`Getting\nStarted`),` guide to install Vault. Make sure\nthat your Vault server has been `,mdx(\"a\",e({parentName:\"p\"},{href:\"/intro/getting-started/deploy\"}),`initialized and\nunsealed`),\".\"),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#policy-requirements\",\"aria-label\":\"policy requirements permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"policy-requirements\",\"aria-hidden\":\"\"})),\"Policy requirements\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" For the purpose of this guide, you can use the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"root\")),` token to work\nwith Vault. However, it is recommended that root tokens are used for just\nenough initial setup or in emergencies. As a best practice, use tokens with\nan appropriate set of policies based on your role in the organization.`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To perform all tasks demonstrated in this guide, your policy must include the\nfollowing permissions:`),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List available auth method - Step 1\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/auth\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Read default token configuration\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/auth/token/tune\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create and manage tokens (renew, lookup, revoke, etc.)\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# For Advanced Features - list available secret engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# For Advanced Features - tune the database secret engine TTL\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/database/tune\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`If you are not familiar with policies, complete the\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/policies\"}),\"policies\"),\" guide.\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#steps\",\"aria-label\":\"steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"steps\",\"aria-hidden\":\"\"})),\"Steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Tokens are the core method for authentication within Vault. Tokens can be used\ndirectly or dynamically generated by the auth methods. Regardless, the clients\nneed valid tokens to interact with Vault.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This guide demonstrates the lifecycle of tokens.\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step1\"}),\"Read token auth method configuration\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step2\"}),\"Create short-lived tokens\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step3\"}),\"Create tokens with use limit\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step4\"}),\"Periodic tokens\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step5\"}),\"Orphan tokens\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step6\"}),\"Revoke tokens\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step1\",\"aria-label\":\"step 1 read token auth method configuration permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step1\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-1-read-token-auth-method-configuration\",\"aria-hidden\":\"\"})),\"Step 1: Read token auth method configuration\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When you create leases with no specific TTL values, the default value applies\nto the lease.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault auth list\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Path       Type      Accessor                Default TTL  Max TTL  Replication Behavior  Description\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"approle/   approle   auth_approle_53f0fb08   system       system   replicated\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"github/    github    auth_github_b770f4c8    system       system   replicated\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token/     token     auth_token_2ad69043     system       system   replicated            token based credentials\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"userpass/  userpass  auth_userpass_d326d2f9  system       system   replicated\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The system max TTL is \",mdx(\"strong\",{parentName:\"p\"},\"32 days\"),`, but you can override it to be longer or\nshorter in Vault's configuration file.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Another option is to tune the mount configuration to override the system\ndefaults by calling the `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"/sys/mounts/<PATH>/tune\")),` endpoint (e.g.\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"/sys/mounts/database/tune\"),`). For the auth method system configuration, call\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"/sys/auth/<METHOD>/tune\")),\" endpoint.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"NOTE: Refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#advanced-features\"}),\"Advanced Features\"),` section for tuning\nthe system configuration.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Read the default TTL settings for \",mdx(\"strong\",{parentName:\"p\"},\"token\"),\" auth method:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" sys/auth/token/tune\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                 Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                 -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"default_lease_ttl   2764800\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"force_no_cache      false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"max_lease_ttl       2764800\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Use \",mdx(\"inlineCode\",{parentName:\"p\"},\"/sys/auth/token/tune\"),\" endpoint to read the default TTL settings for \",mdx(\"strong\",{parentName:\"p\"},\"token\"),` auth\nmethod:`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: <TOKEN>\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     --request GET \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     <VAULT_ADDRESS>/v1/sys/auth/token/tune\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Where \",mdx(\"inlineCode\",{parentName:\"p\"},\"<TOKEN>\"),` is your valid token with read permission on the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"sys/auth/token/tune\"),\" path.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request GET \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      http://127.0.0.1:8200/v1/sys/auth/token/tune | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"default_lease_ttl\": 2764800,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"max_lease_ttl\": 2764800,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"force_no_cache\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"request_id\": \"630fd49d-f704-540f-0641-41516087654f\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"lease_id\": \"\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"renewable\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"lease_duration\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"data\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"default_lease_ttl\": 2764800,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"force_no_cache\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"max_lease_ttl\": 2764800'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"wrap_info\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"warnings\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"auth\": null'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" The returned TTL value is in seconds (2764800 seconds = 32 days).\")),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step2\",\"aria-label\":\"step 2 create short lived tokens permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step2\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-2-create-short-lived-tokens\",\"aria-hidden\":\"\"})),\"Step 2: Create short-lived tokens\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Create a new token with TTL of 30 seconds which means that the token gets\nautomatically revoked after 30 seconds.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-1\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-1\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To view optional parameters to create tokens:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token create -help\")),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`There are a number of parameters you can set. To specify the token TTL, pass\nthe value using `,mdx(\"inlineCode\",{parentName:\"p\"},\"-ttl\"),\" parameter.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a token with TTL of 30 seconds\"),`\n`,\"$ vault token create -ttl\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"30s\",`\n`,\"Key             Value\",`\n`,\"---             -----\",`\n`,\"token           3b2b1285-844b-4b40-6afa-623f39c1b738\",`\n`,\"token_accessor  2b2b5b83-7f22-fecd-03f0-4e25bf64da11\",`\n`,\"token_duration  30s\",`\n`,\"token_renewable \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"token_policies  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"admin\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Test the new token\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"VAULT_TOKEN\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"3b2b1285-844b-4b40-6afa-623f39c1b738 vault token lookup\",`\n`,\"Key                 Value\",`\n`,\"---                 -----\",`\n`,\"accessor            2b2b5b83-7f22-fecd-03f0-4e25bf64da11\",`\n`,\"creation_time       \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1515702047\"),`\n`,\"creation_ttl        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"30\"),`\n`,\"display_name        token\",`\n`,\"expire_time         \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"2018\"),\"-01-11T20:21:17.900969673Z\",`\n`,\"explicit_max_ttl    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"0\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"id\"),\"                  3b2b1285-844b-4b40-6afa-623f39c1b738\",`\n`,\"issue_time          \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"2018\"),\"-01-11T20:20:47.90096937Z\",`\n`,\"meta                \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<\"),\"nil\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\">\"),`\n`,\"num_uses            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"0\"),`\n`,\"orphan              \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"false\"),`\n`,\"path                auth/token/create\",`\n`,\"policies            \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\"admin\",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"renewable           \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"ttl                 \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"8\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" The \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault token lookup\"),` command returns the token's properties.\nIn this example, it shows that this token has 8 more seconds before it expires.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When you execute a Vault command using the new token immediately following its\ncreation, it should work. Wait for 30 seconds and try again. It returns\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"Code: 403. Errors:\")),` which indicates a forbidden API call due to expired\ntoken usage.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"You can \",mdx(\"strong\",{parentName:\"p\"},\"renew\"),\" the token's TTL as long as the token has not expired.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token renew \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"<TOKEN>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"If you want to renew and extend the token's TTL, pass the desired extension:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token renew \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"<TOKEN> <EXTENSION>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Or with revamped cli:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token renew -increment\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"))),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"<EXTENSION> <TOKEN>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The extension value can be an integer number of seconds (e.g. 3600) or a string\nduration (e.g. \"1h\").`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-1\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-1\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"auth/token/create\"),` endpoint to create a new token. There are a number of\noptional `,mdx(\"a\",e({parentName:\"p\"},{href:\"/api/auth/token#create-token\"}),\"parameters\"),` that you can pass\nin the request payload.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The following example sets the \",mdx(\"inlineCode\",{parentName:\"p\"},\"ttl\"),\" parameter.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new token with TTl of 30 seconds\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"     --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"ttl\": \"30s\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"     http://127.0.0.1:8200/v1/auth/token/create \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"auth\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"client_token\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"f7d88963-1aba-64d7-11a0-9282ae7681d0\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"accessor\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"c0a40d94-b814-e46f-7e56-ee18fccdf1b6\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"policies\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"     \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"admin\"'),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"metadata\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" null,\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"lease_duration\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"30\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"renewable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Pass the returned token (`client_token`) in the `X-Vault-Token` header to test\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: f7d88963-1aba-64d7-11a0-9282ae7681d0\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"     --request GET \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"     http://127.0.0.1:8200/v1/auth/token/lookup-self \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"data\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"accessor\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"c0a40d94-b814-e46f-7e56-ee18fccdf1b6\"'),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"creation_time\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1515702669\"),\",\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"creation_ttl\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"30\"),\",\",`\n`,\"    \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"renewable\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" true,\",`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ttl\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\":\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"14\"),`\n`,\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),\",\",`\n`,\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"..\"),\".\",`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When you invoke the API using the new token immediately following its\ncreation, it should work. Wait for 30 seconds and try again. It returns\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"Code: 403. Errors:\")),` which indicates a forbidden API call due to expired\ntoken usage.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#renew-the-token\",\"aria-label\":\"renew the token permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"renew-the-token\",\"aria-hidden\":\"\"})),\"Renew the token:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/token/renew/<TOKEN> | jq\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Renew token with \",mdx(\"span\",e({parentName:\"span\"},{className:\"token number\"}),\"1\"),\" hour extension\")),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"increment\": \"3600\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/token/renew/<TOKEN> | jq\"),`\n`)),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` Tokens can be renewed as long as its life hasn't reached its max\nTTL. For example, if the token's TTL is 1 hour and max TTL is 24 hours, you can\nrenew the token up to 24 hours from its creation time. Once 24 hours has passed from\nthe token's creation time, the token is revoked by Vault. For long running\nprocesses, this may introduce complexity. In such case, use `,mdx(\"a\",e({parentName:\"p\"},{href:\"#step4\"}),\"periodic tokens\"),\".\")),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step3\",\"aria-label\":\"step 3 create tokens with use limit permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step3\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-3-create-tokens-with-use-limit\",\"aria-hidden\":\"\"})),\"Step 3: Create tokens with use limit\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In addition to TTL and max TTL, tokens may be limited to a number of uses. Use\nlimit tokens expire at the end of their last use regardless of their remaining\nTTLs. On the same note, use limit tokens expire at the end of their TTLs\nregardless of their remaining uses.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To create tokens with a use limit, set the number of uses when you\ncreate them.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-2\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-2\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create a token with the \",mdx(\"inlineCode\",{parentName:\"p\"},\"-use-limit\"),\" property argument.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token create -policy\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"default -use-limit\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token number\"}),\"2\"))),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key             Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---             -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token           bd39178e-176e-cc91-3930-94f7b0194de5\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_accessor  a230f5ab-b59f-db0b-855d-36ea4319b58e\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_duration  768h0m0s\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_renewable true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_policies  [default]\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This creates a token with the \",mdx(\"em\",{parentName:\"p\"},\"default\"),\" policy and a use limit of 2.\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#verification\",\"aria-label\":\"verification permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"verification\",\"aria-hidden\":\"\"})),\"Verification\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"VAULT_TOKEN\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"bd39178e-176e-cc91-3930-94f7b0194de5 vault token lookup\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                 Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                 -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"accessor            a230f5ab-b59f-db0b-855d-36ea4319b58e\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"creation_time       1515710251\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"creation_ttl        2764800\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"display_name        token\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"expire_time         2018-02-12T22:37:31.715486503Z\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"explicit_max_ttl    0\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"id                  bd39178e-176e-cc91-3930-94f7b0194de5\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"issue_time          2018-01-11T22:37:31.715486221Z\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"meta                <nil>\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"num_uses            1\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"orphan              false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"path                auth/token/create\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"policies            [default]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"renewable           true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"ttl                 2764769\"),`\n`,`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"VAULT_TOKEN\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"bd39178e-176e-cc91-3930-94f7b0194de5 vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" cubbyhole/token \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    value=bd39178e-176e-cc91-3930-94f7b0194de5\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Success! Data written to: cubbyhole/token\"),`\n`,`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"VAULT_TOKEN\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"bd39178e-176e-cc91-3930-94f7b0194de5 vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" cubbyhole/token\")),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Error reading cubbyhole/token: Error making API request.\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"URL: GET http://127.0.0.1:8200/v1/cubbyhole/token\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Code: 403. Errors:\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"* permission denied\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The first command read the token's properties and then wrote a value to the cubbyhole\nsecret engine. This exhausted the use limit of 2 for this token. Therefore,\nthe attempt to read the secret from the cubbyhole failed.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-2\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-2\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Set the \",mdx(\"inlineCode\",{parentName:\"p\"},\"num_uses\"),\" property in the request payload.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST  \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"policies\": [\"default\"], \"num_uses\":2 }' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/token/create | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"request_id\": \"0e98ff80-2825-7f50-6522-b6f95d596ef4\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"lease_id\": \"\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"renewable\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"lease_duration\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"data\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"wrap_info\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"warnings\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"auth\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"client_token\": \"d9c2f2e5-6b8a-4021-476c-ebd3f166d668\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"4dd5ef0d-8515-c3ae-ea49-016c3e9eb968\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"metadata\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"lease_duration\": 2764800,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"renewable\": true'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  }\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This creates a token with the \",mdx(\"em\",{parentName:\"p\"},\"default\"),\" policy and a use limit of 2.\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#verification-1\",\"aria-label\":\"verification permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"verification-1\",\"aria-hidden\":\"\"})),\"Verification\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: d9c2f2e5-6b8a-4021-476c-ebd3f166d668\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request GET \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/token/lookup-self | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"request_id\": \"77be1321-c0ca-e099-6f92-4ad87133b044\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"lease_id\": \"\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"renewable\": false,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"lease_duration\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"data\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"4dd5ef0d-8515-c3ae-ea49-016c3e9eb968\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"creation_time\": 1515711922,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"creation_ttl\": 2764800,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"display_name\": \"token\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"expire_time\": \"2018-02-12T23:05:22.746137253Z\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"explicit_max_ttl\": 0,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"id\": \"d9c2f2e5-6b8a-4021-476c-ebd3f166d668\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"issue_time\": \"2018-01-11T23:05:22.746136892Z\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"meta\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"num_uses\": 1,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: d9c2f2e5-6b8a-4021-476c-ebd3f166d668\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"value\": \"d9c2f2e5-6b8a-4021-476c-ebd3f166d668\" }' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/cubbyhole/token\"),`\n`,`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: d9c2f2e5-6b8a-4021-476c-ebd3f166d668\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request GET \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/cubbyhole/token | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"errors\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"permission denied\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`The first command read the token's properties and then wrote a value to the cubbyhole\nsecret engine. This exhausted the use limit of 2 for this token. Therefore,\nthe attempt to read the secret from the cubbyhole failed.`),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step4\",\"aria-label\":\"step 4 periodic tokens permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step4\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-4-periodic-tokens\",\"aria-hidden\":\"\"})),\"Step 4: Periodic tokens\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Root\"),\" or \",mdx(\"strong\",{parentName:\"p\"},\"sudo\"),\" users have the ability to generate \",mdx(\"strong\",{parentName:\"p\"},\"periodic tokens\"),`.\nPeriodic tokens have a TTL, but no max TTL; therefore, they may live for an\ninfinite duration of time so long as they are renewed within their TTL. This\nis useful for long-running services that cannot handle regenerating a token.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-3\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-3\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"First, create a token role with a specific \",mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),\". When you set \",mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),`,\ntokens created for this role will have no max TTL. Instead, the `,mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),` becomes\nthe token renewal period. This value can be an integer value in seconds (e.g.`),mdx(\"ol\",e({},{start:2764800}),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"or a string duration (e.g. 72h).\")),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" auth/token/roles/\")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'<ROLE_NAME> allowed_policies=\"<POLICY_NAMES>\" period=<RENEWAL_PERIOD>'),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" auth/token/roles/zabbix \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"allowed_policies\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"default\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"period\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"24h\"'))),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, generate a token:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token create -role\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"zabbix\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key             Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---             -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token           de91ebba-20ad-18ba-fa43-08e1932de301\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_accessor  1f8abad0-c1db-9399-15ee-dd4b6230386c\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_duration  24h0m0s\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_renewable true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_policies  [default]\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-3\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-3\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"First, create a token role by setting \",mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),\". When you set \",mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),`, tokens\ncreated for this role will have no max TTL. Instead, the `,mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),` becomes the\ntoken renewal period. This value can be an integer value in seconds (e.g.`),mdx(\"ol\",e({},{start:2764800}),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"or a string duration (e.g. 72h).\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# API request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'    \"allowed_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'        \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"    ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'    \"period\": \"24h\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a token role called 'zabbix'\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/auth/token/roles/zabbix\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"This creates a token role named \",mdx(\"inlineCode\",{parentName:\"p\"},\"zabbix\"),\" with \",mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),` policies attached.\nIts renewal period is set to 24 hours.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, generate a token:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     http://127.0.0.1:8200/v1/auth/token/create/zabbix | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'  \"auth\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"client_token\": \"a59c0d41-8df7-ba8e-477e-9bfb394f28a0\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"c2023006-ce8d-532b-136f-330223ccf464\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"    ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"metadata\": null,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"lease_duration\": 86400,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"renewable\": true,'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'    \"entity_id\": \"\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"  }\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Generated tokens are renewable indefinitely as long as they are renewed\nbefore the lease duration expires. The token renew command was covered in\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),\".\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#additional-note-periodic-tokens-with-approle\",\"aria-label\":\"additional note periodic tokens with approle permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"additional-note-periodic-tokens-with-approle\",\"aria-hidden\":\"\"})),\"Additional Note: Periodic Tokens with AppRole\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"It probably makes better sense to create \",mdx(\"strong\",{parentName:\"p\"},\"AppRole\"),` periodic tokens since we\nare talking about long-running apps that need to be able to renew their token\nindefinitely.`),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"For more details about AppRole, read the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/authentication\"}),`AppRole Pull\nAuthentication`),\" guide.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`To create AppRole periodic tokens, create your AppRole role with\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"period\"),\" specified.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" auth/approle/role/jenkins \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"policies\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"jenkins\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"period\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"72h\"'))),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Or\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Sample request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"allowed_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'        \"jenkins\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"    ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"period\": \"72h\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a role named 'jenkins'\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/auth/approle/role/jenkins\",`\n`)),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step5\",\"aria-label\":\"step 5 orphan tokens permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step5\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-5-orphan-tokens\",\"aria-hidden\":\"\"})),\"Step 5: Orphan tokens\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Orphan tokens are \",mdx(\"strong\",{parentName:\"p\"},\"not\"),` children of their parent; therefore, orphan tokens do\nnot expire when their parent does.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" Orphan tokens still expire when their own max TTL is reached.\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-4\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-4\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The following CLI command requires \",mdx(\"strong\",{parentName:\"p\"},\"root\"),\" token or \",mdx(\"strong\",{parentName:\"p\"},\"sudo\"),` capability on the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"auth/token/create\"),\" path.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token create -orphan\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-4\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-4\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To create an orphan token, use the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"auth/token/create-orphan\")),\" endpoint:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/token/create-orphan | jq\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Also, you can create an orphan token using the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"auth/token/create\")),` endpoint with\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"no-parent\"),\" parameter set to true.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"no_parent\": true }' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/token/create | jq\"),`\n`)),mdx(\"div\",e({},{className:\"alert alert-danger g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" The \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"auth/token/create\")),\" endpoint requires \",mdx(\"strong\",{parentName:\"p\"},\"root\"),` token or\n`,mdx(\"strong\",{parentName:\"p\"},\"sudo\"),` capability to create an orphan token while\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"auth/token/create-orphan\")),\" endpoint does not.\")),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step6\",\"aria-label\":\"step 6 revoke tokens and leases permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step6\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-6-revoke-tokens-and-leases\",\"aria-hidden\":\"\"})),\"Step 6: Revoke tokens and leases\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Revoking a token and all its children.\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-5\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-5\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To revoke a specific token:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault token revoke \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"<TOKEN>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To revoke all leases under a specific path:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault lease revoke -prefix \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"<PATH>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke a specific token\"),`\n`,\"$ vault token revoke eeaf890e-4b0f-a687-4190-c75b1d6d70bc\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke all leases for database auth method\"),`\n`,\"$ vault lease revoke -prefix database/creds\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke all tokens\"),`\n`,\"$ vault lease revoke -prefix auth/token/create\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke all tokens by accessor\"),`\n`,\"$ vault token revoke -accessor 2b2b5b83-7f22-fecd-03f0-4e25bf64da11\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-5\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-5\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To revoke a specific token, call \",mdx(\"inlineCode\",{parentName:\"p\"},\"/auth/token/revoke\"),\" endpoint. If you want to revoke tokens/secrets under a specific path, call \",mdx(\"inlineCode\",{parentName:\"p\"},\"/sys/leases/revoke-prefix/<PATH>\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke a specific token\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{ \"token\": \"eeaf890e-4b0f-a687-4190-c75b1d6d70bc\" }'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/auth/token/revoke\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke all secrets for database auth method\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/sys/leases/revoke-prefix/database/creds\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke all tokens\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/sys/leases/revoke-prefix/auth/token/create\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Revoke all tokens by accessor\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{ \"accessor\": \"2b2b5b83-7f22-fecd-03f0-4e25bf64da11\" }'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/auth/token/revoke-accessor\",`\n`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#advanced-features\",\"aria-label\":\"advanced features permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"advanced-features\",\"aria-hidden\":\"\"})),\"Advanced Features\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`It is important to understand lease configuration to avoid having your\nsecret leases expire earlier than you expected.`),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#1-determine-the-ttls-specific-to-the-mount\",\"aria-label\":\"1 determine the ttls specific to the mount permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"1-determine-the-ttls-specific-to-the-mount\",\"aria-hidden\":\"\"})),\"1. Determine the TTLs specific to the mount\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault secrets list\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Path        Type       Accessor            Plugin  Default TTL  Max TTL  Force No Cache  Replication Behavior  Seal Wrap  Description\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"cubbyhole/  cubbyhole  cubbyhole_36021b8e  n/a     n/a          n/a      false           local                 false      per-token private secret storage\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"database/   database   database_e21b9b4f   n/a     system       system   false           replicated            false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"identity/   identity   identity_035fe03b   n/a     n/a          n/a      false           replicated            false      identity store\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"pki/        pki        pki_9ae09eb3        n/a     system       system   false           replicated            false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"secret/     kv         kv_2e59ba96         n/a     system       system   false           replicated            false      key/value secret storage\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"ssh/        ssh        ssh_ea06b9bb        n/a     system       system   false           replicated            false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"sys/        system     system_f5b5ecac     n/a     n/a          n/a      false           replicated            false      system endpoints used for control, policy and debugging\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"transit/    transit    transit_07fc2df9    n/a     system       system   false           replicated            false\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice the \",mdx(\"strong\",{parentName:\"p\"},\"Default TTL\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"Max TTL\"),\" columns.\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#2-tune-the-system-ttls\",\"aria-label\":\"2 tune the system ttls permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"2-tune-the-system-ttls\",\"aria-hidden\":\"\"})),\"2. Tune the system TTLs\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Override the global defaults by specifying \",mdx(\"inlineCode\",{parentName:\"p\"},\"default_lease_ttl\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"max_lease_ttl\"),\" to meet your requirements.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The following example assumes that you have a database secret engine configured.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" sys/mounts/database/tune \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"default_lease_ttl\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"8640\"'))),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Or\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token:...\"'),\" --request POST \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"max_lease_ttl\": 129600}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/sys/mounts/database/tune\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#3-check-the-role-specific-ttls\",\"aria-label\":\"3 check the role specific ttls permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"3-check-the-role-specific-ttls\",\"aria-hidden\":\"\"})),\"3. Check the role specific TTLs\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Depending on the auth method, there may be more specific TTLs configured (e.g.\nroles, groups, users) as you have done so in `,mdx(\"a\",e({parentName:\"p\"},{href:\"#step4\"}),\"Step 4\"),\".\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" auth/token/roles/zabbix\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                 Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                 -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"allowed_policies    [default]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"disallowed_policies []\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"explicit_max_ttl    0\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"name                zabbix\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"orphan              false\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"path_suffix\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"period              86400\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"renewable           true\"),`\n`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now that you have learned the lifecycle of tokens and leases, read the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/authentication\"}),`AppRole Pull\nAuthentication`),` guide to learn how to generate\ntokens for apps or machines.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying & Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup & Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities & Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true}