{"pageProps":{"currentPath":"operations/multi-tenant","frontMatter":{"layout":"guides","page_title":"Secure Multi-Tenancy with Namepaces - Guides","description":"This guide provides guidance in creating a multi-tenant environment."},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/operations/multi-tenant.mdx","mdxSource":{"compiledSource":"var i=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var p=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable;var l=(a,n,t)=>n in a?i(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=>{for(var t in n||(n={}))o.call(n,t)&&l(a,t,n[t]);if(p)for(var t of p(n))r.call(n,t)&&l(a,t,n[t]);return a};var m=(a,n)=>{var t={};for(var s in a)o.call(a,s)&&n.indexOf(s)<0&&(t[s]=a[s]);if(a!=null&&p)for(var s of p(a))n.indexOf(s)<0&&r.call(a,s)&&(t[s]=a[s]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:a}=s,n=m(s,[\"components\"]);return mdx(MDXLayout,e(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{className:\"g-type-display-2\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#secure-multi-tenancy-with-namespaces\",\"aria-label\":\"secure multi tenancy with namespaces permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h1\"},{className:\"__target-h\",id:\"secure-multi-tenancy-with-namespaces\",\"aria-hidden\":\"\"})),\"Secure Multi-Tenancy with Namespaces\"),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"Enterprise Only:\"),\" The namespaces feature is a part of \",mdx(\"em\",{parentName:\"p\"},\"Vault Enterprise Pro\"),\".\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Everything in Vault is path-based, and often uses the terms \",mdx(\"inlineCode\",{parentName:\"p\"},\"path\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"namespace\"),` interchangeably. The application namespace pattern is a useful\nconstruct for providing Vault as a service to internal customers, giving them\nthe ability to implement secure multi-tenancy within Vault in order to provide\nisolation and ensure teams can self-manage their own environments.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-material\",\"aria-label\":\"reference material permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-material\",\"aria-hidden\":\"\"})),\"Reference Material\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/namespaces\"}),\"Namespaces\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"https://youtu.be/zDnIqSB4tyA\"}),\"Streamline Secrets Management with Vault Agent and Vault 0.11\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/operations/reference-architecture\"}),\"Vault Deployment Reference Architecture\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/identity/policies\"}),\"Policies\"),\" guide\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#estimated-time-to-complete\",\"aria-label\":\"estimated time to complete permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"estimated-time-to-complete\",\"aria-hidden\":\"\"})),\"Estimated Time to Complete\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"10 minutes\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#personas\",\"aria-label\":\"personas permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"personas\",\"aria-hidden\":\"\"})),\"Personas\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The scenario described in this guide introduces the following personas:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"operations\")),\" is the cluster-level administrator with privileged policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"org-admin\")),\" is the organization-level administrator\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"team-admin\")),\" is the team-level administrator\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#challenge\",\"aria-label\":\"challenge permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"challenge\",\"aria-hidden\":\"\"})),\"Challenge\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When Vault is primarily used as a central location to manage secrets, multiple\norganizations within a company may need to be able to manage their secrets in a\nself-serving manner. This means that a company needs to implement a `,mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},`Vault as\na Service`)),` model allowing each organization (tenant) to manage their own\nsecrets and policies. The most importantly, tenants should be restricted to work\nonly within their tenant scope.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant.png\",alt:\"Multi-Tenant\"}))),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#solution\",\"aria-label\":\"solution permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"solution\",\"aria-hidden\":\"\"})),\"Solution\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create a \",mdx(\"strong\",{parentName:\"p\"},\"namespace\"),` dedicated to each team, organization, or app where\nthey can perform all necessary tasks within their tenant namespace.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Each namespace can have its own:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Auth Methods\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Secret Engines\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Tokens\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Identity entities and groups\")),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),`Tokens are locked to a namespace or child-namespaces. Identity groups can\npull in entities and groups from `,mdx(\"em\",{parentName:\"p\"},\"other\"),\" namespaces.\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#prerequisites\",\"aria-label\":\"prerequisites permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"prerequisites\",\"aria-hidden\":\"\"})),\"Prerequisites\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To perform the tasks described in this guide, you need to have a \",mdx(\"strong\",{parentName:\"p\"},`Vault\nEnterprise`),\" environment.\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` The creation of namespaces should be performed by a user with a\nhighly privileged token such as `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"root\")),` to set up isolated environments for\neach organization, team, or application.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#steps\",\"aria-label\":\"steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"steps\",\"aria-hidden\":\"\"})),\"Steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Scenario:\"),` In this guide, you are going to create a namespace dedicated to\nthe Education organization which has Training and Certification teams. Delegate\noperational tasks to the team admins so that the Vault cluster operators won't\nhave to be involved.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-2.png\",alt:\"Scenario\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In this guide, you are going to perform the following steps:\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step1\"}),\"Create namespaces\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step2\"}),\"Write policies\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step3\"}),\"Setup entities and groups\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step4\"}),\"Test the organization admin user\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step5\"}),\"Test the team admin user\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step6\"}),\"Audit ambient credentials\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step1\",\"aria-label\":\"step 1 create namespaces permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step1\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-1-create-namespaces\",\"aria-hidden\":\"\"})),\"Step 1: Create namespaces\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operations)\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To create a new namespace, run: \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault namespace create <namespace_name>\"))),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create a namespace dedicated to the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\" organizations:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault namespace create education\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create child namespaces called \",mdx(\"inlineCode\",{parentName:\"p\"},\"training\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"certification\"),` under the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault namespace create -namespace=education training\",`\n`,`\n`,\"$ vault namespace create -namespace=education certification\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"List the created namespaces:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault namespace list\",`\n`,\"education/\",`\n`,`\n`,\"$ vault namespace list -namespace=education\",`\n`,\"certification/\",`\n`,\"training/\",`\n`)))),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To create a new namespace, invoke \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"sys/namespaces\")),\" endpoint:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: <TOKEN>\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       <VAULT_ADDRESS>/v1/sys/namespaces/<NS_NAME>\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Where \",mdx(\"inlineCode\",{parentName:\"p\"},\"<TOKEN>\"),\" is your valid token, and \",mdx(\"inlineCode\",{parentName:\"p\"},\"<NS_NAME>\"),` is the desired namespace\nname.`),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create a namespace for the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\" organization:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'$ curl --header \"X-Vault-Token: ...\" \\\\',`\n`,\"       --request POST \\\\\",`\n`,\"       http://127.0.0.1:8200/v1/sys/namespaces/education\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Now, create a child namespace called \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"certification\")),`\nunder `,mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),`. To do so, pass the top-level namespace name in the\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"X-Vault-Namespace\")),\" header.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a training namespace under education\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# NOTE: Top-level namespace is in the API endpoint\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        http://127.0.0.1:8200/v1/education/sys/namespaces/training\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a certification namespace under education\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# NOTE: Pass the top-level namespace in the header\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        http://127.0.0.1:8200/v1/sys/namespaces/certification\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"List the created namespaces:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'$ curl --header \"X-Vault-Token: ...\" \\\\',`\n`,\"       --request LIST\",`\n`,\"       http://127.0.0.1:8200/v1/sys/namespaces | jq\",`\n`,\"{\",`\n`,\"   ...\",`\n`,'   \"data\": {',`\n`,'     \"keys\": [',`\n`,'       \"education/\"',`\n`,\"     ]\",`\n`,\"   },\",`\n`,\"   ...\",`\n`)),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'$ curl --header \"X-Vault-Token: ...\" \\\\',`\n`,\" --request LIST\",`\n`,\"       http://127.0.0.1:8200/v1/education/sys/namespaces | jq\",`\n`,\" {\",`\n`,\"   ...\",`\n`,'   \"data\": {',`\n`,'     \"keys\": [',`\n`,'       \"certification/\",',`\n`,'       \"training/\"',`\n`,\"     ]\",`\n`,\"   },\",`\n`,\"   ...\",`\n`,\"...\",`\n`)))),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.01:8200/ui\"}),\"http://127.0.01:8200/ui\"),`)\nand then login.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`To create child namespaces, select the down-arrow on the upper left corner of\nthe UI, and select `,mdx(\"strong\",{parentName:\"p\"},\"education\"),\" under \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\".\"),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{}),\"![NS Selection](/img/vault-multi-tenant-1.png)\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Under the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\" again, and then enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"certification\")),` in\nthe `,mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step2\",\"aria-label\":\"step 2 write policies permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step2\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-2-write-policies\",\"aria-hidden\":\"\"})),\"Step 2: Write Policies\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operations)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In this scenario, there is an organization-level administrator who is a\nsuperuser within the scope of the `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),` namespace. Also, there is a\nteam-level administrator for `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"certification\")),\".\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#policy-for-education-admin\",\"aria-label\":\"policy for education admin permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"policy-for-education-admin\",\"aria-hidden\":\"\"})),\"Policy for education admin\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Requirements:\")),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage namespaces\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Enable and manage secret engines\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage entities and groups\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Manage tokens\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin.hcl\"))),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage namespaces\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/namespaces/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via API\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable and manage secrets engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List available secret engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create and manage entities and groups\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"identity/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage tokens\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#policy-for-training-admin\",\"aria-label\":\"policy for training admin permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"policy-for-training-admin\",\"aria-hidden\":\"\"})),\"Policy for training admin\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Requirements:\")),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage child-namespaces\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Enable and manage secret engines\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin.hcl\"))),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage namespaces\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/namespaces/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via API\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable and manage secrets engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List available secret engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, let's deploy the policies!\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"Also, refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#policy-with-namespaces\"}),\"Additional Discussion\"),` section\nto learn more about policy authoring with namespaces.`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-1\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-1\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To target a specific namespace, you can do one of the following:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Set \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"VAULT_NAMESPACE\")),` so that all subsequent CLI commands will be\nexecuted against that particular namespace`),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ export VAULT_NAMESPACE=<namespace_name>\",`\n`,\"$ vault policy write <policy_name> <policy_file>\",`\n`))),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Specify the target namespace with \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"-namespace\")),\" flag\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault policy write -namespace=<namespace_name> <policy_name> <policy_file>\",`\n`)))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),'Since you have to deploy policies onto \"',mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),'\" and \"',mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),`\"\nnamespaces, use \"`,mdx(\"inlineCode\",{parentName:\"p\"},\"-namespace\"),'\" flag instead of environment variable.'),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin\")),\" policies.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create edu-admin policy under 'education' namespace\"),`\n`,\"$ vault policy \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education edu-admin edu-admin.hcl\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create training-admin policy under 'education/training' namespace\"),`\n`,\"$ vault policy \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training training-admin training-admin.hcl\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-1\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-1\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To target a specific namespace, you can do one of the following:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Pass the target namespace in the \",mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"X-Vault-Namespace\")),\" header\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Prepend the API endpoint with namespace name (e.g.\n`,mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"<namespace_name>\")),mdx(\"inlineCode\",{parentName:\"li\"},\"/sys/policies/acl\"),\")\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin\")),\" policies.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" edu-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"policy\": \"path ',mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sys/namespaces/education/*\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\" {\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),\"  capabilities = [\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"create\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"read\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"update\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"delete\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"list\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sudo\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"]\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),' } ... \"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create edu-admin policy under 'education' namespace\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request PUT \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @edu-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/sys/policies/acl/edu-admin\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" training-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),' \"policy\": \"path ',mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sys/namespaces/education/training/*\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\" {\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),\"  capabilities = [\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"create\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"read\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"update\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"delete\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"list\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sudo\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"]\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),'  }  ... \"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create training-admin policy under 'education/training' namespace\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# This example directs the target namespace in the API endpoint\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request PUT \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @training-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/education/training/sys/policies/acl/training-admin\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-1\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-1\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the Web UI, make sure that the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),` is set to\n`,mdx(\"strong\",{parentName:\"p\"},\"education\"),\" in the upper left menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" tab, and then select \",mdx(\"strong\",{parentName:\"p\"},\"Create ACL policy\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Toggle \",mdx(\"strong\",{parentName:\"p\"},\"Upload file\"),\" sliding switch, and click \",mdx(\"strong\",{parentName:\"p\"},\"Choose a file\"),` to select your\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin.hcl\")),` file you authored. This loads the policy and sets the\n`,mdx(\"strong\",{parentName:\"p\"},\"Name\"),\" to be \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create Policy\"),\" to complete.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Set the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\" to be \",mdx(\"strong\",{parentName:\"p\"},\"education/training\"),` in the upper left\nmenu.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-6.png\",alt:\"Namespace\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the \",mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Create ACL policy\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Toggle \",mdx(\"strong\",{parentName:\"p\"},\"Upload file\"),\", and click \",mdx(\"strong\",{parentName:\"p\"},\"Choose a file\"),` to select your\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin.hcl\")),\" file you authored.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create Policy\"),\".\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step3\",\"aria-label\":\"step 3 setup entities and groups permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step3\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-3-setup-entities-and-groups\",\"aria-hidden\":\"\"})),\"Step 3: Setup entities and groups\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operations)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Bob who is an organization-level administrator (superuser) has two accounts:\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\". You will create an entity, \",mdx(\"strong\",{parentName:\"p\"},\"Bob Smith\"),` to\nassociate those two accounts.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Also, you are going to create a group for the team-level administrator, \",mdx(\"strong\",{parentName:\"p\"},`Team\nAdmin`),`, and add Bob Smith entity as a group member so that Bob can inherit the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy to manage the child namespace if he ever has to take\nover.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-3.png\",alt:\"Entities and Groups\"}))),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),`This step only demonstrates CLI commands and Web UI to create\nentities and groups. Refer to the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/identity\"}),`Identity - Entities and\nGroups`),` guide if you need the full details.\nAlso, read the `,mdx(\"a\",e({parentName:\"p\"},{href:\"#additional-discussion\"}),\"Additional Discussion\"),` section for\nan example of setting up external groups.`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-2\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-2\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# First, you need to enable userpass auth method\"),`\n`,\"$ vault auth \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education userpass\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a user 'bob'\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        auth/userpass/users/bob \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"password\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create an entity for Bob Smith with 'edu-admin' policy attached\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Save the generated entity ID in entity_id.txt file\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json identity/entity \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Bob Smith\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"policies\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"edu-admin\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\".data.id\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\">\"),\" entity_id.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Get the mount accessor for userpass auth method and save it in accessor.txt file\"),`\n`,\"$ vault auth list -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'.[\"userpass/\"].accessor'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\">\"),\" accessor.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create an entity alias for Bob Smith to attach 'bob'\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education identity/entity-alias \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"bob\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"canonical_id\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" entity_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"mount_accessor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" accessor.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),'# Create a group, \"Training Admin\" in education/training namespace'),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training identity/group \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Training Admin\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"policies\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training-admin\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"member_entity_ids\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" entity_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable userpass auth method in training namespace\"),`\n`,\"$ vault auth \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training userpass\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a user 'bsmith'\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        auth/userpass/users/bsmith \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"password\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Get the mount accessor for userpass auth method and save it in accessor2.txt file\"),`\n`,\"$ vault auth list -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'.[\"userpass/\"].accessor'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\">\"),\" accessor2.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Add 'bsmith' to Bob Smith entity as its alias\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education identity/entity-alias \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"bsmith\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"canonical_id\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" entity_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"mount_accessor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" accessor2.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-2\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-2\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the Web UI, make sure that the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),` is set to\n`,mdx(\"strong\",{parentName:\"p\"},\"education\"),\" in the upper left menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, and select \",mdx(\"strong\",{parentName:\"p\"},\"Enable new method\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Username & Password\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Type\"),\" drop-down menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Method\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the Vault CLI shell icon (\",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\">_\")),`) to open a command shell. Enter the\nfollowing command to create a new user, `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\".\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'vault write auth/userpass/users/bob password=\"password\"',`\n`)),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-4.png\",alt:\"Create Policy\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the icon (\",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\">_\")),\") again to hide the shell.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"From the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Entities\"),\" and then \",mdx(\"strong\",{parentName:\"p\"},\"Create entity\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"Bob Smith\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),\" field, and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin\")),` in the\n`,mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Add alias\"),\". Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),` field and select\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"userpass/ (userpass)\")),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Auth Backend\"),\" drop-down list.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab and select \",mdx(\"strong\",{parentName:\"p\"},\"Entities\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob-smith\")),\" entity and copy its \",mdx(\"strong\",{parentName:\"p\"},\"ID\"),` displayed under the\n`,mdx(\"strong\",{parentName:\"p\"},\"Details\"),\" tab.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Now, set the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\" to \",mdx(\"strong\",{parentName:\"p\"},\"education/training\"),`.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-6.png\",alt:\"Namespace\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Groups\"),\", and select \",mdx(\"strong\",{parentName:\"p\"},\"Create group\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Paste in the entity ID in the \",mdx(\"strong\",{parentName:\"p\"},\"Member Entity IDs\"),\" field you copied.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"Training Admin\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),\" field, \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin\")),` in the\n`,mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" field, and click \",mdx(\"strong\",{parentName:\"p\"},\"Create\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, and select \",mdx(\"strong\",{parentName:\"p\"},\"Enable new method\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Username & Password\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Type\"),\" drop-down menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Method\"),`. Copy the mount accessor value which you will user later.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-8.png\",alt:\"Namespace\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the Vault CLI shell icon (\",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\">_\")),`) to open a command shell. Enter the\nfollowing command to create a new user, `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\".\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'vault write auth/userpass/users/bsmith password=\"password\"',`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Set the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\" back to \",mdx(\"strong\",{parentName:\"p\"},\"education\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`In the command shell, enter the following command. Be sure to replace the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"<Bob_Smith_entity_id>\"),` with the value you copied at step 13, and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"<mount_accessor>\"),\" with the value you copied at step 20.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'vault write identity/entity-alias name=\"bsmith\" \\\\',`\n`,\"        canonical_id=<Bob_Smith_entity_id> mount_accessor=<mount_accessor>\",`\n`)))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step4\",\"aria-label\":\"step 4 test the organization admin user permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step4\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-4-test-the-organization-admin-user\",\"aria-hidden\":\"\"})),\"Step 4: Test the organization admin user\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" org-admin)\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-3\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-3\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault login -namespace\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"education -method\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"userpass \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"username\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"bob\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"password\"'))),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                    Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                    -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token                  5ai0qpQeCdRHALzEY4Q8sW.28dk2\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_accessor         9xXQmdx6Aq6zw1KX4gpzb.28dk2\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_duration         768h\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_renewable        true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'token_policies         [\"default\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'identity_policies      [\"edu-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'policies               [\"default\" \"edu-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_meta_username    bob\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),\" only has \",mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),` policy attached to his token\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"token_policies\"),\"); however, he inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\" policy from the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),\" entity (\",mdx(\"inlineCode\",{parentName:\"p\"},\"identity_policies\"),\").\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Test to make sure that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),` can create a namespace, enable secrets engine, and\nwhatever else that you want to verify.`),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Set the target namespace as an env variable\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"export\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"VAULT_NAMESPACE\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'web-app'\"),`\n`,\"$ vault namespace create web-app\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Namespace created at: education/web-app/\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v2 secrets engine at edu-secret\"),`\n`,\"$ vault secrets \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -path\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"edu-secret kv-v2\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Enabled the kv-v2 secrets engine at: edu-secret/\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Optionally, you can create new policies to test that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),` can perform the\noperations as expected. When you are done testing, unset the VAULT_NAMESPACE\nenvironment variable.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"unset\"),\" VAULT_NAMESPACE\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-2\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-2\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"password\": \"password\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/userpass/login/bob | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"auth\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"client_token\": \"5ai0qpQeCdRHALzEY4Q8sW.28dk2\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"accessor\": \"9xXQmdx6Aq6zw1KX4gpzb.28dk2\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"edu-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"token_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"identity_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"edu-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"external_namespace_policies\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"9dKXw\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'          \"training-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"        ]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"metadata\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'       \"username\": \"bob\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),\" only has \",mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),` policy attached to his token\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"token_policies\"),\"); however, he inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\" policy from the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),\" entity (\",mdx(\"inlineCode\",{parentName:\"p\"},\"identity_policies\"),\"). Also, \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy is listed\nunder `,mdx(\"inlineCode\",{parentName:\"p\"},\"external_namespace_policies\"),` due to its membership to the Training Admin\ngroup in `,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),\" namespace.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Verify that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),\" can perform the operations permitted by the \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),`\npolicy.`),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'web-app'\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Be sure to use generated bob's client token\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/sys/namespaces/web-app\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v2 secrets engine at edu-secret\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"type\": \"kv-v2\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/sys/mounts/edu-secret\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-3\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-3\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.01:8200/ui\"}),\"http://127.0.01:8200/ui\"),`). If\nyou are already logged in, sign out.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"At the \",mdx(\"strong\",{parentName:\"p\"},\"Sign in to Vault\"),\", set the \",mdx(\"strong\",{parentName:\"p\"},\"Namespace\"),\" to \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},\"Userpass\"),\" tab, and enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Username\"),` field,\nand `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"password\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Password\"),` field.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-5.png\",alt:\"Login\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Sign in\"),\". Notice that the CURRENT NAMESPACE is set to \",mdx(\"strong\",{parentName:\"p\"},\"education\"),`\nin the upper left corner of the UI.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"To add a new namespace, select \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"web-app\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and then click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Secrets\"),\", and then \",mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"KV\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Secrets engine type\"),` drop-down list, and enter\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-secret\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\" to finish.\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step5\",\"aria-label\":\"step 5 test the team admin user permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step5\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-5-test-the-team-admin-user\",\"aria-hidden\":\"\"})),\"Step 5: Test the team admin user\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" team-admin)\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-4\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-4\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\" into the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education/training\")),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault login -namespace\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"education/training -method\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"userpass \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"username\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"bsmith\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"password\"'))),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                    Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                    -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token                  5YNNjDDl6D8iW3eGQIlU0q.9dKXw\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_accessor         6TVkDhdvEQXO2JaD64TVLv.9dKXw\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_duration         768h\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_renewable        true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'token_policies         [\"default\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'identity_policies      [\"training-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'policies               [\"default\" \"training-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_meta_username    bsmith\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),\" inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy from the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"Training Admin\"),\" group (\",mdx(\"inlineCode\",{parentName:\"p\"},\"training_admin\"),\") which \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),` entity is a member\nof.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Verify that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),` can perform the operations permitted by the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),\" policy.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Set the target namespace as an env variable\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"export\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"VAULT_NAMESPACE\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/training\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'vault-training'\"),`\n`,\"$ vault namespace create vault-training\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Namespace created at: education/training/vault-training/\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v1 secrets engine at team-secret\"),`\n`,\"$ vault secrets \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -path\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"team-secret -version\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),\" kv\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Enabled the kv secrets engine at: team-secret/\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"When you are done testing, unset the VAULT_NAMESPACE environment variable.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"unset\"),\" VAULT_NAMESPACE\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-3\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-3\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\" into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Namespace: education/training\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"password\": \"password\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/userpass/login/bsmith | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"auth\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"client_token\": \"5YNNjDDl6D8iW3eGQIlU0q.9dKXw\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"accessor\": \"6TVkDhdvEQXO2JaD64TVLv.9dKXw\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"display_name\": \"education-training-auth-userpass-bsmith\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"training-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"token_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"identity_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"training-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"external_namespace_policies\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"28dk2\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'          \"edu-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"        ]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"metadata\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"username\": \"bsmith\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),\" inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy from the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"Training Admin\"),\" group which \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),` entity is a member of. Also,\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\" policy is listed under \",mdx(\"inlineCode\",{parentName:\"p\"},\"external_namespace_policies\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Verify that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),` can perform the operations permitted by the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),\" policy.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'vault-training'\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Be sure to use generated bsmith's client token\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/training/sys/namespaces/web-app\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v1 secrets engine at team-secret\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"type\": \"kv\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/training/sys/mounts/edu-secret\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-4\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-4\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.01:8200/ui\"}),\"http://127.0.01:8200/ui\"),`). If\nyou are already logged in, sign out.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"At the \",mdx(\"strong\",{parentName:\"p\"},\"Sign in to Vault\"),\", set the \",mdx(\"strong\",{parentName:\"p\"},\"Namespace\"),` to\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education/training\")),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},\"Userpass\"),\" tab, and enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Username\"),`\nfield, and `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"password\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Password\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Sign in\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"To add a new namespace, select \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault-training\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and then click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Secrets\"),\", and then \",mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"KV\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Secrets engine type\"),` drop-down list, and enter\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"team-secret\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\" to finish.\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step6\",\"aria-label\":\"step 6 audit ambient credentials permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step6\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-6-audit-ambient-credentials\",\"aria-hidden\":\"\"})),\"Step 6: Audit ambient credentials\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Many auth and secrets providers, such as AWS, Azure, GCP, and AliCloud, use ambient\ncredentials to authenticate API calls. For example, AWS may:`),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"Use an access key and secret key configured in Vault.\"),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),'If not present, check for environment variables such as \"AWS_ACCESS_KEY_ID\" and \"AWS_SECRET_ACCESS_KEY\".'),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),'If not present, load credentials configured in \"~/.aws/credentials\".'),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"If not present, use instance metadata.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This becomes a problem if these ambient credentials are not intended to be used within\na particular namespace.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`For example, suppose that your Vault server is running on an\nAWS EC2 instance. You give the owner of a namespace a particular set of permissions to\nuse for AWS. However, that owner `,mdx(\"em\",{parentName:\"p\"},\"does not\"),` configure them. So, Vault falls back to using\nthe credentials available in instance metadata, leading to a privilege escalation.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To handle this:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Ensure no environment variables are available that could grant a privilege escalation.\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Ensure that any privileges granted through instance metadata (in this example) or other\nambient identity info represent a `,mdx(\"em\",{parentName:\"li\"},\"loss\"),\" of privilege.\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Directly configure the correct credentials in namespaces, and restrict access to that\nendpoint so credentials can't later be edited to use ambient credentials.`)),mdx(\"br\",null),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"Summary:\"),` As this guide demonstrated, each namespace you created behaves\nas an `,mdx(\"strong\",{parentName:\"p\"},\"isolated\"),` Vault environment. Once you sign into a namespace, there is\nno visibility into other namespaces regardless of its hierarchical relationship.\nTokens, policies, and secrets engines are tied to its namespace; therefore, each\nclient must acquire a valid token for each namespace to access their secrets.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#additional-discussion\",\"aria-label\":\"additional discussion permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"additional-discussion\",\"aria-hidden\":\"\"})),\"Additional Discussion\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"For the simplicity, this guide used the username and password (\",mdx(\"inlineCode\",{parentName:\"p\"},\"userpass\"),`) auth\nmethod which was enabled in the education namespace. However, most likely, your\norganization uses LDAP auth method which is enabled in the `,mdx(\"strong\",{parentName:\"p\"},\"root\"),` namespace\ninstead.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Here are the steps to create the \"Training Admin\" group as described in this\nguide using the LDAP auth method enabled in the root namespace.`),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`Enable and configure the desired auth method (e.g. LDAP) in the root\nnamespace.`),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault auth enable ldap\",`\n`,`\n`,\"$ vault write auth/ldap/config \\\\\",`\n`,'        url=\"ldap://ldap.example.com\" \\\\',`\n`,'        userdn=\"ou=Users,dc=example,dc=com\" \\\\',`\n`,'        groupdn=\"ou=Groups,dc=example,dc=com\" \\\\',`\n`,'        groupfilter=\"(&(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))\" \\\\',`\n`,'        groupattr=\"cn\" \\\\',`\n`,'        upndomain=\"example.com\" \\\\',`\n`,\"        certificate=@ldap_ca_cert.pem \\\\\",`\n`,\"        insecure_tls=false \\\\\",`\n`,\"        starttls=true\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create an \",mdx(\"em\",{parentName:\"p\"},\"external\"),\" group in the root namespace.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Get the mount accessor for ldap auth method and save it in accessor.txt file\"),`\n`,\"$ vault auth list -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'.[\"ldap/\"].accessor'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\">\"),\" accessor.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create an external group and save the generated group ID in group_id.txt\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json identity/group \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training_admin_root\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"type\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"external\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\".data.id\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\">\"),\" group_id.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),'# Create a group alias - assuming that the group name in LDAP is \"ops_training\"'),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json identity/group-alias \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ops_training\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"mount_accessor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" accessor.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"canonical_id\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" group_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),\" namespace, create an \",mdx(\"em\",{parentName:\"p\"},\"internal\"),` group which has\nthe external group (`,mdx(\"inlineCode\",{parentName:\"p\"},\"training_admin_root\"),\") as its member.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault write -namespace=education/training identity/group \\\\\",`\n`,'        name=\"Training Admin\" \\\\',`\n`,'        policies=\"training-admin\" \\\\',`\n`,\"        member_group_ids=$(cat group_id.txt)\",`\n`)))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#policy-with-namespaces\",\"aria-label\":\"policy with namespaces permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"policy-with-namespaces\",\"aria-hidden\":\"\"})),\"Policy with namespaces\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In this guide, you created policies in each namespace (\",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),`). Therefore, you did not have to specify the target\nnamespace in the policy paths.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"If you want to create policies in the root namespace to control \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),\" namespaces, prepend the namespace in the paths.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"For example:\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies in the 'education' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage tokens in the 'education' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies under 'education/training' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/training/sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage tokens in the 'education/training' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/training/auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"...\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),\", you deployed the \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy in the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),` namespace. The path is relative to the working namespace.\nSo, if you want to create the `,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),\" policy in the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),`\nnamespace instead, the paths starts with `,mdx(\"inlineCode\",{parentName:\"p\"},\"training/\"),` rather than\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training/\"),\".\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage namespaces\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training/sys/namespaces/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via API\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training/sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training/sys/policy/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"...\",`\n`)),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` Important to remember that tokens are local to the namespace.\nTherefore, you need a valid token for the namespace you want to operate in. The\ntoken created in the `,mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),` namespace is not valid in the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),` namespace. This is so that each namespace is completely\nisolated from one another to ensure a secure multi-tenant environment.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/sentinel\"}),\"Sentinel Policies\"),` guide if you\nneed to write policies that allow you to embed finer control over the user\naccess across those namespaces.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying & Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup & Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities & Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true}