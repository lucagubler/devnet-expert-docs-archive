{"pageProps":{"currentPath":"secret-mgmt/versioned-kv","frontMatter":{"layout":"guides","page_title":"Versioned KV Secret Engine - Guides","description":"Vault 0.10.0 introduced version 2 of key-value secret engine which supports\nversioning of your secrets so that you can undo the accidental deletion of\nsecrets, or compare the different versions of the secret."},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/secret-mgmt/versioned-kv.mdx","mdxSource":{"compiledSource":"var c=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var p=Object.getOwnPropertySymbols,m=Object.prototype.propertyIsEnumerable;var r=(e,s,n)=>s in e?c(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,a=(e,s)=>{for(var n in s||(s={}))o.call(s,n)&&r(e,n,s[n]);if(p)for(var n of p(s))m.call(s,n)&&r(e,n,s[n]);return e};var l=(e,s)=>{var n={};for(var t in e)o.call(e,t)&&s.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&p)for(var t of p(e))s.indexOf(t)<0&&m.call(e,t)&&(n[t]=e[t]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var t=n,{components:e}=t,s=l(t,[\"components\"]);return mdx(MDXLayout,a(a(a({},layoutProps),s),{components:e,mdxType:\"MDXLayout\"}),mdx(\"h1\",a({},{className:\"g-type-display-2\"}),mdx(\"a\",a({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#versioned-key-value-secret-engine\",\"aria-label\":\"versioned key value secret engine permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h1\"},{className:\"__target-h\",id:\"versioned-key-value-secret-engine\",\"aria-hidden\":\"\"})),\"Versioned Key/Value Secret Engine\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The \",mdx(\"a\",a({parentName:\"p\"},{href:\"/guides/secret-mgmt/static-secrets\"}),\"Static Secrets\"),` guide introduced\nthe basics of working with key-value secret engine. `,mdx(\"strong\",{parentName:\"p\"},\"Vault 0.10\"),\" introduced \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://www.hashicorp.com/blog/vault-0-10\"}),mdx(\"em\",{parentName:\"a\"},`K/V\nSecrets Engine v2 with Secret\nVersioning`)),`. This guide\ndemonstrates the new features introduced by the key-value secret engine v2.`),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-material\",\"aria-label\":\"reference material permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-material\",\"aria-hidden\":\"\"})),\"Reference Material\"),mdx(\"ul\",null,mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"/guides/secret-mgmt/static-secrets\"}),\"Static Secrets guide\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"/docs/secrets/kv/kv-v2\"}),\"KV Secrets Engine - Version 2\")),mdx(\"li\",a({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"/api/secret/kv/kv-v2\"}),\"KV Secrets Engine - Version 2 (API)\"))),mdx(\"div\",a({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",a({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" An \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://www.katacoda.com/hashicorp/scenarios/vault-static-secrets\"}),`interactive\ntutorial`),` is\nalso available if you do not have a Vault environment to perform the steps\ndescribed in this guide.`)),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#estimated-time-to-complete\",\"aria-label\":\"estimated time to complete permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"estimated-time-to-complete\",\"aria-hidden\":\"\"})),\"Estimated Time to Complete\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"10 minutes\"),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#challenge\",\"aria-label\":\"challenge permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"challenge\",\"aria-hidden\":\"\"})),\"Challenge\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`The KV secret engine v1 does not provide a way to version or roll back secrets.\nThis made it difficult to recover from unintentional data loss or overwrite when\nmore than one user is writing at the same path.`),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#solution\",\"aria-label\":\"solution permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"solution\",\"aria-hidden\":\"\"})),\"Solution\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Run the \",mdx(\"strong\",{parentName:\"p\"},\"version 2\"),` of KV secret engine which can retain a configurable\nnumber of secret versions. This enables older versions' data to be retrievable\nin case of unwanted deletion or updates of the data. In addition, its\n`,mdx(\"em\",{parentName:\"p\"},\"Check-and-Set\"),` operations can be used to protect the data from being overwritten\nunintentionally.`),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"img\",a({parentName:\"p\"},{src:\"/img/vault-versioned-kv-1.png\",alt:\"Versioned KV\"}))),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#prerequisites\",\"aria-label\":\"prerequisites permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"prerequisites\",\"aria-hidden\":\"\"})),\"Prerequisites\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`To perform the tasks described in this guide, you need to have a Vault\nenvironment. Refer to the `,mdx(\"a\",a({parentName:\"p\"},{href:\"/intro/getting-started/install\"}),`Getting\nStarted`),` guide to install Vault. Make sure\nthat your Vault server has been `,mdx(\"a\",a({parentName:\"p\"},{href:\"/intro/getting-started/deploy\"}),`initialized and\nunsealed`),\".\"),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#policy-requirements\",\"aria-label\":\"policy requirements permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"policy-requirements\",\"aria-hidden\":\"\"})),\"Policy requirements\"),mdx(\"div\",a({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",a({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),\" For the purpose of this guide, you can use \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"root\")),` token to work\nwith Vault. However, it is recommended that root tokens are only used for\ninitial setup or in emergencies. As a best practice, use tokens with\nappropriate set of policies based on your role in the organization.`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`To perform all tasks demonstrated in this guide, your policy must include the\nfollowing permissions:`),mdx(\"pre\",a({},{className:\"language-shell\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# To view in Web UI\"),`\n`,\"path \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Write and manage secrets in key-value secret engine\"),`\n`,\"path \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"secret*\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# To enable secret engines\"),`\n`,\"path \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/*\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`If you are not familiar with policies, complete the\n`,mdx(\"a\",a({parentName:\"p\"},{href:\"/guides/identity/policies\"}),\"policies\"),\" guide.\"),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#steps\",\"aria-label\":\"steps permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"steps\",\"aria-hidden\":\"\"})),\"Steps\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"This guide demonstrates the basic commands for working with KV secret engine v2.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"You will perform the following:\"),mdx(\"ol\",null,mdx(\"li\",a({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"#step1\"}),\"Check the KV secret engine version\")),mdx(\"li\",a({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"#step2\"}),\"Write secrets\")),mdx(\"li\",a({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"#step3\"}),\"Retrieve a specific version of secret\")),mdx(\"li\",a({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"#step4\"}),\"Specify the number of versions to keep\")),mdx(\"li\",a({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"#step5\"}),\"Delete versions of secret\")),mdx(\"li\",a({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",a({parentName:\"li\"},{href:\"#step6\"}),\"Permanently delete data\"))),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step1\",\"aria-label\":\"step 1 check the kv secret engine version permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step1\",\"aria-hidden\":\"\"})),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"step-1-check-the-kv-secret-engine-version\",\"aria-hidden\":\"\"})),\"Step 1: Check the KV secret engine version\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" devops)\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Before beginning, verify that you are using the v2 of the KV secret engine.\"),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To check the KV secret engine version:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault secrets list -format\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"json\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'\"secret/\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"type\": \"kv\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"description\": \"key/value secret storage\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"accessor\": \"kv_f05b8b9c\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"config\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"default_lease_ttl\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"max_lease_ttl\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"force_no_cache\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"options\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"version\": \"2\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"  ...\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The indicated \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"version\")),\" should be \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"2\")),\". If the version is \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"1\")),`,\nupgrade it to v2.`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv enable-versioning secret/\")),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To check the KV secret engine version:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: <TOKEN>\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       <VAULT_ADDRESS>/v1/sys/mounts\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Where \",mdx(\"inlineCode\",{parentName:\"p\"},\"<TOKEN>\"),\" is your valid token, and \",mdx(\"inlineCode\",{parentName:\"p\"},\"<VAULT_ADDRESS>\"),` is where your vault\nserver is running.`),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/sys/mounts | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"secret/\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"accessor\": \"kv_f05b8b9c\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"config\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'      \"default_lease_ttl\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'      \"force_no_cache\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'      \"max_lease_ttl\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'      \"plugin_name\": \"\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"description\": \"key/value secret storage\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"local\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"options\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'      \"version\": \"2\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"    },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"seal_wrap\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"type\": \"kv\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The indicated \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"version\")),\" should be \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"2\")),\". If the version is \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"1\")),`,\nupgrade it to v2.`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" payload.json\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"options\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'      \"version\": \"2\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"  }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --data @payload.json \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/sys/mounts/secret/tune\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"inlineCode\",{parentName:\"p\"},\"http://127.0.0.1:8200/ui\"),`) and\nthen login.`),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"img\",a({parentName:\"p\"},{src:\"/img/vault-versioned-kv-2.png\",alt:\"Web UI\"}))),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"If \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" does not indicates \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"v2\")),\", you can upgrade it from \",mdx(\"inlineCode\",{parentName:\"p\"},\"v1\"),\" to \",mdx(\"inlineCode\",{parentName:\"p\"},\"v2\"),`\nby executing the following CLI command:`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv enable-versioning secret/\")),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`Alternatively, you can enable KV secret engine v2 at a different path by\nclicking `,mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\". Select \",mdx(\"strong\",{parentName:\"p\"},\"KV\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Secret engine type\"),`\ndrop-down list. Be sure that the `,mdx(\"strong\",{parentName:\"p\"},\"Version\"),\" is set to be \",mdx(\"strong\",{parentName:\"p\"},\"Version 2\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"img\",a({parentName:\"p\"},{src:\"/img/vault-versioned-kv-3.png\",alt:\"Enabling kv-v2\"}))),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\" to complete.\"),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step2\",\"aria-label\":\"step 2 write secrets permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step2\",\"aria-hidden\":\"\"})),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"step-2-write-secrets\",\"aria-hidden\":\"\"})),\"Step 2: Write Secrets\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To understand how the versioning works, let's write some test data.\"),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-commands\",\"aria-label\":\"cli commands permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-commands\",\"aria-hidden\":\"\"})),\"CLI commands\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To write secrets, run \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault kv put\"),\" command instead of \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault write\"),\":\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv put secret/customer/acme \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"ACME Inc.\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"contact_email\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"jsmith@acme.com\"'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-14T00:05:47.115378933Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"version          1\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To update the existing secret, run the \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault kv put\"),\" command again:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv put secret/customer/acme \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"ACME Inc.\"'),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"contact_email\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"john.smith@acme.com\"'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-14T00:13:35.296018431Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"version          2\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Now you have two versions of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\" data. Run \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault kv get\"),`\nto read the data.`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv get secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Metadata ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-14T00:13:35.296018431Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"version          2\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"======== Data ========\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"contact_email    john.smith@acme.com\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"name             ACME Inc.\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-1\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-1\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Write some data at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\":\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"{\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'  \"data\": {'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'    \"name\": \"ACME Inc.\",'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'    \"contact_email\": \"jsmith@acme.com\"'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"  }\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"}\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --data @payload.json \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/data/customer/acme\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Notice that the endpoint for KV v2 is \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"/secret/data/<path>\")),`; therefore, to\nwrite secrets at `,mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),`, the API endpoint becomes\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"/secret/data/customer/acme\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Update the secret to create another version:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"{\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'  \"data\": {'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'    \"name\": \"ACME Inc.\",'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'    \"contact_email\": \"john.smith@acme.com\"'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"  }\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"}\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --data @payload.json \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/data/customer/acme\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Now you have two versions of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\" data. Read back the secret.\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/data/customer/acme\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"request_id\": \"7233b69d-35d9-6c1b-ae81-9a679a03082d\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"lease_id\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"renewable\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"lease_duration\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"contact_email\": \"john.smith@acme.com\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"name\": \"ACME Inc.\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"metadata\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-14T00:59:11.27903511Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"version\": 2'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"   },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"wrap_info\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"warnings\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"auth\": null'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-1\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-1\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"In the Web UI, select \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create secret\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"img\",a({parentName:\"p\"},{src:\"/img/vault-versioned-kv-5.png\",alt:\"Write Secret\"}))),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To update the existing secret, select \",mdx(\"strong\",{parentName:\"p\"},\"Edit\"),\", change the \",mdx(\"inlineCode\",{parentName:\"p\"},\"contact_email\"),`\nvalue, and then click `,mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"img\",a({parentName:\"p\"},{src:\"/img/vault-versioned-kv-6.png\",alt:\"Write Secret\"}))),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step3\",\"aria-label\":\"step 3 retrieve a specific version of secret permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step3\",\"aria-hidden\":\"\"})),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"step-3-retrieve-a-specific-version-of-secret\",\"aria-hidden\":\"\"})),\"Step 3: Retrieve a Specific Version of Secret\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"You may run into a situation where you need to view the secret before an update.\"),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-commands-1\",\"aria-label\":\"cli commands permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-commands-1\",\"aria-hidden\":\"\"})),\"CLI commands\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To retrieve the version 1 of the secret written at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\":\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv get -version\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token number\"}),\"1\"),\" secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Metadata ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-14T00:05:47.115378933Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"version          1\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"======== Data ========\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"contact_email    jsmith@acme.com\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"name             ACME Inc.\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To read the \",mdx(\"strong\",{parentName:\"p\"},\"metadata\"),\" of \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\":\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv metadata get secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"======= Metadata =======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key                Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---                -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time       2018-04-14T00:05:47.115378933Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"current_version    2\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"max_versions       0\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"oldest_version     0\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"updated_time       2018-04-14T00:13:35.296018431Z\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 1 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-14T00:05:47.115378933Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 2 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-14T00:13:35.296018431Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-2\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-2\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To retrieve the version 1 of the secret written at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\":\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/data/customer/acme?version=1 | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"request_id\": \"3bf5a2c1-d89b-9dd5-9bb5-0bc61a4a6d83\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_id\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"renewable\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_duration\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"contact_email\": \"jsmith@acme.com\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"name\": \"ACME Inc.\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"   },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"metadata\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"created_time\": \"2018-04-14T00:05:47.115378933Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"destroyed\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"version\": 1'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"wrap_info\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"warnings\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"auth\": null'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To read the \",mdx(\"strong\",{parentName:\"p\"},\"metadata\"),\" of \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),\":\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/metadata/customer/acme | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"request_id\": \"34708262-59cd-9a94-247f-3b1db0909050\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_id\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"renewable\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_duration\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"created_time\": \"2018-04-14T00:05:47.115378933Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"current_version\": 2,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"max_versions\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"oldest_version\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"updated_time\": \"2018-04-14T00:13:35.296018431Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"versions\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"1\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-14T00:05:47.115378933Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"2\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-14T00:13:35.296018431Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"wrap_info\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"warnings\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"auth\": null'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step4\",\"aria-label\":\"step 4 specify the number of versions to keep permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step4\",\"aria-hidden\":\"\"})),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"step-4-specify-the-number-of-versions-to-keep\",\"aria-hidden\":\"\"})),\"Step 4: Specify the number of versions to keep\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"By default, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"kv-v2\"),` secret engine keeps up to 10 versions. Let's limit the\nmaximum number of versions to keep to be 4.`),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-1\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-1\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To set the \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" to keep up to 4 versions:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"write\"),\" secret/config \",mdx(\"span\",a({parentName:\"span\"},{className:\"token assign-left variable\"}),\"max_versions\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token number\"}),\"4\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Success! Data written to: secret/config\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"View the configuration settings\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" secret/config\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key             Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---             -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"cas_required    false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"max_versions    4\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`Alternatively, to limit the number of versions only on the\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"secret/customer/acme\")),\" path rather than the entire \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" engine:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv metadata put -max-versions\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token number\"}),\"4\"),\" secret/customer/acme\")),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Overwrite the data a few more times to see what happens to the data.\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv metadata get secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"======= Metadata =======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key                Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---                -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time       2018-04-14T00:42:25.677078177Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"current_version    6\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"max_versions       0\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"oldest_version     3\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"updated_time       2018-04-16T00:17:23.930473344Z\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 3 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:15:59.880368849Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 4 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:16:18.941331243Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 5 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:16:34.407951572Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 6 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:17:23.930473344Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    n/a\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`In this example, the current version is 6. Notice that version 1 and 2 do not\nshow up in the metadata. Because the kv secret engine is configured to keep only\n4 versions, the oldest two versions are permanently deleted and you won't be\nable to read them.`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv get -version\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token number\"}),\"1\"),\" secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"No value found at secret/data/customer/data\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-3\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-3\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To set the \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" to keep up to 4 versions:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"tee\"),\" payload.json\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"{\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'  \"max_versions\": 4,'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'  \"cas_required\": false'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"}\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --data @payload.json\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/config\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To view the configuration:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/config | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"request_id\": \"8addfed1-41eb-6a19-8342-93f493c51538\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_id\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"renewable\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_duration\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"cas_required\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"max_versions\": 4'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"wrap_info\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"warnings\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"auth\": null'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`Alternatively, to limit the number of versions only on the\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"secret/customer/acme\")),\" path rather than the entire \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/\"),\" engine:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --data @payload.json\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/metadata/customer/acme\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Invoke the \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/metadata/customer/acme\"),\" endpoint instead.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Overwrite the data a few more times to see what happens to the data.\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/metadata/customer/acme | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"request_id\": \"f2dd7f69-294c-e5c3-d582-f723005ea243\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_id\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"renewable\": false,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"lease_duration\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"created_time\": \"2018-04-14T00:42:25.677078177Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"current_version\": 6,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"max_versions\": 0,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"oldest_version\": 3,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"updated_time\": \"2018-04-16T00:17:23.930473344Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"versions\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"3\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-16T00:15:59.880368849Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"4\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-16T00:16:18.941331243Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"5\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-16T00:16:34.407951572Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'     \"6\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"created_time\": \"2018-04-16T00:17:23.930473344Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"deletion_time\": \"\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'       \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"     }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"wrap_info\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"warnings\": null,'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"auth\": null'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`In this example, the current version is 6. Notice that version 1 and 2 do not\nshow up in the metadata. Because the kv secret engine is configured to keep only\n4 versions, the oldest two versions are permanently deleted and you won't be\nable to read them.`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/data/customer/acme?version=1 | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"errors\": []'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step5\",\"aria-label\":\"step 5 delete versions of secret permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step5\",\"aria-hidden\":\"\"})),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"step-5-delete-versions-of-secret\",\"aria-hidden\":\"\"})),\"Step 5: Delete versions of secret\"),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-2\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-2\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Let's delete versions 4 and 5:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv delete -versions\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"4,5\"'),\" secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Success! Data deleted (if it existed) at: secret/customer/acme\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Check the metadata\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv metadata get secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 4 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:12:25.404198622Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    2018-04-16T01:04:01.160426888Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 5 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:12:47.527981267Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    2018-04-16T01:04:01.160427742Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`The metadata on versions 4 and 5 reports its deletion timestamp\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"deletion_time\"),\"); however, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"destroyed\"),\" parameter is set to \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"If version 5 was deleted by mistake and you wish to recover, invoke the \",mdx(\"inlineCode\",{parentName:\"p\"},\"vault kv undelete\"),\" command:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv undelete -versions\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token number\"}),\"5\"),\" secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Success! Data written to: secret/undelete/customer/acme\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-4\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-4\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Let's delete versions 4 and 5:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"versions\":[4,5] }'`),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/delete/customer/acme\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Check the metadata\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"      http://127.0.0.1:8200/v1/secret/metadata/customer/acme | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'\"4\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"created_time\": \"2018-04-16T00:16:18.941331243Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"deletion_time\": \"2018-04-16T01:17:42.003111567Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),' \"5\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"created_time\": \"2018-04-16T00:16:34.407951572Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"deletion_time\": \"2018-04-16T01:17:42.003111978Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'   \"destroyed\": false'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\" },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`The metadata on versions 4 and 5 reports its deletion timestamp\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"deletion_time\"),\"); however, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"destroyed\"),\" parameter is set to \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\".\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`If version 5 was deleted by mistake and you wish to recover, invoke the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"/secret/undelete\"),\" endpoint:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"versions\":[5] }'`),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/undelete/customer/acme\"),`\n`)),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step6\",\"aria-label\":\"step 6 permanently delete data permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step6\",\"aria-hidden\":\"\"})),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"step-6-permanently-delete-data\",\"aria-hidden\":\"\"})),\"Step 6: Permanently delete data\"),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-3\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-3\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To permanently delete a version of secret:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv destroy -versions\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token number\"}),\"4\"),\" secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Success! Data written to: secret/destroy/customer/acme\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Check the metadata\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv metadata get secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"====== Version 4 ======\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key              Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---              -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"created_time     2018-04-16T00:12:25.404198622Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"deletion_time    2018-04-16T01:04:01.160426888Z\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"destroyed        true\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The metadata indicates that Version 4 is destroyed.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"If you wish to destroy all the keys and versions at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),`,\ninvoke the `,mdx(\"inlineCode\",{parentName:\"p\"},\"vault kv metadata delete\"),\" command:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault kv metadata delete secret/customer/acme\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Success! Data deleted (if it existed) at: secret/metadata/customer/acme\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-5\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-5\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To permanently delete a version of secret:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),`       --data '{ \"versions\":[4] }'`),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/destroy/customer/acme\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Check the metadata\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"      http://127.0.0.1:8200/v1/secret/metadata/customer/acme | jq\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'  \"4\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"created_time\": \"2018-04-16T00:16:18.941331243Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"deletion_time\": \"2018-04-16T01:17:42.003111567Z\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),'    \"destroyed\": true'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"  },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"...\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The metadata indicates that Version 4 is destroyed.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"If you wish to destroy all the keys and versions at \",mdx(\"inlineCode\",{parentName:\"p\"},\"secret/customer/acme\"),`,\ninvoke the `,mdx(\"inlineCode\",{parentName:\"p\"},\"secret/metadata\"),\" endpoint:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request DELETE\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/metadata/customer/acme\"),`\n`)),mdx(\"h3\",a({},{className:\"g-type-display-4\"}),mdx(\"a\",a({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#additional-discussion\",\"aria-label\":\"additional discussion permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h3\"},{className:\"__target-h\",id:\"additional-discussion\",\"aria-hidden\":\"\"})),\"Additional Discussion\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The v2 of KV secret engine supports a \",mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"Check-And-Set\")),` operation to prevent\nunintentional secret overwrite. When you pass the `,mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),` flag to Vault, it first\nchecks if the key already exists.`),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"By default, \",mdx(\"em\",{parentName:\"p\"},\"Check-And-Set\"),` operation is not enabled on the KV secret engine;\ntherefore, write is always allowed (no checking is performed).`),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault \",mdx(\"span\",a({parentName:\"span\"},{className:\"token builtin class-name\"}),\"read\"),\" secret/config\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"Key             Value\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"---             -----\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"cas_required    false\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"max_versions    0\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-4\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-4\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To enable the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"Check-And-Set\")),\" operation:\"),mdx(\"pre\",a({},{className:\"language-shell\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Enable cas_requied on the secret engine mounted at secret/\"),`\n`,\"$ vault \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" secret/config cas-required\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"true\",`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Enable cas_requied only on the secret/partner path\"),`\n`,\"$ vault kv metadata put -cas-required\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"true secret/partner\",`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Once check-and-set is enabled, every write operation requires \",mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),` value to be\npassed. If you are sure that you want to overwrite the existing key-value, set\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),\" to match the current version. Set \",mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),\" to \",mdx(\"inlineCode\",{parentName:\"p\"},\"0\"),` if you want to write the\nsecret `,mdx(\"em\",{parentName:\"p\"},\"only if\"),\" the key does not exist.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",a({},{className:\"language-shell\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# To write if the key does not already exists\"),`\n`,\"$ vault kv put -cas\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"0\"),\" secret/partner \",mdx(\"span\",a({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Example Co.\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token assign-left variable\"}),\"partner_id\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"123456789\"'),`\n`,\"Key              Value\",`\n`,\"---              -----\",`\n`,\"created_time     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"2018\"),\"-04-16T22:58:15.798753323Z\",`\n`,\"deletion_time    n/a\",`\n`,\"destroyed        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"false\"),`\n`,\"version          \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# To overwrite the secret, you must specify the current version with -cas flag\"),`\n`,\"$ vault kv put -cas\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"1\"),\" secret/partner \",mdx(\"span\",a({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Example Co.\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token assign-left variable\"}),\"partner_id\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ABCDEFGHIJKLMN\"'),`\n`,\"Key              Value\",`\n`,\"---              -----\",`\n`,\"created_time     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"2018\"),\"-04-16T23:00:28.66552289Z\",`\n`,\"deletion_time    n/a\",`\n`,\"destroyed        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"false\"),`\n`,\"version          \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"2\"),`\n`)),mdx(\"h4\",a({},{className:\"g-type-display-5\"}),mdx(\"a\",a({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-6\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-6\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"To enable the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},\"Check-And-Set\")),\" operation:\"),mdx(\"pre\",a({},{className:\"language-shell-session\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"tee\"),\" payload.json\",mdx(\"span\",a({parentName:\"span\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"{\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'  \"max_versions\": 10,'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'  \"cas_required\": true'))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"}\"))),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),\"EOF\"))),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Enable cas_requied on the secret engine mounted at secret/\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       --data @payload.json\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/secret/config\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"#\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),\"Enable cas_requied only on the secret/partner path\")),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",a({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \")),mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"      --request POST \\\\\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"      --data @payload.json\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token output\"}),\"      http://127.0.0.1:8200/v1/secret/metadata/partner\"),`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Once check-and-set is enabled, every write operation requires \",mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),` value to be\npassed. If you are sure that you want to overwrite the existing key-value, set\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),\" to match the current version. Set \",mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),\" to \",mdx(\"inlineCode\",{parentName:\"p\"},\"0\"),` if you want to write the\nsecret `,mdx(\"em\",{parentName:\"p\"},\"only if\"),\" the key does not exist.\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Example:\")),mdx(\"pre\",a({},{className:\"language-shell\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Write if the key does not already exists\"),`\n`,\"$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'  \"options\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'    \"cas\": 0'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"  },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'  \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'    \"name\": \"Example Co.\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'    \"partner_id\": \"123456789\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"  }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,\"$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/secret/data/partner\",`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# To overwrite the secret, you must pass the current version\"),`\n`,\"$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" payload.json \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"<<\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'  \"options\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'    \"cas\": 1'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"  },\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'  \"data\": {'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'    \"name\": \"Example Co.\",'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'    \"partner_id\": \"ABCDEFGHIJKLMN\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"  }\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,\"$ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @payload.json \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/secret/data/partner\",`\n`)),mdx(\"div\",a({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",a({parentName:\"div\"},{className:\"g-type-long-body\"}),\"If the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"cas\")),` value is missing in your write request, the\n\"`,mdx(\"inlineCode\",{parentName:\"p\"},\"check-and-set parameter required for this call\"),`\" error will be returned. If\nthe `,mdx(\"inlineCode\",{parentName:\"p\"},\"cas\"),` does not match the current version number, you will receive the\n\"`,mdx(\"inlineCode\",{parentName:\"p\"},\"check-and-set parameter did not match the current version\"),'\" message.')),mdx(\"h2\",a({},{className:\"g-type-display-3\"}),mdx(\"a\",a({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",a({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),`This guide introduced the CLI commands and API endpoints to read and write\nstatic secrets in the key-value secret engine. Read `,mdx(\"a\",a({parentName:\"p\"},{href:\"/guides/secret-mgmt/dynamic-secrets\"}),\"Secret as a Service: Dynamic Secrets\"),` guide to learn about the\nusage of database secret engine.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying & Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup & Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities & Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true}