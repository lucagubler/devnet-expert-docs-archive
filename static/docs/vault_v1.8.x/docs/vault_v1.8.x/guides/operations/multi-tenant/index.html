<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta property="og:image" content="https://www.vaultproject.io/img/og-image.png"/><link href="https://www.datocms-assets.com/2885/1597163356-vault-favicon.png?h=16&amp;w=16" type="image/png" sizes="16x16" rel="icon"/><link href="https://www.datocms-assets.com/2885/1597163356-vault-favicon.png?h=32&amp;w=32" type="image/png" sizes="32x32" rel="icon"/><link href="https://www.datocms-assets.com/2885/1597163356-vault-favicon.png?h=96&amp;w=96" type="image/png" sizes="96x96" rel="icon"/><link href="https://www.datocms-assets.com/2885/1597163356-vault-favicon.png?h=192&amp;w=192" type="image/png" sizes="192x192" rel="icon"/><title>Secure Multi-Tenancy with Namepaces - Guides | Vault by HashiCorp</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="This guide provides guidance in creating a multi-tenant environment."/><meta property="og:site_name" content="Vault by HashiCorp"/><meta name="next-head-count" content="17"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/css/7246d51e322c1bb7fa92.css" as="style"/><link rel="stylesheet" href="/docs/vault_v1.8.x/_next/static/css/7246d51e322c1bb7fa92.css" data-n-g=""/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/css/fbe3b6b5804634e8fb99.css" as="style"/><link rel="stylesheet" href="/docs/vault_v1.8.x/_next/static/css/fbe3b6b5804634e8fb99.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/framework.3519294afa6a9ab53973.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/2bc72d9a08d5bd816ae6b580871df9fb671d43bb.52fd5ef7a8ab7d8fc0dd.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/9a5be27b89b50ff891e514a88cd42f143404f9a6.033857d62f5a01edf3b3.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/main-b0f1f3f8bd3bddd4e6cd.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/b49b08e2da573413c730dfc51ae423f080a0c275.00ac32ee45240d5b343f.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/b1542cc239bf56c8a14913c0a930efe682b5cf86.32bb900ad80311488529.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/pages/_app-d714c55ad24af91621ba.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/7dbdcaca29374b13a0799a901e26613767d72de2.d088888a4a1113f2bb24.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/92f0085e0e6c1f10382de10b8861ce89d7c192a2.e5495ede8461fc33ed98.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/e697469aff49e0b13fc0c4d2651008fc1aaadc2b.5052eda5c7f43583669b.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/e697469aff49e0b13fc0c4d2651008fc1aaadc2b_CSS.f6584926f1188e1b5b3e.js" as="script"/><link rel="preload" href="/docs/vault_v1.8.x/_next/static/chunks/pages/guides/%5B%5B...page%5D%5D-72f9db6e509b49c776de.js" as="script"/></head><body><div id="__next"><div class="g-alert-banner style_vault__1OYha show themed"><a href="https://hashiconf.com/europe" class="link"><span class="g-grid-container has-large-tag"><span class="tag g-type-body-small-x-strong">Thank you</span><span class="text g-type-body-small has-large-tag">HashiConf Europe is a wrap. Watch this year’s sessions on-demand.<!-- --> <span class="link-text g-type-body-small-x-strong">Watch Now</span></span></span></a><button class="close"><div><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 5L5 15M5 5l10 10" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><span class="visually-hidden">Dismiss alert</span></button></div><header class="hashi-stack-menu_hashiStackMenu__2dCgY"><nav class="hashi-stack-menu_nav__3DnqS g-grid-container" aria-label="Primary HashiCorp website navigation"><a aria-label="To main HashiCorp website" href="https://www.hashicorp.com/" class="hashi-stack-menu_logoLink__2cbDW"><div data-testid="root"><svg width="317" height="88" viewBox="0 0 317 88" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M107.692 64.421V47.4h-14.97v17.02h-7.623V24.06h7.622v16.602h14.971V24.06h7.622v40.36h-7.622zm35.567-.001h-6.053l-.548-1.996a16.137 16.137 0 01-8.789 2.607c-5.397 0-7.699-3.697-7.699-8.79 0-5.998 2.607-8.3 8.606-8.3h7.089v-3.095c0-3.27-.907-4.421-5.633-4.421a41.255 41.255 0 00-8.179.877l-.907-5.634a38.496 38.496 0 0110.122-1.395c9.269 0 11.998 3.27 11.998 10.672l-.007 19.476zm-7.394-11.151h-5.45c-2.424 0-3.087.663-3.087 2.912 0 2.058.663 2.973 2.972 2.973a11.629 11.629 0 005.572-1.525l-.007-4.36zm21.701 11.754a34.776 34.776 0 01-10.183-1.7l1.029-5.633a33.038 33.038 0 008.788 1.273c3.271 0 3.758-.762 3.758-2.973 0-1.814-.366-2.729-5.152-3.88-7.211-1.76-8.058-3.575-8.058-9.269 0-5.938 2.607-8.545 11.03-8.545 2.98.003 5.949.348 8.85 1.03l-.762 5.876a51.98 51.98 0 00-8.118-.846c-3.209 0-3.758.763-3.758 2.546 0 2.363.183 2.546 4.185 3.575 8.263 2.188 9.055 3.278 9.055 9.307 0 5.725-1.761 9.239-10.664 9.239zm32.663-.602V43.84c0-1.578-.663-2.363-2.363-2.363-1.814 0-5.031 1.09-7.699 2.485v20.459h-7.394V22.847l7.394-1.029v15.33a26.045 26.045 0 0110.786-2.852c4.909 0 6.662 3.453 6.662 8.728v21.397h-7.386zm12.844-33.692v-8.545h7.394v8.545h-7.394zm0 33.692V34.906h7.394v29.515h-7.394zM215.62 35.15c0-7.394 4.299-11.693 14.361-11.693 3.697 0 7.38.447 10.969 1.334l-.839 6.601a59.517 59.517 0 00-9.909-1.029c-5.275 0-6.967 1.822-6.967 6.098v15.512c0 4.3 1.7 6.098 6.967 6.098a59.506 59.506 0 009.909-1.029l.846 6.609a45.672 45.672 0 01-10.968 1.334c-10.062 0-14.361-4.3-14.361-11.693l-.008-18.142zm40.499 29.873c-10.123 0-12.844-5.572-12.844-11.632v-7.455c0-6.06 2.728-11.632 12.844-11.632 10.115 0 12.844 5.572 12.844 11.632v7.455c-.023 6.06-2.744 11.632-12.844 11.632zm0-24.392c-3.941 0-5.45 1.76-5.45 5.092v7.912c0 3.331 1.524 5.092 5.45 5.092 3.925 0 5.45-1.76 5.45-5.092v-7.943c-.015-3.33-1.532-5.092-5.45-5.092v.03zm32.457.457a57.835 57.835 0 00-7.821 4.3v19.056h-7.394V34.906h6.243l.488 3.27a33.064 33.064 0 017.76-3.88l.724 6.792zm28.035 13.515c0 6.548-2.911 10.42-9.756 10.42a40.76 40.76 0 01-7.882-.853v12.196l-7.394 1.029V34.906h5.877l.762 2.485a15.535 15.535 0 019.33-3.087c5.938 0 9.086 3.514 9.086 10.245l-.023 10.054zm-17.631 3.331c2.152.474 4.346.73 6.548.763 2.668 0 3.697-1.274 3.697-3.941V44.35c0-2.424-.907-3.758-3.636-3.758a10.46 10.46 0 00-6.609 2.668v14.673zM29.134 7L0 23.808v40.361l10.946 6.32V30.127l18.188-10.504V7z" fill="#000"/><path d="M40.758 7v32.144H29.133V27.147l-10.945 6.319V74.65l10.946 6.335V48.932h11.624v11.914l10.946-6.312V13.32L40.758 7z" fill="#000"/><path d="M40.758 81L69.89 64.192V23.831l-10.946-6.32v40.362L40.758 68.377V81z" fill="#000"/></svg></div></a><ul class="hashi-stack-menu_menu__33a9r"><li class="nav-item_navItem__KPnS0"><button type="button" class="nav-item_buttonReset__WeJA7 nav-item_link__1827H g-type-body-small-strong ">Browse Products<span class="nav-item_visuallyHidden__20aYI">Open this menu</span><img class="nav-item_dropdownCarat__2xha-" alt="" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iNyIgdmlld0JveD0iMCAwIDEwIDciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTguMDUzIDJsLTMgMy4wMDYtMy0zLjAwNiIgc3Ryb2tlPSJ2YXIoLS1ncmF5LTMpIiBzdHJva2Utd2lkdGg9IjEuMjUiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz48L3N2Zz4="/></button><section class="browse-panel_browsePanel__1AT8q "><menu class="stack-menu-section_stackMenuSection__2j2KK"><li class="stack-group_stackGroup__SM4W1"><h5 class="stack-group_stackGroupHeading__U-K-0 g-type-display-6">Infrastructure</h5><ul class="stack-group_stackGroupLinkList__4RMZ6"><li class="stack-item_stackItem__L41b6"><a href="https://www.terraform.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M55.522 32.97l32.96 19.02v38.06l-32.96-19.03V32.97zM92.09 51.99v38.06l32.95-19.03V32.97L92.09 51.99zM18.96 11.73v38.05l32.95 19.03V30.76L18.96 11.73zm36.562 101.51l32.95 19.03V94.22l-32.95-19.03v38.05z" fill="#7B42BC"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">terraform</span></a></li><li class="stack-item_stackItem__L41b6"><a href="https://www.packer.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M35.09 26.38L74.22 49v83.38l-39.13-22.62V26.38z" fill="#02A8EF"/><path d="M93.6 36.13L51.06 11.62v17L80 45.34v51.05l13.61 7.82c8.421 4.86 15.311 2 15.311-6.47V60.28c-.01-8.42-6.92-19.28-15.32-24.15z" fill="#02A8EF"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">packer</span></a></li><li class="stack-item_stackItem__L41b6"><a href="https://www.vagrantup.com" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M110.77 17.55L86.68 31.46V40L72 74.52 57.32 40v-8.54L33.23 17.55l-14.65 8.47v9.83l32.63 79.92 20.79 12 20.79-12 32.63-79.92v-9.83l-14.65-8.47z" fill="#0E67ED"/><path d="M125.42 26.02l-24.09 13.9v8.55L81.77 92.19 72 97.83v29.94l20.79-12 32.63-79.92v-9.83zM57.32 40v-8.54l-14.66 8.46v8.55l19.57 43.72L72 86.55V74.52L57.32 40z" fill="#0850C5"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">vagrant</span></a></li></ul></li><li class="stack-group_stackGroup__SM4W1"><h5 class="stack-group_stackGroupHeading__U-K-0 g-type-display-6">Networking</h5><ul class="stack-group_stackGroupLinkList__4RMZ6"><li class="stack-item_stackItem__L41b6"><a href="https://www.consul.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M72.53 128.7a54.787 54.787 0 01-45.258-23.85 54.784 54.784 0 019.368-72.355 54.78 54.78 0 0172.95 1.125l-13 13.6a36 36 0 100 53.43l13 13.6a54.638 54.638 0 01-37.06 14.45zm44.081-27.401a4.49 4.49 0 114.49-4.49 4.5 4.5 0 01-4.49 4.49z" fill="#E03875"/><path d="M72.18 85.79A11.87 11.87 0 1184 73.93a11.88 11.88 0 01-11.82 11.86zm49.58.21a4.488 4.488 0 01-4.404-5.366 4.488 4.488 0 016.122-3.273 4.495 4.495 0 012.772 4.148 4.503 4.503 0 01-4.49 4.49zm-13.35-.56a4.488 4.488 0 01-4.4-5.385 4.487 4.487 0 013.555-3.515 4.49 4.49 0 11.845 8.9zm13.35-14.57a4.488 4.488 0 01-4.404-5.366 4.488 4.488 0 016.122-3.273 4.496 4.496 0 012.772 4.149 4.503 4.503 0 01-4.49 4.49zm-13.35.51a4.493 4.493 0 01-4.148-2.772 4.491 4.491 0 114.148 2.771zm8.461-15.61a4.49 4.49 0 11-.02-8.981 4.49 4.49 0 01.02 8.981z" fill="#E03875"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">consul</span></a></li></ul></li></menu><menu class="stack-menu-section_stackMenuSection__2j2KK"><li class="stack-group_stackGroup__SM4W1"><h5 class="stack-group_stackGroupHeading__U-K-0 g-type-display-6">Security</h5><ul class="stack-group_stackGroupLinkList__4RMZ6"><li class="stack-item_stackItem__L41b6"><a href="https://www.vaultproject.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.88 21.15L71.8 131.4l55.321-110.25H16.881zm61.46 22.12h6.39v6.4h-6.39v-6.4zM65.61 68.84h-6.39v-6.39h6.39v6.39zm0-9.59h-6.39v-6.39h6.39v6.39zm0-9.58h-6.39v-6.4h6.39v6.4zm9.59 28.76h-6.4V72h6.4v6.43zm0-9.59h-6.4v-6.39h6.4v6.39zm0-9.59h-6.4v-6.39h6.4v6.39zm0-9.58h-6.4v-6.4h6.4v6.4zm3.14 3.19h6.39v6.39h-6.39v-6.39zm0 16v-6.41h6.39v6.39l-6.39.02z" fill="#000"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">vault</span></a></li><li class="stack-item_stackItem__L41b6"><a href="https://www.boundaryproject.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M44.83 125.83v-8.27h17.18v-5.11h-8.33v-8.32h39.33L74.74 72.49l18.27-31.65H52.7v43.89H31V19.15h74.67l12.46 21.58L99.8 72.49l18.7 32.4-12.09 20.94H44.83z" fill="#F24C53"/><path d="M48.17 104.131h-8.32v8.32h8.32v-8.32zM39.32 117.5H31v8.32h8.32v-8.32z" fill="#F24C53"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">boundary</span></a></li></ul></li><li class="stack-group_stackGroup__SM4W1"><h5 class="stack-group_stackGroupHeading__U-K-0 g-type-display-6">Applications</h5><ul class="stack-group_stackGroupLinkList__4RMZ6"><li class="stack-item_stackItem__L41b6"><a href="https://www.nomadproject.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M72 14L21.77 43v58L72 130l50.23-29V43L72 14zm22.38 63.78L81 85.51l-16.17-8.8v18.48l-15.2 9.64V66.19l12.06-7.38 16.73 8.82V48.76l16-9.59-.04 38.61z" fill="#00CA8E"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">nomad</span></a></li><li class="stack-item_stackItem__L41b6"><a href="https://www.waypointproject.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M143.228 27.66l-17.79 30.81-17.79-30.81h35.58zM48.26 48.23H36.39l29.67 51.4-11.87 20.56L.77 27.66h59.36l29.68 51.41 5.93-10.28L72 27.66h23.74l11.88 20.57 11.87 20.56-29.68 51.4-41.55-71.96z" fill="#14C6CB"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">waypoint</span></a></li></ul></li></menu><menu class="stack-menu-section_stackMenuSectionPlusDivider__1BPy6 stack-menu-section_stackMenuSection__2j2KK"><li class="stack-group_stackGroup__SM4W1"><h5 class="stack-group_stackGroupHeading__U-K-0 g-type-display-6">HashiCorp Cloud Platform</h5><ul class="stack-group_stackGroupLinkList__4RMZ6"><li class="stack-item_stackItem__L41b6"><a href="https://cloud.hashicorp.com/" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M72.53 128.7a54.787 54.787 0 01-45.258-23.85 54.784 54.784 0 019.368-72.355 54.78 54.78 0 0172.95 1.125l-13 13.6a36 36 0 100 53.43l13 13.6a54.638 54.638 0 01-37.06 14.45zm44.081-27.401a4.49 4.49 0 114.49-4.49 4.5 4.5 0 01-4.49 4.49z" fill="#E03875"/><path d="M72.18 85.79A11.87 11.87 0 1184 73.93a11.88 11.88 0 01-11.82 11.86zm49.58.21a4.488 4.488 0 01-4.404-5.366 4.488 4.488 0 016.122-3.273 4.495 4.495 0 012.772 4.148 4.503 4.503 0 01-4.49 4.49zm-13.35-.56a4.488 4.488 0 01-4.4-5.385 4.487 4.487 0 013.555-3.515 4.49 4.49 0 11.845 8.9zm13.35-14.57a4.488 4.488 0 01-4.404-5.366 4.488 4.488 0 016.122-3.273 4.496 4.496 0 012.772 4.149 4.503 4.503 0 01-4.49 4.49zm-13.35.51a4.493 4.493 0 01-4.148-2.772 4.491 4.491 0 114.148 2.771zm8.461-15.61a4.49 4.49 0 11-.02-8.981 4.49 4.49 0 01.02 8.981z" fill="#E03875"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">consul</span></a></li><li class="stack-item_stackItem__L41b6"><a href="https://app.terraform.io" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M55.522 32.97l32.96 19.02v38.06l-32.96-19.03V32.97zM92.09 51.99v38.06l32.95-19.03V32.97L92.09 51.99zM18.96 11.73v38.05l32.95 19.03V30.76L18.96 11.73zm36.562 101.51l32.95 19.03V94.22l-32.95-19.03v38.05z" fill="#7B42BC"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">terraform</span></a></li><li class="stack-item_stackItem__L41b6"><a href="https://cloud.hashicorp.com/" class="stack-item_itemLink__G2Qmk"><div data-testid="root" class="stack-item_productIcon__1pF_i"><svg width="144" height="144" viewBox="0 0 144 144" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.88 21.15L71.8 131.4l55.321-110.25H16.881zm61.46 22.12h6.39v6.4h-6.39v-6.4zM65.61 68.84h-6.39v-6.39h6.39v6.39zm0-9.59h-6.39v-6.39h6.39v6.39zm0-9.58h-6.39v-6.4h6.39v6.4zm9.59 28.76h-6.4V72h6.4v6.43zm0-9.59h-6.4v-6.39h6.4v6.39zm0-9.59h-6.4v-6.39h6.4v6.39zm0-9.58h-6.4v-6.4h6.4v6.4zm3.14 3.19h6.39v6.39h-6.39v-6.39zm0 16v-6.41h6.39v6.39l-6.39.02z" fill="#000"/></svg></div><span class="stack-item_productName__1lhye stack-item_itemName__1cUxR g-type-body-small-strong">vault</span></a></li></ul></li><li class="stack-group_stackGroup__SM4W1"><h5 class="stack-group_stackGroupHeading__U-K-0 g-type-display-6">Partner Services</h5><ul class="stack-group_stackGroupLinkList__4RMZ6"><li class="stack-item_stackItem__L41b6"><a class="stack-item_itemLink__G2Qmk" href="https://www.hashicorp.com/products/consul/service-on-azure"><span class="stack-item_itemName__1cUxR g-type-body-small-strong">HashiCorp Consul Service (HCS) on Azure</span></a></li></ul></li></menu></section></li></ul></nav></header><nav class="g-subnav" aria-label="vault website navigation"><div class="constrain-width-wrapper  g-grid-container"><div class="g-subnav-inner style_vault__1OYha is-constrained" data-overflow-target="true"><a href="/" data-testid="a-raw" class="title-link brand-vault " title="vault"><div data-testid="root"><svg width="208" height="88" viewBox="0 0 208 88" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M114.849 23.69h7.92L110.699 64h-11.25l-12-40.28h7.92l9.74 33.57 9.74-33.6zM144.75 64h-6l-.55-2a16.12 16.12 0 01-8.77 2.6c-5.38 0-7.68-3.69-7.68-8.77 0-6 2.6-8.29 8.59-8.29h7.08v-3.1c0-3.27-.91-4.42-5.63-4.42a40.71 40.71 0 00-8.16.91l-.91-5.63a38.678 38.678 0 0110.1-1.39c9.25 0 12 3.27 12 10.65L144.75 64zm-7.37-11.13h-5.45c-2.42 0-3.08.67-3.08 2.91 0 2 .66 3 3 3a11.72 11.72 0 005.57-1.51l-.04-4.4zm18.992-18.35v20.56c0 1.57.66 2.36 2.36 2.36 1.7 0 5-1.09 7.68-2.48V34.52h7.38V64h-5.63l-.72-2.48a29.437 29.437 0 01-11.8 3.09c-4.9 0-6.65-3.45-6.65-8.71V34.52h7.38zM177.719 64V22.48l7.38-1V64h-7.38zm29.388-.57a20.618 20.618 0 01-6.47 1.15c-5.38 0-8.11-2.54-8.11-7.8v-16.4h-4.41v-5.86h4.41V27.2l7.38-1v8.35h7.56l-.48 5.86h-7.08v15.4a2.323 2.323 0 001.596 2.514c.344.11.708.14 1.064.085a13.919 13.919 0 003.69-.61l.85 5.63zM0 12.6l31.85 63.92L63.92 12.6H0zm35.63 12.83h3.71v3.71h-3.71v-3.71zm-7.38 14.82h-3.7v-3.7h3.7v3.7zm0-5.56h-3.7V31h3.7v3.69zm0-5.55h-3.7v-3.71h3.7v3.71zm5.6 16.67h-3.7V42.1h3.7v3.71zm0-5.56h-3.7v-3.7h3.7v3.7zm0-5.56h-3.7V31h3.7v3.69zm0-5.55h-3.7v-3.71h3.7v3.71zM35.63 31h3.71v3.7h-3.71V31zm0 9.26v-3.7h3.71v3.7h-3.71z" fill="#000"/></svg></div></a><ul class="menu-items-default menu-items-align-right"><li><a href="/" data-testid="a-raw" class="nav-link g-type-body-small-strong style-menu-item "><span class="text brand-vault ">Overview</span></a></li><li><button class="dropdown-trigger g-type-body-small-strong brand-vault style-menu-item is-collapsed"><span class="text brand-vault">Use Cases</span><div data-testid="root"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div></button><ul class="submenu-modal style-dropdown is-collapsed"><li><a href="/use-cases/secrets-management" data-testid="a-raw" class="g-type-body-small-strong style-menu-item"><span class="text brand-vault">Secrets Management</span></a></li><li><a href="/use-cases/data-encryption" data-testid="a-raw" class="g-type-body-small-strong style-menu-item"><span class="text brand-vault">Data Encryption</span></a></li><li><a href="/use-cases/identity-based-access" data-testid="a-raw" class="g-type-body-small-strong style-menu-item"><span class="text brand-vault">Identity-based Access</span></a></li></ul></li><li><a href="https://www.hashicorp.com/products/vault/enterprise" data-testid="a-raw" class="nav-link g-type-body-small-strong style-menu-item "><span class="text brand-vault ">Enterprise</span></a></li><li><span class="vertical-divider"></span></li><li><a href="https://learn.hashicorp.com/vault" data-testid="a-raw" class="nav-link g-type-body-small-strong style-menu-item "><span class="text brand-vault ">Tutorials</span></a></li><li><a href="/docs" data-testid="a-raw" class="nav-link g-type-body-small-strong style-menu-item "><span class="text brand-vault ">Docs</span></a></li><li><a href="/api-docs" data-testid="a-raw" class="nav-link g-type-body-small-strong style-menu-item "><span class="text brand-vault ">API</span></a></li><li><a href="/community" data-testid="a-raw" class="nav-link g-type-body-small-strong style-menu-item "><span class="text brand-vault ">Community</span></a></li></ul><div class="cta-links "><a href="https://www.github.com/hashicorp/vault" class="github-button"><span class="github"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg><span class="hidden-text">GitHub</span></span></a><a class="g-btn size-small variant-secondary style_vault__1OYha background-light" data-ga-button="try-cloud" href="https://portal.cloud.hashicorp.com/sign-up?utm_source=vault_io&amp;utm_content=top_nav_vault"><span class="text g-type-buttons-and-standalone-links">Try Cloud</span></a><a class="g-btn size-small variant-primary style_vault__1OYha background-light" data-ga-button="download" href="/downloads"><span class="icon at-left is-animated" data-animation="download"><div data-testid="root"><svg role="img" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Download icon</title><path d="M3 17v3a2 2 0 002 2h14a2 2 0 002-2v-3" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path data-animation-target="true" d="M8 12l4 4m0 0l4-4m-4 4V2" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div></span><span class="text g-type-buttons-and-standalone-links">Download</span></a></div></div></div></nav><div id="p-docs"><div class="content-wrap g-grid-container"><div id="sidebar" role="complementary"><div class="nav docs-nav"><div class="g-docs-sidenav style_root__-H22M style_vault__1OYha"><button class="style_mobileMenuToggle__2iMJX g-type-body-small-strong"><span><div><svg width="20" height="20" fill="none"><path fill="#000" fill-rule="evenodd" d="M3.083 14.411a.847.847 0 00-.267-.183.863.863 0 00-.483-.042c-.05.008-.109.025-.159.042a1.245 1.245 0 00-.266.183 1.01 1.01 0 00-.184.267.864.864 0 00-.058.325c0 .05 0 .108.017.158a.88.88 0 00.041.159c.025.05.05.1.084.141.025.05.066.092.1.125.041.042.082.075.125.108.05.025.091.059.141.075.05.017.109.034.159.05.058.009.107.017.166.017a.829.829 0 00.584-.25.534.534 0 00.108-.125c.025-.042.058-.091.075-.142.025-.05.042-.1.05-.158a1.06 1.06 0 00.017-.158.872.872 0 00-.067-.325.729.729 0 00-.183-.267zm0-5a.846.846 0 00-.267-.183.863.863 0 00-.483-.042 1.11 1.11 0 00-.159.042 1.252 1.252 0 00-.266.183.821.821 0 00-.242.592c0 .108.017.216.058.316a1.01 1.01 0 00.309.375c.05.025.091.05.141.075.05.017.109.034.159.05.058.009.107.017.166.017a.829.829 0 00.584-.25.83.83 0 00.25-.583.871.871 0 00-.067-.325.729.729 0 00-.183-.267zm0-5a.795.795 0 00-.75-.225 1.11 1.11 0 00-.159.042 1.255 1.255 0 00-.266.183.835.835 0 00-.242.592c0 .108.017.217.058.317a1.01 1.01 0 00.309.375c.05.025.091.05.141.075.05.016.109.033.159.05.058.008.107.016.166.016a.83.83 0 00.584-.25.83.83 0 00.25-.583.906.906 0 00-.067-.325.729.729 0 00-.183-.267zm14.414 9.756H6.663a.833.833 0 100 1.667h10.834a.833.833 0 100-1.667zm0-5H6.663a.833.833 0 100 1.667h10.834a.833.833 0 100-1.667zM18.33 5c0 .46-.372.834-.833.834H6.663a.833.833 0 110-1.667h10.834c.46 0 .833.372.833.833z" clip-rule="evenodd"/></svg></div> Documentation Menu</span></button><button type="button" aria-label="Show Search Bar" class="style_searchToggle__226HK"><div><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.75 15a6.25 6.25 0 100-12.5 6.25 6.25 0 000 12.5z" stroke="var(--gray-3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.5 17.5l-4.333-4.333" stroke="var(--gray-3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div></button><ul class="style_rootList__1pfEP" data-is-mobile-hidden="true" data-is-mobile-open="false"><button class="style_mobileClose__3BcsD">×</button><input class="style_filterInput__4ecGq" placeholder="Filter..." value=""/><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/getting-started/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Getting Started</span></a></li><li class=""><button class="style_navItem__1tCRc" data-is-open="false"><div class="style_navBranchIcon__-utfM style_navItemIcon__1KWKp" data-is-open="false"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.865.661a.498.498 0 10-.704.703l2.636 2.638L2.16 6.639a.498.498 0 10.704.704l2.989-2.989a.498.498 0 000-.705L2.864.66v.001z" fill="#000"/></svg></div><span>Vault Operations</span></button><ul class="style_navBranchSubnav__38wnh" data-is-open="false"><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Overview</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/reference-architecture/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Reference Architecture</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/vault-ha-consul/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Vault HA with Consul</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/production/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Production Hardening</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/generate-root/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Root Token Generation</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/rekeying-and-rotating/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Rekeying & Rotating</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/plugin-backends/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Building Plugin Backends</span></a></li><hr class="style_divider__3H9xA"/><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/replication/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Replication Setup & Guidance</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/disaster-recovery/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Disaster Recovery Setup</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/mount-filter/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Mount Filter</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/multi-tenant/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Multi-Tenant: Namespaces</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/autounseal-aws-kms/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Vault Auto-unseal with AWS KMS</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/seal-wrap/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Seal Wrap / FIPS 140-2</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/monitoring/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Vault Cluster Monitoring</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/deployment-guide/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Vault Deployment Guide</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/operations/performance-nodes/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Performance Standby Nodes</span></a></li></ul></li><li class=""><button class="style_navItem__1tCRc" data-is-open="false"><div class="style_navBranchIcon__-utfM style_navItemIcon__1KWKp" data-is-open="false"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.865.661a.498.498 0 10-.704.703l2.636 2.638L2.16 6.639a.498.498 0 10.704.704l2.989-2.989a.498.498 0 000-.705L2.864.66v.001z" fill="#000"/></svg></div><span>Identity and Access Management</span></button><ul class="style_navBranchSubnav__38wnh" data-is-open="false"><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Overview</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/secure-intro/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Secure Introduction of Vault Clients</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/policies/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Policies</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/policy-templating/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>ACL Policy Path Templating</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/authentication/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>AppRole Pull Authentication</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/approle-trusted-entities/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>AppRole with Terraform and Chef</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/lease/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Tokens and Leases</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/identity/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Identity - Entities & Groups</span></a></li><hr class="style_divider__3H9xA"/><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/sentinel/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Sentinel Policies</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/identity/control-groups/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Control Groups</span></a></li></ul></li><li class=""><button class="style_navItem__1tCRc" data-is-open="false"><div class="style_navBranchIcon__-utfM style_navItemIcon__1KWKp" data-is-open="false"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.865.661a.498.498 0 10-.704.703l2.636 2.638L2.16 6.639a.498.498 0 10.704.704l2.989-2.989a.498.498 0 000-.705L2.864.66v.001z" fill="#000"/></svg></div><span>Secrets Management</span></button><ul class="style_navBranchSubnav__38wnh" data-is-open="false"><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Overview</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/static-secrets/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Static Secrets</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/versioned-kv/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Versioned KV Secret Engine</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/dynamic-secrets/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Secret as a Service</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/db-root-rotation/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>DB Root Credential Rotation</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/cubbyhole/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Cubbyhole Response Wrapping</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/ssh-otp/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>One-Time SSH Password</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/pki-engine/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Build Your Own CA</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/secret-mgmt/app-integration/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Direct Application Integration</span></a></li></ul></li><li class=""><button class="style_navItem__1tCRc" data-is-open="false"><div class="style_navBranchIcon__-utfM style_navItemIcon__1KWKp" data-is-open="false"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.865.661a.498.498 0 10-.704.703l2.636 2.638L2.16 6.639a.498.498 0 10.704.704l2.989-2.989a.498.498 0 000-.705L2.864.66v.001z" fill="#000"/></svg></div><span>Encryption as a Service</span></button><ul class="style_navBranchSubnav__38wnh" data-is-open="false"><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/encryption/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Overview</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/encryption/transit/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Encryption as a Service</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/encryption/spring-demo/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Java Application Demo</span></a></li><li class=""><a class="style_navItem__1tCRc" href="/docs/vault_v1.8.x/guides/encryption/transit-rewrap/"><div class="style_navLeafIcon__49SuP style_navItemIcon__1KWKp"><svg width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="4" cy="4" r="2" fill="#000"/></svg></div><span>Transit Secrets Re-wrapping</span></a></li></ul></li></ul></div></div></div><div id="inner" role="main" class=""><article class="g-content g-type-long-body style_vault__1OYha"><div class="g-search"><label id="search-box-label" for="search-box" class="visually-hidden">Search Vault documentation</label><div class="c-search-box"><form novalidate="" action="" role="search"><input type="search" id="search-box" class="g-type-body-strong" placeholder="Search Vault documentation" autoComplete="off" autoCorrect="off" autoCapitalize="off" spellcheck="false" maxLength="512" required="" value="" aria-autocomplete="list" aria-controls="search-results" aria-activedescendant="" data-heap-track="SearchBox"/><button type="submit" title="Submit your search query." class="btn-submit"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.75 15a6.25 6.25 0 100-12.5 6.25 6.25 0 000 12.5z" stroke="var(--gray-3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.5 17.5l-4.333-4.333" stroke="var(--gray-3)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></button><button type="reset" title="Clear the search query." class="btn-reset"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.915 1.077h13.684v13.684H1.915z"/><path d="M1.915 1.077l13.683 13.684M1.915 14.76L15.598 1.078" stroke="var(--gray-3)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button><div class="icon-loading"><svg width="18" height="18" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#444"><g fill="none" fill-rule="evenodd"><g transform="translate(1 1)" stroke-width="2"><circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle><path d="M36 18c0-9.94-8.06-18-18-18" transform="rotate(296.263 18 18)"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animateTransform></path></g></g></svg></div><svg class="icon-slash" width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img"><title>Type &#x27;/&#x27; to Search</title><rect x=".5" y=".5" width="23" height="23" rx=".5" stroke="var(--gray-3)"></rect><path d="M9 18l6-12" stroke="var(--gray-3)" stroke-width="1.5"></path></svg></form></div></div><h1 class="g-type-display-2"><a class="__permalink-h" href="#secure-multi-tenancy-with-namespaces" aria-label="secure multi tenancy with namespaces permalink">»</a><a class="__target-h" id="secure-multi-tenancy-with-namespaces" aria-hidden=""></a>Secure Multi-Tenancy with Namespaces</h1><div class="alert alert-warning g-type-body" role="alert"><p class="g-type-long-body"><strong>Enterprise Only:</strong> The namespaces feature is a part of <em>Vault Enterprise Pro</em>.</p></div><p class="g-type-long-body">Everything in Vault is path-based, and often uses the terms <code>path</code> and
<code>namespace</code> interchangeably. The application namespace pattern is a useful
construct for providing Vault as a service to internal customers, giving them
the ability to implement secure multi-tenancy within Vault in order to provide
isolation and ensure teams can self-manage their own environments.</p><h2 class="g-type-display-3"><a class="__permalink-h" href="#reference-material" aria-label="reference material permalink">»</a><a class="__target-h" id="reference-material" aria-hidden=""></a>Reference Material</h2><ul><li class="g-type-long-body"><a href="/docs/enterprise/namespaces">Namespaces</a></li><li class="g-type-long-body"><a href="https://youtu.be/zDnIqSB4tyA">Streamline Secrets Management with Vault Agent and Vault 0.11</a></li><li class="g-type-long-body"><a href="/guides/operations/reference-architecture">Vault Deployment Reference Architecture</a></li><li class="g-type-long-body"><a href="/guides/identity/policies">Policies</a> guide</li></ul><h2 class="g-type-display-3"><a class="__permalink-h" href="#estimated-time-to-complete" aria-label="estimated time to complete permalink">»</a><a class="__target-h" id="estimated-time-to-complete" aria-hidden=""></a>Estimated Time to Complete</h2><p class="g-type-long-body">10 minutes</p><h2 class="g-type-display-3"><a class="__permalink-h" href="#personas" aria-label="personas permalink">»</a><a class="__target-h" id="personas" aria-hidden=""></a>Personas</h2><p class="g-type-long-body">The scenario described in this guide introduces the following personas:</p><ul><li class="g-type-long-body"><strong><code>operations</code></strong> is the cluster-level administrator with privileged policies</li><li class="g-type-long-body"><strong><code>org-admin</code></strong> is the organization-level administrator</li><li class="g-type-long-body"><strong><code>team-admin</code></strong> is the team-level administrator</li></ul><h2 class="g-type-display-3"><a class="__permalink-h" href="#challenge" aria-label="challenge permalink">»</a><a class="__target-h" id="challenge" aria-hidden=""></a>Challenge</h2><p class="g-type-long-body">When Vault is primarily used as a central location to manage secrets, multiple
organizations within a company may need to be able to manage their secrets in a
self-serving manner. This means that a company needs to implement a <strong><em>Vault as
a Service</em></strong> model allowing each organization (tenant) to manage their own
secrets and policies. The most importantly, tenants should be restricted to work
only within their tenant scope.</p><p class="g-type-long-body"><img src="/img/vault-multi-tenant.png" alt="Multi-Tenant"/></p><h2 class="g-type-display-3"><a class="__permalink-h" href="#solution" aria-label="solution permalink">»</a><a class="__target-h" id="solution" aria-hidden=""></a>Solution</h2><p class="g-type-long-body">Create a <strong>namespace</strong> dedicated to each team, organization, or app where
they can perform all necessary tasks within their tenant namespace.</p><p class="g-type-long-body">Each namespace can have its own:</p><ul><li class="g-type-long-body">Policies</li><li class="g-type-long-body">Auth Methods</li><li class="g-type-long-body">Secret Engines</li><li class="g-type-long-body">Tokens</li><li class="g-type-long-body">Identity entities and groups</li></ul><div class="alert alert-warning g-type-body" role="alert"><p class="g-type-long-body">Tokens are locked to a namespace or child-namespaces. Identity groups can
pull in entities and groups from <em>other</em> namespaces.</p></div><h2 class="g-type-display-3"><a class="__permalink-h" href="#prerequisites" aria-label="prerequisites permalink">»</a><a class="__target-h" id="prerequisites" aria-hidden=""></a>Prerequisites</h2><p class="g-type-long-body">To perform the tasks described in this guide, you need to have a <strong>Vault
Enterprise</strong> environment.</p><div class="alert alert-info g-type-body" role="alert"><p class="g-type-long-body"><strong>NOTE:</strong> The creation of namespaces should be performed by a user with a
highly privileged token such as <strong><code>root</code></strong> to set up isolated environments for
each organization, team, or application.</p></div><h2 class="g-type-display-3"><a class="__permalink-h" href="#steps" aria-label="steps permalink">»</a><a class="__target-h" id="steps" aria-hidden=""></a>Steps</h2><p class="g-type-long-body"><strong>Scenario:</strong> In this guide, you are going to create a namespace dedicated to
the Education organization which has Training and Certification teams. Delegate
operational tasks to the team admins so that the Vault cluster operators won&#x27;t
have to be involved.</p><p class="g-type-long-body"><img src="/img/vault-multi-tenant-2.png" alt="Scenario"/></p><p class="g-type-long-body">In this guide, you are going to perform the following steps:</p><ol><li class="g-type-long-body"><a href="#step1">Create namespaces</a></li><li class="g-type-long-body"><a href="#step2">Write policies</a></li><li class="g-type-long-body"><a href="#step3">Setup entities and groups</a></li><li class="g-type-long-body"><a href="#step4">Test the organization admin user</a></li><li class="g-type-long-body"><a href="#step5">Test the team admin user</a></li><li class="g-type-long-body"><a href="#step6">Audit ambient credentials</a></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#step1" aria-label="step 1 create namespaces permalink">»</a><a class="__target-h __compat" id="step1" aria-hidden=""></a><a class="__target-h" id="step-1-create-namespaces" aria-hidden=""></a>Step 1: Create namespaces</h3><p class="g-type-long-body">(<strong>Persona:</strong> operations)</p><h4 class="g-type-display-5"><a class="__permalink-h" href="#cli-command" aria-label="cli command permalink">»</a><a class="__target-h" id="cli-command" aria-hidden=""></a>CLI command</h4><p class="g-type-long-body">To create a new namespace, run: <strong><code>vault namespace create &lt;namespace_name&gt;</code></strong></p><ol><li class="g-type-long-body"><p class="g-type-long-body">Create a namespace dedicated to the <strong><code>education</code></strong> organizations:</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ vault namespace create education<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace create education</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">Create child namespaces called <code>training</code> and <code>certification</code> under the
<code>education</code> namespace:</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ vault namespace create -namespace=education training<!-- -->
<!-- -->
<!-- -->$ vault namespace create -namespace=education certification<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace create -namespace=education training</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace create -namespace=education certification</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">List the created namespaces:</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ vault namespace list<!-- -->
<!-- -->education/<!-- -->
<!-- -->
<!-- -->$ vault namespace list -namespace=education<!-- -->
<!-- -->certification/<!-- -->
<!-- -->training/<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace list</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">education/</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace list -namespace=education</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">certification/</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">training/</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li></ol><h4 class="g-type-display-5"><a class="__permalink-h" href="#api-call-using-curl" aria-label="api call using curl permalink">»</a><a class="__target-h" id="api-call-using-curl" aria-hidden=""></a>API call using cURL</h4><p class="g-type-long-body">To create a new namespace, invoke <strong><code>sys/namespaces</code></strong> endpoint:</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: &lt;TOKEN&gt;&quot;</span> </span></span><span class="token output">\</span>
<span class="token output">       --request POST \</span>
<span class="token output">       &lt;VAULT_ADDRESS&gt;/v1/sys/namespaces/&lt;NS_NAME&gt;</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: &lt;TOKEN&gt;&quot;</span> </span></span><span class="token output">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       --request POST \</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       &lt;VAULT_ADDRESS&gt;/v1/sys/namespaces/&lt;NS_NAME&gt;</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Where <code>&lt;TOKEN&gt;</code> is your valid token, and <code>&lt;NS_NAME&gt;</code> is the desired namespace
name.</p><ol><li class="g-type-long-body"><p class="g-type-long-body">Create a namespace for the <strong><code>education</code></strong> organization:</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ curl --header &quot;X-Vault-Token: ...&quot; \<!-- -->
<!-- -->       --request POST \<!-- -->
<!-- -->       http://127.0.0.1:8200/v1/sys/namespaces/education<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ curl --header &quot;X-Vault-Token: ...&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request POST \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/sys/namespaces/education</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">Now, create a child namespace called <strong><code>training</code></strong> and <strong><code>certification</code></strong>
under <code>education</code>. To do so, pass the top-level namespace name in the
<strong><code>X-Vault-Namespace</code></strong> header.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Create a training namespace under education</span>
<span class="token comment"># NOTE: Top-level namespace is in the API endpoint</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span>
<!-- -->        --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> <span class="token punctuation">\</span>
<!-- -->        --request POST <span class="token punctuation">\</span>
<!-- -->        http://127.0.0.1:8200/v1/education/sys/namespaces/training<!-- -->
<!-- -->
<span class="token comment"># Create a certification namespace under education</span>
<span class="token comment"># NOTE: Pass the top-level namespace in the header</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span>
<!-- -->        --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> <span class="token punctuation">\</span>
<!-- -->        --request POST <span class="token punctuation">\</span>
<!-- -->        http://127.0.0.1:8200/v1/sys/namespaces/certification<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a training namespace under education</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># NOTE: Top-level namespace is in the API endpoint</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        --request POST <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        http://127.0.0.1:8200/v1/education/sys/namespaces/training</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a certification namespace under education</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># NOTE: Pass the top-level namespace in the header</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        --request POST <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        http://127.0.0.1:8200/v1/sys/namespaces/certification</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">List the created namespaces:</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ curl --header &quot;X-Vault-Token: ...&quot; \<!-- -->
<!-- -->       --request LIST<!-- -->
<!-- -->       http://127.0.0.1:8200/v1/sys/namespaces | jq<!-- -->
<!-- -->{<!-- -->
<!-- -->   ...<!-- -->
<!-- -->   &quot;data&quot;: {<!-- -->
<!-- -->     &quot;keys&quot;: [<!-- -->
<!-- -->       &quot;education/&quot;<!-- -->
<!-- -->     ]<!-- -->
<!-- -->   },<!-- -->
<!-- -->   ...<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ curl --header &quot;X-Vault-Token: ...&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request LIST</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/sys/namespaces | jq</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">{</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   ...</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   &quot;data&quot;: {</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">     &quot;keys&quot;: [</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       &quot;education/&quot;</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">     ]</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   },</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   ...</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ curl --header &quot;X-Vault-Token: ...&quot; \<!-- -->
<!-- --> --request LIST<!-- -->
<!-- -->       http://127.0.0.1:8200/v1/education/sys/namespaces | jq<!-- -->
<!-- --> {<!-- -->
<!-- -->   ...<!-- -->
<!-- -->   &quot;data&quot;: {<!-- -->
<!-- -->     &quot;keys&quot;: [<!-- -->
<!-- -->       &quot;certification/&quot;,<!-- -->
<!-- -->       &quot;training/&quot;<!-- -->
<!-- -->     ]<!-- -->
<!-- -->   },<!-- -->
<!-- -->   ...<!-- -->
<!-- -->...<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ curl --header &quot;X-Vault-Token: ...&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"> --request LIST</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/education/sys/namespaces | jq</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"> {</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   ...</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   &quot;data&quot;: {</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">     &quot;keys&quot;: [</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       &quot;certification/&quot;,</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       &quot;training/&quot;</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">     ]</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   },</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   ...</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">...</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li></ol><h4 class="g-type-display-5"><a class="__permalink-h" href="#web-ui" aria-label="web ui permalink">»</a><a class="__target-h" id="web-ui" aria-hidden=""></a>Web UI</h4><ol><li class="g-type-long-body"><p class="g-type-long-body">Open a web browser and launch the Vault UI (e.g. <a href="http://127.0.01:8200/ui">http://127.0.01:8200/ui</a>)
and then login.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Access</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Namespaces</strong> and then click <strong>Create a namespace</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Enter <strong><code>education</code></strong> in the <strong>Path</strong> field.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Save</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">To create child namespaces, select the down-arrow on the upper left corner of
the UI, and select <strong>education</strong> under <strong>CURRENT NAMESPACE</strong>.</p><div class="g-code-block style_root__3eDLf style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">![NS Selection](/img/vault-multi-tenant-1.png)<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-undefined"><code class="style_code__2AMYw language-undefined"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">![NS Selection](/img/vault-multi-tenant-1.png)</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">Under the <strong>Access</strong> tab, select <strong>Namespaces</strong> and then click <strong>Create a namespace</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Enter <strong><code>training</code></strong> in the <strong>Path</strong> field, and click <strong>Save</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Create a namespace</strong> again, and then enter <strong><code>certification</code></strong> in
the <strong>Path</strong> field, and click <strong>Save</strong>.</p></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#step2" aria-label="step 2 write policies permalink">»</a><a class="__target-h __compat" id="step2" aria-hidden=""></a><a class="__target-h" id="step-2-write-policies" aria-hidden=""></a>Step 2: Write Policies</h3><p class="g-type-long-body">(<strong>Persona:</strong> operations)</p><p class="g-type-long-body">In this scenario, there is an organization-level administrator who is a
superuser within the scope of the <strong><code>education</code></strong> namespace. Also, there is a
team-level administrator for <strong><code>training</code></strong> and <strong><code>certification</code></strong>.</p><h4 class="g-type-display-5"><a class="__permalink-h" href="#policy-for-education-admin" aria-label="policy for education admin permalink">»</a><a class="__target-h" id="policy-for-education-admin" aria-hidden=""></a>Policy for education admin</h4><p class="g-type-long-body"><strong>Requirements:</strong></p><ul><li class="g-type-long-body">Create and manage namespaces</li><li class="g-type-long-body">Create and manage policies</li><li class="g-type-long-body">Enable and manage secret engines</li><li class="g-type-long-body">Create and manage entities and groups</li><li class="g-type-long-body">Manage tokens</li></ul><p class="g-type-long-body"><strong><code>edu-admin.hcl</code></strong></p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Manage namespaces</span>
<!-- -->path <span class="token string">&quot;sys/namespaces/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies via API</span>
<!-- -->path <span class="token string">&quot;sys/policies/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies via CLI</span>
<!-- -->path <span class="token string">&quot;sys/policy/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># List policies via CLI</span>
<!-- -->path <span class="token string">&quot;sys/policy&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Enable and manage secrets engines</span>
<!-- -->path <span class="token string">&quot;sys/mounts/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># List available secret engines</span>
<!-- -->path <span class="token string">&quot;sys/mounts&quot;</span> <span class="token punctuation">{</span>
<!-- -->  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;read&quot;</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Create and manage entities and groups</span>
<!-- -->path <span class="token string">&quot;identity/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage tokens</span>
<!-- -->path <span class="token string">&quot;auth/token/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage namespaces</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/namespaces/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies via API</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/policies/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies via CLI</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/policy/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># List policies via CLI</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/policy&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable and manage secrets engines</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/mounts/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># List available secret engines</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/mounts&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;read&quot;</span> <span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create and manage entities and groups</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;identity/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage tokens</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;auth/token/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#policy-for-training-admin" aria-label="policy for training admin permalink">»</a><a class="__target-h" id="policy-for-training-admin" aria-hidden=""></a>Policy for training admin</h4><p class="g-type-long-body"><strong>Requirements:</strong></p><ul><li class="g-type-long-body">Create and manage child-namespaces</li><li class="g-type-long-body">Create and manage policies</li><li class="g-type-long-body">Enable and manage secret engines</li></ul><p class="g-type-long-body"><strong><code>training-admin.hcl</code></strong></p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Manage namespaces</span>
<!-- -->path <span class="token string">&quot;sys/namespaces/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies via API</span>
<!-- -->path <span class="token string">&quot;sys/policies/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies via CLI</span>
<!-- -->path <span class="token string">&quot;sys/policy/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># List policies via CLI</span>
<!-- -->path <span class="token string">&quot;sys/policy&quot;</span> <span class="token punctuation">{</span>
<!-- -->  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Enable and manage secrets engines</span>
<!-- -->path <span class="token string">&quot;sys/mounts/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># List available secret engines</span>
<!-- -->path <span class="token string">&quot;sys/mounts&quot;</span> <span class="token punctuation">{</span>
<!-- -->  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;read&quot;</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage namespaces</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/namespaces/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies via API</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/policies/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies via CLI</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/policy/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># List policies via CLI</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/policy&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable and manage secrets engines</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/mounts/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   capabilities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># List available secret engines</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;sys/mounts&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">  capabilities <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;read&quot;</span> <span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Now, let&#x27;s deploy the policies!</p><div class="alert alert-info g-type-body" role="alert"><p class="g-type-long-body">Also, refer to the <a href="#policy-with-namespaces">Additional Discussion</a> section
to learn more about policy authoring with namespaces.</p></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#cli-command-1" aria-label="cli command permalink">»</a><a class="__target-h" id="cli-command-1" aria-hidden=""></a>CLI command</h4><p class="g-type-long-body">To target a specific namespace, you can do one of the following:</p><ul><li class="g-type-long-body"><p class="g-type-long-body">Set <strong><code>VAULT_NAMESPACE</code></strong> so that all subsequent CLI commands will be
executed against that particular namespace</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ export VAULT_NAMESPACE=&lt;namespace_name&gt;<!-- -->
<!-- -->$ vault policy write &lt;policy_name&gt; &lt;policy_file&gt;<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ export VAULT_NAMESPACE=&lt;namespace_name&gt;</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault policy write &lt;policy_name&gt; &lt;policy_file&gt;</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">Specify the target namespace with <strong><code>-namespace</code></strong> flag</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ vault policy write -namespace=&lt;namespace_name&gt; &lt;policy_name&gt; &lt;policy_file&gt;<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault policy write -namespace=&lt;namespace_name&gt; &lt;policy_name&gt; &lt;policy_file&gt;</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li></ul><p class="g-type-long-body">Since you have to deploy policies onto &quot;<code>education</code>&quot; and &quot;<code>education/training</code>&quot;
namespaces, use &quot;<code>-namespace</code>&quot; flag instead of environment variable.</p><p class="g-type-long-body">Create <strong><code>edu-admin</code></strong> and <strong><code>training-admin</code></strong> policies.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Create edu-admin policy under &#x27;education&#x27; namespace</span>
<!-- -->$ vault policy <span class="token function">write</span> -namespace<span class="token operator">=</span>education edu-admin edu-admin.hcl<!-- -->
<!-- -->
<span class="token comment"># Create training-admin policy under &#x27;education/training&#x27; namespace</span>
<!-- -->$ vault policy <span class="token function">write</span> -namespace<span class="token operator">=</span>education/training training-admin training-admin.hcl<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create edu-admin policy under &#x27;education&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault policy <span class="token function">write</span> -namespace<span class="token operator">=</span>education edu-admin edu-admin.hcl</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create training-admin policy under &#x27;education/training&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault policy <span class="token function">write</span> -namespace<span class="token operator">=</span>education/training training-admin training-admin.hcl</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#api-call-using-curl-1" aria-label="api call using curl permalink">»</a><a class="__target-h" id="api-call-using-curl-1" aria-hidden=""></a>API call using cURL</h4><p class="g-type-long-body">To target a specific namespace, you can do one of the following:</p><ul><li class="g-type-long-body">Pass the target namespace in the <strong><code>X-Vault-Namespace</code></strong> header</li><li class="g-type-long-body">Prepend the API endpoint with namespace name (e.g.
<strong><code>&lt;namespace_name&gt;</code></strong><code>/sys/policies/acl</code>)</li></ul><p class="g-type-long-body">Create <strong><code>edu-admin</code></strong> and <strong><code>training-admin</code></strong> policies.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Create a request payload</span>
<!-- -->$ <span class="token function">tee</span> edu-payload.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="token string">{</span>
<span class="token string">  &quot;policy&quot;: &quot;path <span class="token entity" title="\&quot;">\&quot;</span>sys/namespaces/education/*<span class="token entity" title="\&quot;">\&quot;</span> {<span class="token entity" title="\n">\n</span>  capabilities = [<span class="token entity" title="\&quot;">\&quot;</span>create<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>read<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>update<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>delete<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>list<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>sudo<span class="token entity" title="\&quot;">\&quot;</span>]<span class="token entity" title="\n">\n</span> } ... &quot;</span>
<span class="token string">}</span>
<span class="token string">EOF</span>
<!-- -->
<span class="token comment"># Create edu-admin policy under &#x27;education&#x27; namespace</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --request PUT <span class="token punctuation">\</span>
<!-- -->       --data @edu-payload.json <span class="token punctuation">\</span>
<!-- -->       https://127.0.0.1:8200/v1/sys/policies/acl/edu-admin<!-- -->
<!-- -->
<span class="token comment"># Create a request payload</span>
<!-- -->$ <span class="token function">tee</span> training-payload.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="token string">{</span>
<span class="token string"> &quot;policy&quot;: &quot;path <span class="token entity" title="\&quot;">\&quot;</span>sys/namespaces/education/training/*<span class="token entity" title="\&quot;">\&quot;</span> {<span class="token entity" title="\n">\n</span>  capabilities = [<span class="token entity" title="\&quot;">\&quot;</span>create<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>read<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>update<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>delete<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>list<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>sudo<span class="token entity" title="\&quot;">\&quot;</span>]<span class="token entity" title="\n">\n</span>  }  ... &quot;</span>
<span class="token string">}</span>
<span class="token string">EOF</span>
<!-- -->
<span class="token comment"># Create training-admin policy under &#x27;education/training&#x27; namespace</span>
<span class="token comment"># This example directs the target namespace in the API endpoint</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --request PUT <span class="token punctuation">\</span>
<!-- -->       --data @training-payload.json <span class="token punctuation">\</span>
<!-- -->       https://127.0.0.1:8200/v1/education/training/sys/policies/acl/training-admin<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a request payload</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">tee</span> edu-payload.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">  &quot;policy&quot;: &quot;path <span class="token entity" title="\&quot;">\&quot;</span>sys/namespaces/education/*<span class="token entity" title="\&quot;">\&quot;</span> {<span class="token entity" title="\n">\n</span>  capabilities = [<span class="token entity" title="\&quot;">\&quot;</span>create<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>read<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>update<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>delete<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>list<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>sudo<span class="token entity" title="\&quot;">\&quot;</span>]<span class="token entity" title="\n">\n</span> } ... &quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">EOF</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create edu-admin policy under &#x27;education&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request PUT <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --data @edu-payload.json <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       https://127.0.0.1:8200/v1/sys/policies/acl/edu-admin</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a request payload</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">tee</span> training-payload.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string"> &quot;policy&quot;: &quot;path <span class="token entity" title="\&quot;">\&quot;</span>sys/namespaces/education/training/*<span class="token entity" title="\&quot;">\&quot;</span> {<span class="token entity" title="\n">\n</span>  capabilities = [<span class="token entity" title="\&quot;">\&quot;</span>create<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>read<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>update<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>delete<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>list<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>sudo<span class="token entity" title="\&quot;">\&quot;</span>]<span class="token entity" title="\n">\n</span>  }  ... &quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token string">EOF</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create training-admin policy under &#x27;education/training&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># This example directs the target namespace in the API endpoint</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: ...&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request PUT <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --data @training-payload.json <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       https://127.0.0.1:8200/v1/education/training/sys/policies/acl/training-admin</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#web-ui-1" aria-label="web ui permalink">»</a><a class="__target-h" id="web-ui-1" aria-hidden=""></a>Web UI</h4><ol><li class="g-type-long-body"><p class="g-type-long-body">In the Web UI, make sure that the <strong>CURRENT NAMESPACE</strong> is set to
<strong>education</strong> in the upper left menu.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the <strong>Policies</strong> tab, and then select <strong>Create ACL policy</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Toggle <strong>Upload file</strong> sliding switch, and click <strong>Choose a file</strong> to select your
<strong><code>edu-admin.hcl</code></strong> file you authored. This loads the policy and sets the
<strong>Name</strong> to be <code>edu-admin</code>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Create Policy</strong> to complete.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Set the <strong>CURRENT NAMESPACE</strong> to be <strong>education/training</strong> in the upper left
menu.
<img src="/img/vault-multi-tenant-6.png" alt="Namespace"/></p></li><li class="g-type-long-body"><p class="g-type-long-body">In the <strong>Policies</strong> tab, select <strong>Create ACL policy</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Toggle <strong>Upload file</strong>, and click <strong>Choose a file</strong> to select your
<strong><code>training-admin.hcl</code></strong> file you authored.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Create Policy</strong>.</p></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#step3" aria-label="step 3 setup entities and groups permalink">»</a><a class="__target-h __compat" id="step3" aria-hidden=""></a><a class="__target-h" id="step-3-setup-entities-and-groups" aria-hidden=""></a>Step 3: Setup entities and groups</h3><p class="g-type-long-body">(<strong>Persona:</strong> operations)</p><p class="g-type-long-body">Bob who is an organization-level administrator (superuser) has two accounts:
<strong><code>bob</code></strong> and <strong><code>bsmith</code></strong>. You will create an entity, <strong>Bob Smith</strong> to
associate those two accounts.</p><p class="g-type-long-body">Also, you are going to create a group for the team-level administrator, <strong>Team
Admin</strong>, and add Bob Smith entity as a group member so that Bob can inherit the
<code>training-admin</code> policy to manage the child namespace if he ever has to take
over.</p><p class="g-type-long-body"><img src="/img/vault-multi-tenant-3.png" alt="Entities and Groups"/></p><div class="alert alert-info g-type-body" role="alert"><p class="g-type-long-body">This step only demonstrates CLI commands and Web UI to create
entities and groups. Refer to the <a href="/guides/identity/identity">Identity - Entities and
Groups</a> guide if you need the full details.
Also, read the <a href="#additional-discussion">Additional Discussion</a> section for
an example of setting up external groups.</p></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#cli-command-2" aria-label="cli command permalink">»</a><a class="__target-h" id="cli-command-2" aria-hidden=""></a>CLI Command</h4><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># First, you need to enable userpass auth method</span>
<!-- -->$ vault auth <span class="token builtin class-name">enable</span> -namespace<span class="token operator">=</span>education userpass<!-- -->
<!-- -->
<span class="token comment"># Create a user &#x27;bob&#x27;</span>
<!-- -->$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education <span class="token punctuation">\</span>
<!-- -->        auth/userpass/users/bob <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
<!-- -->
<span class="token comment"># Create an entity for Bob Smith with &#x27;edu-admin&#x27; policy attached</span>
<span class="token comment"># Save the generated entity ID in entity_id.txt file</span>
<!-- -->$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education -format<span class="token operator">=</span>json identity/entity <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;Bob Smith&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">policies</span><span class="token operator">=</span><span class="token string">&quot;edu-admin&quot;</span> <span class="token operator">|</span> jq -r <span class="token string">&quot;.data.id&quot;</span> <span class="token operator">&gt;</span> entity_id.txt<!-- -->
<!-- -->
<span class="token comment"># Get the mount accessor for userpass auth method and save it in accessor.txt file</span>
<!-- -->$ vault auth list -namespace<span class="token operator">=</span>education -format<span class="token operator">=</span>json <span class="token punctuation">\</span>
<!-- -->        <span class="token operator">|</span> jq -r <span class="token string">&#x27;.[&quot;userpass/&quot;].accessor&#x27;</span> <span class="token operator">&gt;</span> accessor.txt<!-- -->
<!-- -->
<span class="token comment"># Create an entity alias for Bob Smith to attach &#x27;bob&#x27;</span>
<!-- -->$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education identity/entity-alias <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;bob&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">canonical_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> entity_id.txt<span class="token variable">)</span></span> <span class="token assign-left variable">mount_accessor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> accessor.txt<span class="token variable">)</span></span>
<!-- -->
<span class="token comment"># Create a group, &quot;Training Admin&quot; in education/training namespace</span>
<!-- -->$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education/training identity/group <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;Training Admin&quot;</span> <span class="token assign-left variable">policies</span><span class="token operator">=</span><span class="token string">&quot;training-admin&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">member_entity_ids</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> entity_id.txt<span class="token variable">)</span></span>
<!-- -->
<span class="token comment"># Enable userpass auth method in training namespace</span>
<!-- -->$ vault auth <span class="token builtin class-name">enable</span> -namespace<span class="token operator">=</span>education/training userpass<!-- -->
<!-- -->
<span class="token comment"># Create a user &#x27;bsmith&#x27;</span>
<!-- -->$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education/training <span class="token punctuation">\</span>
<!-- -->        auth/userpass/users/bsmith <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
<!-- -->
<span class="token comment"># Get the mount accessor for userpass auth method and save it in accessor2.txt file</span>
<!-- -->$ vault auth list -namespace<span class="token operator">=</span>education/training -format<span class="token operator">=</span>json <span class="token punctuation">\</span>
<!-- -->        <span class="token operator">|</span> jq -r <span class="token string">&#x27;.[&quot;userpass/&quot;].accessor&#x27;</span> <span class="token operator">&gt;</span> accessor2.txt<!-- -->
<!-- -->
<span class="token comment"># Add &#x27;bsmith&#x27; to Bob Smith entity as its alias</span>
<!-- -->$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education identity/entity-alias <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;bsmith&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">canonical_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> entity_id.txt<span class="token variable">)</span></span> <span class="token assign-left variable">mount_accessor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> accessor2.txt<span class="token variable">)</span></span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># First, you need to enable userpass auth method</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault auth <span class="token builtin class-name">enable</span> -namespace<span class="token operator">=</span>education userpass</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a user &#x27;bob&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        auth/userpass/users/bob <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create an entity for Bob Smith with &#x27;edu-admin&#x27; policy attached</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Save the generated entity ID in entity_id.txt file</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education -format<span class="token operator">=</span>json identity/entity <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;Bob Smith&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">policies</span><span class="token operator">=</span><span class="token string">&quot;edu-admin&quot;</span> <span class="token operator">|</span> jq -r <span class="token string">&quot;.data.id&quot;</span> <span class="token operator">&gt;</span> entity_id.txt</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Get the mount accessor for userpass auth method and save it in accessor.txt file</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault auth list -namespace<span class="token operator">=</span>education -format<span class="token operator">=</span>json <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token operator">|</span> jq -r <span class="token string">&#x27;.[&quot;userpass/&quot;].accessor&#x27;</span> <span class="token operator">&gt;</span> accessor.txt</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create an entity alias for Bob Smith to attach &#x27;bob&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education identity/entity-alias <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;bob&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">canonical_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> entity_id.txt<span class="token variable">)</span></span> <span class="token assign-left variable">mount_accessor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> accessor.txt<span class="token variable">)</span></span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a group, &quot;Training Admin&quot; in education/training namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education/training identity/group <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;Training Admin&quot;</span> <span class="token assign-left variable">policies</span><span class="token operator">=</span><span class="token string">&quot;training-admin&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">member_entity_ids</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> entity_id.txt<span class="token variable">)</span></span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable userpass auth method in training namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault auth <span class="token builtin class-name">enable</span> -namespace<span class="token operator">=</span>education/training userpass</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a user &#x27;bsmith&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education/training <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        auth/userpass/users/bsmith <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Get the mount accessor for userpass auth method and save it in accessor2.txt file</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault auth list -namespace<span class="token operator">=</span>education/training -format<span class="token operator">=</span>json <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token operator">|</span> jq -r <span class="token string">&#x27;.[&quot;userpass/&quot;].accessor&#x27;</span> <span class="token operator">&gt;</span> accessor2.txt</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Add &#x27;bsmith&#x27; to Bob Smith entity as its alias</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -namespace<span class="token operator">=</span>education identity/entity-alias <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;bsmith&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">canonical_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> entity_id.txt<span class="token variable">)</span></span> <span class="token assign-left variable">mount_accessor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> accessor2.txt<span class="token variable">)</span></span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#web-ui-2" aria-label="web ui permalink">»</a><a class="__target-h" id="web-ui-2" aria-hidden=""></a>Web UI</h4><ol><li class="g-type-long-body"><p class="g-type-long-body">In the Web UI, make sure that the <strong>CURRENT NAMESPACE</strong> is set to
<strong>education</strong> in the upper left menu.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the <strong>Access</strong> tab, and select <strong>Enable new method</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Username &amp; Password</strong> from the <strong>Type</strong> drop-down menu.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Enable Method</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the Vault CLI shell icon (<strong><code>&gt;_</code></strong>) to open a command shell. Enter the
following command to create a new user, <strong><code>bob</code></strong>.</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">vault write auth/userpass/users/bob password=&quot;password&quot;<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">vault write auth/userpass/users/bob password=&quot;password&quot;</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body"><img src="/img/vault-multi-tenant-4.png" alt="Create Policy"/></p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the icon (<strong><code>&gt;_</code></strong>) again to hide the shell.</p></li><li class="g-type-long-body"><p class="g-type-long-body">From the <strong>Access</strong> tab, select <strong>Entities</strong> and then <strong>Create entity</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Enter <strong><code>Bob Smith</code></strong> in the <strong>Name</strong> field, and <strong><code>edu-admin</code></strong> in the
<strong>Policies</strong> field.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Create</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Add alias</strong>. Enter <strong><code>bob</code></strong> in the <strong>Name</strong> field and select
<strong><code>userpass/ (userpass)</code></strong> from the <strong>Auth Backend</strong> drop-down list.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Create</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the <strong>Access</strong> tab and select <strong>Entities</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select the <strong><code>bob-smith</code></strong> entity and copy its <strong>ID</strong> displayed under the
<strong>Details</strong> tab.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Now, set the <strong>CURRENT NAMESPACE</strong> to <strong>education/training</strong>.
<img src="/img/vault-multi-tenant-6.png" alt="Namespace"/></p></li><li class="g-type-long-body"><p class="g-type-long-body">In the <strong>Access</strong> tab, select <strong>Groups</strong>, and select <strong>Create group</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Paste in the entity ID in the <strong>Member Entity IDs</strong> field you copied.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Enter <strong><code>Training Admin</code></strong> in the <strong>Name</strong> field, <strong><code>training-admin</code></strong> in the
<strong>Policies</strong> field, and click <strong>Create</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the <strong>Access</strong> tab, and select <strong>Enable new method</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Username &amp; Password</strong> from the <strong>Type</strong> drop-down menu.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Enable Method</strong>. Copy the mount accessor value which you will user later.
<img src="/img/vault-multi-tenant-8.png" alt="Namespace"/></p></li><li class="g-type-long-body"><p class="g-type-long-body">Click the Vault CLI shell icon (<strong><code>&gt;_</code></strong>) to open a command shell. Enter the
following command to create a new user, <strong><code>bsmith</code></strong>.</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">vault write auth/userpass/users/bsmith password=&quot;password&quot;<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">vault write auth/userpass/users/bsmith password=&quot;password&quot;</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">Set the <strong>CURRENT NAMESPACE</strong> back to <strong>education</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">In the command shell, enter the following command. Be sure to replace the
<code>&lt;Bob_Smith_entity_id&gt;</code> with the value you copied at step 13, and
<code>&lt;mount_accessor&gt;</code> with the value you copied at step 20.</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">vault write identity/entity-alias name=&quot;bsmith&quot; \<!-- -->
<!-- -->        canonical_id=&lt;Bob_Smith_entity_id&gt; mount_accessor=&lt;mount_accessor&gt;<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">vault write identity/entity-alias name=&quot;bsmith&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        canonical_id=&lt;Bob_Smith_entity_id&gt; mount_accessor=&lt;mount_accessor&gt;</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#step4" aria-label="step 4 test the organization admin user permalink">»</a><a class="__target-h __compat" id="step4" aria-hidden=""></a><a class="__target-h" id="step-4-test-the-organization-admin-user" aria-hidden=""></a>Step 4: Test the organization admin user</h3><p class="g-type-long-body">(<strong>Persona:</strong> org-admin)</p><h4 class="g-type-display-5"><a class="__permalink-h" href="#cli-command-3" aria-label="cli command permalink">»</a><a class="__target-h" id="cli-command-3" aria-hidden=""></a>CLI Command</h4><p class="g-type-long-body">Log in as <strong><code>bob</code></strong> into the <code>education</code> namespace:</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">vault login -namespace<span class="token operator">=</span>education -method<span class="token operator">=</span>userpass <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;bob&quot;</span> <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span></span></span>
<!-- -->
<span class="token output">Key                    Value</span>
<span class="token output">---                    -----</span>
<span class="token output">token                  5ai0qpQeCdRHALzEY4Q8sW.28dk2</span>
<span class="token output">token_accessor         9xXQmdx6Aq6zw1KX4gpzb.28dk2</span>
<span class="token output">token_duration         768h</span>
<span class="token output">token_renewable        true</span>
<span class="token output">token_policies         [&quot;default&quot;]</span>
<span class="token output">identity_policies      [&quot;edu-admin&quot;]</span>
<span class="token output">policies               [&quot;default&quot; &quot;edu-admin&quot;]</span>
<span class="token output">token_meta_username    bob</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">vault login -namespace<span class="token operator">=</span>education -method<span class="token operator">=</span>userpass <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;bob&quot;</span> <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span></span></span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">Key                    Value</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">---                    -----</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token                  5ai0qpQeCdRHALzEY4Q8sW.28dk2</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_accessor         9xXQmdx6Aq6zw1KX4gpzb.28dk2</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_duration         768h</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_renewable        true</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_policies         [&quot;default&quot;]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">identity_policies      [&quot;edu-admin&quot;]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">policies               [&quot;default&quot; &quot;edu-admin&quot;]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_meta_username    bob</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Notice that the user, <code>bob</code> only has <code>default</code> policy attached to his token
(<code>token_policies</code>); however, he inherited the <code>edu-admin</code> policy from the <code>Bob Smith</code> entity (<code>identity_policies</code>).</p><p class="g-type-long-body">Test to make sure that <code>bob</code> can create a namespace, enable secrets engine, and
whatever else that you want to verify.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Set the target namespace as an env variable</span>
<!-- -->$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_NAMESPACE</span><span class="token operator">=</span><span class="token string">&quot;education&quot;</span>
<!-- -->
<span class="token comment"># Create a new namespace called &#x27;web-app&#x27;</span>
<!-- -->$ vault namespace create web-app<!-- -->
<!-- -->Success<span class="token operator">!</span> Namespace created at: education/web-app/<!-- -->
<!-- -->
<span class="token comment"># Enable key/value v2 secrets engine at edu-secret</span>
<!-- -->$ vault secrets <span class="token builtin class-name">enable</span> -path<span class="token operator">=</span>edu-secret kv-v2<!-- -->
<!-- -->Success<span class="token operator">!</span> Enabled the kv-v2 secrets engine at: edu-secret/<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Set the target namespace as an env variable</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_NAMESPACE</span><span class="token operator">=</span><span class="token string">&quot;education&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a new namespace called &#x27;web-app&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace create web-app</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">Success<span class="token operator">!</span> Namespace created at: education/web-app/</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable key/value v2 secrets engine at edu-secret</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault secrets <span class="token builtin class-name">enable</span> -path<span class="token operator">=</span>edu-secret kv-v2</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">Success<span class="token operator">!</span> Enabled the kv-v2 secrets engine at: edu-secret/</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Optionally, you can create new policies to test that <code>bob</code> can perform the
operations as expected. When you are done testing, unset the VAULT_NAMESPACE
environment variable.</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">unset</span> VAULT_NAMESPACE</span></span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">unset</span> VAULT_NAMESPACE</span></span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#api-call-using-curl-2" aria-label="api call using curl permalink">»</a><a class="__target-h" id="api-call-using-curl-2" aria-hidden=""></a>API call using cURL</h4><p class="g-type-long-body">Log in as <strong><code>bob</code></strong> into the <code>education</code> namespace:</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> </span></span><span class="token output">\</span>
<span class="token output">       --request POST \</span>
<span class="token output">       --data &#x27;{&quot;password&quot;: &quot;password&quot;}&#x27; \</span>
<span class="token output">       http://127.0.0.1:8200/v1/auth/userpass/login/bob | jq</span>
<span class="token output">{</span>
<span class="token output">   ...</span>
<span class="token output">   &quot;auth&quot;: {</span>
<span class="token output">     &quot;client_token&quot;: &quot;5ai0qpQeCdRHALzEY4Q8sW.28dk2&quot;,</span>
<span class="token output">     &quot;accessor&quot;: &quot;9xXQmdx6Aq6zw1KX4gpzb.28dk2&quot;,</span>
<span class="token output">     &quot;policies&quot;: [</span>
<span class="token output">        &quot;default&quot;,</span>
<span class="token output">        &quot;edu-admin&quot;</span>
<span class="token output">      ],</span>
<span class="token output">      &quot;token_policies&quot;: [</span>
<span class="token output">        &quot;default&quot;</span>
<span class="token output">      ],</span>
<span class="token output">      &quot;identity_policies&quot;: [</span>
<span class="token output">        &quot;edu-admin&quot;</span>
<span class="token output">      ],</span>
<span class="token output">      &quot;external_namespace_policies&quot;: {</span>
<span class="token output">        &quot;9dKXw&quot;: [</span>
<span class="token output">          &quot;training-admin&quot;</span>
<span class="token output">        ]</span>
<span class="token output">      },</span>
<span class="token output">     &quot;metadata&quot;: {</span>
<span class="token output">       &quot;username&quot;: &quot;bob&quot;</span>
<span class="token output">     },</span>
<span class="token output">     ...</span>
<span class="token output">   }</span>
<span class="token output">}</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Namespace: education&quot;</span> </span></span><span class="token output">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       --request POST \</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       --data &#x27;{&quot;password&quot;: &quot;password&quot;}&#x27; \</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       http://127.0.0.1:8200/v1/auth/userpass/login/bob | jq</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">   ...</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">   &quot;auth&quot;: {</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     &quot;client_token&quot;: &quot;5ai0qpQeCdRHALzEY4Q8sW.28dk2&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     &quot;accessor&quot;: &quot;9xXQmdx6Aq6zw1KX4gpzb.28dk2&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     &quot;policies&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;default&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;edu-admin&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      ],</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;token_policies&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;default&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      ],</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;identity_policies&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;edu-admin&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      ],</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;external_namespace_policies&quot;: {</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;9dKXw&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">          &quot;training-admin&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        ]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      },</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     &quot;metadata&quot;: {</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       &quot;username&quot;: &quot;bob&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     },</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     ...</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">   }</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">}</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Notice that the user, <code>bob</code> only has <code>default</code> policy attached to his token
(<code>token_policies</code>); however, he inherited the <code>edu-admin</code> policy from the <code>Bob Smith</code> entity (<code>identity_policies</code>). Also, <code>training-admin</code> policy is listed
under <code>external_namespace_policies</code> due to its membership to the Training Admin
group in <code>education/training</code> namespace.</p><p class="g-type-long-body">Verify that <code>bob</code> can perform the operations permitted by the <code>edu-admin</code>
policy.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Create a new namespace called &#x27;web-app&#x27;</span>
<span class="token comment"># Be sure to use generated bob&#x27;s client token</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --request POST <span class="token punctuation">\</span>
<!-- -->       http://127.0.0.1:8200/v1/education/sys/namespaces/web-app<!-- -->
<!-- -->
<span class="token comment"># Enable key/value v2 secrets engine at edu-secret</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --request POST <span class="token punctuation">\</span>
<!-- -->       --data <span class="token string">&#x27;{&quot;type&quot;: &quot;kv-v2&quot;}&#x27;</span> <span class="token punctuation">\</span>
<!-- -->       http://127.0.0.1:8200/v1/education/sys/mounts/edu-secret<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a new namespace called &#x27;web-app&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Be sure to use generated bob&#x27;s client token</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request POST <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/education/sys/namespaces/web-app</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable key/value v2 secrets engine at edu-secret</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request POST <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --data <span class="token string">&#x27;{&quot;type&quot;: &quot;kv-v2&quot;}&#x27;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/education/sys/mounts/edu-secret</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#web-ui-3" aria-label="web ui permalink">»</a><a class="__target-h" id="web-ui-3" aria-hidden=""></a>Web UI</h4><ol><li class="g-type-long-body"><p class="g-type-long-body">Open a web browser and launch the Vault UI (e.g. <a href="http://127.0.01:8200/ui">http://127.0.01:8200/ui</a>). If
you are already logged in, sign out.</p></li><li class="g-type-long-body"><p class="g-type-long-body">At the <strong>Sign in to Vault</strong>, set the <strong>Namespace</strong> to <strong><code>education</code></strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select the <strong>Userpass</strong> tab, and enter <strong><code>bob</code></strong> in the <strong>Username</strong> field,
and <strong><code>password</code></strong> in the <strong>Password</strong> field.
<img src="/img/vault-multi-tenant-5.png" alt="Login"/></p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Sign in</strong>. Notice that the CURRENT NAMESPACE is set to <strong>education</strong>
in the upper left corner of the UI.</p></li><li class="g-type-long-body"><p class="g-type-long-body">To add a new namespace, select <strong>Access</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Namespaces</strong> and then click <strong>Create a namespace</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Enter <strong><code>web-app</code></strong> in the <strong>Path</strong> field, and then click <strong>Save</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Secrets</strong>, and then <strong>Enable new engine</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>KV</strong> from the <strong>Secrets engine type</strong> drop-down list, and enter
<strong><code>edu-secret</code></strong> in the <strong>Path</strong> field.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Enable Engine</strong> to finish.</p></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#step5" aria-label="step 5 test the team admin user permalink">»</a><a class="__target-h __compat" id="step5" aria-hidden=""></a><a class="__target-h" id="step-5-test-the-team-admin-user" aria-hidden=""></a>Step 5: Test the team admin user</h3><p class="g-type-long-body">(<strong>Persona:</strong> team-admin)</p><h4 class="g-type-display-5"><a class="__permalink-h" href="#cli-command-4" aria-label="cli command permalink">»</a><a class="__target-h" id="cli-command-4" aria-hidden=""></a>CLI Command</h4><p class="g-type-long-body">Log in as <strong><code>bsmith</code></strong> into the <strong><code>education/training</code></strong> namespace:</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">vault login -namespace<span class="token operator">=</span>education/training -method<span class="token operator">=</span>userpass <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;bsmith&quot;</span> <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span></span></span>
<!-- -->
<span class="token output">Key                    Value</span>
<span class="token output">---                    -----</span>
<span class="token output">token                  5YNNjDDl6D8iW3eGQIlU0q.9dKXw</span>
<span class="token output">token_accessor         6TVkDhdvEQXO2JaD64TVLv.9dKXw</span>
<span class="token output">token_duration         768h</span>
<span class="token output">token_renewable        true</span>
<span class="token output">token_policies         [&quot;default&quot;]</span>
<span class="token output">identity_policies      [&quot;training-admin&quot;]</span>
<span class="token output">policies               [&quot;default&quot; &quot;training-admin&quot;]</span>
<span class="token output">token_meta_username    bsmith</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash">vault login -namespace<span class="token operator">=</span>education/training -method<span class="token operator">=</span>userpass <span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token string">&quot;bsmith&quot;</span> <span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token string">&quot;password&quot;</span></span></span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">Key                    Value</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">---                    -----</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token                  5YNNjDDl6D8iW3eGQIlU0q.9dKXw</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_accessor         6TVkDhdvEQXO2JaD64TVLv.9dKXw</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_duration         768h</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_renewable        true</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_policies         [&quot;default&quot;]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">identity_policies      [&quot;training-admin&quot;]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">policies               [&quot;default&quot; &quot;training-admin&quot;]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">token_meta_username    bsmith</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Notice that the user, <code>bsmith</code> inherited the <code>training-admin</code> policy from the
<code>Training Admin</code> group (<code>training_admin</code>) which <code>Bob Smith</code> entity is a member
of.</p><p class="g-type-long-body">Verify that <code>bsmith</code> can perform the operations permitted by the
<code>training-admin</code> policy.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Set the target namespace as an env variable</span>
<!-- -->$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_NAMESPACE</span><span class="token operator">=</span><span class="token string">&quot;education/training&quot;</span>
<!-- -->
<span class="token comment"># Create a new namespace called &#x27;vault-training&#x27;</span>
<!-- -->$ vault namespace create vault-training<!-- -->
<!-- -->Success<span class="token operator">!</span> Namespace created at: education/training/vault-training/<!-- -->
<!-- -->
<span class="token comment"># Enable key/value v1 secrets engine at team-secret</span>
<!-- -->$ vault secrets <span class="token builtin class-name">enable</span> -path<span class="token operator">=</span>team-secret -version<span class="token operator">=</span><span class="token number">1</span> kv<!-- -->
<!-- -->Success<span class="token operator">!</span> Enabled the kv secrets engine at: team-secret/<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Set the target namespace as an env variable</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">VAULT_NAMESPACE</span><span class="token operator">=</span><span class="token string">&quot;education/training&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a new namespace called &#x27;vault-training&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault namespace create vault-training</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">Success<span class="token operator">!</span> Namespace created at: education/training/vault-training/</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable key/value v1 secrets engine at team-secret</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault secrets <span class="token builtin class-name">enable</span> -path<span class="token operator">=</span>team-secret -version<span class="token operator">=</span><span class="token number">1</span> kv</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">Success<span class="token operator">!</span> Enabled the kv secrets engine at: team-secret/</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">When you are done testing, unset the VAULT_NAMESPACE environment variable.</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">unset</span> VAULT_NAMESPACE</span></span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token builtin class-name">unset</span> VAULT_NAMESPACE</span></span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#api-call-using-curl-3" aria-label="api call using curl permalink">»</a><a class="__target-h" id="api-call-using-curl-3" aria-hidden=""></a>API call using cURL</h4><p class="g-type-long-body">Log in as <strong><code>bsmith</code></strong> into the <code>education</code> namespace:</p><div class="g-code-block style_root__3eDLf language-shell-session style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Namespace: education/training&quot;</span> </span></span><span class="token output">\</span>
<span class="token output">       --request POST \</span>
<span class="token output">       --data &#x27;{&quot;password&quot;: &quot;password&quot;}&#x27; \</span>
<span class="token output">       http://127.0.0.1:8200/v1/auth/userpass/login/bsmith | jq</span>
<span class="token output">{</span>
<span class="token output">   ...</span>
<span class="token output">   &quot;auth&quot;: {</span>
<span class="token output">     &quot;client_token&quot;: &quot;5YNNjDDl6D8iW3eGQIlU0q.9dKXw&quot;,</span>
<span class="token output">      &quot;accessor&quot;: &quot;6TVkDhdvEQXO2JaD64TVLv.9dKXw&quot;,</span>
<span class="token output">      &quot;display_name&quot;: &quot;education-training-auth-userpass-bsmith&quot;,</span>
<span class="token output">      &quot;policies&quot;: [</span>
<span class="token output">        &quot;default&quot;,</span>
<span class="token output">        &quot;training-admin&quot;</span>
<span class="token output">      ],</span>
<span class="token output">      &quot;token_policies&quot;: [</span>
<span class="token output">        &quot;default&quot;</span>
<span class="token output">      ],</span>
<span class="token output">      &quot;identity_policies&quot;: [</span>
<span class="token output">        &quot;training-admin&quot;</span>
<span class="token output">      ],</span>
<span class="token output">      &quot;external_namespace_policies&quot;: {</span>
<span class="token output">        &quot;28dk2&quot;: [</span>
<span class="token output">          &quot;edu-admin&quot;</span>
<span class="token output">        ]</span>
<span class="token output">      },</span>
<span class="token output">      &quot;metadata&quot;: {</span>
<span class="token output">        &quot;username&quot;: &quot;bsmith&quot;</span>
<span class="token output">      },</span>
<span class="token output">     ...</span>
<span class="token output">   }</span>
<span class="token output">}</span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell-session"><code class="style_code__2AMYw language-shell-session"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token command"><span class="token shell-symbol important">$</span> <span class="token bash language-bash"><span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Namespace: education/training&quot;</span> </span></span><span class="token output">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       --request POST \</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       --data &#x27;{&quot;password&quot;: &quot;password&quot;}&#x27; \</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">       http://127.0.0.1:8200/v1/auth/userpass/login/bsmith | jq</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">   ...</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">   &quot;auth&quot;: {</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     &quot;client_token&quot;: &quot;5YNNjDDl6D8iW3eGQIlU0q.9dKXw&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;accessor&quot;: &quot;6TVkDhdvEQXO2JaD64TVLv.9dKXw&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;display_name&quot;: &quot;education-training-auth-userpass-bsmith&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;policies&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;default&quot;,</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;training-admin&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      ],</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;token_policies&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;default&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      ],</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;identity_policies&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;training-admin&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      ],</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;external_namespace_policies&quot;: {</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;28dk2&quot;: [</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">          &quot;edu-admin&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        ]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      },</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      &quot;metadata&quot;: {</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">        &quot;username&quot;: &quot;bsmith&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">      },</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">     ...</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">   }</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token output">}</span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">Notice that the user, <code>bsmith</code> inherited the <code>training-admin</code> policy from the
<code>Training Admin</code> group which <code>Bob Smith</code> entity is a member of. Also,
<code>edu-admin</code> policy is listed under <code>external_namespace_policies</code>.</p><p class="g-type-long-body">Verify that <code>bsmith</code> can perform the operations permitted by the
<code>training-admin</code> policy.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Create a new namespace called &#x27;vault-training&#x27;</span>
<span class="token comment"># Be sure to use generated bsmith&#x27;s client token</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --request POST <span class="token punctuation">\</span>
<!-- -->       http://127.0.0.1:8200/v1/education/training/sys/namespaces/web-app<!-- -->
<!-- -->
<span class="token comment"># Enable key/value v1 secrets engine at team-secret</span>
<!-- -->$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw&quot;</span> <span class="token punctuation">\</span>
<!-- -->       --request POST <span class="token punctuation">\</span>
<!-- -->       --data <span class="token string">&#x27;{&quot;type&quot;: &quot;kv&quot;}&#x27;</span> <span class="token punctuation">\</span>
<!-- -->       http://127.0.0.1:8200/v1/education/training/sys/mounts/edu-secret<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a new namespace called &#x27;vault-training&#x27;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Be sure to use generated bsmith&#x27;s client token</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request POST <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/education/training/sys/namespaces/web-app</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Enable key/value v1 secrets engine at team-secret</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ <span class="token function">curl</span> --header <span class="token string">&quot;X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --request POST <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       --data <span class="token string">&#x27;{&quot;type&quot;: &quot;kv&quot;}&#x27;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">       http://127.0.0.1:8200/v1/education/training/sys/mounts/edu-secret</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><h4 class="g-type-display-5"><a class="__permalink-h" href="#web-ui-4" aria-label="web ui permalink">»</a><a class="__target-h" id="web-ui-4" aria-hidden=""></a>Web UI</h4><ol><li class="g-type-long-body"><p class="g-type-long-body">Open a web browser and launch the Vault UI (e.g. <a href="http://127.0.01:8200/ui">http://127.0.01:8200/ui</a>). If
you are already logged in, sign out.</p></li><li class="g-type-long-body"><p class="g-type-long-body">At the <strong>Sign in to Vault</strong>, set the <strong>Namespace</strong> to
<strong><code>education/training</code></strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select the <strong>Userpass</strong> tab, and enter <strong><code>bsmith</code></strong> in the <strong>Username</strong>
field, and <strong><code>password</code></strong> in the <strong>Password</strong> field.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Sign in</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">To add a new namespace, select <strong>Access</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Namespaces</strong> and then click <strong>Create a namespace</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Enter <strong><code>vault-training</code></strong> in the <strong>Path</strong> field, and then click <strong>Save</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>Secrets</strong>, and then <strong>Enable new engine</strong>.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Select <strong>KV</strong> from the <strong>Secrets engine type</strong> drop-down list, and enter
<strong><code>team-secret</code></strong> in the <strong>Path</strong> field.</p></li><li class="g-type-long-body"><p class="g-type-long-body">Click <strong>Enable Engine</strong> to finish.</p></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#step6" aria-label="step 6 audit ambient credentials permalink">»</a><a class="__target-h __compat" id="step6" aria-hidden=""></a><a class="__target-h" id="step-6-audit-ambient-credentials" aria-hidden=""></a>Step 6: Audit ambient credentials</h3><p class="g-type-long-body">(<strong>Persona:</strong> operator)</p><p class="g-type-long-body">Many auth and secrets providers, such as AWS, Azure, GCP, and AliCloud, use ambient
credentials to authenticate API calls. For example, AWS may:</p><ol><li class="g-type-long-body">Use an access key and secret key configured in Vault.</li><li class="g-type-long-body">If not present, check for environment variables such as &quot;AWS_ACCESS_KEY_ID&quot; and &quot;AWS_SECRET_ACCESS_KEY&quot;.</li><li class="g-type-long-body">If not present, load credentials configured in &quot;~/.aws/credentials&quot;.</li><li class="g-type-long-body">If not present, use instance metadata.</li></ol><p class="g-type-long-body">This becomes a problem if these ambient credentials are not intended to be used within
a particular namespace.</p><p class="g-type-long-body">For example, suppose that your Vault server is running on an
AWS EC2 instance. You give the owner of a namespace a particular set of permissions to
use for AWS. However, that owner <em>does not</em> configure them. So, Vault falls back to using
the credentials available in instance metadata, leading to a privilege escalation.</p><p class="g-type-long-body">To handle this:</p><ul><li class="g-type-long-body">Ensure no environment variables are available that could grant a privilege escalation.</li><li class="g-type-long-body">Ensure that any privileges granted through instance metadata (in this example) or other
ambient identity info represent a <em>loss</em> of privilege.</li><li class="g-type-long-body">Directly configure the correct credentials in namespaces, and restrict access to that
endpoint so credentials can&#x27;t later be edited to use ambient credentials.</li></ul><br/><div class="alert alert-warning g-type-body" role="alert"><p class="g-type-long-body"><strong>Summary:</strong> As this guide demonstrated, each namespace you created behaves
as an <strong>isolated</strong> Vault environment. Once you sign into a namespace, there is
no visibility into other namespaces regardless of its hierarchical relationship.
Tokens, policies, and secrets engines are tied to its namespace; therefore, each
client must acquire a valid token for each namespace to access their secrets.</p></div><h2 class="g-type-display-3"><a class="__permalink-h" href="#additional-discussion" aria-label="additional discussion permalink">»</a><a class="__target-h" id="additional-discussion" aria-hidden=""></a>Additional Discussion</h2><p class="g-type-long-body">For the simplicity, this guide used the username and password (<code>userpass</code>) auth
method which was enabled in the education namespace. However, most likely, your
organization uses LDAP auth method which is enabled in the <strong>root</strong> namespace
instead.</p><p class="g-type-long-body">Here are the steps to create the &quot;Training Admin&quot; group as described in this
guide using the LDAP auth method enabled in the root namespace.</p><ol><li class="g-type-long-body"><p class="g-type-long-body">Enable and configure the desired auth method (e.g. LDAP) in the root
namespace.</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ vault auth enable ldap<!-- -->
<!-- -->
<!-- -->$ vault write auth/ldap/config \<!-- -->
<!-- -->        url=&quot;ldap://ldap.example.com&quot; \<!-- -->
<!-- -->        userdn=&quot;ou=Users,dc=example,dc=com&quot; \<!-- -->
<!-- -->        groupdn=&quot;ou=Groups,dc=example,dc=com&quot; \<!-- -->
<!-- -->        groupfilter=&quot;(&amp;(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))&quot; \<!-- -->
<!-- -->        groupattr=&quot;cn&quot; \<!-- -->
<!-- -->        upndomain=&quot;example.com&quot; \<!-- -->
<!-- -->        certificate=@ldap_ca_cert.pem \<!-- -->
<!-- -->        insecure_tls=false \<!-- -->
<!-- -->        starttls=true<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault auth enable ldap</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault write auth/ldap/config \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        url=&quot;ldap://ldap.example.com&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        userdn=&quot;ou=Users,dc=example,dc=com&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        groupdn=&quot;ou=Groups,dc=example,dc=com&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        groupfilter=&quot;(&amp;(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        groupattr=&quot;cn&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        upndomain=&quot;example.com&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        certificate=@ldap_ca_cert.pem \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        insecure_tls=false \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        starttls=true</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">Create an <em>external</em> group in the root namespace.</p><div class="g-code-block style_root__3eDLf language-shell style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Get the mount accessor for ldap auth method and save it in accessor.txt file</span>
<!-- -->$ vault auth list -format<span class="token operator">=</span>json <span class="token punctuation">\</span>
<!-- -->        <span class="token operator">|</span> jq -r <span class="token string">&#x27;.[&quot;ldap/&quot;].accessor&#x27;</span> <span class="token operator">&gt;</span> accessor.txt<!-- -->
<!-- -->
<span class="token comment"># Create an external group and save the generated group ID in group_id.txt</span>
<!-- -->$ vault <span class="token function">write</span> -format<span class="token operator">=</span>json identity/group <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;training_admin_root&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;external&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token operator">|</span> jq -r <span class="token string">&quot;.data.id&quot;</span> <span class="token operator">&gt;</span> group_id.txt<!-- -->
<!-- -->
<span class="token comment"># Create a group alias - assuming that the group name in LDAP is &quot;ops_training&quot;</span>
<!-- -->$ vault <span class="token function">write</span> -format<span class="token operator">=</span>json identity/group-alias <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;ops_training&quot;</span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">mount_accessor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> accessor.txt<span class="token variable">)</span></span> <span class="token punctuation">\</span>
<!-- -->        <span class="token assign-left variable">canonical_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> group_id.txt<span class="token variable">)</span></span>
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-shell"><code class="style_code__2AMYw language-shell"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Get the mount accessor for ldap auth method and save it in accessor.txt file</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault auth list -format<span class="token operator">=</span>json <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token operator">|</span> jq -r <span class="token string">&#x27;.[&quot;ldap/&quot;].accessor&#x27;</span> <span class="token operator">&gt;</span> accessor.txt</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create an external group and save the generated group ID in group_id.txt</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -format<span class="token operator">=</span>json identity/group <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;training_admin_root&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;external&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token operator">|</span> jq -r <span class="token string">&quot;.data.id&quot;</span> <span class="token operator">&gt;</span> group_id.txt</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Create a group alias - assuming that the group name in LDAP is &quot;ops_training&quot;</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault <span class="token function">write</span> -format<span class="token operator">=</span>json identity/group-alias <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;ops_training&quot;</span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">mount_accessor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> accessor.txt<span class="token variable">)</span></span> <span class="token punctuation">\</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        <span class="token assign-left variable">canonical_id</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> group_id.txt<span class="token variable">)</span></span></span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li><li class="g-type-long-body"><p class="g-type-long-body">In the <code>education/training</code> namespace, create an <em>internal</em> group which has
the external group (<code>training_admin_root</code>) as its member.</p><div class="g-code-block style_root__3eDLf language-plaintext style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none">$ vault write -namespace=education/training identity/group \<!-- -->
<!-- -->        name=&quot;Training Admin&quot; \<!-- -->
<!-- -->        policies=&quot;training-admin&quot; \<!-- -->
<!-- -->        member_group_ids=$(cat group_id.txt)<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-plaintext"><code class="style_code__2AMYw language-plaintext"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">$ vault write -namespace=education/training identity/group \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        name=&quot;Training Admin&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        policies=&quot;training-admin&quot; \</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">        member_group_ids=$(cat group_id.txt)</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div></li></ol><h3 class="g-type-display-4"><a class="__permalink-h" href="#policy-with-namespaces" aria-label="policy with namespaces permalink">»</a><a class="__target-h" id="policy-with-namespaces" aria-hidden=""></a>Policy with namespaces</h3><p class="g-type-long-body">In this guide, you created policies in each namespace (<code>education</code> and
<code>education/training</code>). Therefore, you did not have to specify the target
namespace in the policy paths.</p><p class="g-type-long-body">If you want to create policies in the root namespace to control <code>education</code> and
<code>education/training</code> namespaces, prepend the namespace in the paths.</p><p class="g-type-long-body">For example:</p><div class="g-code-block style_root__3eDLf language-hcl style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Manage policies in the &#x27;education&#x27; namespace</span>
<!-- -->path <span class="token string">&quot;education/sys/policies/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage tokens in the &#x27;education&#x27; namespace</span>
<!-- -->path <span class="token string">&quot;education/auth/token/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies under &#x27;education/training&#x27; namespace</span>
<!-- -->path <span class="token string">&quot;education/training/sys/policies/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage tokens in the &#x27;education/training&#x27; namespace</span>
<!-- -->path <span class="token string">&quot;education/training/auth/token/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->...<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-hcl"><code class="style_code__2AMYw language-hcl"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies in the &#x27;education&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;education/sys/policies/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage tokens in the &#x27;education&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;education/auth/token/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies under &#x27;education/training&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;education/training/sys/policies/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage tokens in the &#x27;education/training&#x27; namespace</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;education/training/auth/token/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">...</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><p class="g-type-long-body">In <a href="#step2">Step 2</a>, you deployed the <code>training-admin</code> policy in the
<code>education/training</code> namespace. The path is relative to the working namespace.
So, if you want to create the <code>training-admin</code> policy in the <strong><code>education</code></strong>
namespace instead, the paths starts with <code>training/</code> rather than
<code>education/training/</code>.</p><div class="g-code-block style_root__3eDLf language-hcl style_codeMargin__gCa5y theme-dark_base__2i1UN theme-dark_syntax__1ok1Y" data-heap-track="code-block"><pre style="display:none"><span class="token comment"># Manage namespaces</span>
<!-- -->path <span class="token string">&quot;training/sys/namespaces/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies via API</span>
<!-- -->path <span class="token string">&quot;training/sys/policies/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->
<span class="token comment"># Manage policies via CLI</span>
<!-- -->path <span class="token string">&quot;training/sys/policy/*&quot;</span> <span class="token punctuation">{</span>
<!-- -->  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<!-- -->...<!-- -->
</pre><div class="style_linesContainer__3neRW"><pre class="style_pre__1vh6Z language-hcl"><code class="style_code__2AMYw language-hcl"><span class="style_linesColumn__33g5m style_styledScrollbars__2aszk"><span class="style_linesWrapper__3Hf6o"><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage namespaces</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;training/sys/namespaces/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies via API</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;training/sys/policies/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">   <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">
</span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token comment"># Manage policies via CLI</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">path <span class="token string">&quot;training/sys/policy/*&quot;</span> <span class="token punctuation">{</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">  <span class="token property">capabilities</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;create&quot;</span>, <span class="token string">&quot;read&quot;</span>, <span class="token string">&quot;update&quot;</span>, <span class="token string">&quot;delete&quot;</span>, <span class="token string">&quot;list&quot;</span>, <span class="token string">&quot;sudo&quot;</span><span class="token punctuation">]</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl"><span class="token punctuation">}</span></span><span class="style_LineOfCode__Ykefu g-type-code style_hasFloatingCopyButton__18ybl">...</span></span></span></code></pre><div class="style_copyButtonContainer__1tl-z"><div class="style_copyButtonBackground__1VUWz"><button class="style_button__3y017 g-type-body-small-strong" data-heap-track="code-block-clipboard-icon" type="button">Copy<div class="style_svg__1ZhpC"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.82 3C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4.18zM10 13H7v2h3v-2zm-3 6h5v-2H7v2zM7 9v2h6V9H7zm5-6c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM5 21V5h2v1.007h10V5h2v5.992h2.003V17H19v4H5zm11.99-3v-3H24v-2h-7.01v-3L13 14l3.99 4z" fill="#000"/></svg></div></button></div></div></div></div><div class="alert alert-warning g-type-body" role="alert"><p class="g-type-long-body"><strong>NOTE:</strong> Important to remember that tokens are local to the namespace.
Therefore, you need a valid token for the namespace you want to operate in. The
token created in the <code>education</code> namespace is not valid in the
<code>education/training</code> namespace. This is so that each namespace is completely
isolated from one another to ensure a secure multi-tenant environment.</p></div><h2 class="g-type-display-3"><a class="__permalink-h" href="#next-steps" aria-label="next steps permalink">»</a><a class="__target-h" id="next-steps" aria-hidden=""></a>Next steps</h2><p class="g-type-long-body">Refer to the <a href="/guides/identity/sentinel">Sentinel Policies</a> guide if you
need to write policies that allow you to embed finer control over the user
access across those namespaces.</p></article></div></div><div id="edit-this-page" class="g-container"><a href="https://github.com/hashicorp/vault/blob/main/website/content/guides/operations/multi-tenant.mdx"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTExLjYwOC4zNDJDNS41MzUuMzQyLjYxIDUuMTYyLjYxIDExLjEwOGMwIDQuNzU3IDMuMTUyIDguNzkyIDcuNTIzIDEwLjIxNS41NS4xLjc1MS0uMjMzLjc1MS0uNTE4IDAtLjI1Ni0uMDEtLjkzMy0uMDE1LTEuODMxLTMuMDYuNjUtMy43MDUtMS40NDQtMy43MDUtMS40NDQtLjUtMS4yNDMtMS4yMjItMS41NzQtMS4yMjItMS41NzQtLjk5OC0uNjY4LjA3Ni0uNjU1LjA3Ni0uNjU1IDEuMTA0LjA3NiAxLjY4NSAxLjExIDEuNjg1IDEuMTEuOTgxIDEuNjQ1IDIuNTc1IDEuMTcgMy4yMDEuODk0LjEtLjY5NS4zODUtMS4xNy42OTktMS40MzktMi40NDMtLjI3MS01LjAxMS0xLjE5NS01LjAxMS01LjMyIDAtMS4xNzYuNDI5LTIuMTM3IDEuMTMyLTIuODktLjExMy0uMjcyLS40OS0xLjM2Ny4xMDgtMi44NDkgMCAwIC45MjQtLjI4OSAzLjAyNSAxLjEwNC44NzctLjI0IDEuODE5LS4zNTggMi43NTQtLjM2My45MzQuMDA1IDEuODc1LjEyNCAyLjc1NC4zNjMgMi4xLTEuMzkzIDMuMDIyLTEuMTA0IDMuMDIyLTEuMTA0LjYgMS40ODIuMjIyIDIuNTc3LjExIDIuODUuNzA1Ljc1MiAxLjEzIDEuNzEzIDEuMTMgMi44ODggMCA0LjEzNi0yLjU3MiA1LjA0Ni01LjAyMiA1LjMxMy4zOTQuMzMyLjc0Ni45OS43NDYgMS45OTQgMCAxLjQzOC0uMDEzIDIuNi0uMDEzIDIuOTUzIDAgLjI4OC4xOTguNjIzLjc1Ni41MTggNC4zNjgtMS40MjcgNy41MTYtNS40NiA3LjUxNi0xMC4yMTUgMC01Ljk0Ni00LjkyNS0xMC43NjYtMTEtMTAuNzY2IiBmaWxsPSIjMTYxNTE0IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=" alt="github logo"/><span>Edit this page</span></a></div></div><footer class="g-footer"><div class="g-container"><div class="left"><a href="/docs/vault_v1.8.x/docs/">Docs</a><a href="/docs/vault_v1.8.x/api/">API</a><a href="https://learn.hashicorp.com/vault">Learn</a><a href="/docs/vault_v1.8.x/community/">Community</a><a href="https://hashicorp.com/privacy">Privacy</a><a href="/docs/vault_v1.8.x/security/">Security</a><a href="/docs/vault_v1.8.x/files/press-kit.zip">Press Kit</a><a>Consent Manager</a></div></div></footer><div id="g-consent-manager"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"currentPath":"operations/multi-tenant","frontMatter":{"layout":"guides","page_title":"Secure Multi-Tenancy with Namepaces - Guides","description":"This guide provides guidance in creating a multi-tenant environment."},"githubFileUrl":"https://github.com/hashicorp/vault/blob/main/website/content/guides/operations/multi-tenant.mdx","mdxSource":{"compiledSource":"var i=Object.defineProperty;var o=Object.prototype.hasOwnProperty;var p=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable;var l=(a,n,t)=\u003en in a?i(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=\u003e{for(var t in n||(n={}))o.call(n,t)\u0026\u0026l(a,t,n[t]);if(p)for(var t of p(n))r.call(n,t)\u0026\u0026l(a,t,n[t]);return a};var m=(a,n)=\u003e{var t={};for(var s in a)o.call(a,s)\u0026\u0026n.indexOf(s)\u003c0\u0026\u0026(t[s]=a[s]);if(a!=null\u0026\u0026p)for(var s of p(a))n.indexOf(s)\u003c0\u0026\u0026r.call(a,s)\u0026\u0026(t[s]=a[s]);return t};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var s=t,{components:a}=s,n=m(s,[\"components\"]);return mdx(MDXLayout,e(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"h1\",e({},{className:\"g-type-display-2\"}),mdx(\"a\",e({parentName:\"h1\"},{className:\"__permalink-h\",href:\"#secure-multi-tenancy-with-namespaces\",\"aria-label\":\"secure multi tenancy with namespaces permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h1\"},{className:\"__target-h\",id:\"secure-multi-tenancy-with-namespaces\",\"aria-hidden\":\"\"})),\"Secure Multi-Tenancy with Namespaces\"),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"Enterprise Only:\"),\" The namespaces feature is a part of \",mdx(\"em\",{parentName:\"p\"},\"Vault Enterprise Pro\"),\".\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Everything in Vault is path-based, and often uses the terms \",mdx(\"inlineCode\",{parentName:\"p\"},\"path\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"namespace\"),` interchangeably. The application namespace pattern is a useful\nconstruct for providing Vault as a service to internal customers, giving them\nthe ability to implement secure multi-tenancy within Vault in order to provide\nisolation and ensure teams can self-manage their own environments.`),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#reference-material\",\"aria-label\":\"reference material permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"reference-material\",\"aria-hidden\":\"\"})),\"Reference Material\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/docs/enterprise/namespaces\"}),\"Namespaces\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"https://youtu.be/zDnIqSB4tyA\"}),\"Streamline Secrets Management with Vault Agent and Vault 0.11\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/operations/reference-architecture\"}),\"Vault Deployment Reference Architecture\")),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"/guides/identity/policies\"}),\"Policies\"),\" guide\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#estimated-time-to-complete\",\"aria-label\":\"estimated time to complete permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"estimated-time-to-complete\",\"aria-hidden\":\"\"})),\"Estimated Time to Complete\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"10 minutes\"),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#personas\",\"aria-label\":\"personas permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"personas\",\"aria-hidden\":\"\"})),\"Personas\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"The scenario described in this guide introduces the following personas:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"operations\")),\" is the cluster-level administrator with privileged policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"org-admin\")),\" is the organization-level administrator\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"team-admin\")),\" is the team-level administrator\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#challenge\",\"aria-label\":\"challenge permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"challenge\",\"aria-hidden\":\"\"})),\"Challenge\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`When Vault is primarily used as a central location to manage secrets, multiple\norganizations within a company may need to be able to manage their secrets in a\nself-serving manner. This means that a company needs to implement a `,mdx(\"strong\",{parentName:\"p\"},mdx(\"em\",{parentName:\"strong\"},`Vault as\na Service`)),` model allowing each organization (tenant) to manage their own\nsecrets and policies. The most importantly, tenants should be restricted to work\nonly within their tenant scope.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant.png\",alt:\"Multi-Tenant\"}))),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#solution\",\"aria-label\":\"solution permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"solution\",\"aria-hidden\":\"\"})),\"Solution\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create a \",mdx(\"strong\",{parentName:\"p\"},\"namespace\"),` dedicated to each team, organization, or app where\nthey can perform all necessary tasks within their tenant namespace.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Each namespace can have its own:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Auth Methods\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Secret Engines\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Tokens\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Identity entities and groups\")),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),`Tokens are locked to a namespace or child-namespaces. Identity groups can\npull in entities and groups from `,mdx(\"em\",{parentName:\"p\"},\"other\"),\" namespaces.\")),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#prerequisites\",\"aria-label\":\"prerequisites permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"prerequisites\",\"aria-hidden\":\"\"})),\"Prerequisites\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To perform the tasks described in this guide, you need to have a \",mdx(\"strong\",{parentName:\"p\"},`Vault\nEnterprise`),\" environment.\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` The creation of namespaces should be performed by a user with a\nhighly privileged token such as `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"root\")),` to set up isolated environments for\neach organization, team, or application.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#steps\",\"aria-label\":\"steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"steps\",\"aria-hidden\":\"\"})),\"Steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Scenario:\"),` In this guide, you are going to create a namespace dedicated to\nthe Education organization which has Training and Certification teams. Delegate\noperational tasks to the team admins so that the Vault cluster operators won't\nhave to be involved.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-2.png\",alt:\"Scenario\"}))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In this guide, you are going to perform the following steps:\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step1\"}),\"Create namespaces\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step2\"}),\"Write policies\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step3\"}),\"Setup entities and groups\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step4\"}),\"Test the organization admin user\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step5\"}),\"Test the team admin user\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"a\",e({parentName:\"li\"},{href:\"#step6\"}),\"Audit ambient credentials\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step1\",\"aria-label\":\"step 1 create namespaces permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step1\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-1-create-namespaces\",\"aria-hidden\":\"\"})),\"Step 1: Create namespaces\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operations)\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To create a new namespace, run: \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault namespace create \u003cnamespace_name\u003e\"))),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create a namespace dedicated to the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\" organizations:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault namespace create education\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create child namespaces called \",mdx(\"inlineCode\",{parentName:\"p\"},\"training\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"certification\"),` under the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault namespace create -namespace=education training\",`\n`,`\n`,\"$ vault namespace create -namespace=education certification\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"List the created namespaces:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault namespace list\",`\n`,\"education/\",`\n`,`\n`,\"$ vault namespace list -namespace=education\",`\n`,\"certification/\",`\n`,\"training/\",`\n`)))),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To create a new namespace, invoke \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"sys/namespaces\")),\" endpoint:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Token: \u003cTOKEN\u003e\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       \u003cVAULT_ADDRESS\u003e/v1/sys/namespaces/\u003cNS_NAME\u003e\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Where \",mdx(\"inlineCode\",{parentName:\"p\"},\"\u003cTOKEN\u003e\"),\" is your valid token, and \",mdx(\"inlineCode\",{parentName:\"p\"},\"\u003cNS_NAME\u003e\"),` is the desired namespace\nname.`),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create a namespace for the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\" organization:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'$ curl --header \"X-Vault-Token: ...\" \\\\',`\n`,\"       --request POST \\\\\",`\n`,\"       http://127.0.0.1:8200/v1/sys/namespaces/education\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Now, create a child namespace called \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"certification\")),`\nunder `,mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),`. To do so, pass the top-level namespace name in the\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"X-Vault-Namespace\")),\" header.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a training namespace under education\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# NOTE: Top-level namespace is in the API endpoint\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        http://127.0.0.1:8200/v1/education/sys/namespaces/training\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a certification namespace under education\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# NOTE: Pass the top-level namespace in the header\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        http://127.0.0.1:8200/v1/sys/namespaces/certification\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"List the created namespaces:\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'$ curl --header \"X-Vault-Token: ...\" \\\\',`\n`,\"       --request LIST\",`\n`,\"       http://127.0.0.1:8200/v1/sys/namespaces | jq\",`\n`,\"{\",`\n`,\"   ...\",`\n`,'   \"data\": {',`\n`,'     \"keys\": [',`\n`,'       \"education/\"',`\n`,\"     ]\",`\n`,\"   },\",`\n`,\"   ...\",`\n`)),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'$ curl --header \"X-Vault-Token: ...\" \\\\',`\n`,\" --request LIST\",`\n`,\"       http://127.0.0.1:8200/v1/education/sys/namespaces | jq\",`\n`,\" {\",`\n`,\"   ...\",`\n`,'   \"data\": {',`\n`,'     \"keys\": [',`\n`,'       \"certification/\",',`\n`,'       \"training/\"',`\n`,\"     ]\",`\n`,\"   },\",`\n`,\"   ...\",`\n`,\"...\",`\n`)))),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.01:8200/ui\"}),\"http://127.0.01:8200/ui\"),`)\nand then login.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`To create child namespaces, select the down-arrow on the upper left corner of\nthe UI, and select `,mdx(\"strong\",{parentName:\"p\"},\"education\"),\" under \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\".\"),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{}),\"![NS Selection](/img/vault-multi-tenant-1.png)\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Under the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\" again, and then enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"certification\")),` in\nthe `,mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step2\",\"aria-label\":\"step 2 write policies permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step2\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-2-write-policies\",\"aria-hidden\":\"\"})),\"Step 2: Write Policies\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operations)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`In this scenario, there is an organization-level administrator who is a\nsuperuser within the scope of the `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),` namespace. Also, there is a\nteam-level administrator for `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"certification\")),\".\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#policy-for-education-admin\",\"aria-label\":\"policy for education admin permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"policy-for-education-admin\",\"aria-hidden\":\"\"})),\"Policy for education admin\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Requirements:\")),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage namespaces\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Enable and manage secret engines\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage entities and groups\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Manage tokens\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin.hcl\"))),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage namespaces\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/namespaces/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via API\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable and manage secrets engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List available secret engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create and manage entities and groups\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"identity/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage tokens\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#policy-for-training-admin\",\"aria-label\":\"policy for training admin permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"policy-for-training-admin\",\"aria-hidden\":\"\"})),\"Policy for training admin\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},\"Requirements:\")),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage child-namespaces\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Create and manage policies\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Enable and manage secret engines\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin.hcl\"))),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage namespaces\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/namespaces/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via API\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/policy\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable and manage secrets engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# List available secret engines\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sys/mounts\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  capabilities \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Now, let's deploy the policies!\"),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"Also, refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"#policy-with-namespaces\"}),\"Additional Discussion\"),` section\nto learn more about policy authoring with namespaces.`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-1\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-1\",\"aria-hidden\":\"\"})),\"CLI command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To target a specific namespace, you can do one of the following:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Set \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"VAULT_NAMESPACE\")),` so that all subsequent CLI commands will be\nexecuted against that particular namespace`),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ export VAULT_NAMESPACE=\u003cnamespace_name\u003e\",`\n`,\"$ vault policy write \u003cpolicy_name\u003e \u003cpolicy_file\u003e\",`\n`))),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Specify the target namespace with \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"-namespace\")),\" flag\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault policy write -namespace=\u003cnamespace_name\u003e \u003cpolicy_name\u003e \u003cpolicy_file\u003e\",`\n`)))),mdx(\"p\",e({},{className:\"g-type-long-body\"}),'Since you have to deploy policies onto \"',mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),'\" and \"',mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),`\"\nnamespaces, use \"`,mdx(\"inlineCode\",{parentName:\"p\"},\"-namespace\"),'\" flag instead of environment variable.'),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin\")),\" policies.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create edu-admin policy under 'education' namespace\"),`\n`,\"$ vault policy \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education edu-admin edu-admin.hcl\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create training-admin policy under 'education/training' namespace\"),`\n`,\"$ vault policy \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training training-admin training-admin.hcl\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-1\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-1\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To target a specific namespace, you can do one of the following:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Pass the target namespace in the \",mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"X-Vault-Namespace\")),\" header\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Prepend the API endpoint with namespace name (e.g.\n`,mdx(\"strong\",{parentName:\"li\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"\u003cnamespace_name\u003e\")),mdx(\"inlineCode\",{parentName:\"li\"},\"/sys/policies/acl\"),\")\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Create \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin\")),\" policies.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" edu-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\u003c\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'  \"policy\": \"path ',mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sys/namespaces/education/*\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\" {\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),\"  capabilities = [\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"create\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"read\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"update\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"delete\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"list\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sudo\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"]\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),' } ... \"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create edu-admin policy under 'education' namespace\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request PUT \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @edu-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/sys/policies/acl/edu-admin\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a request payload\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"tee\"),\" training-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003c\u003c\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),' \"policy\": \"path ',mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sys/namespaces/education/training/*\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\" {\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),\"  capabilities = [\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"create\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"read\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"update\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"delete\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"list\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\", \",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"sudo\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:'\\\\\"'}),'\\\\\"'),\"]\",mdx(\"span\",e({parentName:\"span\"},{className:\"token entity\",title:\"\\\\n\"}),\"\\\\n\"),'  }  ... \"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"}\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),\"EOF\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create training-admin policy under 'education/training' namespace\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# This example directs the target namespace in the API endpoint\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: ...\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request PUT \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data @training-payload.json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       https://127.0.0.1:8200/v1/education/training/sys/policies/acl/training-admin\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-1\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-1\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the Web UI, make sure that the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),` is set to\n`,mdx(\"strong\",{parentName:\"p\"},\"education\"),\" in the upper left menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" tab, and then select \",mdx(\"strong\",{parentName:\"p\"},\"Create ACL policy\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Toggle \",mdx(\"strong\",{parentName:\"p\"},\"Upload file\"),\" sliding switch, and click \",mdx(\"strong\",{parentName:\"p\"},\"Choose a file\"),` to select your\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin.hcl\")),` file you authored. This loads the policy and sets the\n`,mdx(\"strong\",{parentName:\"p\"},\"Name\"),\" to be \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create Policy\"),\" to complete.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Set the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\" to be \",mdx(\"strong\",{parentName:\"p\"},\"education/training\"),` in the upper left\nmenu.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-6.png\",alt:\"Namespace\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the \",mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Create ACL policy\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Toggle \",mdx(\"strong\",{parentName:\"p\"},\"Upload file\"),\", and click \",mdx(\"strong\",{parentName:\"p\"},\"Choose a file\"),` to select your\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin.hcl\")),\" file you authored.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create Policy\"),\".\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step3\",\"aria-label\":\"step 3 setup entities and groups permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step3\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-3-setup-entities-and-groups\",\"aria-hidden\":\"\"})),\"Step 3: Setup entities and groups\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operations)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Bob who is an organization-level administrator (superuser) has two accounts:\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\". You will create an entity, \",mdx(\"strong\",{parentName:\"p\"},\"Bob Smith\"),` to\nassociate those two accounts.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Also, you are going to create a group for the team-level administrator, \",mdx(\"strong\",{parentName:\"p\"},`Team\nAdmin`),`, and add Bob Smith entity as a group member so that Bob can inherit the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy to manage the child namespace if he ever has to take\nover.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-3.png\",alt:\"Entities and Groups\"}))),mdx(\"div\",e({},{className:\"alert alert-info g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),`This step only demonstrates CLI commands and Web UI to create\nentities and groups. Refer to the `,mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/identity\"}),`Identity - Entities and\nGroups`),` guide if you need the full details.\nAlso, read the `,mdx(\"a\",e({parentName:\"p\"},{href:\"#additional-discussion\"}),\"Additional Discussion\"),` section for\nan example of setting up external groups.`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-2\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-2\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# First, you need to enable userpass auth method\"),`\n`,\"$ vault auth \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education userpass\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a user 'bob'\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        auth/userpass/users/bob \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"password\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create an entity for Bob Smith with 'edu-admin' policy attached\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Save the generated entity ID in entity_id.txt file\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json identity/entity \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Bob Smith\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"policies\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"edu-admin\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\".data.id\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" entity_id.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Get the mount accessor for userpass auth method and save it in accessor.txt file\"),`\n`,\"$ vault auth list -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'.[\"userpass/\"].accessor'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" accessor.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create an entity alias for Bob Smith to attach 'bob'\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education identity/entity-alias \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"bob\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"canonical_id\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" entity_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"mount_accessor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" accessor.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),'# Create a group, \"Training Admin\" in education/training namespace'),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training identity/group \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"Training Admin\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"policies\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training-admin\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"member_entity_ids\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" entity_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable userpass auth method in training namespace\"),`\n`,\"$ vault auth \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training userpass\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a user 'bsmith'\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        auth/userpass/users/bsmith \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"password\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Get the mount accessor for userpass auth method and save it in accessor2.txt file\"),`\n`,\"$ vault auth list -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education/training -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'.[\"userpass/\"].accessor'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" accessor2.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Add 'bsmith' to Bob Smith entity as its alias\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -namespace\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"education identity/entity-alias \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"bsmith\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"canonical_id\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" entity_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"mount_accessor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" accessor2.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-2\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-2\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the Web UI, make sure that the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),` is set to\n`,mdx(\"strong\",{parentName:\"p\"},\"education\"),\" in the upper left menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, and select \",mdx(\"strong\",{parentName:\"p\"},\"Enable new method\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Username \u0026 Password\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Type\"),\" drop-down menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Method\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the Vault CLI shell icon (\",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"\u003e_\")),`) to open a command shell. Enter the\nfollowing command to create a new user, `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\".\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'vault write auth/userpass/users/bob password=\"password\"',`\n`)),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-4.png\",alt:\"Create Policy\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the icon (\",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"\u003e_\")),\") again to hide the shell.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"From the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Entities\"),\" and then \",mdx(\"strong\",{parentName:\"p\"},\"Create entity\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"Bob Smith\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),\" field, and \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-admin\")),` in the\n`,mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Add alias\"),\". Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),` field and select\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"userpass/ (userpass)\")),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Auth Backend\"),\" drop-down list.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Create\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab and select \",mdx(\"strong\",{parentName:\"p\"},\"Entities\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob-smith\")),\" entity and copy its \",mdx(\"strong\",{parentName:\"p\"},\"ID\"),` displayed under the\n`,mdx(\"strong\",{parentName:\"p\"},\"Details\"),\" tab.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Now, set the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\" to \",mdx(\"strong\",{parentName:\"p\"},\"education/training\"),`.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-6.png\",alt:\"Namespace\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, select \",mdx(\"strong\",{parentName:\"p\"},\"Groups\"),\", and select \",mdx(\"strong\",{parentName:\"p\"},\"Create group\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Paste in the entity ID in the \",mdx(\"strong\",{parentName:\"p\"},\"Member Entity IDs\"),\" field you copied.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"Training Admin\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Name\"),\" field, \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"training-admin\")),` in the\n`,mdx(\"strong\",{parentName:\"p\"},\"Policies\"),\" field, and click \",mdx(\"strong\",{parentName:\"p\"},\"Create\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\" tab, and select \",mdx(\"strong\",{parentName:\"p\"},\"Enable new method\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Username \u0026 Password\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Type\"),\" drop-down menu.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Method\"),`. Copy the mount accessor value which you will user later.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-8.png\",alt:\"Namespace\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click the Vault CLI shell icon (\",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"\u003e_\")),`) to open a command shell. Enter the\nfollowing command to create a new user, `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\".\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'vault write auth/userpass/users/bsmith password=\"password\"',`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Set the \",mdx(\"strong\",{parentName:\"p\"},\"CURRENT NAMESPACE\"),\" back to \",mdx(\"strong\",{parentName:\"p\"},\"education\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`In the command shell, enter the following command. Be sure to replace the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"\u003cBob_Smith_entity_id\u003e\"),` with the value you copied at step 13, and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"\u003cmount_accessor\u003e\"),\" with the value you copied at step 20.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),'vault write identity/entity-alias name=\"bsmith\" \\\\',`\n`,\"        canonical_id=\u003cBob_Smith_entity_id\u003e mount_accessor=\u003cmount_accessor\u003e\",`\n`)))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step4\",\"aria-label\":\"step 4 test the organization admin user permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step4\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-4-test-the-organization-admin-user\",\"aria-hidden\":\"\"})),\"Step 4: Test the organization admin user\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" org-admin)\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-3\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-3\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault login -namespace\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"education -method\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"userpass \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"username\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"bob\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"password\"'))),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                    Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                    -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token                  5ai0qpQeCdRHALzEY4Q8sW.28dk2\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_accessor         9xXQmdx6Aq6zw1KX4gpzb.28dk2\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_duration         768h\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_renewable        true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'token_policies         [\"default\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'identity_policies      [\"edu-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'policies               [\"default\" \"edu-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_meta_username    bob\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),\" only has \",mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),` policy attached to his token\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"token_policies\"),\"); however, he inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\" policy from the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),\" entity (\",mdx(\"inlineCode\",{parentName:\"p\"},\"identity_policies\"),\").\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Test to make sure that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),` can create a namespace, enable secrets engine, and\nwhatever else that you want to verify.`),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Set the target namespace as an env variable\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"export\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"VAULT_NAMESPACE\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'web-app'\"),`\n`,\"$ vault namespace create web-app\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Namespace created at: education/web-app/\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v2 secrets engine at edu-secret\"),`\n`,\"$ vault secrets \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -path\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"edu-secret kv-v2\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Enabled the kv-v2 secrets engine at: edu-secret/\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Optionally, you can create new policies to test that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),` can perform the\noperations as expected. When you are done testing, unset the VAULT_NAMESPACE\nenvironment variable.`),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"unset\"),\" VAULT_NAMESPACE\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-2\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-2\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Namespace: education\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"password\": \"password\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/userpass/login/bob | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"auth\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"client_token\": \"5ai0qpQeCdRHALzEY4Q8sW.28dk2\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"accessor\": \"9xXQmdx6Aq6zw1KX4gpzb.28dk2\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"edu-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"token_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"identity_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"edu-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"external_namespace_policies\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"9dKXw\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'          \"training-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"        ]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"metadata\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'       \"username\": \"bob\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),\" only has \",mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),` policy attached to his token\n(`,mdx(\"inlineCode\",{parentName:\"p\"},\"token_policies\"),\"); however, he inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\" policy from the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),\" entity (\",mdx(\"inlineCode\",{parentName:\"p\"},\"identity_policies\"),\"). Also, \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy is listed\nunder `,mdx(\"inlineCode\",{parentName:\"p\"},\"external_namespace_policies\"),` due to its membership to the Training Admin\ngroup in `,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),\" namespace.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Verify that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bob\"),\" can perform the operations permitted by the \",mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),`\npolicy.`),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'web-app'\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Be sure to use generated bob's client token\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/sys/namespaces/web-app\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v2 secrets engine at edu-secret\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5ai0qpQeCdRHALzEY4Q8sW.28dk2\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"type\": \"kv-v2\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/sys/mounts/edu-secret\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-3\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-3\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.01:8200/ui\"}),\"http://127.0.01:8200/ui\"),`). If\nyou are already logged in, sign out.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"At the \",mdx(\"strong\",{parentName:\"p\"},\"Sign in to Vault\"),\", set the \",mdx(\"strong\",{parentName:\"p\"},\"Namespace\"),\" to \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},\"Userpass\"),\" tab, and enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bob\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Username\"),` field,\nand `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"password\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Password\"),` field.\n`,mdx(\"img\",e({parentName:\"p\"},{src:\"/img/vault-multi-tenant-5.png\",alt:\"Login\"})))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Sign in\"),\". Notice that the CURRENT NAMESPACE is set to \",mdx(\"strong\",{parentName:\"p\"},\"education\"),`\nin the upper left corner of the UI.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"To add a new namespace, select \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"web-app\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and then click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Secrets\"),\", and then \",mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"KV\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Secrets engine type\"),` drop-down list, and enter\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"edu-secret\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\" to finish.\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step5\",\"aria-label\":\"step 5 test the team admin user permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step5\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-5-test-the-team-admin-user\",\"aria-hidden\":\"\"})),\"Step 5: Test the team admin user\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" team-admin)\"),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#cli-command-4\",\"aria-label\":\"cli command permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"cli-command-4\",\"aria-hidden\":\"\"})),\"CLI Command\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\" into the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education/training\")),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),\"vault login -namespace\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"education/training -method\",mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),\"userpass \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"username\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"bsmith\"'),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token assign-left variable\"}),\"password\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"password\"'))),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"Key                    Value\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"---                    -----\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token                  5YNNjDDl6D8iW3eGQIlU0q.9dKXw\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_accessor         6TVkDhdvEQXO2JaD64TVLv.9dKXw\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_duration         768h\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_renewable        true\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'token_policies         [\"default\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'identity_policies      [\"training-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'policies               [\"default\" \"training-admin\"]'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"token_meta_username    bsmith\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),\" inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy from the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"Training Admin\"),\" group (\",mdx(\"inlineCode\",{parentName:\"p\"},\"training_admin\"),\") which \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),` entity is a member\nof.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Verify that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),` can perform the operations permitted by the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),\" policy.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Set the target namespace as an env variable\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"export\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"VAULT_NAMESPACE\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/training\"'),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'vault-training'\"),`\n`,\"$ vault namespace create vault-training\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Namespace created at: education/training/vault-training/\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v1 secrets engine at team-secret\"),`\n`,\"$ vault secrets \",mdx(\"span\",e({parentName:\"code\"},{className:\"token builtin class-name\"}),\"enable\"),\" -path\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"team-secret -version\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token number\"}),\"1\"),\" kv\",`\n`,\"Success\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"!\"),\" Enabled the kv secrets engine at: team-secret/\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"When you are done testing, unset the VAULT_NAMESPACE environment variable.\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token builtin class-name\"}),\"unset\"),\" VAULT_NAMESPACE\")),`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#api-call-using-curl-3\",\"aria-label\":\"api call using curl permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"api-call-using-curl-3\",\"aria-hidden\":\"\"})),\"API call using cURL\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Log in as \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\" into the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),\" namespace:\"),mdx(\"pre\",e({},{className:\"language-shell-session\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell-session\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token command\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token shell-symbol important\"}),\"$\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"token bash language-bash\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"span\"},{className:\"token string\"}),'\"X-Vault-Namespace: education/training\"'),\" \")),mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"\\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       --request POST \\\\\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),`       --data '{\"password\": \"password\"}' \\\\`),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"       http://127.0.0.1:8200/v1/auth/userpass/login/bsmith | jq\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"{\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'   \"auth\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'     \"client_token\": \"5YNNjDDl6D8iW3eGQIlU0q.9dKXw\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"accessor\": \"6TVkDhdvEQXO2JaD64TVLv.9dKXw\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"display_name\": \"education-training-auth-userpass-bsmith\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\",'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"training-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"token_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"default\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"identity_policies\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"training-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      ],\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"external_namespace_policies\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"28dk2\": ['),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'          \"edu-admin\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"        ]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'      \"metadata\": {'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),'        \"username\": \"bsmith\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"      },\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"     ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"   }\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token output\"}),\"}\"),`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Notice that the user, \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),\" inherited the \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy from the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"Training Admin\"),\" group which \",mdx(\"inlineCode\",{parentName:\"p\"},\"Bob Smith\"),` entity is a member of. Also,\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"edu-admin\"),\" policy is listed under \",mdx(\"inlineCode\",{parentName:\"p\"},\"external_namespace_policies\"),\".\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Verify that \",mdx(\"inlineCode\",{parentName:\"p\"},\"bsmith\"),` can perform the operations permitted by the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),\" policy.\"),mdx(\"pre\",e({},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create a new namespace called 'vault-training'\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Be sure to use generated bsmith's client token\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/training/sys/namespaces/web-app\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Enable key/value v1 secrets engine at team-secret\"),`\n`,\"$ \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"curl\"),\" --header \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"X-Vault-Token: 5YNNjDDl6D8iW3eGQIlU0q.9dKXw\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --request POST \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       --data \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'{\"type\": \"kv\"}'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"       http://127.0.0.1:8200/v1/education/training/sys/mounts/edu-secret\",`\n`)),mdx(\"h4\",e({},{className:\"g-type-display-5\"}),mdx(\"a\",e({parentName:\"h4\"},{className:\"__permalink-h\",href:\"#web-ui-4\",\"aria-label\":\"web ui permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h4\"},{className:\"__target-h\",id:\"web-ui-4\",\"aria-hidden\":\"\"})),\"Web UI\"),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Open a web browser and launch the Vault UI (e.g. \",mdx(\"a\",e({parentName:\"p\"},{href:\"http://127.0.01:8200/ui\"}),\"http://127.0.01:8200/ui\"),`). If\nyou are already logged in, sign out.`)),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"At the \",mdx(\"strong\",{parentName:\"p\"},\"Sign in to Vault\"),\", set the \",mdx(\"strong\",{parentName:\"p\"},\"Namespace\"),` to\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education/training\")),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select the \",mdx(\"strong\",{parentName:\"p\"},\"Userpass\"),\" tab, and enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"bsmith\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Username\"),`\nfield, and `,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"password\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Password\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Sign in\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"To add a new namespace, select \",mdx(\"strong\",{parentName:\"p\"},\"Access\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Namespaces\"),\" and then click \",mdx(\"strong\",{parentName:\"p\"},\"Create a namespace\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Enter \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"vault-training\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field, and then click \",mdx(\"strong\",{parentName:\"p\"},\"Save\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"Secrets\"),\", and then \",mdx(\"strong\",{parentName:\"p\"},\"Enable new engine\"),\".\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Select \",mdx(\"strong\",{parentName:\"p\"},\"KV\"),\" from the \",mdx(\"strong\",{parentName:\"p\"},\"Secrets engine type\"),` drop-down list, and enter\n`,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"team-secret\")),\" in the \",mdx(\"strong\",{parentName:\"p\"},\"Path\"),\" field.\")),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Click \",mdx(\"strong\",{parentName:\"p\"},\"Enable Engine\"),\" to finish.\"))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#step6\",\"aria-label\":\"step 6 audit ambient credentials permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h __compat\",id:\"step6\",\"aria-hidden\":\"\"})),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"step-6-audit-ambient-credentials\",\"aria-hidden\":\"\"})),\"Step 6: Audit ambient credentials\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"(\",mdx(\"strong\",{parentName:\"p\"},\"Persona:\"),\" operator)\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Many auth and secrets providers, such as AWS, Azure, GCP, and AliCloud, use ambient\ncredentials to authenticate API calls. For example, AWS may:`),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"Use an access key and secret key configured in Vault.\"),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),'If not present, check for environment variables such as \"AWS_ACCESS_KEY_ID\" and \"AWS_SECRET_ACCESS_KEY\".'),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),'If not present, load credentials configured in \"~/.aws/credentials\".'),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),\"If not present, use instance metadata.\")),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`This becomes a problem if these ambient credentials are not intended to be used within\na particular namespace.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`For example, suppose that your Vault server is running on an\nAWS EC2 instance. You give the owner of a namespace a particular set of permissions to\nuse for AWS. However, that owner `,mdx(\"em\",{parentName:\"p\"},\"does not\"),` configure them. So, Vault falls back to using\nthe credentials available in instance metadata, leading to a privilege escalation.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"To handle this:\"),mdx(\"ul\",null,mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),\"Ensure no environment variables are available that could grant a privilege escalation.\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Ensure that any privileges granted through instance metadata (in this example) or other\nambient identity info represent a `,mdx(\"em\",{parentName:\"li\"},\"loss\"),\" of privilege.\"),mdx(\"li\",e({parentName:\"ul\"},{className:\"g-type-long-body\"}),`Directly configure the correct credentials in namespaces, and restrict access to that\nendpoint so credentials can't later be edited to use ambient credentials.`)),mdx(\"br\",null),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"Summary:\"),` As this guide demonstrated, each namespace you created behaves\nas an `,mdx(\"strong\",{parentName:\"p\"},\"isolated\"),` Vault environment. Once you sign into a namespace, there is\nno visibility into other namespaces regardless of its hierarchical relationship.\nTokens, policies, and secrets engines are tied to its namespace; therefore, each\nclient must acquire a valid token for each namespace to access their secrets.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#additional-discussion\",\"aria-label\":\"additional discussion permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"additional-discussion\",\"aria-hidden\":\"\"})),\"Additional Discussion\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"For the simplicity, this guide used the username and password (\",mdx(\"inlineCode\",{parentName:\"p\"},\"userpass\"),`) auth\nmethod which was enabled in the education namespace. However, most likely, your\norganization uses LDAP auth method which is enabled in the `,mdx(\"strong\",{parentName:\"p\"},\"root\"),` namespace\ninstead.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),`Here are the steps to create the \"Training Admin\" group as described in this\nguide using the LDAP auth method enabled in the root namespace.`),mdx(\"ol\",null,mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),`Enable and configure the desired auth method (e.g. LDAP) in the root\nnamespace.`),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault auth enable ldap\",`\n`,`\n`,\"$ vault write auth/ldap/config \\\\\",`\n`,'        url=\"ldap://ldap.example.com\" \\\\',`\n`,'        userdn=\"ou=Users,dc=example,dc=com\" \\\\',`\n`,'        groupdn=\"ou=Groups,dc=example,dc=com\" \\\\',`\n`,'        groupfilter=\"(\u0026(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))\" \\\\',`\n`,'        groupattr=\"cn\" \\\\',`\n`,'        upndomain=\"example.com\" \\\\',`\n`,\"        certificate=@ldap_ca_cert.pem \\\\\",`\n`,\"        insecure_tls=false \\\\\",`\n`,\"        starttls=true\",`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Create an \",mdx(\"em\",{parentName:\"p\"},\"external\"),\" group in the root namespace.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-shell\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Get the mount accessor for ldap auth method and save it in accessor.txt file\"),`\n`,\"$ vault auth list -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),`'.[\"ldap/\"].accessor'`),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" accessor.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Create an external group and save the generated group ID in group_id.txt\"),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json identity/group \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training_admin_root\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"type\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"external\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"|\"),\" jq -r \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\".data.id\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"\u003e\"),\" group_id.txt\",`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),'# Create a group alias - assuming that the group name in LDAP is \"ops_training\"'),`\n`,\"$ vault \",mdx(\"span\",e({parentName:\"code\"},{className:\"token function\"}),\"write\"),\" -format\",mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"json identity/group-alias \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"name\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"ops_training\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"mount_accessor\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" accessor.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"\\\\\"),`\n`,\"        \",mdx(\"span\",e({parentName:\"code\"},{className:\"token assign-left variable\"}),\"canonical_id\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token variable\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\"$(\"),mdx(\"span\",e({parentName:\"span\"},{className:\"token function\"}),\"cat\"),\" group_id.txt\",mdx(\"span\",e({parentName:\"span\"},{className:\"token variable\"}),\")\")),`\n`))),mdx(\"li\",e({parentName:\"ol\"},{className:\"g-type-long-body\"}),mdx(\"p\",e({parentName:\"li\"},{className:\"g-type-long-body\"}),\"In the \",mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),\" namespace, create an \",mdx(\"em\",{parentName:\"p\"},\"internal\"),` group which has\nthe external group (`,mdx(\"inlineCode\",{parentName:\"p\"},\"training_admin_root\"),\") as its member.\"),mdx(\"pre\",e({parentName:\"li\"},{className:\"language-plaintext\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-plaintext\"}),\"$ vault write -namespace=education/training identity/group \\\\\",`\n`,'        name=\"Training Admin\" \\\\',`\n`,'        policies=\"training-admin\" \\\\',`\n`,\"        member_group_ids=$(cat group_id.txt)\",`\n`)))),mdx(\"h3\",e({},{className:\"g-type-display-4\"}),mdx(\"a\",e({parentName:\"h3\"},{className:\"__permalink-h\",href:\"#policy-with-namespaces\",\"aria-label\":\"policy with namespaces permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h3\"},{className:\"__target-h\",id:\"policy-with-namespaces\",\"aria-hidden\":\"\"})),\"Policy with namespaces\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In this guide, you created policies in each namespace (\",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),`). Therefore, you did not have to specify the target\nnamespace in the policy paths.`),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"If you want to create policies in the root namespace to control \",mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),\" namespaces, prepend the namespace in the paths.\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"For example:\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies in the 'education' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage tokens in the 'education' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies under 'education/training' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/training/sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage tokens in the 'education/training' namespace\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"education/training/auth/token/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"...\",`\n`)),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"In \",mdx(\"a\",e({parentName:\"p\"},{href:\"#step2\"}),\"Step 2\"),\", you deployed the \",mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),` policy in the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),` namespace. The path is relative to the working namespace.\nSo, if you want to create the `,mdx(\"inlineCode\",{parentName:\"p\"},\"training-admin\"),\" policy in the \",mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"education\")),`\nnamespace instead, the paths starts with `,mdx(\"inlineCode\",{parentName:\"p\"},\"training/\"),` rather than\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training/\"),\".\"),mdx(\"pre\",e({},{className:\"language-hcl\"}),mdx(\"code\",e({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage namespaces\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training/sys/namespaces/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via API\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training/sys/policies/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"   \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token comment\"}),\"# Manage policies via CLI\"),`\n`,\"path \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"training/sys/policy/*\"'),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",e({parentName:\"code\"},{className:\"token property\"}),\"capabilities\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"create\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"read\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"update\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"delete\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"list\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"token string\"}),'\"sudo\"'),mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"...\",`\n`)),mdx(\"div\",e({},{className:\"alert alert-warning g-type-body\",role:\"alert\"}),mdx(\"p\",e({parentName:\"div\"},{className:\"g-type-long-body\"}),\"\",mdx(\"strong\",{parentName:\"p\"},\"NOTE:\"),` Important to remember that tokens are local to the namespace.\nTherefore, you need a valid token for the namespace you want to operate in. The\ntoken created in the `,mdx(\"inlineCode\",{parentName:\"p\"},\"education\"),` namespace is not valid in the\n`,mdx(\"inlineCode\",{parentName:\"p\"},\"education/training\"),` namespace. This is so that each namespace is completely\nisolated from one another to ensure a secure multi-tenant environment.`)),mdx(\"h2\",e({},{className:\"g-type-display-3\"}),mdx(\"a\",e({parentName:\"h2\"},{className:\"__permalink-h\",href:\"#next-steps\",\"aria-label\":\"next steps permalink\"}),\"\\xBB\"),mdx(\"a\",e({parentName:\"h2\"},{className:\"__target-h\",id:\"next-steps\",\"aria-hidden\":\"\"})),\"Next steps\"),mdx(\"p\",e({},{className:\"g-type-long-body\"}),\"Refer to the \",mdx(\"a\",e({parentName:\"p\"},{href:\"/guides/identity/sentinel\"}),\"Sentinel Policies\"),` guide if you\nneed to write policies that allow you to embed finer control over the user\naccess across those namespaces.`))}MDXContent.isMDXComponent=!0;\n","scope":{}},"navData":[{"title":"Getting Started","path":"getting-started","filePath":"content/guides/getting-started.mdx"},{"title":"Vault Operations","routes":[{"title":"Overview","path":"operations","filePath":"content/guides/operations/index.mdx"},{"title":"Reference Architecture","path":"operations/reference-architecture","filePath":"content/guides/operations/reference-architecture.mdx"},{"title":"Vault HA with Consul","path":"operations/vault-ha-consul","filePath":"content/guides/operations/vault-ha-consul.mdx"},{"title":"Production Hardening","path":"operations/production","filePath":"content/guides/operations/production.mdx"},{"title":"Root Token Generation","path":"operations/generate-root","filePath":"content/guides/operations/generate-root.mdx"},{"title":"Rekeying \u0026 Rotating","path":"operations/rekeying-and-rotating","filePath":"content/guides/operations/rekeying-and-rotating.mdx"},{"title":"Building Plugin Backends","path":"operations/plugin-backends","filePath":"content/guides/operations/plugin-backends.mdx"},{"divider":true},{"title":"Replication Setup \u0026 Guidance","path":"operations/replication","filePath":"content/guides/operations/replication.mdx"},{"title":"Disaster Recovery Setup","path":"operations/disaster-recovery","filePath":"content/guides/operations/disaster-recovery.mdx"},{"title":"Mount Filter","path":"operations/mount-filter","filePath":"content/guides/operations/mount-filter.mdx"},{"title":"Multi-Tenant: Namespaces","path":"operations/multi-tenant","filePath":"content/guides/operations/multi-tenant.mdx"},{"title":"Vault Auto-unseal with AWS KMS","path":"operations/autounseal-aws-kms","filePath":"content/guides/operations/autounseal-aws-kms.mdx"},{"title":"Seal Wrap / FIPS 140-2","path":"operations/seal-wrap","filePath":"content/guides/operations/seal-wrap.mdx"},{"title":"Vault Cluster Monitoring","path":"operations/monitoring","filePath":"content/guides/operations/monitoring.mdx"},{"title":"Vault Deployment Guide","path":"operations/deployment-guide","filePath":"content/guides/operations/deployment-guide.mdx"},{"title":"Performance Standby Nodes","path":"operations/performance-nodes","filePath":"content/guides/operations/performance-nodes.mdx"}]},{"title":"Identity and Access Management","routes":[{"title":"Overview","path":"identity","filePath":"content/guides/identity/index.mdx"},{"title":"Secure Introduction of Vault Clients","path":"identity/secure-intro","filePath":"content/guides/identity/secure-intro.mdx"},{"title":"Policies","path":"identity/policies","filePath":"content/guides/identity/policies.mdx"},{"title":"ACL Policy Path Templating","path":"identity/policy-templating","filePath":"content/guides/identity/policy-templating.mdx"},{"title":"AppRole Pull Authentication","path":"identity/authentication","filePath":"content/guides/identity/authentication.mdx"},{"title":"AppRole with Terraform and Chef","path":"identity/approle-trusted-entities","filePath":"content/guides/identity/approle-trusted-entities.mdx"},{"title":"Tokens and Leases","path":"identity/lease","filePath":"content/guides/identity/lease.mdx"},{"title":"Identity - Entities \u0026 Groups","path":"identity/identity","filePath":"content/guides/identity/identity.mdx"},{"divider":true},{"title":"Sentinel Policies","path":"identity/sentinel","filePath":"content/guides/identity/sentinel.mdx"},{"title":"Control Groups","path":"identity/control-groups","filePath":"content/guides/identity/control-groups.mdx"}]},{"title":"Secrets Management","routes":[{"title":"Overview","path":"secret-mgmt","filePath":"content/guides/secret-mgmt/index.mdx"},{"title":"Static Secrets","path":"secret-mgmt/static-secrets","filePath":"content/guides/secret-mgmt/static-secrets.mdx"},{"title":"Versioned KV Secret Engine","path":"secret-mgmt/versioned-kv","filePath":"content/guides/secret-mgmt/versioned-kv.mdx"},{"title":"Secret as a Service","path":"secret-mgmt/dynamic-secrets","filePath":"content/guides/secret-mgmt/dynamic-secrets.mdx"},{"title":"DB Root Credential Rotation","path":"secret-mgmt/db-root-rotation","filePath":"content/guides/secret-mgmt/db-root-rotation.mdx"},{"title":"Cubbyhole Response Wrapping","path":"secret-mgmt/cubbyhole","filePath":"content/guides/secret-mgmt/cubbyhole.mdx"},{"title":"One-Time SSH Password","path":"secret-mgmt/ssh-otp","filePath":"content/guides/secret-mgmt/ssh-otp.mdx"},{"title":"Build Your Own CA","path":"secret-mgmt/pki-engine","filePath":"content/guides/secret-mgmt/pki-engine.mdx"},{"title":"Direct Application Integration","path":"secret-mgmt/app-integration","filePath":"content/guides/secret-mgmt/app-integration.mdx"}]},{"title":"Encryption as a Service","routes":[{"title":"Overview","path":"encryption","filePath":"content/guides/encryption/index.mdx"},{"title":"Encryption as a Service","path":"encryption/transit","filePath":"content/guides/encryption/transit.mdx"},{"title":"Java Application Demo","path":"encryption/spring-demo","filePath":"content/guides/encryption/spring-demo.mdx"},{"title":"Transit Secrets Re-wrapping","path":"encryption/transit-rewrap","filePath":"content/guides/encryption/transit-rewrap.mdx"}]}],"versions":[]},"__N_SSG":true},"page":"/guides/[[...page]]","query":{"page":["operations","multi-tenant"]},"buildId":"pcCu12fyWK7PoQNj4BZ7-","assetPrefix":"/docs/vault_v1.8.x","isFallback":false,"gsp":true}</script><script nomodule="" src="/docs/vault_v1.8.x/_next/static/chunks/polyfills-e4c38ea28892f36667af.js"></script><script src="/docs/vault_v1.8.x/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/framework.3519294afa6a9ab53973.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/2bc72d9a08d5bd816ae6b580871df9fb671d43bb.52fd5ef7a8ab7d8fc0dd.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/9a5be27b89b50ff891e514a88cd42f143404f9a6.033857d62f5a01edf3b3.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/main-b0f1f3f8bd3bddd4e6cd.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/b49b08e2da573413c730dfc51ae423f080a0c275.00ac32ee45240d5b343f.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/b1542cc239bf56c8a14913c0a930efe682b5cf86.32bb900ad80311488529.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/pages/_app-d714c55ad24af91621ba.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/7dbdcaca29374b13a0799a901e26613767d72de2.d088888a4a1113f2bb24.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/92f0085e0e6c1f10382de10b8861ce89d7c192a2.e5495ede8461fc33ed98.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/e697469aff49e0b13fc0c4d2651008fc1aaadc2b.5052eda5c7f43583669b.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/e697469aff49e0b13fc0c4d2651008fc1aaadc2b_CSS.f6584926f1188e1b5b3e.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/chunks/pages/guides/%5B%5B...page%5D%5D-72f9db6e509b49c776de.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/pcCu12fyWK7PoQNj4BZ7-/_buildManifest.js" async=""></script><script src="/docs/vault_v1.8.x/_next/static/pcCu12fyWK7PoQNj4BZ7-/_ssgManifest.js" async=""></script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-custom-properties.js"><\x2fscript>');</script></body></html>