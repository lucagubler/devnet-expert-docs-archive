<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Behavior &amp; Flow &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Email Notification" href="email.html" />
    <link rel="prev" title="Using Easypy" href="usages.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Easypy - Runtime Environment</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobfile.html">Jobfile &amp; Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="usages.html">Using Easypy</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Behavior &amp; Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#easypy-return-codes">Easypy Return Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#graceful-termination">Graceful Termination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#runtime">runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testbed">testbed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#directories">Directories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#runinfo">runinfo</a></li>
<li class="toctree-l4"><a class="reference internal" href="#archive">archive</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="email.html">Email Notification</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugin System</a></li>
<li class="toctree-l2"><a class="reference internal" href="rerun.html">Automatic Reruns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Easypy - Runtime Environment</a></li>
      <li class="breadcrumb-item active">Behavior &amp; Flow</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="behavior-flow">
<h1>Behavior &amp; Flow<a class="headerlink" href="#behavior-flow" title="Permalink to this heading">¶</a></h1>
<p>This section covers native runtime behaviors of Easypy using <code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code>:
the behavior and/or objects available while Easypy is running <a class="reference internal" href="jobfile.html#easypy-jobfile"><span class="std std-ref">Jobfiles</span></a>.</p>
<section id="easypy-return-codes">
<span id="id1"></span><h2>Easypy Return Codes<a class="headerlink" href="#easypy-return-codes" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code> exits with Linux exit code <code class="docutils literal notranslate"><span class="pre">0</span></code> (Success) if all the
following conditions are met:</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Easypy Successful Return Conditions</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Condition</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Some tests were ran</p></td>
<td><p>At least one test script/testcase was run and reported</p></td>
</tr>
<tr class="row-odd"><td><p>Test results are available</p></td>
<td><p>No exception seen while trying to access test results.</p></td>
</tr>
<tr class="row-even"><td><p>success rate is 100%</p></td>
<td><p>Total # of tests with <code class="docutils literal notranslate"><span class="pre">Passed</span></code>, <code class="docutils literal notranslate"><span class="pre">Passx</span></code> or <code class="docutils literal notranslate"><span class="pre">Skipped</span></code> results / total # of tests.</p></td>
</tr>
<tr class="row-odd"><td><p>All pre-job plugins ran ok</p></td>
<td><p>No exception seen in any pre-job plugin.</p></td>
</tr>
<tr class="row-even"><td><p>All pre-task plugins ran ok</p></td>
<td><p>No exception seen in any pre-task plugin for all scripts in the jobfile.</p></td>
</tr>
<tr class="row-odd"><td><p>All post-task plugins ran ok</p></td>
<td><p>No exception seen in any post-task plugin for all scripts in the jobfile.</p></td>
</tr>
<tr class="row-even"><td><p>All post-job plugins ran ok</p></td>
<td><p>No exception seen in any post-job plugin.</p></td>
</tr>
</tbody>
</table>
<p>Otherwise, the following codes will be used:</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-text">Easypy Return Codes</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>Non-100% testcase success rate</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
<td><p>Incorrect command-line arguments</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td><p>Some errors/exceptions are seen while running plugins</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td><p>All other exceptions unhandled by the infrastructure (unknown)</p></td>
</tr>
</tbody>
</table>
<p>Return codes give test runners such as Jenkins one way of determining if the
<code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code> run was successful.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When a testscript fails to run, the success rate of the job is multiplied by
the percentage of testscripts that successfully executed. This prevents the
case where the success rate is 100% despite a testscript failing to run.</p>
</div>
</section>
<section id="graceful-termination">
<span id="easypy-graceful-termination"></span><h2>Graceful Termination<a class="headerlink" href="#graceful-termination" title="Permalink to this heading">¶</a></h2>
<p>Easypy has the built-in capability to gracefully handle the exit signal <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code>
(<code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code>) from the user and its runtime Linux environment. Keep in mind that
Linux signals always propagate to the entire process group - and all processes
spawned by Easypy belong to the same process group.</p>
<blockquote>
<div><ul class="simple">
<li><p>When the first <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code> is received, all child processes should begin
aborting the current execution (quick-exit).</p></li>
<li><p>The main Easypy process continues to wait for all child processes and
<a class="reference internal" href="jobfile.html#easypy-tasks"><span class="std std-ref">Tasks</span></a> to wrap-up execution. The email report, archive,
upload logs etc still occur after everything finalizes.</p></li>
<li><p>If a second <code class="docutils literal notranslate"><span class="pre">SIGINT</span></code> is received, the main Easypy process is quickly
aborted &amp; crashed out. No subsequent handling of exceptions &amp; erroneous
states are processed. No email report, archive etc are performed.</p></li>
</ul>
</div></blockquote>
</section>
<section id="runtime">
<span id="easypy-runtime"></span><h2>runtime<a class="headerlink" href="#runtime" title="Permalink to this heading">¶</a></h2>
<p>When a job is running, the runtime object allows users to query to current
Easypy states, objects and input argument information. To read and refer to
<code class="docutils literal notranslate"><span class="pre">runtime</span></code> attributes, define your job file’s main function with the special
runtime argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   querying runtime information inside jobfile</span>

<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">easypy</span>

<span class="c1"># use special argument runtime in main() argument list</span>
<span class="c1"># the engine automatically passes in the runtime object</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">runtime</span><span class="p">)</span>

    <span class="c1"># pass in runtime directory as an argument to testscript</span>
    <span class="n">run</span><span class="p">(</span><span class="s1">&#39;script.py&#39;</span><span class="p">,</span> <span class="n">directory</span> <span class="o">=</span> <span class="n">runtime</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</pre></div>
</div>
<p>The following attributes are currently accessible through <code class="docutils literal notranslate"><span class="pre">runtime</span></code>:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.env</span></code></dt><dd><p>attribute dictionary of runtime environment information.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Runtime Environment Attributes
# ------------------------------

env.argv.all              command line arguments easypy was called with
env.argv.custom           all user arguments not recognized by easypy
env.prefix                pyATS virtual environment root path
env.python.tag            python tag, eg, cpython-34
env.python.name           python name, eg, cpython
env.python.version        python version, eg, 3.4.1
env.python.architecture   python build architecture, eg, 32bit/64bit
env.env.user              user id (whoami)
env.host.name             exec server hostname
env.host.distro           exec server&#39;s Linux distribution
env.host.kernel           exec server&#39;s Linux kernel version string
env.host.architecture     exec server&#39;s system architecture
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.directory</span></code></dt><dd><p>Location of <a class="reference internal" href="#easypy-runinfo"><span class="std std-ref">runinfo</span></a> directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.archive</span></code></dt><dd><p>Location of the archive zip file. Note that this is a “target” location.
The actual zip file is not created until the jobfile finishes execution.
Set to <code class="docutils literal notranslate"><span class="pre">None</span></code> when <code class="docutils literal notranslate"><span class="pre">--no-archive</span></code> option is used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.testbed</span></code></dt><dd><p>current topology <a class="reference internal" href="../topology/concept.html#topology-objects"><span class="std std-ref">Testbed Object</span></a>, loaded through <code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code>
argument.
If no testbed file was provided, the testbed object is set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.synchro</span></code></dt><dd><p>a built-in default multiprocessing <a class="reference external" href="https://docs.python.org/3.4/library/multiprocessing.html#managers">Manager</a> instance. This is used to
synchronize data between various Easypy subprocesses, and allows users to
leverage and create datastructures that can be shared between their job
and script files.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.mail_report</span></code></dt><dd><p>proposed jobfile report <code class="docutils literal notranslate"><span class="pre">TextEmailReport</span></code> object instance. Refer to
<a class="reference internal" href="email.html#easypy-email-notification"><span class="std std-ref">Email Notification</span></a> documentation for details.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.job.name</span></code></dt><dd><p>name of the current running jobfile.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.job.file</span></code></dt><dd><p>full path/name of the current running jobfile.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.job.uid</span></code></dt><dd><p>this job’s unique string identifier, format: <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;.&lt;'%Y%b%d_%H:%M:%S'</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">runtime.job.image</span></code>, <code class="docutils literal notranslate"><span class="pre">runtime.job.release</span></code></dt><dd><p>image name and release string information associated with this job run.
By default, these values are provided by <code class="docutils literal notranslate"><span class="pre">--image</span></code> and <code class="docutils literal notranslate"><span class="pre">--release</span></code>
command line arguments.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">runtime</span></code> shall be used solely as a <strong>read-only</strong> source of Easypy
state information. Unless otherwise advised in this documentation, any and
all write-access &amp; monkey-patching of <code class="docutils literal notranslate"><span class="pre">runtime</span></code> objects and attributes is
<strong>strictly forbidden</strong>. Doing so will void your warranty and support
contracts.</p>
</div>
</section>
<section id="testbed">
<span id="easypy-testbed"></span><h2>testbed<a class="headerlink" href="#testbed" title="Permalink to this heading">¶</a></h2>
<p>When a <a class="reference internal" href="jobfile.html#easypy-tasks"><span class="std std-ref">Task</span></a> executes a testscript, a <code class="docutils literal notranslate"><span class="pre">testbed</span></code> parameter is
always provided by default.</p>
<blockquote>
<div><p><em>Testing is always done on a testbed.</em></p>
</div></blockquote>
<p>The provided <code class="docutils literal notranslate"><span class="pre">testbed</span></code> parameter value is the corresponding
<a class="reference internal" href="../topology/concept.html#topology-objects"><span class="std std-ref">Testbed Object</span></a> instance, loaded from <code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code>.
If a testbed file is not provided, the value is <code class="docutils literal notranslate"><span class="pre">None</span></code>, and is nevertheless
still provided to the testscript for consistency, indicating that
“no testbed was provided”.</p>
<p>This behavior can be overridden if <code class="docutils literal notranslate"><span class="pre">testbed</span></code> argument was explicitly provided
to <code class="docutils literal notranslate"><span class="pre">run()</span></code> method or <code class="docutils literal notranslate"><span class="pre">Task()</span></code> class constructor.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   a jobfile that runs a script on 3 separate testbeds in parallel</span>
<span class="c1">#   (cannot be done with --testbed-file argument)</span>

<span class="kn">from</span> <span class="nn">pyats.easypy</span> <span class="kn">import</span> <span class="n">run</span>

<span class="c1"># import topology module</span>
<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">topology</span>

<span class="c1"># manually load your testbed files</span>
<span class="n">testbed_1</span> <span class="o">=</span> <span class="n">topology</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;/path/to/testbed_1.yaml&#39;</span><span class="p">)</span>
<span class="n">testbed_2</span> <span class="o">=</span> <span class="n">topology</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;/path/to/testbed_2.yaml&#39;</span><span class="p">)</span>
<span class="n">testbed_3</span> <span class="o">=</span> <span class="n">topology</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;/path/to/testbed_3.yaml&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">runtime</span><span class="p">):</span>

    <span class="c1"># create the tasks and manually provide a testbed to run on.</span>
    <span class="n">tasks_1</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="n">testscript</span> <span class="o">=</span> <span class="s1">&#39;/path/to/my/testscript.py&#39;</span><span class="p">,</span>
                   <span class="n">runtime</span> <span class="o">=</span> <span class="n">runtime</span><span class="p">,</span>
                   <span class="n">testbed</span> <span class="o">=</span> <span class="n">testbed_1</span><span class="p">)</span>
    <span class="n">tasks_2</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="n">testscript</span> <span class="o">=</span> <span class="s1">&#39;/path/to/my/testscript.py&#39;</span><span class="p">,</span>
                   <span class="n">runtime</span> <span class="o">=</span> <span class="n">runtime</span><span class="p">,</span>
                   <span class="n">testbed</span> <span class="o">=</span> <span class="n">testbed_2</span><span class="p">)</span>
    <span class="n">tasks_3</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span><span class="n">testscript</span> <span class="o">=</span> <span class="s1">&#39;/path/to/my/testscript.py&#39;</span><span class="p">,</span>
                   <span class="n">runtime</span> <span class="o">=</span> <span class="n">runtime</span><span class="p">,</span>
                   <span class="n">testbed</span> <span class="o">=</span> <span class="n">testbed_3</span><span class="p">)</span>

    <span class="c1"># now start all tasks in parallel</span>
    <span class="n">task_1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">task_2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">task_3</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>


    <span class="c1"># wait for all tasks to finish</span>
    <span class="n">task_1</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">task_2</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">task_3</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>the example above is intended to demonstrate the ability to provide custom
and/or override the <code class="docutils literal notranslate"><span class="pre">testbed</span></code> parameter inside a job file.</p>
</div>
</section>
<section id="directories">
<h2>Directories<a class="headerlink" href="#directories" title="Permalink to this heading">¶</a></h2>
<p>By default, Easypy always creates a <code class="docutils literal notranslate"><span class="pre">users/</span></code> directory under the current
virtual environment. Each user of this pyATS instance gets their own <code class="docutils literal notranslate"><span class="pre">&lt;user&gt;</span></code>
folder, where their <a class="reference internal" href="#easypy-runinfo"><span class="std std-ref">runinfo</span></a> and <a class="reference internal" href="#easypy-archive"><span class="std std-ref">archive</span></a> is located.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Easypy Users Directory Strcture
# -------------------------------

&lt;pyats_root&gt;
|
|-- users
.   |-- &lt;userid&gt;
    .   |-- runinfo              -&gt; runtime/runinfo folder
        |-- archive              -&gt; past run log archives
        |-- jobs                 -&gt; user specific job file storage
        `-- etc                  -&gt; anything else
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">users/</span></code> folder is always created with <code class="docutils literal notranslate"><span class="pre">0o777</span></code> permission in order to allow
sharing of a single pyATS instance by multiple users. Each user’s own directory
is created with <code class="docutils literal notranslate"><span class="pre">0o755</span></code> to avoid other users from accidentally writing to it.</p>
<section id="runinfo">
<span id="easypy-runinfo"></span><h3>runinfo<a class="headerlink" href="#runinfo" title="Permalink to this heading">¶</a></h3>
<p>During Easypy execution, <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> folder contains all the logs, files &amp;
etc generated by the running jobfile and tasks. Each job is assigned its own
unique <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> directory, based on its name and the time of launch.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Typical runinfo Structure
# -------------------------
#
#   assuming the current job name is &quot;example_job&quot; and is running

runinfo
|-- example_job                           -&gt; symlink to job runinfo
|-- example_job.2015Sept14_10:05:13       -&gt; job runinfo directory
.   |-- JobLog.example_job                -&gt; easypy jobfile log
    |-- TaskLog.Task-1                    -&gt; Task-1 Tasklog &amp; forked
    |-- TaskLog.Task-1:pid-31526             child process logs
    |-- TaskLog.Task-1:pid-31535
    |-- TaskLog.Task-1:pid-31536
    |-- taskresults                       -&gt; folder holding current task
    |   |-- Task-1.common_setup.Passed      results as blank files, used
    |   |-- Task-1.testcase_1.Passed        for quickly identifing current
    |   `-- Task-1.testcase_2.Failed        testscript progress/results.
    |-- cleanresults                      -&gt; folder holding current clean
    |   |-- Task-1.device_1.Passed          results as blank files, used
    |   |-- Task-1.device_2.Failed          for quickly identifing current
    |   `-- Task-1.device_3.Passed          clean progress/results.
    |-- reporter.log                      -&gt; Reporter server log
    |-- env.txt                           -&gt; environment debug information
    `-- example_job.py                    -&gt; copy of the running jobfile
</pre></div>
</div>
<p>As the unique <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> directory of each job run is quite tedious to type,
a symlink is provided using only the job name. This allows quick reference and
access of <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> directory for debugging purposes. This symlink only exists
during runtime, and is removed after. Note that it should not be used as
a reliable method for automation purposes: in case two jobs of the same name
are running simultaneously, only one of them gets the symlink, depending on
whichever one ran last.</p>
<p>If a filename to be written to taskresults is too long, it is truncated and rather
than being blank, the resulting file is made to contain the original filename and
test result for tracking purposes.</p>
</section>
<section id="archive">
<span id="easypy-archive"></span><h3>archive<a class="headerlink" href="#archive" title="Permalink to this heading">¶</a></h3>
<p>By default, at the end of Easypy execution, the contents of <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> is
archived into a zip file, and the jobfile <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> directory is deleted. This
behavior can be averted by using <code class="docutils literal notranslate"><span class="pre">--no-archive</span></code> option.</p>
<p>Archives are stored under each user’s <code class="docutils literal notranslate"><span class="pre">./users/&lt;userid&gt;/archive/YY-MM/</span></code>
directory, where <code class="docutils literal notranslate"><span class="pre">YY-MM</span></code> represents the current year and month in double
digits, providing some level of division/classification between jobs.</p>
</section>
</section>
<section id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this heading">¶</a></h2>
<p>The following is a list of typical files generated by Easypy job runs, and their
corresponding descriptions:</p>
<dl class="simple">
<dt>&lt;job-name&gt;.py</dt><dd><p>copy of the jobfile that ran.</p>
</dd>
<dt>&lt;job-name&gt;.report</dt><dd><p>copy of the email notification sent to the submitter</p>
</dd>
<dt>TaskLog.&lt;task-id&gt;</dt><dd><p>TaskLog: one per jobfile task, where all messages generated in a task is
stored.</p>
</dd>
<dt>JobLog.&lt;job-name&gt;</dt><dd><p>overall <code class="docutils literal notranslate"><span class="pre">pyats.easypy</span></code> module log</p>
</dd>
<dt>testbed.static.yaml</dt><dd><p>Contents of the <code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code>, if specified by the user.</p>
</dd>
<dt>testbed.clean.yaml</dt><dd><p>Contents of the <code class="docutils literal notranslate"><span class="pre">--clean_file</span></code>, if specified by the user.</p>
</dd>
<dt>env.txt</dt><dd><p>A dump of environment variables and cli args of this Easypy run</p>
</dd>
<dt>reporter.log</dt><dd><p>Reporter server log file, contains a trace of XML-RPC call sequences.</p>
</dd>
<dt>results.json</dt><dd><p>JSON result summary file generated by Reporter.</p>
</dd>
<dt>xunit.xml,</dt><dd><p>files containing xUnit-style result reports and information required by
Jenkins. These files are only generated if <code class="docutils literal notranslate"><span class="pre">--xunit</span></code> argument is provided
to Easypy.</p>
</dd>
<dt>ResultsSummary.xml</dt><dd><p>XML result summary file generated by Reporter</p>
</dd>
<dt>ResultsDetails.xml</dt><dd><p>XML result details file generated by Reporter</p>
</dd>
<dt>CleanResultsDetails.yaml</dt><dd><p>YAML clean result details file generated by Kleenex</p>
</dd>
<dt>Kleenex.&lt;device-name&gt;.log</dt><dd><p>Job-scope clean details for this device.</p>
</dd>
<dt>Kleenex_&lt;task-id&gt;.&lt;device-name&gt;.log</dt><dd><p>Task-scope clean details for this device.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usages.html" class="btn btn-neutral float-left" title="Using Easypy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="email.html" class="btn btn-neutral float-right" title="Email Notification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>