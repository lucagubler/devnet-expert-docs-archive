<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using Easypy &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Behavior &amp; Flow" href="behavior.html" />
    <link rel="prev" title="Jobfile &amp; Tasks" href="jobfile.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Easypy - Runtime Environment</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobfile.html">Jobfile &amp; Tasks</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Easypy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#standard-arguments">Standard Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argument-propagation">Argument Propagation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="behavior.html">Behavior &amp; Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html">Email Notification</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugin System</a></li>
<li class="toctree-l2"><a class="reference internal" href="rerun.html">Automatic Reruns</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Easypy - Runtime Environment</a></li>
      <li class="breadcrumb-item active">Using Easypy</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-easypy">
<span id="easypy-usage"></span><h1>Using Easypy<a class="headerlink" href="#using-easypy" title="Permalink to this heading">Â¶</a></h1>
<p>Easypy comes with its own command line entrypoint: <code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code>.
It is part of the overall <a class="reference internal" href="../cli/index.html#pyats-cli"><span class="std std-ref">pyATS Command Line Interface</span></a>
that gets installed into your pyATS instance automatically.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>prior to pyATS v5.1, the CLI command for Easypy was actually <code class="docutils literal notranslate"><span class="pre">easypy</span></code>, and
used single dash <code class="docutils literal notranslate"><span class="pre">-</span></code> arguments instead.</p>
<p>Starting pyATS v5.1 forward, it has been replaced by <code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code>
command in favor of POSIX-style arguments. The old command is deprecated,
but not removed for backwards compatbility purposes.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate your pyats instance, eg:</span>
<span class="o">[</span>tony@jarvis:~<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/ws/tony-stark/pyats
<span class="o">[</span>tony@jarvis:pyats<span class="o">]</span>$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>env.sh

Activating<span class="w"> </span>the<span class="w"> </span>pyATS<span class="w"> </span>instance<span class="w"> </span>@<span class="w"> </span>/ws/tony-stark/pyats
--------------------------------------------------------------------
<span class="nv">PYTHONPATH</span><span class="o">=</span>/ws/tony-stark/pyats:
<span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/X11R6/lib
--------------------------------------------------------------------

<span class="c1"># easypy is now part of your path</span>
<span class="o">(</span>pyats<span class="o">)</span><span class="w"> </span><span class="o">[</span>tony@jarvis:pyats<span class="o">]</span>$<span class="w"> </span>which<span class="w"> </span>pyats
/ws/tony-stark/pyats/bin/pyats
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code> comes natively with built-in help information:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[tony@jarvis:~]$ pyats run job --help
Usage:
  pyats run job [file] [options]

Example
-------
  pyats run job /path/to/jobfile.py
  pyats run job /path/to/jobfile.py --testbed-file /path/to/testbed.yaml

Description:
  Runs a pyATS job file with the provided arguments, generating &amp; report result.

Configuration:
  -C, --configuration FILE
                        easypy configuration yaml file for plugins

Job Information:
  JOBFILE               target jobfile to be launched
  --job-uid             Unique ID identifiying this job run
  --pyats-configuration
                        pyats configuration override file

Mailing:
  --no-mail             disable report email notifications
  --mail-to             list of report email recipients
  --mail-subject        report email subject header
  --mail-html           enable html format report email

Reporting:
  --submitter           Specify the current submitter user id
  --image               Specify the image under test
  --release             Specify the release being tested
  --branch              Specify the branch being tested
  --meta                Specify some meta information as a dict (supports base64 encoded strings)
  --no-xml-report       Disable generation of the XML Report

Runinfo:
  --no-archive          disable archive creation
  --no-archive-subdir   disable archive subdirectory creation
  --runinfo-dir         specify alternate runinfo directory
  --archive-dir         specify alternate archive directory
  --archive-name        specify alternate archive file name

Liveview:
  --liveview            Starts a liveview server in a separate process
  --liveview-host HOST  Specify host for liveview server. Default is localhost
  --liveview-port PORT  Specify port for liveview server.
  --liveview-hostname HOSTNAME
                        Displayed hostname for liveview.
  --liveview-displayed-url LIVEVIEW_DISPLAYED_URL
                        Displayed url for liveview, for example, http://&lt;liveview_hostname&gt;:&lt;port&gt;
  --liveview-keepalive  Keep log viewer server alive after the run finishes.
  --liveview-callback-url LIVEVIEW_CALLBACK_URL
                        Specify xpresso callback url for jenkins run.
  --liveview-callback-token LIVEVIEW_CALLBACK_TOKEN
                        Specify xpresso token for jenkins run.

Testbed:
  -t, --testbed-file    Specify testbed file location

Clean:
  --clean-file FILE [FILE ...]
                        Specify clean file location(s). Multiple clean files can be specified by
                        separating them with spaces.
  --clean-devices [ [ ...]]
                        Specify list of devices to clean, separated by spaces. To clean groups of
                        devices sequentially, specify as &quot;[[dev1, dev2], dev3]&quot;.
  --clean-scope {job,task}
                        Specify whether clean runs before job or per task
  --invoke-clean        Clean is only invoked if this parameter is specified.
  --clean-device-image        space separated images per device with format device:/path/to/image.bin
  --clean-os-image            space separated images per OS with format os:/path/to/image.bin
  --clean-group-image         space separated images per group with format group:/path/to/image.bin
  --clean-platform-image      space separated images per platform with format platform:/path/to/image.bin
  --clean-image-json          dictionary of clean images in JSON string (supports base64 encoded strings)

Bringup:
  --logical-testbed-file
                        Specify logical testbed file location

Rerun:
  --rerun-file FILE     rerun.results file that contains the information of tasks and testcases
  --rerun-task  [ ...]  TASKID TESTSCRIPT [TESTCASES...] Details to identify a specific Task to
                        rerun. Can be used multiple times for multiple tasks.
  --rerun-condition  [ ...]
                        Results type list for the condition of rerun plugin.

xUnit:
  --xunit [DIR]         Generate xunit report in the provided location. If used as a flag, generates
                        xunit reports runtime directory

HTML Logging:
  --html-logs [DIR]     Directory to generate HTML logs in addition to any existing log files. Note
                        - will increase archive size due to log duplication.

General Options:
  -h, --help            Show help information
  -v, --verbose         Give more output, additive up to 3 times.
  -q, --quiet           Give less output, additive up to 3 times, corresponding to WARNING, ERROR,
                        and CRITICAL logging levels
</pre></div>
</div>
<section id="standard-arguments">
<span id="easypy-arguments"></span><h2>Standard Arguments<a class="headerlink" href="#standard-arguments" title="Permalink to this heading">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code> accepts a number of standard arguments that can be used to
influence and/or change jobfile execution behaviors. All arguments are
constructed and processed using python <a class="reference external" href="https://docs.python.org/3/library/argparse.html">argparse</a> module.  Please also see
<a class="reference internal" href="behavior.html#easypy-return-codes"><span class="std std-ref">Easypy Return Codes</span></a>.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Easypy Standard Arguments</span><a class="headerlink" href="#id1" title="Permalink to this table">Â¶</a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">jobfile</span></code></p></td>
<td><p>positional argument, full path/name of <a class="reference internal" href="jobfile.html#easypy-jobfile"><span class="std std-ref">Jobfiles</span></a>
to run.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--configuration</span></code></p></td>
<td><p>configuration yaml file for plugins</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--pyats-configuration</span></code></p></td>
<td><p>additional pyats configuration for execution</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--job-uid</span></code></p></td>
<td><p>unique id from upper systems identifying this run</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code></p></td>
<td><p>full path/URL for YAML testbed file</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-file</span></code></p></td>
<td><p>file path/URL to file containing <a class="reference internal" href="../kleenex/inputs.html#clean-file"><span class="std std-ref">Clean File</span></a> information</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-devices</span></code></p></td>
<td><p>a list of devices to <a class="reference internal" href="../kleenex/index.html#kleenex-index"><span class="std std-ref">clean</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-scope</span></code></p></td>
<td><p>whether to perform <a class="reference internal" href="../kleenex/index.html#kleenex-index"><span class="std std-ref">clean/bringup</span></a> at job or task level</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--invoke-clean</span></code></p></td>
<td><p><a class="reference internal" href="../kleenex/clean.html#kleenex-cleaners"><span class="std std-ref">Clean</span></a> is only invoked when this parameter is specified.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-device-image</span></code></p></td>
<td><p>space separated images per device with format device:/path/to/image.bin</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-os-image</span></code></p></td>
<td><p>space separated images per OS with format os:/path/to/image.bin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-group-image</span></code></p></td>
<td><p>space separated images per group with format group:/path/to/image.bin</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-platform-image</span></code></p></td>
<td><p>space separated images per platform with format platform:/path/to/image.bin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-image-json</span></code></p></td>
<td><p>dictionary of clean images in JSON string. Can be base64 encoded.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--submitter</span></code></p></td>
<td><p>specify a run submitter (defaults to current user)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--html-logs</span></code></p></td>
<td><p>enable generating HTML logs</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--image</span></code></p></td>
<td><p>specify the current test image information</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--release</span></code></p></td>
<td><p>specify the current release string information</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--branch</span></code></p></td>
<td><p>specify the current branch information</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--meta</span></code></p></td>
<td><p>A JSON dict of additional user information about this execution. Can be base64 encoded.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--archive-name</span></code></p></td>
<td><p>specify a different name for the generated archive file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--no-archive</span></code></p></td>
<td><p>flag, disables the creation of a log archive</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--no-archive-subdir</span></code></p></td>
<td><p>flag, disables the creation of date-specific archive subdirectory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--no-mail</span></code></p></td>
<td><p>flag, disables email notification at the end of run</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--mailto</span></code></p></td>
<td><p>specify the list of email notification recipients.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--mail-subject</span></code></p></td>
<td><p>email notification subject line.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--mail-html</span></code></p></td>
<td><p>flag, enables HTML format email notification.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--runinfo-dir</span></code></p></td>
<td><p>specify alternative runtime info directory location</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--archive-dir</span></code></p></td>
<td><p>specify alternative archive storage directory location</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--xunit</span></code></p></td>
<td><p>flag, enables x-unit style report generation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--verbose/--quiet</span></code></p></td>
<td><p>generate more or less log output</p></td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code class="docutils literal notranslate"><span class="pre">jobfile</span></code> is a positional argument, and must be provided first before
all other arguments.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">run</span> <span class="pre">job</span></code> standardizes on <a class="reference external" href="https://www.gnu.org/software/libc/manual/html_node/Argument-Syntax.html">POSIX Style</a> CLI arguments.</p>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-h,</span> <span class="pre">--help</span></code></dt><dd><p>Prints help information and how to use each arguments.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>--help
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">jobfile</span></code></dt><dd><p>Mandatory positional argument. Specifies the full path/name to the
<a class="reference internal" href="jobfile.html#easypy-jobfile"><span class="std std-ref">Jobfiles</span></a> to run.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-C,</span> <span class="pre">--configuration</span></code></dt><dd><p>optional argument, used to provide the YAML plugin configuration file. Use
this if you want to configure your Easypy to run certain plugins in custom
orders for this particular run. Can be a file path or URL.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--configuration<span class="w"> </span>/path/to/config.yaml
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--configuration<span class="w"> </span><span class="s2">&quot;http://&lt;url&gt;/config.yaml&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--job-uid</span></code></dt><dd><p>optional argument. Allows upstream executor (eg, Jenkins) to pass down
a unique identifier string to be stored in report.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--job-uid<span class="w"> </span><span class="s2">&quot;this_is_an_example&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--pyats-configuration</span></code></dt><dd><p>optional argument. Additional file to add to <a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">Configuration</span></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--pyats-configuration<span class="w"> </span>/path/to/my/pyats.conf
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code></dt><dd><p>Specifies the full path/name or URL of YAML topology
<a class="reference internal" href="../topology/creation.html#topology-testbed-file"><span class="std std-ref">Testbed File</span></a> to be loaded as part of this run. When used,
Easypy automatically loads the testbed yaml file into a topology
<a class="reference internal" href="../topology/concept.html#topology-objects"><span class="std std-ref">Testbed Object</span></a>, and passes it to each task inside the jobfiles as
its <code class="docutils literal notranslate"><span class="pre">testbed</span></code> parameter. Refer to <a class="reference internal" href="behavior.html#easypy-testbed"><span class="std std-ref">testbed</span></a> for more details.</p>
<p>Alternatively, you can specify a source to be loaded with the testbed
creator package. To do so, append âsource:â in front of the desired loader
name and specify any required arguments in CLI form. Refer to
<a class="reference external" href="https://github.com/CiscoTestAutomation/pyats.contrib">pyats.contrib</a> for
more details.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/mytestbed.yaml
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>source:netbox
<span class="w">                                        </span>--netbox-token<span class="o">=</span>token
<span class="w">                                        </span>--netbox-url<span class="o">=</span>url
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span><span class="s2">&quot;http://&lt;url&gt;/testbed.yaml&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-file</span></code></dt><dd><p>Full path or URL to the clean file. This enables testbed cleaning using
the <a class="reference internal" href="../kleenex/index.html#kleenex-index"><span class="std std-ref">kleenex</span></a> module.  This option is only useable if
testbed information is provided using <code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code> argument.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/mytestbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/clean.yaml
<span class="w">                               </span>--invoke-clean
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span><span class="s2">&quot;http://&lt;url&gt;/testbed.yaml&quot;</span><span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span><span class="s2">&quot;http://&lt;url&gt;/clean.yaml&quot;</span>
<span class="w">                               </span>--invoke-clean
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-devices</span></code></dt><dd><p>Specifies the list of devices to <a class="reference internal" href="../kleenex/usages.html#kleenex-easypy-integration"><span class="std std-ref">clean</span></a>.
If not specified, defaults to cleaning all devices specified in the clean
file that are also present in the testbed file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-devices<span class="w"> </span>device_a<span class="w"> </span>device_b<span class="w"> </span>device_c<span class="se">\</span>
<span class="w">                               </span>--invoke-clean
</pre></div>
</div>
<p>Groups of devices to be sequentially cleaned may be specified via
nested list format.
In the following example, device_a, device_b and device_c are
cleaned in parallel, and only once complete are device_d and device_e
cleaned in parallel.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-devices<span class="w"> </span><span class="s2">&quot;[[device_a, device_b, device_c], [device_d, device_e]]&quot;</span><span class="se">\</span>
<span class="w">                               </span>--invoke-clean
</pre></div>
</div>
</dd>
</dl>
<dl id="kleenex-cli-image-format">
<dt><code class="docutils literal notranslate"><span class="pre">--clean-device-image</span></code></dt><dd><p>specifies images to be used for clean per device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-device-image<span class="w"> </span>PE1:/path/to/clean_image.bin
</pre></div>
</div>
<p>This is equivalent to the following in YAML</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PE1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">images</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/clean_image.bin</span>
</pre></div>
</div>
<p>To provide a list of images:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-device-image<span class="w"> </span>PE1:/path/to/controller_image.bin<span class="se">\</span>
<span class="w">                               </span>PE1:/path/to/switch_image.bin
</pre></div>
</div>
<p>This is equivalent to the following in YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PE1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">images</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/controller_image.bin</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/switch_image.bin</span>
</pre></div>
</div>
<p>To provide images with a key structure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-device-image<span class="w"> </span>PE1:image:/path/to/image.bin<span class="se">\</span>
<span class="w">                               </span>PE1:packages:/path/to/optional_package1<span class="se">\</span>
<span class="w">                               </span>PE1:packages:/path/to/optional_package2
</pre></div>
</div>
<p>This is equivalent to the following in YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PE1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">images</span><span class="p">:</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/image.bin</span>
<span class="w">      </span><span class="nt">packages</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/optional_package1</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/optional_package2</span>
</pre></div>
</div>
<p>You may also specify an image which resides at a URL:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-device-image<span class="w"> </span>PE1:http://&lt;url&gt;/path/to/image.bin
</pre></div>
</div>
<p>This is equivalent to the following in YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">devices</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PE1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">images</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://&lt;url&gt;/path/to/image.bin</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code> can be used in combination with <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-os-image</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-group-image</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-platform-image</span></code>. Conflicts are resolved
according to the following order: <code class="xref py py-obj docutils literal notranslate"><span class="pre">device</span> <span class="pre">&gt;</span> <span class="pre">group</span> <span class="pre">&gt;</span> <span class="pre">platform</span> <span class="pre">&gt;</span> <span class="pre">os</span></code>.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-os-image</span></code></dt><dd><p>specifies images to be used for clean per OS. Uses same format as <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-os-image<span class="w"> </span>iosxe:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-group-image</span></code></dt><dd><p>specifies images to be used for clean per group. Uses same format as <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-group-image<span class="w"> </span>group1:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-platform-image</span></code></dt><dd><p>specifies images to be used for clean per platform. Uses same format as <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--invoke-clean<span class="se">\</span>
<span class="w">                               </span>--clean-platform-image<span class="w"> </span>n9k:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-image-json</span></code></dt><dd><p>JSON string with images for clean. The string can be base64 encoded. The two examples below are equivalent:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--clean-image-json<span class="w"> </span><span class="s1">&#39;{&quot;os&quot;:{&quot;iosxe&quot;:[&quot;test.bin&quot;]}}&#39;</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--clean-image-json<span class="w"> </span><span class="nv">eyJvcyI6eyJpb3N4ZSI6WyJ0ZXN0LmJpbiJdfX0</span><span class="o">=</span>
</pre></div>
</div>
<p>The schema for the JSON string is as follows:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;device&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;DEVICE_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;URL_TO_IMAGE&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;OS_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;URL_TO_IMAGE&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;GROUP_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;URL_TO_IMAGE&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;platform&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;PLATFORM_NAME&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;URL_TO_IMAGE&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The clean image json will override any other image arguments as it will be applied after
the standard arguments of device image, os image, group image and platform image.</p>
<p>E.g. using the following argument combination:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--clean-device-image<span class="w"> </span>R1:test.bin<span class="w"> </span>--clean-image-json<span class="w"> </span><span class="s1">&#39;{&quot;os&quot;:{&quot;iosxe&quot;:[&quot;test_new.bin&quot;]}}&#39;</span>
</pre></div>
</div>
<p>will use test_new.bin if the device <code class="xref py py-obj docutils literal notranslate"><span class="pre">R1</span></code> is an IOSXE device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-scope</span></code></dt><dd><p>specifies whether <a class="reference internal" href="../kleenex/usages.html#kleenex-easypy-integration"><span class="std std-ref">clean</span></a>
is to be done at the <a class="reference internal" href="jobfile.html#easypy-jobfile"><span class="std std-ref">job</span></a> level
or the <a class="reference internal" href="jobfile.html#easypy-tasks"><span class="std std-ref">task</span></a> level.
If specified as âjobâ, clean is done only once
per job.
If specified as âtaskâ, clean is done before each task
starts.
If not specified, defaults to âjobâ.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-scope<span class="w"> </span>task
<span class="w">                               </span>--invoke-clean
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--invoke-clean</span></code></dt><dd><p>Clean is only invoked when this parameter is specified.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Whether or not <code class="docutils literal notranslate"><span class="pre">--invoke-clean</span></code> is specified, <a class="reference internal" href="../kleenex/inputs.html#clean-file"><span class="std std-ref">Clean File</span></a>
content is still parsed and made available.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-v,</span> <span class="pre">--verbose,</span> <span class="pre">-q,</span> <span class="pre">--quiet</span></code></dt><dd><p>Controls the logging level for Easypy. Use <code class="docutils literal notranslate"><span class="pre">-v</span></code> to increase and <code class="docutils literal notranslate"><span class="pre">-q</span></code> to
decrease the verbosity of log output. Additive - use up to three to achieve
more effect.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># quieter output</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>-q

<span class="c1"># extre verbosity</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>-vvv
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--submitter</span></code></dt><dd><p>Specifies an alternate userid to be displayed in the submitter field.
(default: current user).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--submitter<span class="w"> </span>chambers
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--html-logs</span></code></dt><dd><p>generates an HTML formatted, user-friendly log file <code class="docutils literal notranslate"><span class="pre">TaskLog.html</span></code> in
addition to existing text-based log file. Optionally, provide the location
where you want the HTML files to be generated to.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># use as a flag to generate HTML in the runtime archive</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--html-logs

<span class="c1"># use as an argument with directory where HTML logs should be put to</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--html-logs<span class="w"> </span>/path/to/directory/
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental feature. Enabling this flag will double the size of your
result archive due to log duplications.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--image</span></code>/<code class="docutils literal notranslate"><span class="pre">--release</span></code>/<code class="docutils literal notranslate"><span class="pre">--branch</span></code></dt><dd><p>Specifies the image path/file and release/branch string information of used
for result reporting purposes.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--image<span class="w"> </span>/path/to/image<span class="w"> </span>--release<span class="w"> </span>zn7
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--meta</span></code></dt><dd><p>User specified JSON dictionary of information to be added for reporting
purposes. Can be a base64 encoded string of this JSON dictionary. The two
examples below are equivalent:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span><span class="s2">&quot;{\&quot;key\&quot;:\&quot;value\&quot;}&quot;</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span>eyJrZXkiOiJ2YWx1ZSJ9
</pre></div>
</div>
<p>URLs to JSON files, paths to JSON files, and individual key/value pairs can
also be supplied. These data sources can be freely combined and the <code class="xref py py-obj docutils literal notranslate"><span class="pre">--meta</span></code>
argument can be used multiple times per command. Individual key/value pairs
must use an equals sign (<code class="xref py py-obj docutils literal notranslate"><span class="pre">=</span></code>) to separate the key and the value. Being able
to combine different sources of information for the JSON meta dictionary
means that extra info can be added quickly and easily on a per-job basis.
See examples below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span>https://&lt;url&gt;/jsonfile.json
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span>/path/to/jsonfile.json
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span><span class="nv">key</span><span class="o">=</span>value
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span>https://&lt;url&gt;/jsonfile.json<span class="w"> </span>--meta<span class="w"> </span>/path/to/jsonfile.json
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span><span class="nv">key</span><span class="o">=</span>value<span class="w"> </span>--meta<span class="w"> </span><span class="nv">another_key</span><span class="o">=</span>another_value
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--meta<span class="w"> </span>/path/to/jsonfile.json<span class="w"> </span>--meta<span class="w"> </span><span class="nv">extra_key</span><span class="o">=</span>value
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--archive-name</span></code></dt><dd><p>Specifies an alternative name for the archive file other than &lt;jobuid&gt;.zip.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--no-archive</span></code></dt><dd><p>Flag. When used, disables the creation of archive zip file containing the
current run information/logs, and preserves the job runinfo directory (as
opposed to removing it after archive creation). Using this option also
disables log uploading, as log uploading requires an archive zip file to be
created and uploaded.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--no-archive
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--no-archive-subdir</span></code></dt><dd><p>Flag. Archive files are added to a subdirectory in the archive dir that
specifies the month and day that the job was executed. When this flag is
used, no such subdirectory is specified and archive files are added to the
archive dir directly.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creates archive in &lt;archive_dir&gt;/ instead of &lt;archive_dir&gt;/&lt;month&gt;/</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--no-archive-subdir
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--no-mail</span></code></dt><dd><p>Flag, disables email notification at the end of execution.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--no-mail
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--mailto</span></code></dt><dd><p>Provides a list of recipients that receive email notification at the
end of the run. Supports using either white-space, comma or semi-colon as
the delimiter, and supports either user ids or full email addresses.
(default: current user)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--mailto<span class="w"> </span><span class="s2">&quot;john, joe, jack@domain.com&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--mail-subject</span></code></dt><dd><p>When specified, replaces the default email notification subject line.
(default: <code class="docutils literal notranslate"><span class="pre">pyATS</span> <span class="pre">Report</span> <span class="pre">-</span> <span class="pre">job:</span> <span class="pre">&lt;name&gt;</span> <span class="pre">by:</span> <span class="pre">&lt;uid&gt;</span> <span class="pre">-</span> <span class="pre">Total:</span> <span class="pre">#</span> <span class="pre">(P:#,</span> <span class="pre">PX:#,</span>
<span class="pre">F:#</span> <span class="pre">...)</span></code>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--mail-subject<span class="w"> </span><span class="s2">&quot;legen -wait-for-it- dary. Legendary!&quot;</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--mail-html</span></code></dt><dd><p>Flag, generates an html email notification report at the end of execution.
You are able to attach custom report information in the html report, please
refer to <a class="reference internal" href="email.html#easypy-report-customization"><span class="std std-ref">Report Customization</span></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--mail-html
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--runinfo-dir</span></code></dt><dd><p>Specifies an alternative location for execution <code class="docutils literal notranslate"><span class="pre">runinfo</span></code> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--runinfo-dir<span class="w"> </span>/my/runinfo/directory
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--archive-dir</span></code></dt><dd><p>Specifies an alternative location for storing archive zip files.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/jobfile.py<span class="w"> </span>--archive-dir<span class="w"> </span>/my/archive/directory
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--xunit</span></code></dt><dd><p>Flag, enables the generation of an extra x-unit/j-unit result report XML.
Can also be optionally used to provide the alternate location to generate
xunit report to</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># enable generation</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/job/file.py<span class="w"> </span>--xunit

<span class="c1"># enable and also copy report to specified location</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>/path/to/job/file.py<span class="w"> </span>--xunit<span class="w"> </span>/path/to/dir
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="argument-propagation">
<span id="easypy-argument-propagation"></span><h2>Argument Propagation<a class="headerlink" href="#argument-propagation" title="Permalink to this heading">Â¶</a></h2>
<p>Easypy uses Python standard module <a class="reference external" href="https://docs.python.org/3/library/argparse.html">argparse</a> to parse command line arguments
stored in <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>. In an effort to allow Easypy plugins to parse their own
arguments, and as well to allow users to provide custom arguments from the
command line and process them using their own parser code, a set of argument
propagation and processing rules were created:</p>
<ul class="simple">
<li><p>all arguments shall follow GNU POSIX CLI argument style</p></li>
<li><p>parsers shall not feature positional arguments (except the Easypy <code class="docutils literal notranslate"><span class="pre">jobfile</span></code>
argument)</p></li>
<li><p>parsers shall parse directly from <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code></p></li>
<li><p>parsers shall always leave <code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> untouched.</p></li>
<li><p>parsers shall always use <code class="docutils literal notranslate"><span class="pre">ArgumentParser.parse_known_args()</span></code> to parse only
their own arguments.</p></li>
<li><p>all parsed/recognized arguments shall be removed from <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code></p></li>
<li><p>all other remaining/unknown arguments shall be placed back into <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code></p></li>
</ul>
<p>In other words, parsers only take what they know, and leave behind what
they donât know for the next parser to continue parsing. This allows parsing to
occur in sequential stages, wherever needed. The following is a list of typical
parser location/stages in Easypy environment, in their respective parsing order:</p>
<ol class="arabic simple">
<li><p>Easypy main program</p></li>
<li><p>Easypy plugins: core plugins first, then userâs custom plugins.</p></li>
<li><p>Userâs jobfile</p></li>
<li><p>Test-harness <code class="docutils literal notranslate"><span class="pre">aetest</span></code> main program</p></li>
<li><p>Userâs script file</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualizing Argument Propagation</span>
<span class="c1"># --------------------------------</span>
<span class="c1">#</span>
<span class="c1">#   assuming that easypy is invoked with the following arguments</span>
<span class="c1">#   bash$ pyats run job jobfile.py --testbed-file tb.yaml \</span>
<span class="c1">#                                  --no-archive --pdb --random --custom-arg &quot;123&quot;</span>

<span class="c1"># breaking down the arguments into stages</span>
<span class="c1"># ---------------------------------------</span>
<span class="c1">#</span>
<span class="c1">#   easypy arguments:       --no-archive             -&gt; disable archive</span>
<span class="c1">#</span>
<span class="c1">#   plugin arguments:       --testbed-file tb.yaml   -&gt; load testbed file</span>
<span class="c1">#</span>
<span class="c1">#   aetest arguments:       --pdb                    -&gt; pdb on failure</span>
<span class="c1">#                           --random                 -&gt; randomize testcases</span>
<span class="c1">#</span>
<span class="c1">#   custom arguments:       --custom-args &quot;123&quot;      -&gt; user custom</span>


<span class="c1"># 0. at the first beginning</span>
<span class="c1"># -------------------------</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pyats run job&#39;</span><span class="p">,</span> <span class="s1">&#39;--testbed-file&#39;</span><span class="p">,</span> <span class="s1">&#39;tb.yaml&#39;</span><span class="p">,</span>
            <span class="s1">&#39;--no-archive&#39;</span><span class="p">,</span> <span class="s1">&#39;--pdb&#39;</span><span class="p">,</span> <span class="s1">&#39;--random&#39;</span><span class="p">,</span> <span class="s1">&#39;--custom-arg&#39;</span><span class="p">,</span> <span class="s1">&#39;123&#39;</span><span class="p">]</span>

<span class="c1"># 1. easypy argument parser</span>
<span class="c1"># -------------------------</span>
<span class="c1"># easypy takes away its known argument --no-archive</span>
<span class="c1">#</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pyats run job&#39;</span><span class="p">,</span> <span class="s1">&#39;--testbed-file&#39;</span><span class="p">,</span> <span class="s1">&#39;tb.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;--pdb&#39;</span><span class="p">,</span> <span class="s1">&#39;--random&#39;</span><span class="p">,</span>
            <span class="s1">&#39;--custom-arg&#39;</span><span class="p">,</span> <span class="s1">&#39;123&#39;</span><span class="p">]</span>

<span class="c1"># 2. plugin argument parser</span>
<span class="c1"># -------------------------</span>
<span class="c1"># testbed plugin takes away its known argument --testbed-file</span>
<span class="c1">#</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pyats run job&#39;</span><span class="p">,</span> <span class="s1">&#39;--pdb&#39;</span><span class="p">,</span> <span class="s1">&#39;--random&#39;</span><span class="p">,</span> <span class="s1">&#39;--custom-arg&#39;</span><span class="p">,</span> <span class="s1">&#39;123&#39;</span><span class="p">]</span>

<span class="c1"># 3. jobfile custom argument parser</span>
<span class="c1"># ---------------------------------</span>
<span class="c1"># assume that the user wrote a custom parser in their jobfile, looking for</span>
<span class="c1"># argument --custom-arg. While the jobfile is being run (before Tasks are)</span>
<span class="c1"># started, this argument is also taken away</span>
<span class="c1">#</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pyats run job&#39;</span><span class="p">,</span> <span class="s1">&#39;--pdb&#39;</span><span class="p">,</span> <span class="s1">&#39;--random&#39;</span><span class="p">]</span>

<span class="c1"># 4. aetest argument parser</span>
<span class="c1"># -------------------------</span>
<span class="c1"># aetest finally takes away its known argument --pdb and --random</span>
<span class="c1">#</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pyats run job&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This argument propagation scheme essentially allows users to provide any
additional custom arguments from the command line to be processed by the job
and/or script file, allowing for more dynamic &amp; data-driven testing.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>because argument propagation only parses known arguments, any typos
would be treated as an unknown argument and propagated further.</p>
<p><em>Steve Jobs once said, âyouâre holding it wrongâ</em>.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="jobfile.html" class="btn btn-neutral float-left" title="Jobfile &amp; Tasks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="behavior.html" class="btn btn-neutral float-right" title="Behavior &amp; Flow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>