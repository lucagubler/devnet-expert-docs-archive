<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &amp; Arguments &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Input Files" href="inputs.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Testbed &amp; Device Cleaning</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usage &amp; Arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#decoupled-execution">Decoupled Execution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#file-structure">File Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#files">Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#easypy-integration">Easypy Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#standard-arguments">Standard Arguments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html">Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="clean.html">Cleaning Model</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Testbed &amp; Device Cleaning</a></li>
      <li class="breadcrumb-item active">Usage &amp; Arguments</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage-arguments">
<h1>Usage &amp; Arguments<a class="headerlink" href="#usage-arguments" title="Permalink to this heading">¶</a></h1>
<p>There are two primary methods of invoking the functionalities provided by
<code class="docutils literal notranslate"><span class="pre">kleenex</span></code> module:</p>
<dl>
<dt>Decoupled</dt><dd><p>running directly via the command-line executable <code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">clean</span></code>. This mode
allows for independent orchestration &amp; cleaning of your testbed topology,
and optionally outputs a resulting testbed YAML file.</p>
<p><em>Best suited for one-shot preparation of a testbed for script development
purposes.</em></p>
</dd>
<dt>Easypy Integration</dt><dd><p>running Kleenex module and functionality under a Easypy plugin model. This
orchestrates and cleans your testbed before the
<a class="reference internal" href="../easypy/jobfile.html#easypy-jobfile"><span class="std std-ref">job</span></a> run, and tears it down afterwards,
requiring the use of <a class="reference internal" href="../easypy/index.html#easypy"><span class="std std-ref">Easypy - Runtime Environment</span></a>.</p>
<p><em>Best suited for sanity/regression (official) executions where standard
environments, reporting &amp; log archiving is required.</em></p>
</dd>
</dl>
<section id="decoupled-execution">
<span id="kleenex-decoupled"></span><h2>Decoupled Execution<a class="headerlink" href="#decoupled-execution" title="Permalink to this heading">¶</a></h2>
<p>Kleenex is run under <em>decoupled</em> mode when launched using the <code class="docutils literal notranslate"><span class="pre">pyats</span> <span class="pre">clean</span></code>
command-line executable. Under this mode, the user is given absolute control
over the execution environment, and Kleenex will simply ready-up the testbed.
This mode is great for:</p>
<blockquote>
<div><ul class="simple">
<li><p>preparing a testbed for script development purposes, eg, developing,
debugging and re-running scripts without reloading/re-orchestrating
testbed devices.</p></li>
<li><p>cleaning/recovering testbed devices to an initial state independent of any
script run.</p></li>
</ul>
</div></blockquote>
<p>The following is a list of default behaviors during decoupled execution:</p>
<blockquote>
<div><ul class="simple">
<li><p>logs all outputs to a time-stamped directory under <code class="docutils literal notranslate"><span class="pre">pwd</span></code></p></li>
<li><p>if bringing up a dynamic topology, keeps the topology up and running, and
tears it down only when the user provides <code class="docutils literal notranslate"><span class="pre">Ctrl-C</span></code> input.</p></li>
</ul>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>

<span class="c1"># using kleenex to clean a physical testbed topology</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>--testbed-file<span class="w"> </span>physical_testbed.yaml<span class="w"> </span>--clean-file<span class="w"> </span>clean.yaml
</pre></div>
</div>
<p>The unique feature of running under decoupled model of execution is the ability
to specify an orchestrator using <code class="docutils literal notranslate"><span class="pre">-orchestrator</span></code> argument and any orchestrator
related information through its command-line arguments without having to go
through a clean file.</p>
<p>The content of the YAML file shown above follows.  Note the use of
<a class="reference internal" href="../topology/creation.html#testbed-file-markups"><span class="std std-ref">Testbed File Markups</span></a> in the clean YAML file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   content of the YAML files above</span>

<span class="nn">---</span><span class="w"> </span><span class="c1"># clean.yaml</span>
<span class="nt">cleaners</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># This means to use the cleaner class `PyatsDeviceClean`</span>
<span class="w">    </span><span class="nt">PyatsDeviceClean</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># The module is where the cleaner class above can be found</span>
<span class="w">        </span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">genie.libs.clean</span>
<span class="w">        </span><span class="nt">devices</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>

<span class="nt">devices</span><span class="p">:</span>
<span class="w">    </span><span class="nt">r1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">images</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/6500-test-image.bin</span>
</pre></div>
</div>
<section id="file-structure">
<h3>File Structure<a class="headerlink" href="#file-structure" title="Permalink to this heading">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Typical Kleenex files Structure
# -------------------------------
#

base                                      -&gt; cwd or directory specified
|                                         -&gt; via -logdir CLI argument
|-- Kleenex_2019Mar04_10:41:19.026530     -&gt; kleenex logging directory
.   |-- Kleenex.log                       -&gt; Top level clean log
.   |-- Kleenex.device_1.log              -&gt; Device-specific clean log
.   |-- Kleenex.device_2.log              -&gt; Device-specific clean log
.   |-- Kleenex.device_3.log              -&gt; Device-specific clean log
    |-- env.txt                           -&gt; environment debug information
</pre></div>
</div>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Permalink to this heading">¶</a></h3>
<p>The following is a list of typical files generated by the standalone Kleenex
tool and their corresponding descriptions:</p>
<dl class="simple">
<dt>Kleenex.log</dt><dd><p>Top-level clean log</p>
</dd>
<dt>Kleenex.&lt;device_name&gt;.log</dt><dd><p>Clean log: one per device that is cleaned.</p>
</dd>
<dt>testbed.static.yaml</dt><dd><p>Contents of the <code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code>, if specified by the user.</p>
</dd>
<dt>testbed.clean.yaml</dt><dd><p>Contents of the <code class="docutils literal notranslate"><span class="pre">--clean-file</span></code>, if specified by the user.</p>
</dd>
<dt>env.txt</dt><dd><p>A dump of environment variables and cli args of this Kleenex run.</p>
</dd>
<dt>results.json</dt><dd><p>All clean result details are included in the plugins section of the
results.json file. Contains details on each device that was cleaned and any
optional clean steps for each device.</p>
</dd>
</dl>
</section>
</section>
<section id="easypy-integration">
<span id="kleenex-easypy-integration"></span><h2>Easypy Integration<a class="headerlink" href="#easypy-integration" title="Permalink to this heading">¶</a></h2>
<p>Invoking Kleenex as part of a <a class="reference internal" href="../easypy/index.html#easypy"><span class="std std-ref">Easypy</span></a> job run is called <em>Easypy
execution mode</em>. In this mode, all environment handling and control is set by
the Easypy launcher, and Kleenex is simply run as a plugin, before and after
the job &amp; its tasks runs:</p>
<blockquote>
<div><ul class="simple">
<li><p>provision &amp; clean the testbed before job and/or task run</p></li>
<li><p>teardown the testbed when everything finishes, or when errors are
encountered</p></li>
<li><p>store all logs inside the Easypy runinfo archive</p></li>
</ul>
</div></blockquote>
<p>Easypy execution is the typical way of provisioning &amp; cleaning testbeds before
official test runs in sanity/regression shops.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>

<span class="c1"># using kleenex in pyats to clean a physical testbed topology</span>
bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>myjob.py<span class="w"> </span>--testbed-file<span class="w"> </span>physical_testbed.yaml<span class="se">\</span>
<span class="w">                             </span>--clean-file<span class="w"> </span>physical_testbed_clean.yaml<span class="se">\</span>
<span class="w">                             </span>--invoke-clean
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Clean is <em>only</em> invoked when the <code class="docutils literal notranslate"><span class="pre">--invoke-clean</span></code> parameter is specified.</p>
</div>
</section>
<section id="standard-arguments">
<span id="kleenex-standard-args"></span><h2>Standard Arguments<a class="headerlink" href="#standard-arguments" title="Permalink to this heading">¶</a></h2>
<p>Kleenex accepts a number of standard arguments. Most of them can be provided
as command line arguments to both decoupled &amp; easypy execution models, with
some exceptions.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">pyATS Clean(Kleenex) Standard Arguments</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--help</span></code></p></td>
<td><p>display help information</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code></p></td>
<td><p>testbed YAML file to load.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-file</span></code></p></td>
<td><p>YAML file(s) containing clean configuration details</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-devices</span></code></p></td>
<td><p>list of devices to clean</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-device_image</span></code></p></td>
<td><p>space separated images per device with format device:/path/to/image.bin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-os-image</span></code></p></td>
<td><p>space separated images per OS with format os:/path/to/image.bin</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-group-image</span></code></p></td>
<td><p>space separated images per group with format group:/path/to/image.bin</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--clean-platform-image</span></code></p></td>
<td><p>space separated images per platform with format platform:/path/to/image.bin</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--loglevel</span></code></p></td>
<td><p>kleenex module loglevel</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--logdir</span></code></p></td>
<td><p>directory to save logs to</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--no-mail</span></code></p></td>
<td><p>disable sending email on abort</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--debug</span></code></p></td>
<td><p>Run kleenex in debug mode (synchronous clean, pdb on error)</p></td>
</tr>
</tbody>
</table>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">--help</span></code></dt><dd><p>used under command-line to provide help information w.r.t. available command
line arguments and how to use them.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>-help
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--testbed-file</span></code></dt><dd><p>specifies the topology <a class="reference internal" href="../topology/creation.html#topology-testbed-file"><span class="std std-ref">Testbed File</span></a> to load. This informs
Kleenex which actual testbed to work with.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>-testbed_file<span class="w"> </span>/path/to/my/testbed.yaml
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-file</span></code></dt><dd><p>specifies the YAML-formatted <a class="reference internal" href="inputs.html#clean-file"><span class="std std-ref">Clean File</span></a> or files describing how the
devices in the topology are to be brought up and/or cleaned. When multiple
files are provided, they are handled in the order provided, overriding any
shared values from the previous files. For more information on how the
contents of this file is used, refer to its
<a class="reference internal" href="inputs.html#clean-file"><span class="std std-ref">documentation</span></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">              </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-devices</span></code></dt><dd><p>specifies the list of devices to clean. If not specified, defaults to
cleaning all devices specified in the clean file that are also present in
the testbed file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-devices<span class="w"> </span>device_a<span class="w"> </span>device_b<span class="w"> </span>device_c<span class="se">\</span>
<span class="w">                               </span>--invoke-clean
</pre></div>
</div>
<p>Groups of devices to be sequentially cleaned may be specified via
nested list format.
In the following example, device_a, device_b and device_c are
cleaned in parallel, and only once complete are device_d and device_e
cleaned in parallel.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-devices<span class="w"> </span><span class="s2">&quot;[[device_a, device_b, device_c], [device_d, device_e]]&quot;</span><span class="se">\</span>
<span class="w">                               </span>--invoke-clean
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-device-image</span></code></dt><dd><p>specifies images to be used for clean per device. See
<a class="reference internal" href="../easypy/usages.html#kleenex-cli-image-format"><span class="std std-ref">the following</span></a> for
more details about the expected format of the images and the
precedence when images are provided through a combination of
<code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-os-image</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-group-image</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-platform-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml
<span class="w">                               </span>--invoke-clean
<span class="w">                               </span>--clean-device-image<span class="w"> </span>PE1:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-os-image</span></code></dt><dd><p>specifies images to be used for clean per OS. Uses same format as <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml
<span class="w">                               </span>--invoke-clean
<span class="w">                               </span>--clean-os-image<span class="w"> </span>iosxe:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-group-image</span></code></dt><dd><p>specifies images to be used for clean per group. Uses same format as <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml
<span class="w">                               </span>--invoke-clean
<span class="w">                               </span>--clean-group-image<span class="w"> </span>group1:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--clean-platform-image</span></code></dt><dd><p>specifies images to be used for clean per platform. Uses same format as <code class="xref py py-obj docutils literal notranslate"><span class="pre">--clean-device-image</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>run<span class="w"> </span>job<span class="w"> </span>jobfile.py<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                               </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml
<span class="w">                               </span>--invoke-clean
<span class="w">                               </span>--clean-platform-image<span class="w"> </span>n9k:/path/to/clean_image.bin
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--loglevel</span></code></dt><dd><p>specifies the logging level for Kleenex. Use this to increase or decrease
Kleenex module’s log output level for debugging purposes.  May be
specified in UPPERCASE or lowercase.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                  </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                  </span>--loglevel<span class="w"> </span>DEBUG
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--logdir</span></code></dt><dd><p>specifies the logging directory for Kleenex. In easypy mode, this defaults
to the <a class="reference internal" href="../easypy/behavior.html#easypy-runinfo"><span class="std std-ref">Easypy runinfo</span></a> directory. In decoupled mode,
this defaults to the current working directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                  </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                  </span>--logdir<span class="w"> </span>/tmp
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>when defaulting to current working directory, a folder named
<code class="docutils literal notranslate"><span class="pre">Kleenex_%Y%b%d_%H:%M:%S</span></code> is created per run.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--no-mail</span></code></dt><dd><p>disables sending email to user when abort/error is encountered.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                  </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                  </span>--no-mail
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--debug</span></code></dt><dd><p>put kleenex into debug mode.  May also be specified with the <code class="docutils literal notranslate"><span class="pre">-pdb</span></code>
command-line parameter.
In debug mode, kleenex runs its cleaners in series instead of in parallel.
If a cleaner worker throws an exception,
an interactive debugger is started at the point of failure.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bash$<span class="w"> </span>pyats<span class="w"> </span>clean<span class="w"> </span>--testbed-file<span class="w"> </span>/path/to/my/testbed.yaml<span class="se">\</span>
<span class="w">                  </span>--clean-file<span class="w"> </span>/path/to/my/clean.yaml<span class="se">\</span>
<span class="w">                  </span>--debug
</pre></div>
</div>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="inputs.html" class="btn btn-neutral float-right" title="Input Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>