<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyats.async package &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pyats.datastructures package" href="../datastructures/index.html" />
    <link rel="prev" title="pyats.robot.runner package" href="../robot/pyats.robot.runner.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">pyats.cli package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aetest/index.html">pyats.aetest package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../easypy/index.html">pyats.easypy package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topology/index.html">pyats.topology package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/index.html">pyats.connections package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kleenex/index.html">pyats.kleenex package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../robot/index.html">pyats.robot package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">pyats.async package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-pyats.async_.exceptions">Submodules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../datastructures/index.html">pyats.datastructures package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tcl/index.html">pyats.tcl package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../log/index.html">pyats.log package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporter/index.html">pyats.reporter package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../results/index.html">pyats.results package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html">pyats.utils package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aereport/index.html">pyats.aereport package</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Documentation</a></li>
      <li class="breadcrumb-item active">pyats.async package</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pyats.async_">
<span id="pyats-async-package"></span><h1>pyats.async package<a class="headerlink" href="#module-pyats.async_" title="Permalink to this heading">¶</a></h1>
<dl class="simple">
<dt>Module:</dt><dd><p><a href="#id1"><span class="problematic" id="id2">async_</span></a></p>
</dd>
<dt>Authors:</dt><dd><p>Siming Yuan (siyuan), CSG Test - Ottawa</p>
</dd>
</dl>
<section id="module-pyats.async_.exceptions">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-pyats.async_.exceptions" title="Permalink to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="pyats.async_.exceptions.ChildProcessException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.exceptions.</span></span><span class="sig-name descname"><span class="pre">ChildProcessException</span></span><a class="headerlink" href="#pyats.async_.exceptions.ChildProcessException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyats.async_.exceptions.ExceptionWithTraceback">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.exceptions.</span></span><span class="sig-name descname"><span class="pre">ExceptionWithTraceback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.exceptions.ExceptionWithTraceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="pyats.async_.exceptions.RemoteException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.exceptions.</span></span><span class="sig-name descname"><span class="pre">RemoteException</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.exceptions.RemoteException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyats.async_.exceptions.filter_exception">
<span class="sig-prename descclassname"><span class="pre">pyats.async_.exceptions.</span></span><span class="sig-name descname"><span class="pre">filter_exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.exceptions.filter_exception" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyats.async_.exceptions.rebuild_exc">
<span class="sig-prename descclassname"><span class="pre">pyats.async_.exceptions.</span></span><span class="sig-name descname"><span class="pre">rebuild_exc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.exceptions.rebuild_exc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<span class="target" id="module-pyats.async_.parallelcall"></span><dl class="py class">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.ChildLabor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.parallelcall.</span></span><span class="sig-name descname"><span class="pre">ChildLabor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.ChildLabor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ForkProcess</span></code></p>
<p>ChildLabor Class</p>
<p>Worker class, subclassing from multiprocessing.Process under ‘fork’ context.
The customizations in this class is designed purely for it to be called
under p-call.</p>
<p>built-in init</p>
<p>on top of native multiprocessing.Process instanciation, add also the
index (order) and queue (result pipe)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>int</strong><strong>)</strong> (<em>index</em>) – </p></li>
<li><p><strong>(</strong><strong>queue</strong><strong>)</strong> (<em>queue</em>) – parent.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.ChildLabor.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.ChildLabor.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the given target function in child processes. This is the default
entry point of multiprocessing.Process</p>
<p>Updates the Steps object with an offset if there is one.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>nothing. However, all returns and errors arising from the called</em></p></li>
<li><p><em>user target will be stored into the pipeline (queue) in the format</em></p></li>
<li><p><em>(index, boolean, result)</em></p></li>
<li><p><em>where the boolean represents whether the func call was successful (</em></p></li>
<li><p><em>no exception), and the result being either the exception, or the</em></p></li>
<li><p><em>result of the call</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.parallelcall.</span></span><span class="sig-name descname"><span class="pre">Pcall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ckwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ikwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">varkwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Pcall class</p>
<p>allows users to perform and control parallel calls (to an extend) using
this class. Initialization of this class allows for various combination of
arguments to be zipped together and passed to each parallel called
instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>list/callable</strong><strong>)</strong> (<em>targets</em>) – </p></li>
<li><p><strong>(</strong><strong>int</strong><strong>)</strong> (<em>timeout</em>) – </p></li>
<li><p><strong>(</strong><strong>tuple/list</strong><strong>)</strong> (<em>ikwargs</em>) – </p></li>
<li><p><strong>(</strong><strong>tuple/list</strong><strong>)</strong> – each instance. Each item should be also a tuple/list</p></li>
<li><p><strong>(</strong><strong>dict</strong><strong>)</strong> (<em>ckwargs</em>) – </p></li>
<li><p><strong>(</strong><strong>tuple/list</strong><strong>)</strong> – </p></li>
<li><p><strong>list/tuple</strong><strong>)</strong> (<em>varkwargs</em><em> (</em><em>dict of</em>) – value is a list of values corresponding
to that key-value argument of an
instance.</p></li>
</ul>
</dd>
</dl>
<p>Rules:</p>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="simple">
<dt>the number of parallel instances depends on the following factor:</dt><dd><ol class="loweralpha simple">
<li><p>number of targets provided (if more than 1)</p></li>
<li><p>number of instance arguments (iargs or ikwargs)</p></li>
<li><p>number of instance values (varkwargs)
combined together, whichever is shorter.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>the order of arguments is positional sensitive</p></li>
<li><p>the order of results list is the same as the child process order</p></li>
</ol>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.join">
<span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.join" title="Permalink to this definition">¶</a></dt>
<dd><p>blocks the current process until timeout is reached, or if all childs
finish executing their given job. Collects &amp; sets the result variable
after everything is finished. If a child process raises an exception
during execution, the same exception will be thrown here.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.kill">
<span class="sig-name descname"><span class="pre">kill</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.kill" title="Permalink to this definition">¶</a></dt>
<dd><p>kill (SIGKILL) all child processes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.livings">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">livings</span></span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.livings" title="Permalink to this definition">¶</a></dt>
<dd><p>livings</p>
<p>returns the list of all processes that are currently alive.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#property" title="(in Python v3.13)">property</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.pcall">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pcall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.pcall" title="Permalink to this definition">¶</a></dt>
<dd><p>pcall classmethod</p>
<p>Classmethod to allow short-cut calling of Pcall. This api wraps
Pcall’s start(), join() apis together, blocks and returns the results
of parallel calls in the order they were called.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.pids">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pids</span></span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.pids" title="Permalink to this definition">¶</a></dt>
<dd><p>list of pids after it’s all started</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.start" title="Permalink to this definition">¶</a></dt>
<dd><p>starts all child worker processes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.parallelcall.Pcall.terminate">
<span class="sig-name descname"><span class="pre">terminate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.parallelcall.Pcall.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>terminates all child processes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this might take a split second before it taking effect</p>
</div>
</dd></dl>

</dd></dl>

<span class="target" id="module-pyats.async_.synchronize"></span><dl class="py class">
<dt class="sig sig-object py" id="pyats.async_.synchronize.Lockable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.synchronize.</span></span><span class="sig-name descname"><span class="pre">Lockable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock=&lt;bound</span> <span class="pre">method</span> <span class="pre">BaseContext.RLock</span> <span class="pre">of</span> <span class="pre">&lt;multiprocessing.context.ForkContext</span> <span class="pre">object&gt;&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.Lockable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class that adds locking/unlocking (semaphore) to a class object,
allowing the class to be called in multiprocessing &amp; threading without
deadlocks: all method calls should first acquire the lock, perform its
dedicated action, then release the lock.</p>
<p>Subclassing this base-class is the preferred way to go when creating classes
that support locking and unlocking.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>user shall explicitly call this class’ __init__ using super()</p></li>
<li><p>user shall use this class’s lock() method instead of the generic
one decorating the methods that needs to be locked/unlocked.</p></li>
</ul>
</div>
<p>__init__</p>
<p>api to initialize the base class and set the built-in lock.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>(</strong><strong>multiprocessing.Lock</strong><strong>)</strong> (<em>lock</em>) – must be a subclass of mp.Lock().</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Beware that changing the lock can have detremental effects, eg,
Lock() vs RLock() differences, etc.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.synchronize.Lockable.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.Lockable.acquire" title="Permalink to this definition">¶</a></dt>
<dd><p>acquire the lock on this class instance. See python multiprocessing
documentation for details on lock acquire.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>bool</strong><strong>)</strong> (<em>block</em>) – acquired by this process/thread. Default to True,</p></li>
<li><p><strong>(</strong><strong>float</strong><strong>)</strong> (<em>timeout</em>) – many seconds before returning.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>True/False for whether lock was acquired or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.synchronize.Lockable.locked">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.Lockable.locked" title="Permalink to this definition">¶</a></dt>
<dd><p>locked decorator</p>
<p>This is the lock decorator defined exclusively for the Lockable()
class. It does the exact same thing as the generic lock()
decorator, but eliminates the need to explicitly check for whether
locking object exists or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>(</strong><strong>func</strong><strong>)</strong> (<em>method</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>new wrapped method that automatically invokes the lock</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.synchronize.Lockable.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.Lockable.release" title="Permalink to this definition">¶</a></dt>
<dd><p>releases the lock on this class instance. See python multiprocessing
documentation for details on lock release.</p>
<p>Only call this method when the calling process or thread owns the lock.
An AssertionError is raised if this method is called by a process or
thread other than the owner or if the lock is in an unlocked (unowned)
state.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyats.async_.synchronize.LockableMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyats.async_.synchronize.</span></span><span class="sig-name descname"><span class="pre">LockableMeta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.LockableMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a></p>
<p>Metaclass that adds locking/unlocking (semaphore) to a class’s methods,
allowing the class to be called in multiprocessing and multithreading
without deadlocks: all method calls will first acquire the lock, perform
its dedicated action, then release the lock.</p>
<p>The use of this metaclass eliminates user’s need to explicitly use lock()
decorator on each API.</p>
<p>The limitation of this metaclass is simple: if the user doesn’t make any
lock() api calls before forking, all locks fail.</p>
<p>Metaclass __new__</p>
<p>Metaclass api called before class creation. Hijacks the class creation
process and add to all function calls, a locking/unlocking semaphore for
multiprocessing scenarios for avoiding deadlocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>str</strong><strong>)</strong> (<em>name</em>) – </p></li>
<li><p><strong>(</strong><strong>list</strong><strong>)</strong> (<em>bases</em>) – </p></li>
<li><p><strong>(</strong><strong>dict</strong><strong>)</strong> (<em>attrs</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyats.async_.synchronize.LockableMeta.ignore">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ignore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.LockableMeta.ignore" title="Permalink to this definition">¶</a></dt>
<dd><p>decorator that allows user to mark an object (method) to be ignored by
the automatic mechanism that flags all methods as lock() methods. This
allows certain helper APIs to be called without waiting for a lock on
the parent instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>(</strong><strong>obj</strong><strong>)</strong> (<em>obj</em>) – </p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyats.async_.synchronize.locked">
<span class="sig-prename descclassname"><span class="pre">pyats.async_.synchronize.</span></span><span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyats.async_.synchronize.locked" title="Permalink to this definition">¶</a></dt>
<dd><p>lock decorator</p>
<p>This is a generic decorator method that adds locking (semaphore) to a class
method, allowing the class to posess locking/unlocking capabilities in a
forked multiprocessing &amp; multi-threading scenario.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>(</strong><strong>func</strong><strong>)</strong> (<em>method</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>new wrapped method that automatically invokes RLock()</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>internal implementation based on adding ‘__lock__’ attribute to parent
class instance, and using multiprocessing.Rlock() class.</p>
<p>due to the above, if ‘__lock__’ is instantiated first in a child
process, the locking/unlocking mechanism would be broken. Make sure to
always instantiate the lock (by calling an lock function or equivalent)
inside the main process before forking.</p>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../robot/pyats.robot.runner.html" class="btn btn-neutral float-left" title="pyats.robot.runner package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../datastructures/index.html" class="btn btn-neutral float-right" title="pyats.datastructures package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>