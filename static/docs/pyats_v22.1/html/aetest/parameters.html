<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test Parameters &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Looping Sections" href="loop.html" />
    <link rel="prev" title="Runtime Behavior" href="behavior.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">AEtest - Test Infrastructure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="structure.html">Script Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Object Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="behavior.html">Runtime Behavior</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Test Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-whys">The Whys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relationship-model">Relationship Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters-property">Parameters Property</a></li>
<li class="toctree-l3"><a class="reference internal" href="#script-arguments">Script Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters-as-function-arguments">Parameters as Function Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#callable-parameters">Callable Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parametrizing-functions">Parametrizing Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reserved-parameters">Reserved Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="loop.html">Looping Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="results.html">Section Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="steps.html">Section Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">Running TestScripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="processors.html">Section Processors</a></li>
<li class="toctree-l2"><a class="reference internal" href="datafile.html">Datafile Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="control.html">Flow Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="reports.html">Report Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">AEtest - Test Infrastructure</a></li>
      <li class="breadcrumb-item active">Test Parameters</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="test-parameters">
<span id="id1"></span><h1>Test Parameters<a class="headerlink" href="#test-parameters" title="Permalink to this heading">Â¶</a></h1>
<aside class="sidebar">
<p class="sidebar-title">Helpful Reading</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.4/tutorial/controlflow.html#more-on-defining-functions">Function Arguments</a></p></li>
<li><p><a class="reference external" href="http://en.wikipedia.org/wiki/Data-driven_programming">Data-Driven Programming</a></p></li>
<li><p><a class="reference external" href="http://en.wikibooks.org/wiki/Python_Programming/Data_Types#Mutable_vs_Immutable_Objects">Mutable/Immuntable Objects</a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.4/reference/executionmodel.html">Variable Scoping</a></p></li>
</ul>
</aside>
<p><code class="docutils literal notranslate"><span class="pre">aetest</span></code> is a data-driven test infrastructure. Its scripts and testcases are
intended to be driven dynamically by:</p>
<ul class="simple">
<li><p>data in the form of input arguments to the testscript</p></li>
<li><p>dynamic data generated during runtime</p></li>
</ul>
<p>The collection of dynamic data that artificially affects the behavior of
testscripts and testcases in <code class="docutils literal notranslate"><span class="pre">aetest</span></code> is called <strong>parameters</strong>. It adheres to
a pre-defined set of parent/child propagation relationships, and may be used as
<a class="reference external" href="https://docs.python.org/3.4/tutorial/controlflow.html#more-on-defining-functions">Function Arguments</a> to each test section.</p>
<p>This feature is a supplement to static testcase data (attribute values stored
within each testcases).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The concept of parameters in <code class="docutils literal notranslate"><span class="pre">aetest</span></code> and its underlying object
relationship model is rather complex. This section of the documentation
is structured so that the understanding of this core concept is built-up
iteratively - <em>peeling the onion</em>.</p>
</div>
<section id="the-whys">
<h2>The Whys<a class="headerlink" href="#the-whys" title="Permalink to this heading">Â¶</a></h2>
<p>Before delving deeper into the concept and mechanism of <strong>parameters</strong>, letâs
first spend some time on what it is, why they are needed, and how they may
benefit the end user.</p>
<p>Parameters are a special kind of variable, used within functions and methods to
refer and access its input data (arguments). If you consider the function and
methods as the âdoerâ, then parameters are the âwhat to do withâ. Eg, an
<code class="docutils literal notranslate"><span class="pre">add</span></code> function would require 2 or more parameters to be âadded togetherâ.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   parameters &amp; arguments</span>

<span class="c1"># static base value</span>
<span class="n">c</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># within the scope of this function definition</span>
<span class="c1"># &quot;a&quot; and &quot;b&quot; are considered its function parameters</span>
<span class="c1"># and accessible within the function as variables a and b</span>
<span class="c1"># &quot;c&quot; is a static data value.</span>
<span class="k">def</span> <span class="nf">add_to_c</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a=&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span>

<span class="c1"># when calling this function</span>
<span class="c1"># 1 and 2 are called arguments to this function</span>
<span class="c1"># which is mapped to function parameters positionally as</span>
<span class="c1"># a=1, b=2 within the actual function</span>
<span class="n">add_to_c</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1"># 103</span>
</pre></div>
</div>
<p>In a data-driven testing, testscripts are the <em>doers</em>, performing the act
of testing a facet of some product. Its arguments and parameters are thus the
input data that influences the specific acts of testing being carried out. Here
are some possible use cases:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">testbed</span></code> argument to a script tells it which testbed to run on, and
what the topology is like. The script can then connect to the testbed, and
decide how to perform the testing best suited for this topology.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vlan</span></code> argument to <code class="docutils literal notranslate"><span class="pre">layer2_traffic</span></code> script can dynamically control the
vlan to be be configured for traffic testing.</p></li>
<li><p>other toggle arguments that dynamically turns on/off certain testcases,
and/or combination of features to be configured &amp; tested</p></li>
<li><p>etc.</p></li>
</ul>
</div></blockquote>
<p>Of course, the parameters feature in <code class="docutils literal notranslate"><span class="pre">aetest</span></code> is much more than just script
arguments. It enables users to write testcases and testscripts that are capable
of being driven by inputs, varying the degree of testing, etc.</p>
</section>
<section id="relationship-model">
<h2>Relationship Model<a class="headerlink" href="#relationship-model" title="Permalink to this heading">Â¶</a></h2>
<p>In <code class="docutils literal notranslate"><span class="pre">aetest</span></code>, parameters are <strong>relative</strong>: parameters corresponding to each
object is the combination of its local specific parameters, and all of its
parent objectâs parameters. Eg:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Testcase</span></code> parameters = local parameters + <code class="docutils literal notranslate"><span class="pre">TestScript</span></code>
parameters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TestSection</span></code> parameters = local parameters + <code class="docutils literal notranslate"><span class="pre">Testcase</span></code>
parameters + <code class="docutils literal notranslate"><span class="pre">TestScript</span></code> parameters.</p></li>
</ul>
<p>This relationship follows the <a class="reference internal" href="behavior.html#parent"><span class="std std-ref">parent</span></a> model described in the previous
runtime behaviors section: each object has a parent, and the parameters seen
at each object level is an aggregation of its and all of its parentâs
parameters.</p>
<p>In case when an object and its parent (or its parentâs parent, etc) have the same
parameter names defined, then the parameter value closest to the current scope
is used/prefered.</p>
<figure class="align-center" id="id3">
<img alt="../_images/parameter_relations.png" src="../_images/parameter_relations.png" />
<figcaption>
<p><span class="caption-text"><em>Parameter Relationship Model In a Nutshell</em></span><a class="headerlink" href="#id3" title="Permalink to this image">Â¶</a></p>
</figcaption>
</figure>
<p>Below is a behavior demonstration of this relationship model. In actual script
execution, this happens behind-the-scenes automatically.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   pseudo-code, intending to demonstrate the behavior relationship</span>
<span class="c1">#   of object parameters &amp; their parents.</span>

<span class="c1"># in this example, assume there are the following objects:</span>
<span class="c1">#</span>
<span class="c1">#   testscript: the TestScript object</span>
<span class="c1">#   testcase:   the Testcase object. (parent=testscript)</span>

<span class="c1"># testscript has parameters</span>
<span class="n">testscript</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;param_A&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;param_B&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># testcase has the following local parameters</span>
<span class="c1"># note that &quot;param_A&quot; is already defined at its parent level</span>
<span class="c1"># but &quot;param_C&quot; is new</span>
<span class="n">testcase</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;param_A&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">&#39;param_C&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># during runtime, the combined parameters seen at the</span>
<span class="c1"># testcase level, would be equivalent to the following:</span>
<span class="c1">#   - take the testscript parameters as basis</span>
<span class="c1">#   - and add to it, testcase parameters</span>
<span class="c1">#</span>
<span class="c1"># eg:</span>
<span class="n">new_testcase_parameters</span> <span class="o">=</span> <span class="n">testscript</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_testcase_parameters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">testcase</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
<span class="n">testcase</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">new_testcase_parameters</span>

<span class="c1"># so that the new parameters seen at the testcase</span>
<span class="c1"># level, is:</span>
<span class="n">testcase</span><span class="o">.</span><span class="n">parameters</span>
<span class="c1"># {&#39;param_A&#39;: 100, &#39;param_B&#39;: 2, &#39;param_C&#39;: 3}</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>in other words, childs inherits but shadows parent parameters. This is
similar to Python <a class="reference external" href="https://docs.python.org/3.4/reference/executionmodel.html">Variable Scoping</a> concept.</p>
</div>
</section>
<section id="parameters-property">
<h2>Parameters Property<a class="headerlink" href="#parameters-property" title="Permalink to this heading">Â¶</a></h2>
<p>Every top-level object in <code class="docutils literal notranslate"><span class="pre">aetest</span></code> comes with the special <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
property: a dictionary containing the key/value data pairs relative to this
object (<a class="reference internal" href="objects.html#object-model"><span class="std std-ref">Object Model</span></a>). Its default values can be set/updated by the user
within the testscript.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   an aetest testscript with lots of parameters pre-defined</span>
<span class="c1">#   (pre-definition: defining parameters within the script directly)</span>

<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">aetest</span>

<span class="c1"># testscript level default parameters can be defined by</span>
<span class="c1"># setting a dictionary within your testscript named &quot;parameters&quot;</span>
<span class="c1"># (this is a reserved keyword)</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;testscript_param_A&#39;</span><span class="p">:</span> <span class="s1">&#39;some value&#39;</span><span class="p">,</span>
    <span class="s1">&#39;testscript_param_B&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;generic_param_A&#39;</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>

<span class="c1"># using Testcase to demonstrate TestContainer-type parameters definitions</span>
<span class="c1"># note that this also is applicable to CommonSetup &amp; CommonCleanup</span>
<span class="k">class</span> <span class="nc">Testcase</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>

    <span class="c1"># all default parameters specific to this testcase is declared</span>
    <span class="c1"># in its own parameters dictionary.</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;generic_param_A&#39;</span><span class="p">:</span> <span class="mi">200</span>
    <span class="p">}</span>

    <span class="c1"># etc ...</span>
</pre></div>
</div>
<p>During runtime, these dictionaries form the baseline <code class="docutils literal notranslate"><span class="pre">parameters</span></code> properties
of their corresponding section. Eg:</p>
<blockquote>
<div><ul class="simple">
<li><p>script-level <code class="docutils literal notranslate"><span class="pre">parameters</span></code> dictionary is used to create <code class="docutils literal notranslate"><span class="pre">TestScript</span></code>
object parameters.</p></li>
<li><p>Testcase-level <code class="docutils literal notranslate"><span class="pre">parameters</span></code> dictionary is used to create that
<code class="docutils literal notranslate"><span class="pre">Testcase</span></code> object parameter.</p></li>
</ul>
</div></blockquote>
<p>One exception to the above is method local parameters for sections such as
<code class="docutils literal notranslate"><span class="pre">subsection</span></code>, <code class="docutils literal notranslate"><span class="pre">setup</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span></code> and <code class="docutils literal notranslate"><span class="pre">cleanup</span></code>. Even though their
corresponding classes (<code class="docutils literal notranslate"><span class="pre">Subection</span></code>, <code class="docutils literal notranslate"><span class="pre">SetupSection</span></code>, <code class="docutils literal notranslate"><span class="pre">TestSection</span></code>,
<code class="docutils literal notranslate"><span class="pre">CleanupSection</span></code>) also have the parameters property, these class instances
only exists briefly during runtime (see <a class="reference internal" href="objects.html#aetest-function-classes"><span class="std std-ref">Function Classes</span></a>), so
their attributes are mostly only dynamic in nature, set &amp; controlled by the
infrastructure. This is also coupled with the fact that adding attributes (such
as <code class="docutils literal notranslate"><span class="pre">parameters</span></code>) to methods definitions are rather awkward to code in the
script. Thus, for all intents and purposes, consolidate section specific
parameters to their parent <code class="docutils literal notranslate"><span class="pre">TestContainer</span></code> sections.</p>
<p>In addition to pre-defined parameters within the script, it is also possible to
dynamically access &amp; update parameters.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>even though parameters seen at each object level also includes its parentâs
parameters, setting &amp; updating the parameters dictionary is only reflected
locally, and does not propagate to the parent. This is also inline with how
Python  <a class="reference external" href="https://docs.python.org/3.4/reference/executionmodel.html">Variable Scoping</a> works.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   continuing from the above</span>

<span class="c1"># re-defining the testcase for the sake of code-continuity</span>
<span class="k">class</span> <span class="nc">Testcase</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>

    <span class="c1"># local parameters defaults, same as above</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;generic_param_A&#39;</span><span class="p">:</span> <span class="mi">200</span>
    <span class="p">}</span>

    <span class="c1"># within any sections, the parent container parameters are directly</span>
    <span class="c1"># accessible (applicable to setup/test/cleanup and subsections)</span>

    <span class="c1"># here we&#39;ll do a combination access &amp; updating of parameters</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">setup</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># add to the parameters dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;new_parameter_from_setup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;new value&#39;</span>

        <span class="c1"># overwrite a testscript parameter</span>
        <span class="c1"># note that this creates a local parameter with the same</span>
        <span class="c1"># name, and shadows the one from the parent testscript.</span>
        <span class="c1"># the actual parent testscript parameter is unchanged.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;testscript_param_A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;another value&#39;</span>

    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># access &amp; print parent testscript parameters</span>
        <span class="c1"># (following the parent model)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="c1"># {&#39;generic_param_A&#39;: 100,</span>
        <span class="c1">#  &#39;testscript_param_B&#39;: [],</span>
        <span class="c1">#  &#39;testscript_param_A&#39;: &#39;some value&#39;}</span>

        <span class="c1"># access &amp; print all current known parameter</span>
        <span class="c1"># this also includes any parameters from the parent</span>
        <span class="c1"># (shadowed by local parameters, if the same name exists)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="c1"># {&#39;new_parameter_from_setup&#39;: &#39;new value&#39;,</span>
        <span class="c1">#  &#39;generic_param_A&#39;: 200,</span>
        <span class="c1">#  &#39;testscript_param_B&#39;: [],</span>
        <span class="c1">#  &#39;testscript_param_A&#39;: &#39;another value&#39;}</span>
</pre></div>
</div>
<p>Consider the above example: parameters can be set and acccessed as the script
runs, opening up the opportunity for scripts to dynamically discover the runtime
environment and modify test behavior (parameters) as required. Eg, <code class="docutils literal notranslate"><span class="pre">setup</span></code>
section of modifying testcase parameters based on current testbed state, and
altering the behavior of ensuiting <code class="docutils literal notranslate"><span class="pre">test</span></code> sections, etc.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">parameters</span></code> properties are implemented internally as a <code class="docutils literal notranslate"><span class="pre">ChainMap</span></code>
object. See <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.ChainMap">Collections.ChainMap</a> documentation if you are eager to know.</p>
</div>
</section>
<section id="script-arguments">
<span id="script-args"></span><h2>Script Arguments<a class="headerlink" href="#script-arguments" title="Permalink to this heading">Â¶</a></h2>
<p>In short, any arguments passed to the testscript before startup becomes part of
the <code class="docutils literal notranslate"><span class="pre">TestScript</span></code> parameter. This includes all the arguments passed through the
<a class="reference internal" href="../easypy/jobfile.html#easypy-jobfile"><span class="std std-ref">Jobfiles</span></a> during <a class="reference internal" href="run.html#aetest-jobfile-execution"><span class="std std-ref">Easypy Execution</span></a>, and/or any command
line arguments parsed and passed to <code class="docutils literal notranslate"><span class="pre">aetest.main()</span></code> during
<a class="reference internal" href="run.html#aetest-standalone-execution"><span class="std std-ref">Standalone Execution</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   script parameters and how it works</span>
<span class="c1">#   (pseudo code, for demonstration only)</span>

<span class="c1"># without going into details of how script parameters/arguments are</span>
<span class="c1"># passed in (covered under Running Scripts section)</span>

<span class="c1"># assuming that the testscript was called with the following inputs</span>
<span class="n">script_arguments</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;arg_a&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s1">&#39;arg_c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># and that the script file has the following parameters defined</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;arg_a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;arg_b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># the TestScript parameter would be built as follows</span>
<span class="n">testscript</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">parameters</span>
<span class="n">testscript</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">script_arguments</span><span class="p">)</span>

<span class="c1"># the resulting values</span>
<span class="n">testscript</span><span class="o">.</span><span class="n">parameters</span>
<span class="c1"># {&#39;arg_a&#39;: 100,</span>
<span class="c1">#  &#39;arg_b&#39;: 2,</span>
<span class="c1">#  &#39;arg_c&#39;: 3}</span>
</pre></div>
</div>
<p>As demonstrated in the above example, script arguments/parameters are actually
added on top of <code class="docutils literal notranslate"><span class="pre">TestScript</span></code> parameters defined within the script. In
other words, script arguments are added dynamically to the current running
scriptâs base parameters, and overwrites any existing ones.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>define your default parameters in the script, and change the behavior of
the testscript by overwriting specific ones using script arguments.</p>
</div>
</section>
<section id="parameters-as-function-arguments">
<span id="parameters-as-funcargs"></span><h2>Parameters as Function Arguments<a class="headerlink" href="#parameters-as-function-arguments" title="Permalink to this heading">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">parameters</span></code> property &amp; functionality provides a means for objects within
<code class="docutils literal notranslate"><span class="pre">aetest</span></code> to follow the <a class="reference internal" href="behavior.html#parent"><span class="std std-ref">parent</span></a> model and aggregate data together in a
clean, accessible format. It serves also as the basis for providing section
methods their <a class="reference external" href="https://docs.python.org/3.4/tutorial/controlflow.html#more-on-defining-functions">Function Arguments</a>. This is the main mechanism behind the
data-driven concept of <code class="docutils literal notranslate"><span class="pre">aetest</span></code>: function/methods are <strong>driven</strong> by input
parameters.</p>
<p>During runtime, all section method function arguments are filled by their
corresponding parameter value, matching the argument name vs. the parameter
key/name. The following table describes the types of function arguments and
their supports.</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Function Argument Types &amp; Parameters Support</span><a class="headerlink" href="#id4" title="Permalink to this table">Â¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>keyword args</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">my_param</span></code></p></td>
<td><p>matched up with the corresponding parameter</p></td>
</tr>
<tr class="row-odd"><td><p>argument defaults</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">my_param=10</span></code></p></td>
<td><p>default value used when the
parameter is undefined</p></td>
</tr>
<tr class="row-even"><td><p>arbitrary args</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*args</span></code></p></td>
<td><p>not supported</p></td>
</tr>
<tr class="row-odd"><td><p>arbitrary keywords</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">**kwargs</span></code></p></td>
<td><p>all known parameters are passed in</p></td>
</tr>
<tr class="row-even"><td><p>keywords-only args</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*,</span> <span class="pre">my_param</span></code></p></td>
<td><p>same as keyword args
(python-3 only)</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   parameters as function arguments</span>

<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">aetest</span>

<span class="c1"># define some default script-level parameters</span>
<span class="c1">#   param_A: a static value of 1</span>
<span class="c1">#   param_B: an empty dictionary</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;param_A&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;param_B&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Testcase</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>

    <span class="c1"># this setup section definition identifies &quot;param_B&quot; as</span>
    <span class="c1"># as a input requirement. as this parameter is available at this</span>
    <span class="c1"># testcase level (aggregated from parent testscript), it</span>
    <span class="c1"># is passed in as input</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">setup</span>
    <span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_B</span><span class="p">):</span>

        <span class="c1"># param_B is a dictionary (mutable)</span>
        <span class="c1"># any modification to this dictionary persists</span>
        <span class="n">param_B</span><span class="p">[</span><span class="s1">&#39;new_key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;a key added during setup section&quot;</span>

    <span class="c1"># section needing both &quot;param_A&quot; and &quot;param_B&quot;</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">test_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_A</span><span class="p">,</span> <span class="n">param_B</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">param_A</span><span class="p">)</span>
        <span class="c1"># 1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">param_B</span><span class="p">)</span>
        <span class="c1"># {&#39;new_key&#39;: &#39;a key added during setup section&#39;}</span>

    <span class="c1"># calling for a non-existent parameter</span>
    <span class="c1"># hence the default value is taken</span>
    <span class="c1"># (if no defaults are provided, an exception is raised)</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">test_two</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_non_existent</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">param_non_existent</span><span class="p">)</span>
        <span class="c1"># 1000</span>

    <span class="c1"># using arbitrary keywords **kwargs</span>
    <span class="c1"># all known parameters are passed in as a dictionary</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">cleanup</span>
    <span class="k">def</span> <span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># {&#39;param_A&#39;: 1,</span>
        <span class="c1">#  &#39;param_B&#39;: {&#39;new_key&#39;: &#39;a key added during setup section&#39;}}</span>
</pre></div>
</div>
<p>This is the preferred method of accessing parameters: by passing each in
explicitly as function arguments. It is more pythonic:</p>
<blockquote>
<div><ul class="simple">
<li><p>explictly passing in parameters makes the code (and its dependencies)
easier to read and understand</p></li>
<li><p>allows the infrastructure to handle error scenarios (such as missing
parameters)</p></li>
<li><p>allows users to easily define defaults (without dealing with dictionary
operations)</p></li>
<li><p>maintaining the ability to call each section as a function with various
arguments during test/debugging situations.</p></li>
<li><p>etcâ¦</p></li>
</ul>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>once a parameter is passed into a section as a function argument, it becomes
a local variable. All rules of <a class="reference external" href="https://docs.python.org/3.4/reference/executionmodel.html">Variable Scoping</a> apply.</p>
</div>
</section>
<section id="callable-parameters">
<h2>Callable Parameters<a class="headerlink" href="#callable-parameters" title="Permalink to this heading">Â¶</a></h2>
<p>A callable parameter is a one that evaluates to <code class="docutils literal notranslate"><span class="pre">True</span></code> using <a class="reference external" href="https://docs.python.org/3.4/library/functions.html#callable">callable</a>. When
a callable parameter is filled as a function argument to test sections, the
infrastructure âcallsâ it, and uses its return value as the actual argument
parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   callable parameter example</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">aetest</span>

<span class="c1"># define a callable parameter called &quot;number&quot;</span>
<span class="c1"># the provided parameter value is the random function, imported</span>
<span class="c1"># from python random library.</span>
<span class="c1"># when called, random.random() generates a float number between 0 and 1</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Testcase</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>

    <span class="c1"># as the &quot;number&quot; parameter&#39;s value is the callable function</span>
    <span class="c1"># random.random, this function is evaluated right before the</span>
    <span class="c1"># execution of this test method, and the call result is then used</span>
    <span class="c1"># as the actual argument input</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>

        <span class="c1"># test whether the generated number is greater than 0.5</span>
        <span class="k">assert</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="mf">0.5</span>
        <span class="c1"># if you run this test enough times</span>
        <span class="c1"># you will find that it passes exactly 50% of the time</span>
        <span class="c1"># assuming that random.random() generate truly random numbers :)</span>

        <span class="c1"># note that callable parameters are only evaluated if used</span>
        <span class="c1"># as function arguments. they are still objects if viewed</span>
        <span class="c1"># through the parameters property</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span>
        <span class="c1"># &lt;built-in method random of Random object at 0x91e2fc4&gt;</span>
</pre></div>
</div>
<p>Callable parameters still shows up as their original function object when
accessed through <code class="docutils literal notranslate"><span class="pre">parameters</span></code> property. They are only evaluated (called) when
used as function arguments to test methods. This evaluation occurs âon demandâ:</p>
<blockquote>
<div><ul class="simple">
<li><p>the evalution takes place right before method execution.</p></li>
<li><p>each method gets its own indepedent evaluated result.</p></li>
</ul>
</div></blockquote>
<p>The only limitation with callable parameters is that they cannot have arguments.
<code class="docutils literal notranslate"><span class="pre">aetest</span></code> would not know how to fulfill them during runtime.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>eliminate function arguments (by pre-setting them) with
<a class="reference external" href="https://docs.python.org/3.4/library/functools.html#functools.partial">partial functions</a>.</p>
</div>
</section>
<section id="parametrizing-functions">
<h2>Parametrizing Functions<a class="headerlink" href="#parametrizing-functions" title="Permalink to this heading">Â¶</a></h2>
<p>Parametrized functions are a special breed of âsmartâ callable parameters. They
support arguments, are capable of identifying the current execution context, and
act accordingly.</p>
<p>A parametrized function is declared when the <code class="docutils literal notranslate"><span class="pre">&#64;parameters.parametrize</span></code>
decorator is used on a function in your testscript. This also adds the newly
created parametrized function automatically as part of <code class="docutils literal notranslate"><span class="pre">TestScript</span></code>
parameters, using the function name as the parameter name.</p>
<p>During runtime, the behavior of these parametrized functions is exactly
identical to its callable parameter sibling, with the following additions:</p>
<blockquote>
<div><ul class="simple">
<li><p>any arguments to the <code class="docutils literal notranslate"><span class="pre">&#64;parameters.parametrize</span></code> decorator are stored
and used as function arguments during the evaluation.</p></li>
<li><p>if an argument named <code class="docutils literal notranslate"><span class="pre">section</span></code> is defined for a parametrized function,
the current section object is passed to the function.</p></li>
</ul>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   parametrized function example</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">aetest</span>

<span class="c1"># defining a parametrized function called &quot;number&quot;</span>
<span class="c1"># ------------------------------------------------</span>
<span class="c1"># this function accepts a lower and an upper bound, and</span>
<span class="c1"># uses the random.randint() api to do the actual work.</span>
<span class="c1"># as part of this parametrization declaration, notice that</span>
<span class="c1"># a lower_bound and an upper_bound was provided. these values</span>
<span class="c1"># are used as function arguments when the function is evaluated</span>
<span class="nd">@aetest</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="n">lower_bound</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">lower_bound</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">)</span>


<span class="c1"># defining a parametrized function named &quot;expectation&quot;</span>
<span class="c1"># ----------------------------------------------------</span>
<span class="c1"># this is a smart function: it can decide what to return</span>
<span class="c1"># based on the current section object information.</span>
<span class="c1"># it accepts the current section as input, and</span>
<span class="c1"># returns 999 when the section uid is &#39;expected_to_pass&#39;, or 0 otherwise.</span>
<span class="nd">@aetest</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">parametrize</span>
<span class="k">def</span> <span class="nf">expectation</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">section</span><span class="o">.</span><span class="n">uid</span> <span class="o">==</span> <span class="s1">&#39;expected_to_pass&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">9999</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="mi">0</span>

<span class="c1"># as previously stated, there&#39;s no need to add parametrized functions</span>
<span class="c1"># to the parameters dict(). They are automatically discovered and added.</span>

<span class="c1"># defining two tests under this testcase</span>
<span class="c1"># ----------------------------------------------</span>
<span class="c1"># similar to callable parameters, the above parameters</span>
<span class="c1"># are evaluated when used as function arguments to section</span>
<span class="c1"># the only difference is the support for parameter function arguments.</span>
<span class="k">class</span> <span class="nc">Testcase</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>

    <span class="c1"># this section is expected to pass</span>
    <span class="c1"># the generated number is between 1 and 100, and the</span>
    <span class="c1"># expectation is 9999 (as section uid is &quot;expected_to_pass&quot;)</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">expected_to_pass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">expectation</span><span class="p">):</span>
        <span class="c1"># test whether expectation is &gt; than generated number</span>
        <span class="k">assert</span> <span class="n">expectation</span> <span class="o">&gt;</span> <span class="n">number</span>

    <span class="c1"># this section is expected to fail</span>
    <span class="c1"># the generated number is still between 1 and 100, but the</span>
    <span class="c1"># expectation is 0 (as section uid is not &quot;expected_to_pass&quot;)</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">expected_to_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">,</span> <span class="n">expectation</span><span class="p">):</span>
        <span class="c1"># test whether expectation is &gt; than generated number</span>
        <span class="k">assert</span> <span class="n">expectation</span> <span class="o">&gt;</span> <span class="n">number</span>
</pre></div>
</div>
<p>Essentially, parametrized functions allows users to create smart, dynamic
parameter values that can vary based on the current state of execution: by
leveraging the <a class="reference internal" href="objects.html#object-model"><span class="std std-ref">Object Model</span></a> and <a class="reference internal" href="behavior.html#parent"><span class="std std-ref">parent</span></a> relationship, the use cases
are endless:</p>
<blockquote>
<div><ul class="simple">
<li><p>return values based on current or parent section uid/type/result</p></li>
<li><p>return values based on a combination of parameters available to the curent
section</p></li>
<li><p>etc.</p></li>
</ul>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>when using <code class="docutils literal notranslate"><span class="pre">section</span></code> argument in parametrized function, the provided
section object is the same as the internal parameter described in the next
topic below. Try not to break stuff.</p>
</div>
</section>
<section id="reserved-parameters">
<span id="id2"></span><h2>Reserved Parameters<a class="headerlink" href="#reserved-parameters" title="Permalink to this heading">Â¶</a></h2>
<p>Reserved parameters are those that are generated by the test infrastructure
during runtime. They are not normally seen when accessing the <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
dictionary property, but are extremely useful when you need to refer to
<code class="docutils literal notranslate"><span class="pre">aetest</span></code> internal objects that are normally unaccessible, and are needed when
using certain <code class="docutils literal notranslate"><span class="pre">aetest</span></code> optional features, such as <a class="reference internal" href="steps.html#aetest-steps"><span class="std std-ref">Section Steps</span></a>.</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">Current Reserved Parameters</span><a class="headerlink" href="#id5" title="Permalink to this table">Â¶</a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">testscript</span></code></p></td>
<td><p>internal</p></td>
<td><p>proxy to the <code class="docutils literal notranslate"><span class="pre">TestScript</span></code> object</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">section</span></code></p></td>
<td><p>internal</p></td>
<td><p>proxy to the current test section object.
Eg: <code class="docutils literal notranslate"><span class="pre">TestSection</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">steps</span></code></p></td>
<td><p>feature</p></td>
<td><p>proxy to <code class="docutils literal notranslate"><span class="pre">Steps</span></code> object for <a class="reference internal" href="steps.html#aetest-steps"><span class="std std-ref">Section Steps</span></a>
feature.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Reserved Parameter Types
------------------------

internal: parameter offering access to AEtest internal objects
feature: optional feature, enabled only when parameter is used as funcargs
</pre></div>
</div>
<p>Reserved parameters are special: they are only accessible if their name is
provided as a keyword argument to test methods (or in the case of parametrized
functions, <code class="docutils literal notranslate"><span class="pre">section</span></code> as a function input argument). They remain hidden in all
other cases.</p>
<p>They are <em>reserved</em>: eg, they are resolved first and takes precedence over
normal parameters. In the case where a normal parameter is created with the
same name, that parameter is only accessible using the <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
property, and is not useable as a function argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   accessing reserved parameters</span>

<span class="kn">from</span> <span class="nn">pyats</span> <span class="kn">import</span> <span class="n">aetest</span>

<span class="c1"># using CommonSetup as an example</span>
<span class="c1"># also applicable to other TestContainer classes</span>
<span class="k">class</span> <span class="nc">CommonSetup</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">CommonSetup</span><span class="p">):</span>

    <span class="c1"># create a local parameter with the same name</span>
    <span class="c1"># as the reserved parameter</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;steps&#39;</span><span class="p">:</span> <span class="nb">object</span><span class="p">(),</span>
    <span class="p">}</span>

    <span class="c1"># access reserved parameters by providing their</span>
    <span class="c1"># names as keyword arguments to methods</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">subsection</span>
    <span class="k">def</span> <span class="nf">subsection_one</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">testscript</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">steps</span><span class="p">):</span>
        <span class="c1"># testscript object has an attribute called module</span>
        <span class="c1"># which is this testscript&#39;s module</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">testscript</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
        <span class="c1"># &lt;module &#39;example_script&#39; from &#39;/path/to/example.py&#39;&gt;</span>

        <span class="c1"># current section object is Subsection</span>
        <span class="c1"># and subsections have a unique uid</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">section</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span>
        <span class="c1"># subsection_one</span>

        <span class="c1"># steps object enables the usages of steps</span>
        <span class="k">with</span> <span class="n">steps</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;a new demo step&#39;</span><span class="p">):</span>
            <span class="k">pass</span>

    <span class="c1"># reserved parameters do not show up in **kwargs</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">subsection</span>
    <span class="k">def</span> <span class="nf">subsection_two</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1"># only the locally defined steps parameter show up</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="c1"># {&#39;steps&#39;: &lt;object object at 0xf76fec80&gt;}</span>

    <span class="c1"># reserved paramters takes precedence when resolved.</span>
    <span class="nd">@aetest</span><span class="o">.</span><span class="n">subsection</span>
    <span class="k">def</span> <span class="nf">subsection_three</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">):</span>

        <span class="c1"># test steps is not the same as local paramter</span>
        <span class="n">steps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;steps&#39;</span><span class="p">]</span>
        <span class="c1"># True</span>
</pre></div>
</div>
<p>Reserved parameters provides <code class="docutils literal notranslate"><span class="pre">aetest</span></code> a mechanism to offer optional features
without polluting the <a class="reference internal" href="objects.html#object-model"><span class="std std-ref">Object Model</span></a> with additional attributes. It also
allows users to write testscripts that delve deeper and interact with the
internals of <code class="docutils literal notranslate"><span class="pre">aetest</span></code> using a supported method, instead of hacking around.</p>
<blockquote>
<div><p><em>With great power, comes great responsibilities</em> - use them wisely.</p>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>there is no reserved parameter for the current <code class="docutils literal notranslate"><span class="pre">TestContainer</span></code>, as the
class instance is naturally provided to bound methods as the first
argument (eg, <code class="docutils literal notranslate"><span class="pre">self</span></code>).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>modifying internal parameters without knowing what youâre doing may result
in catastrophic failures, and/or inexplicable script behaviors.</p>
<p>Monkey patching internals is strictly prohibited. Doing so will void your
warranty: <strong>no further support will be provided.</strong></p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="behavior.html" class="btn btn-neutral float-left" title="Runtime Behavior" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="loop.html" class="btn btn-neutral float-right" title="Looping Sections" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>