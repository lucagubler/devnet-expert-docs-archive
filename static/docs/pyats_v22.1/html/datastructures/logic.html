<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Logic Testing &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration Container" href="configuration.html" />
    <link rel="prev" title="Orderable Dictionary" href="orderabledict.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Datastructures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="attrdict.html">Attribute Dictionaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="weaklist.html">Weak List References</a></li>
<li class="toctree-l2"><a class="reference internal" href="listdict.html">Dictionary Represented Using Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="orderabledict.html">Orderable Dictionary</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Logic Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logic-string-inputs">Logic String Inputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Datastructures</a></li>
      <li class="breadcrumb-item active">Logic Testing</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="logic-testing">
<span id="logic-tests"></span><h1>Logic Testing<a class="headerlink" href="#logic-testing" title="Permalink to this heading">¶</a></h1>
<aside class="sidebar">
<p class="sidebar-title">Helpful Reading</p>
<ul class="simple">
<li><p><a class="reference external" href="http://en.wikipedia.org/wiki/Boolean_algebra">Boolean Algebra</a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.4/library/re.html">Regular Expressions</a></p></li>
</ul>
</aside>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Boolean_algebra">Boolean Algebra</a> is sometimes confusing when used in the context of
English language. The goal of this module is to standardize on how to represent
and evaluate logical expressions within the scope of pyATS, and as well offer
standard APIs, classes and behaviors for users leverage.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Boolean Operators Offered in This Module</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Class</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Conjunction</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">And</span></code></p></td>
<td><p>logical <em>And</em>: true if and only if
all operands are true</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Disjunction</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Or</span></code></p></td>
<td><p>logical <em>Or</em>: true if at least one of its
operands is true</p></td>
</tr>
<tr class="row-even"><td><p><strong>Negation</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Not</span></code></p></td>
<td><p>logical <em>Not</em>: true only if all operands are false</p></td>
</tr>
</tbody>
</table>
<p>Logical operators offered in this <code class="docutils literal notranslate"><span class="pre">logic</span></code> module accepts two types of inputs,
and subsequently, has different behaviors depending on the input expressions.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">callable</span></code> inputs</dt><dd><p>when instantiated with callable input expressions, arguments supplied
to the evaluation of the logic instance is fed directly to these callables.
The return values are then used as part of truth testing.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">str</span></code> inputs</dt><dd><p>when instantiated with strings, they are treated as regular expressions and
compiled into python <code class="docutils literal notranslate"><span class="pre">re</span></code> regex objects. During evaluation, these regex
objects are used to <code class="docutils literal notranslate"><span class="pre">search</span></code> the input argument (casted into strings) to
determine whether matches are found.</p>
</dd>
</dl>
<p>This will become clearer with examples from the following class usage and
behavior descriptions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   operator using callables</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Not</span><span class="p">,</span> <span class="n">Or</span>

<span class="c1"># creating some functions to be used for operation testing</span>
<span class="k">def</span> <span class="nf">is_int</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="c1"># tests if value is a number</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">is_str</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="c1"># tests if value is a string</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">greater_than_10</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="c1"># tests if value is greater than 10</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">10</span>

<span class="c1"># create some operations using the function callables</span>
<span class="n">int_greater_than_10</span> <span class="o">=</span> <span class="n">And</span><span class="p">(</span><span class="n">is_int</span><span class="p">,</span> <span class="n">greater_than_10</span><span class="p">)</span>
<span class="n">int_or_str</span> <span class="o">=</span> <span class="n">Or</span><span class="p">(</span><span class="n">is_int</span><span class="p">,</span> <span class="n">is_str</span><span class="p">)</span>
<span class="n">not_int</span> <span class="o">=</span> <span class="n">Not</span><span class="p">(</span><span class="n">is_int</span><span class="p">)</span>

<span class="c1"># do some testing</span>
<span class="c1"># ---------------</span>

<span class="c1"># 1 is an integer, but less than 10</span>
<span class="n">int_greater_than_10</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="kc">False</span>

<span class="c1"># 999 is an integer and also greater than 10</span>
<span class="n">int_greater_than_10</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># &quot;1&quot; is str, not int.</span>
<span class="c1"># note that the logic is built-around quick evaluations: if the first</span>
<span class="c1"># expression is not True, the logic aborts and returns immediately.</span>
<span class="n">int_greater_than_10</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
<span class="kc">False</span>

<span class="n">int_or_str</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">not_int</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
<span class="kc">True</span>
</pre></div>
</div>
<p>Logical operator classes are instantiated with one or more expressions
(<code class="docutils literal notranslate"><span class="pre">callable</span></code> in the above examples), which are then evaluated individually
against input values. The result of each expression is then used for the final
boolean logic testing.</p>
<p>In addition, if <code class="docutils literal notranslate"><span class="pre">str</span></code> type expressions are used, the logic operator classes
automatically compile them into regular expressions to be used to search whether
the input is string or not:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   operators using strings and regexes</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Not</span><span class="p">,</span> <span class="n">Or</span>

<span class="c1"># regular expressions matching to a string that contains</span>
<span class="c1"># both &quot;sanity&quot; and &quot;traffic&quot;</span>
<span class="n">sanity_and_traffic</span> <span class="o">=</span> <span class="n">And</span><span class="p">(</span><span class="s1">&#39;.*sanity.*&#39;</span><span class="p">,</span> <span class="s1">&#39;.*traffic.*&#39;</span><span class="p">)</span>

<span class="c1"># regular expression matching to either &quot;bgp&quot; or &quot;ospf&quot;</span>
<span class="c1"># note that this is the same as regex: &quot;bgp|ospf&quot;</span>
<span class="n">bgp_or_ospf</span> <span class="o">=</span> <span class="n">Or</span><span class="p">(</span><span class="s1">&#39;bgp&#39;</span><span class="p">,</span> <span class="s1">&#39;ospf&#39;</span><span class="p">)</span>

<span class="c1"># regular expressions that end with &quot;regression&quot;</span>
<span class="c1"># note this is the same as regex lookahead: &quot;(?!regression$)&quot;</span>
<span class="n">not_regression</span> <span class="o">=</span> <span class="n">Not</span><span class="p">(</span><span class="s1">&#39;regression$&#39;</span><span class="p">)</span>

<span class="c1"># do some testing</span>
<span class="c1"># ---------------</span>
<span class="n">sanity_and_traffic</span><span class="p">(</span><span class="s1">&#39;bgp_sanity_traffic_testing&#39;</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">bgp_or_ospf</span><span class="p">(</span><span class="s1">&#39;bgp_traffic&#39;</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">not_regression</span><span class="p">(</span><span class="s1">&#39;l2vpn_regression&#39;</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
</div>
<p>If a list input is provided during evaluation of the operator instance, the
test is considered <em>true</em> as long as at least one of those input items satisfies
each logical expression:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   operators and list inputs</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">And</span><span class="p">,</span> <span class="n">Not</span><span class="p">,</span> <span class="n">Or</span>

<span class="n">test_expr</span> <span class="o">=</span> <span class="n">And</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span>
<span class="n">test_not_expr</span> <span class="o">=</span> <span class="n">Not</span><span class="p">(</span><span class="s2">&quot;^bgp.*&quot;</span><span class="p">,</span> <span class="s2">&quot;sanity$&quot;</span><span class="p">)</span>

<span class="c1"># do some testing</span>
<span class="c1"># ---------------</span>
<span class="n">test_expr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">test_expr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="kc">False</span>

<span class="n">test_not_expr</span><span class="p">(</span><span class="s2">&quot;bgp_sanity&quot;</span><span class="p">,</span> <span class="s2">&quot;routing_regression&quot;</span><span class="p">)</span>
<span class="kc">False</span>

<span class="n">test_not_expr</span><span class="p">(</span><span class="s2">&quot;ospf_regression&quot;</span><span class="p">,</span> <span class="s2">&quot;routing_regression&quot;</span><span class="p">)</span>
<span class="kc">True</span>

<span class="c1"># consider this as logical OR between the input lists for truth testing:</span>
<span class="c1"># test_expr(0, None) is interpretered as:</span>
<span class="c1"># test_expr(0) or test_expr(None)</span>
<span class="c1">#</span>
<span class="c1"># note that in the case of Not(), this is a logical AND</span>
<span class="c1"># test_not_expr(0, 1) is the same as:</span>
<span class="c1"># test_not_expr(0) and test_not_expr(1)</span>
</pre></div>
</div>
<p>In summary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">And</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">):</span>

    <span class="n">expression_1</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="ow">and</span> <span class="n">expression_2</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>  <span class="ow">and</span> <span class="o">...</span>

<span class="n">Or</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">):</span>

    <span class="n">expression_1</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="ow">or</span> <span class="n">expression_2</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="ow">or</span> <span class="o">...</span>

<span class="n">Not</span><span class="p">(</span><span class="o">*</span><span class="n">expressions</span><span class="p">):</span>

    <span class="ow">not</span> <span class="n">expression_1</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">expression_2</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="o">...</span>
</pre></div>
</div>
<section id="logic-string-inputs">
<span id="logic-from-str"></span><h2>Logic String Inputs<a class="headerlink" href="#logic-string-inputs" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">logic</span></code> module allows the convertion of string-format logic expressions into
objects. This allows command-line arguments to propagate into logical objects
for further evaluation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   string to logic objects</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures.logic</span> <span class="kn">import</span> <span class="n">logic_str</span>

<span class="c1"># creating an And regex logic from string</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">logic_str</span><span class="p">(</span><span class="s2">&quot;And(&#39;a&#39;, &#39;b&#39;)&quot;</span><span class="p">)</span>

<span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="c1"># &lt;class &#39;pyats.datastructures.logic.And&#39;&gt;</span>

<span class="n">obj</span><span class="p">(</span><span class="s1">&#39;ab&#39;</span><span class="p">)</span>
<span class="kc">True</span>

<span class="n">obj</span><span class="p">(</span><span class="s1">&#39;cd&#39;</span><span class="p">)</span>
<span class="kc">False</span>
</pre></div>
</div>
<p>In essence, the input string needs to be formatted the same as python code, with
proper string quotes &amp; etc. It is then evaluated by the <code class="docutils literal notranslate"><span class="pre">logic_str</span></code> to be
converted into python object expression.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">logic_str</span></code> conversion only supports <code class="docutils literal notranslate"><span class="pre">str</span></code> (regex) style inputs and
lambda functions.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="orderabledict.html" class="btn btn-neutral float-left" title="Orderable Dictionary" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration Container" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>