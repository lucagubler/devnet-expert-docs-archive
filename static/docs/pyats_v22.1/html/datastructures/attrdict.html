<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attribute Dictionaries &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Weak List References" href="weaklist.html" />
    <link rel="prev" title="Datastructures" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Datastructures</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Attribute Dictionaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#attrdict"><code class="docutils literal notranslate"><span class="pre">AttrDict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creation">Creation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access">Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#nestedattrdict"><code class="docutils literal notranslate"><span class="pre">NestedAttrDict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#features-limitations">Features &amp; Limitations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="weaklist.html">Weak List References</a></li>
<li class="toctree-l2"><a class="reference internal" href="listdict.html">Dictionary Represented Using Lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="orderabledict.html">Orderable Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="logic.html">Logic Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities/index.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Datastructures</a></li>
      <li class="breadcrumb-item active">Attribute Dictionaries</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="attribute-dictionaries">
<h1>Attribute Dictionaries<a class="headerlink" href="#attribute-dictionaries" title="Permalink to this heading">¶</a></h1>
<section id="attrdict">
<h2><code class="docutils literal notranslate"><span class="pre">AttrDict</span></code><a class="headerlink" href="#attrdict" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">AttrDict</span></code>, Attribute Dictionary, is the exact same as a python native
<code class="docutils literal notranslate"><span class="pre">dict</span></code>, except that in <em>most</em> cases, you can use the dictionary key as if it
was an object attribute instead. This allows users to create container objects
that looks as if they are class objects (as long as the user objects the proper
limitations).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   AttrDict use case</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures</span> <span class="kn">import</span> <span class="n">AttrDict</span>

<span class="c1"># create a nested AttrDict chain</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>

<span class="c1"># now you can access it via chaining</span>
<span class="n">obj</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span>

<span class="c1"># it looks &amp; feels like class instances, but is really just a</span>
<span class="c1"># dictionary doing the dirty heavy lifting</span>
<span class="n">obj</span>
<span class="c1"># AttrDict({&#39;a&#39;: AttrDict({&#39;b&#39;: AttrDict({&#39;c&#39;: &#39;value&#39;})})})</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>this is extremely useful when used as container objects, eliminating the
need to create the actual classes.</p>
</div>
<section id="creation">
<h3>Creation<a class="headerlink" href="#creation" title="Permalink to this heading">¶</a></h3>
<p>Create an <code class="docutils literal notranslate"><span class="pre">AttrDict</span></code> the same way as creating your typical <code class="docutils literal notranslate"><span class="pre">dict</span></code> objects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   attribute dictionary creations</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures</span> <span class="kn">import</span> <span class="n">AttrDict</span>

<span class="c1"># instantiate an AttrDict the same as how you&#39;d instantiate a dict</span>
<span class="n">attrdict</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># AttrDict({&#39;a&#39;: 1, &#39;key&#39;: &#39;value&#39;})</span>

<span class="c1"># you can also instantiate using a dictionary as input</span>
<span class="n">attrdict</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>

<span class="c1"># or an iterable of item size 2</span>
<span class="n">attrdict</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
</pre></div>
</div>
</section>
<section id="access">
<h3>Access<a class="headerlink" href="#access" title="Permalink to this heading">¶</a></h3>
<p>Keys in an <code class="docutils literal notranslate"><span class="pre">AttrDict</span></code> can be accessed via the traditional <code class="docutils literal notranslate"><span class="pre">dict[</span> <span class="pre">]</span></code> method,
or using the keys as attributes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   attribute dictionary access</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures</span> <span class="kn">import</span> <span class="n">AttrDict</span>
<span class="n">attrdict</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># access it as if it was a dictionary</span>
<span class="n">attrdict</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span>
<span class="c1"># &#39;value&#39;</span>
<span class="n">attrdict</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="c1"># 1</span>

<span class="c1"># access it as attributes</span>
<span class="n">attrdict</span><span class="o">.</span><span class="n">key</span>
<span class="c1"># &#39;value&#39;</span>
<span class="n">attrdict</span><span class="o">.</span><span class="n">a</span>
<span class="c1"># 1</span>

<span class="c1"># set attributes is the same as adding new keys</span>
<span class="c1">#   same as attrdict[&#39;b&#39;] = 2</span>
<span class="n">attrdict</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">attrdict</span>
<span class="c1"># AttrDict({&#39;b&#39;: 2, &#39;a&#39;: 1, &#39;key&#39;: &#39;value&#39;})</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>all other native <code class="docutils literal notranslate"><span class="pre">dict</span></code> behaviors and APIs are unchanged.</p>
</div>
</section>
<section id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading">¶</a></h3>
<p>Like previously stated, this only works <em>most</em> of the time. Here is a known list
of limitations</p>
<ul>
<li><p>in order to access a value as an attribute, its key must of type <code class="docutils literal notranslate"><span class="pre">str</span></code> (in
standard python <code class="docutils literal notranslate"><span class="pre">dict</span></code>, keys can be any hashable objects)</p></li>
<li><p>keys with characters such as <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">\</span></code> etc, cannot be accessed as
attributes. This is due to the limitation of python identifiers.</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span># python valid identifiers
identifier ::=  (letter|&quot;_&quot;) (letter | digit | &quot;_&quot;)*
letter     ::=  lowercase | uppercase
lowercase  ::=  &quot;a&quot;...&quot;z&quot;
uppercase  ::=  &quot;A&quot;...&quot;Z&quot;
digit      ::=  &quot;0&quot;...&quot;9&quot;
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>if there’s something that cannot be accessed as an attribute, you can always
fall back to the standard method using <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code></p>
</div>
</section>
</section>
<section id="nestedattrdict">
<h2><code class="docutils literal notranslate"><span class="pre">NestedAttrDict</span></code><a class="headerlink" href="#nestedattrdict" title="Permalink to this heading">¶</a></h2>
<p>Nested attribute dictionary is a special subclass of <code class="docutils literal notranslate"><span class="pre">AttrDict</span></code> that
recognizes when its key values are other dictionaries, and auto-convert them
automatically into further <code class="docutils literal notranslate"><span class="pre">NestedAttrDict</span></code>. This allows the whole nested
dictionary structure to be traversable using attribute getters automatically
without user intervention (eg, <code class="docutils literal notranslate"><span class="pre">.</span></code> operator).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   NestedAttrDict use case</span>

<span class="kn">from</span> <span class="nn">pyats.datastructures</span> <span class="kn">import</span> <span class="n">NestedAttrDict</span>

<span class="c1"># if we had a big nested dict structure</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># create a nested attribute dictionary</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">NestedAttrDict</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>

<span class="c1"># now you can access it via chaining</span>
<span class="n">obj</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">value</span>
<span class="c1"># 100</span>

<span class="c1"># it looks &amp; feels like class instances, but is really just a</span>
<span class="c1"># dictionary doing the dirty heavy lifting</span>
<span class="c1"># (notice all child dicts got turned into NestedAttrDict)</span>
<span class="n">obj</span>
<span class="c1"># NestedAttrDict({&#39;a&#39;: 1,</span>
<span class="c1">#                 &#39;b&#39;: 2,</span>
<span class="c1">#                 &#39;c&#39;: NestedAttrDict({&#39;x&#39;: 10,</span>
<span class="c1">#                                      &#39;y&#39;: 20,</span>
<span class="c1">#                                      &#39;z&#39;: NestedAttrDict({&#39;value&#39;: 100})})})</span>
</pre></div>
</div>
<section id="features-limitations">
<h3>Features &amp; Limitations<a class="headerlink" href="#features-limitations" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">NestedAttrDict</span></code> inherits the same limitations as <code class="docutils literal notranslate"><span class="pre">AttrDict</span></code> where the
key names, if accessed as attributes, can only be strings without special
characters</p></li>
<li><p>When nested dictionaries are detected on set or update, they are auto
converted into a new instance of <code class="docutils literal notranslate"><span class="pre">NestedAttrDict</span></code>. Eg - its object id
will change, and will no longer refer to the old instance</p></li>
<li><p>Key methods supports using <code class="docutils literal notranslate"><span class="pre">.</span></code> separator to perform automated nested
access.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#     various object access</span>

<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
        <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">NestedAttrDict</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>

<span class="c1"># get api</span>
<span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;c.y&#39;</span><span class="p">)</span>
<span class="c1"># 20</span>

<span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="c1"># 1</span>

<span class="c1"># get with default</span>
<span class="n">obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;c.z.non_existent_value&#39;</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="c1"># 1000</span>

<span class="c1"># delete</span>
<span class="k">del</span> <span class="n">obj</span><span class="p">[</span><span class="s1">&#39;c.x&#39;</span><span class="p">]</span>
<span class="c1"># NestedAttrDict({&#39;a&#39;: 1,</span>
<span class="c1">#                 &#39;b&#39;: 2,</span>
<span class="c1">#                 &#39;c&#39;: NestedAttrDict({&#39;y&#39;: 20,</span>
<span class="c1">#                                      &#39;z&#39;: NestedAttrDict({&#39;value&#39;: 100})})})</span>

<span class="c1"># set</span>
<span class="n">obj</span><span class="p">[</span><span class="s1">&#39;c.z.value_two&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">200</span>
<span class="c1"># NestedAttrDict({&#39;a&#39;: 1,</span>
<span class="c1">#                 &#39;b&#39;: 2,</span>
<span class="c1">#                 &#39;c&#39;: NestedAttrDict({&#39;y&#39;: 20,</span>
<span class="c1">#                                      &#39;z&#39;: NestedAttrDict({&#39;value&#39;: 100,</span>
<span class="c1">#                                                           &#39;value_two&#39;: 200})})})</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Datastructures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="weaklist.html" class="btn btn-neutral float-right" title="Weak List References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>