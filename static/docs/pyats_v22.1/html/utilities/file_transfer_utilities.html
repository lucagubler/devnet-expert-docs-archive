<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multiprotocol File Transfer Utilities &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Embedded pyATS File Transfer Server" href="file_transfer_server.html" />
    <link rel="prev" title="Secret Strings" href="secret_strings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Utilities</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="helper_functions.html">Find</a></li>
<li class="toctree-l2"><a class="reference internal" href="secret_strings.html">Secret Strings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multiprotocol File Transfer Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#abstraction-by-os">Abstraction by OS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-homed-server-handling">Multi-Homed Server Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linux-plugin">Linux Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-protocols">Supported protocols</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api-guide">API Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#common-apis">Common APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux-apis">Linux APIs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#developer-s-guide">Developer’s Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#suggested-package-file-layout">Suggested Package File Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="#protocol-level-abstraction">Protocol-level Abstraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#package-designer-s-responsibilities">Package Designer’s Responsibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-implementation">Sample Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-guide-for-plugin-developers">API Guide for Plugin Developers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="file_transfer_server.html">Embedded pyATS File Transfer Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="import_utils.html">Import Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Utilities</a></li>
      <li class="breadcrumb-item active">Multiprotocol File Transfer Utilities</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="multiprotocol-file-transfer-utilities">
<span id="pyats-file-transfer-utilities"></span><h1>Multiprotocol File Transfer Utilities<a class="headerlink" href="#multiprotocol-file-transfer-utilities" title="Permalink to this heading">¶</a></h1>
<p>These utilities provide a common OS and protocol agnostic framework for
client-side file-based operations such as:</p>
<ul class="simple">
<li><p>Transferring a single file to or from a remote server,</p></li>
<li><p>Changing permissions, renaming, deleting and obtaining details of
single remote files,</p></li>
<li><p>Obtaining a remote directory listing,</p></li>
<li><p>Performing existence and stability checking of a single remote file.</p></li>
</ul>
<p>This framework strives to eliminate the need for multiple similar
file transfer packages, all doing the same thing slightly differently, and
to harmonize on a common extensible architecture that provides a consistent
look and feel to users.</p>
<p>Linux client support is provided out of the box and additional file utility
support may be added for other OS by installing available external plugin
packages.</p>
<p>These operations are supported across a variety of protocols, to the extent
allowed by the protocol and OS themselves (for example, it is not possible to
request a remote directory listing via tftp from a Linux client).  It may not
be possible to request a chmod on platform XYZ because its ftp protocol
client may not have this capability.</p>
<p>Files and directories are specified in the compact and expressive
URL form <a class="footnote-reference brackets" href="#f3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">protocol</span><span class="p">:</span><span class="o">//</span><span class="n">server</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">port</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file_or_directory</span>
</pre></div>
</div>
<p>If the file or directory is not specified in URL form, then local form <a class="footnote-reference brackets" href="#f2" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>
is assumed (for example,  <code class="docutils literal notranslate"><span class="pre">/path/to/file</span></code> is internally converted to
<code class="docutils literal notranslate"><span class="pre">file:/path/to/file</span></code>).</p>
<section id="abstraction-by-os">
<h2>Abstraction by OS<a class="headerlink" href="#abstraction-by-os" title="Permalink to this heading">¶</a></h2>
<p>All file operations are, by default, done relative to the local execution
host.  The following example shows a sample operation on a Linux client:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>
<span class="c1"># Contents of testbed YAML file tb.yaml</span>

<span class="n">testbed</span><span class="p">:</span>
  <span class="n">servers</span><span class="p">:</span>
    <span class="n">server_alias</span><span class="p">:</span>
      <span class="n">server</span><span class="p">:</span> <span class="n">myserver</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">com</span>
      <span class="n">address</span><span class="p">:</span> <span class="mf">1.1.1.1</span>
      <span class="n">credentials</span><span class="p">:</span>
        <span class="n">ftp</span><span class="p">:</span>
          <span class="n">username</span><span class="p">:</span> <span class="n">my_username</span>
          <span class="n">password</span><span class="p">:</span> <span class="n">my_password</span>
<span class="o">---------------------------------------------------------------------------</span>

<span class="c1"># Example of Linux based file operations</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tb.yaml&#39;</span><span class="p">)</span>


<span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
    <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;file:/device/local/path/to/file&#39;</span><span class="p">,</span>
    <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In order for file operations to be done relative to a remote device (instead of the local execution host),
an external package providing file utilities plugins for this OS must be pip-installed.
The following example shows a sample operation on such a host:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>
<span class="c1"># Contents of testbed YAML file tb.yaml</span>
<span class="n">devices</span><span class="p">:</span>
    <span class="n">my_xyz_device</span><span class="p">:</span>
        <span class="n">os</span><span class="p">:</span> <span class="n">xyz</span>
        <span class="n">connections</span><span class="p">:</span>
            <span class="n">protocol</span><span class="p">:</span> <span class="n">telnet</span>
            <span class="n">ip</span><span class="p">:</span> <span class="mf">1.2.3.4</span>
            <span class="n">port</span><span class="p">:</span> <span class="mi">5678</span>

<span class="n">testbed</span><span class="p">:</span>
  <span class="n">servers</span><span class="p">:</span>
    <span class="n">server_alias</span><span class="p">:</span>
      <span class="n">server</span><span class="p">:</span> <span class="n">myserver</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">com</span>
      <span class="n">address</span><span class="p">:</span> <span class="mf">1.1.1.1</span>
      <span class="n">credentials</span><span class="p">:</span>
        <span class="n">ftp</span><span class="p">:</span>
          <span class="n">username</span><span class="p">:</span> <span class="n">my_username</span>
          <span class="n">password</span><span class="p">:</span> <span class="n">my_password</span>
<span class="o">---------------------------------------------------------------------------</span>

<span class="c1"># Example of remote device based file operations</span>
<span class="c1"># (external plugin required)</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tb.yaml&#39;</span><span class="p">)</span>

<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="o">.</span><span class="n">from_device</span><span class="p">(</span><span class="n">tb</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;my_xyz_device&#39;</span><span class="p">])</span>
<span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
    <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;file:/device/local/path/to/file&#39;</span><span class="p">,</span>
    <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="multi-homed-server-handling">
<h2>Multi-Homed Server Handling<a class="headerlink" href="#multi-homed-server-handling" title="Permalink to this heading">¶</a></h2>
<p>In the cases when a server has multiple IP addresses specified, the plugin
does a one-shot determination of which IP address is reachable (slow path)
and then uses this cached address from then on (fast path).</p>
<p>Here’s an example on a linux plugin:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>
<span class="c1"># Contents of testbed YAML file tb.yaml</span>

<span class="n">testbed</span><span class="p">:</span>
  <span class="n">servers</span><span class="p">:</span>
    <span class="n">server_alias</span><span class="p">:</span>
      <span class="n">server</span><span class="p">:</span> <span class="n">myserver</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">com</span>
      <span class="n">address</span><span class="p">:</span>
          <span class="o">-</span> <span class="mf">1.1.1.1</span>
          <span class="o">-</span> <span class="mf">2.2.2.2</span>
      <span class="n">credentials</span><span class="p">:</span>
        <span class="n">ftp</span><span class="p">:</span>
          <span class="n">username</span><span class="p">:</span> <span class="n">my_username</span>
          <span class="n">password</span><span class="p">:</span> <span class="n">my_password</span>
<span class="o">---------------------------------------------------------------------------</span>

<span class="c1"># Example of Linux based file operations</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tb.yaml&#39;</span><span class="p">)</span>


<span class="c1"># Note the use of server alias here.</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
    <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;file:/device/local/path/to/file&#39;</span><span class="p">,</span>
    <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;ftp://server_alias/remote/path/to/file&#39;</span><span class="p">)</span>

<span class="c1"># The linux plugin pings the first address and, if reachable, uses that</span>
<span class="c1"># address instead of the specified hostname (server_alias).</span>
<span class="c1"># Otherwise, the next address in the list is pinged.</span>
<span class="c1"># If no address is reachable, the hostname used defaults to</span>
<span class="c1"># the server key (myserver.domain.com) if provided.</span>
</pre></div>
</div>
</section>
<section id="linux-plugin">
<h2>Linux Plugin<a class="headerlink" href="#linux-plugin" title="Permalink to this heading">¶</a></h2>
<p>This plugin provides file-based operations on a Linux client (including Mac),
and is the default plugin returned by a call to <code class="docutils literal notranslate"><span class="pre">FileUtils()</span></code> when <code class="docutils literal notranslate"><span class="pre">os</span></code>
is not specified.</p>
<p>The server portion of any of this plugin’s URL inputs may be specified as a
name having a valid DNS lookup or as an explicit IP address but if there is no
corresponding entry provided in the testbed servers block, users restrict
themselves to using only the protocols such as scp and sftp that support local
key-based authentication.</p>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h3>
<p>Here are some examples of file-based operations from a Linux client:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>
<span class="c1"># Contents of testbed YAML file tb.yaml</span>
<span class="n">testbed</span><span class="p">:</span>
  <span class="n">servers</span><span class="p">:</span>
    <span class="n">server_alias</span><span class="p">:</span>
      <span class="n">server</span><span class="p">:</span> <span class="n">myserver</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">com</span>
      <span class="n">address</span><span class="p">:</span> <span class="mf">1.1.1.1</span>
      <span class="n">credentials</span><span class="p">:</span>
        <span class="n">default</span><span class="p">:</span>
          <span class="n">username</span><span class="p">:</span> <span class="n">my_username</span>
          <span class="n">password</span><span class="p">:</span> <span class="n">my_password</span>

<span class="o">---------------------------------------------------------------------------</span>
<span class="c1"># Examples</span>
<span class="c1"># --------</span>
<span class="c1">#</span>
<span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="kn">from</span> <span class="nn">pyats.topology</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">tb</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;tb.yaml&#39;</span><span class="p">)</span>


<span class="c1"># This with statement ensures that any sessions are automatically closed</span>
<span class="c1"># if something goes wrong.</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="c1"># Copy local file to remote location (note the two ways of specifying server name):</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;/local/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;ftp://server_alias/remote/path/to/file&#39;</span><span class="p">)</span>

    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;file:///local/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;tftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">timeout_seconds</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>


    <span class="c1"># Copy remote file to local location, specifying the server via its address:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;scp://1.1.1.1/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;/local/path/to/file&#39;</span><span class="p">)</span>

    <span class="c1"># Copy remote file to a relative local location, when the local file</span>
    <span class="c1"># does not have a leading slash:</span>
    <span class="c1"># NOTE : Due to restrictions documented in RFC3986 section 3.3</span>
    <span class="c1"># it is not possible to specify the &#39;file://&#39; prefix for this kind of operation.</span>

    <span class="kn">import</span> <span class="nn">os</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/local/path/to&#39;</span><span class="p">)</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;scp://1.1.1.1/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span>

    <span class="c1"># Copy remote file to a relative local location, when the local file</span>
    <span class="c1"># has a leading single or double dot.</span>
    <span class="c1"># NOTE : Due to restrictions documented in RFC3986 section 3.3</span>
    <span class="c1"># it is not possible to specify the &#39;file://&#39; prefix for this kind of operation.</span>

    <span class="kn">import</span> <span class="nn">os</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/local/path/to&#39;</span><span class="p">)</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;scp://1.1.1.1/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;./file&#39;</span><span class="p">)</span>

    <span class="c1"># Copy remote file to a local location relative to the calling user&#39;s</span>
    <span class="c1"># home directory.</span>
    <span class="c1"># NOTE : Due to restrictions documented in RFC3986 section 3.3</span>
    <span class="c1"># it is not possible to specify the &#39;file://&#39; prefix for this kind of operation.</span>

    <span class="kn">import</span> <span class="nn">os</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/local/path/to&#39;</span><span class="p">)</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;scp://1.1.1.1/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;~/file&#39;</span><span class="p">)</span>

    <span class="c1"># Copy remote file to a local location relative to the named user&#39;s</span>
    <span class="c1"># home directory.</span>
    <span class="c1"># NOTE : Due to restrictions documented in RFC3986 section 3.3</span>
    <span class="c1"># it is not possible to specify the &#39;file://&#39; prefix for this kind of operation.</span>

    <span class="kn">import</span> <span class="nn">os</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;/local/path/to&#39;</span><span class="p">)</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;scp://1.1.1.1/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;~nameduser/file&#39;</span><span class="p">)</span>


    <span class="c1"># Delete a remote file:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">deletefile</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;sftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">)</span>


    <span class="c1"># Change permissions of a remote file:</span>
    <span class="kn">import</span> <span class="nn">stat</span>
    <span class="n">mode</span>  <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRGRP</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXGRP</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXOTH</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>


    <span class="c1"># Get details of a remote file (such as length and permissions):</span>
    <span class="n">file_details</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span>
        <span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;sftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">stat</span>
    <span class="n">stat</span><span class="o">.</span><span class="n">filemode</span><span class="p">(</span><span class="n">file_details</span><span class="o">.</span><span class="n">st_mode</span><span class="p">)</span>
    <span class="s1">&#39;-rwxrwxrwx&#39;</span>


    <span class="c1"># Obtain a remote directory listing (top-level only):</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/&#39;</span><span class="p">)</span>
    <span class="p">[</span><span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,]</span>


    <span class="c1"># Rename a remote file:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">renamefile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/renamed_file&#39;</span><span class="p">)</span>


    <span class="c1"># Check the existence of a remote file:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">checkfile</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">)</span>


    <span class="c1"># Check that a remote file exists and has a stable length (is not in the</span>
    <span class="c1"># middle of being written):</span>

    <span class="n">futils</span><span class="o">.</span><span class="n">checkfile</span><span class="p">(</span>
        <span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">check_stability</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


    <span class="c1"># Requesting an operation unsupported by the specified protocol</span>
    <span class="c1"># (expected to throw an exception):</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">checkfile</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;tftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="supported-protocols">
<h3>Supported protocols<a class="headerlink" href="#supported-protocols" title="Permalink to this heading">¶</a></h3>
<p>This section describes the supported protocols and the operations they offer.</p>
<p>An operation (such as <code class="docutils literal notranslate"><span class="pre">copyfile</span></code>) against a protocol (such as <code class="docutils literal notranslate"><span class="pre">ftp</span></code>)
requires a protocol-named credential (such as <code class="docutils literal notranslate"><span class="pre">ftp</span></code>) to be declared at the
server or testbed level.  If not declared, then the <code class="docutils literal notranslate"><span class="pre">default</span></code> credential is
used.</p>
<p>Please see <a class="reference internal" href="../topology/schema.html#topology-credential-password-modeling"><span class="std std-ref">Credential Password Modeling</span></a> for details.</p>
<section id="protocol-support-by-operation">
<h4>Protocol support by operation<a class="headerlink" href="#protocol-support-by-operation" title="Permalink to this heading">¶</a></h4>
<table class="docutils align-default" id="id8">
<caption><span class="caption-text">Protocol support by operation</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>ftp</p></th>
<th class="head"><p>tftp <a class="footnote-reference brackets" href="#f5" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a></p></th>
<th class="head"><p>scp <a class="footnote-reference brackets" href="#f1" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></th>
<th class="head"><p>sftp <a class="footnote-reference brackets" href="#f1" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">copyfile</span></code></p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">deletefile</span></code></p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">chmod</span></code></p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">stat</span></code></p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dir</span></code></p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">renamefile</span></code></p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">checkfile</span></code></p></td>
<td><p>Y</p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">getspace</span></code></p></td>
<td></td>
<td></td>
<td><p>Y</p></td>
<td><p>Y</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tftp">
<h4>TFTP<a class="headerlink" href="#tftp" title="Permalink to this heading">¶</a></h4>
<p>Support for this protocol is only available when the execution server has
the <code class="docutils literal notranslate"><span class="pre">curl</span></code> <a class="footnote-reference brackets" href="#f4" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> system package installed.  This package is commonly
installed on most Linux distributions.</p>
</section>
<section id="ftp">
<h4>FTP<a class="headerlink" href="#ftp" title="Permalink to this heading">¶</a></h4>
<p>This protocol is supported natively.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All operations on this plugin support an argument <code class="docutils literal notranslate"><span class="pre">strip_leading_slash</span></code>,
which defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, and thus causing the leading filename or path
slash to be stripped before being sent to the remote server.
Some servers require this to be set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p>
</div>
</section>
<section id="scp">
<h4>SCP<a class="headerlink" href="#scp" title="Permalink to this heading">¶</a></h4>
<p>In order to enable support for this plugin, please execute the following
command manually:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>scp<span class="w"> </span>paramiko
</pre></div>
</div>
<p>If local keys are available, they are also considered for authentication.</p>
</section>
<section id="sftp">
<h4>SFTP<a class="headerlink" href="#sftp" title="Permalink to this heading">¶</a></h4>
<p>In order to enable support for this plugin, please execute the following
command manually:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>paramiko
</pre></div>
</div>
<p>If local keys are available, they are also considered for authentication.</p>
</section>
</section>
</section>
<section id="api-guide">
<span id="pyats-file-transfer-base-api"></span><h2>API Guide<a class="headerlink" href="#api-guide" title="Permalink to this heading">¶</a></h2>
<section id="common-apis">
<h3>Common APIs<a class="headerlink" href="#common-apis" title="Permalink to this heading">¶</a></h3>
<p>The following APIs are supported on any FileUtils instance:</p>
<section id="from-device">
<h4>from_device<a class="headerlink" href="#from-device" title="Permalink to this heading">¶</a></h4>
<p>Create a FileUtils instance from a device.  This is typically used to
access client-side file utilities on a non-Linux host, if such support has been
made available via an external pip-installed plugin package.</p>
<p>The device is expected to have an <code class="docutils literal notranslate"><span class="pre">os</span></code> member, which is used to select
the appropriate FileUtils plugin to be created.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="o">.</span><span class="n">from_device</span><span class="p">(</span><span class="n">device</span><span class="o">=</span><span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;my_xyz_device&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="context-manager">
<h4>Context Manager<a class="headerlink" href="#context-manager" title="Permalink to this heading">¶</a></h4>
<p>A <code class="docutils literal notranslate"><span class="pre">FileUtils</span></code> instance may be used as a context manager, thus ensuring
all sessions are properly closed whether or not the operation succeeded.
Within the context block the session for a particular protocol is set up
only once and is then reused thereafter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">file_details</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file&quot;</span><span class="p">)</span>
    <span class="n">file2_details</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="close">
<h4>close<a class="headerlink" href="#close" title="Permalink to this heading">¶</a></h4>
<p>Close all sessions on a <code class="docutils literal notranslate"><span class="pre">FileUtils</span></code> instance.</p>
<p>Some protocol implementations (such as <code class="docutils literal notranslate"><span class="pre">scp</span></code> and <code class="docutils literal notranslate"><span class="pre">sftp</span></code>) keep their
sessions open until they are explicitly closed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">file_details</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file&quot;</span><span class="p">)</span>
    <span class="n">file2_details</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file2&quot;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="checkfile">
<h4>checkfile<a class="headerlink" href="#checkfile" title="Permalink to this heading">¶</a></h4>
<p>Check for remote file existence and (optionally) stability.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">check_stability</span></code> is specified as <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, multiple checks are done to
ensure the file length is stable (it could be in the middle of being copied).</p>
<table class="docutils align-default" id="id9">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">checkfile</span></code> arguments</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Remote file to check</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">check_stability</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">False)</span></code></a></p></td>
<td><p>Whether or not to check file length stability.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max_tries</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">3)</span></code></a></p></td>
<td><p>Maximum number of times to check the file before aborting.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">delay_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">2)</span></code></a></p></td>
<td><p>Delay between retries</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">checkfile</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="linux-apis">
<h3>Linux APIs<a class="headerlink" href="#linux-apis" title="Permalink to this heading">¶</a></h3>
<p>The following APIs are supported on any FileUtils Linux instance:</p>
<section id="copyfile">
<h4>copyfile<a class="headerlink" href="#copyfile" title="Permalink to this heading">¶</a></h4>
<p>Copy a single file either from local to remote or remote to local.</p>
<p>Remote to remote transfers are not supported (the user is expected to
make multiple calls to do this).</p>
<p>Local to local transfers are not supported.</p>
<table class="docutils align-default" id="id10">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">copyfile</span></code> arguments</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Source file for copy</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">destination</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Destination file for copy</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">1200)</span></code></a></p></td>
<td><p>Copy timeout <a class="footnote-reference brackets" href="#f6" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">quiet</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">False)</span></code></a></p></td>
<td><p>quiet mode to suppress printing of copy progress</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;scp://1.1.1.1/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;/local/path/to/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="deletefile">
<h4>deletefile<a class="headerlink" href="#deletefile" title="Permalink to this heading">¶</a></h4>
<p>Delete a single remote file.</p>
<table class="docutils align-default" id="id11">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">deletefile</span></code> arguments</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>File to delete</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">deletefile</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dir">
<h4>dir<a class="headerlink" href="#dir" title="Permalink to this heading">¶</a></h4>
<p>Retrieve filename URLs contained in the top level of a remote directory.</p>
<table class="docutils align-default" id="id12">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">dir</span></code> arguments</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Directory whose contents are to be retrieved</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/&quot;</span><span class="p">)</span>

<span class="p">[</span><span class="s1">&#39;sftp://server.domain.com/path/to/file&#39;</span><span class="p">,]</span>
</pre></div>
</div>
</section>
<section id="stat">
<h4>stat<a class="headerlink" href="#stat" title="Permalink to this heading">¶</a></h4>
<p>Retrieve details of a remote file in a structure similar to that of
<code class="docutils literal notranslate"><span class="pre">os.stat</span></code>.</p>
<table class="docutils align-default" id="id13">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">stat</span></code> arguments</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>File whose details are to be retrieved</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">file_details</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/file&quot;</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">stat</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">stat</span><span class="o">.</span><span class="n">filemode</span><span class="p">(</span><span class="n">file_details</span><span class="o">.</span><span class="n">st_mode</span><span class="p">))</span>

<span class="s1">&#39;-rwxrwxrwx&#39;</span>
</pre></div>
</div>
</section>
<section id="chmod">
<h4>chmod<a class="headerlink" href="#chmod" title="Permalink to this heading">¶</a></h4>
<p>Change the permissions of a remote file.</p>
<table class="docutils align-default" id="id14">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">chmod</span></code> arguments</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>File whose permissions are to be changed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a></p></td>
<td><p>File permissions (same format as <a class="reference external" href="https://docs.python.org/3/library/os.html#os.chmod" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">os.chmod</span></code></a>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">stat</span>
    <span class="n">mode</span>  <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRWXU</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IRGRP</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXGRP</span> <span class="o">|</span> <span class="n">stat</span><span class="o">.</span><span class="n">S_IXOTH</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="renamefile">
<h4>renamefile<a class="headerlink" href="#renamefile" title="Permalink to this heading">¶</a></h4>
<p>Rename a single remote file.</p>
<table class="docutils align-default" id="id15">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">renamefile</span></code> arguments</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Remote file to rename</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">destination</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>New remote file name</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">renamefile</span><span class="p">(</span>
        <span class="n">source</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/file&#39;</span><span class="p">,</span>
        <span class="n">destination</span> <span class="o">=</span> <span class="s1">&#39;ftp://myserver.domain.com/remote/path/to/renamed_file&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="getspace">
<h4>getspace<a class="headerlink" href="#getspace" title="Permalink to this heading">¶</a></h4>
<p>Get the available disk space at target directory in bytes.</p>
<table class="docutils align-default" id="id16">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">getspace</span></code> arguments</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Directory location to check available disk space</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timeout_seconds</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span> <span class="pre">(default</span> <span class="pre">=</span> <span class="pre">60)</span></code></a></p></td>
<td><p>Connection timeout</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="k">with</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span> <span class="k">as</span> <span class="n">futils</span><span class="p">:</span>
    <span class="n">futils</span><span class="o">.</span><span class="n">getspace</span><span class="p">(</span><span class="s2">&quot;sftp://server.domain.com/path/to/&quot;</span><span class="p">)</span>

<span class="mi">29832314880</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="developer-s-guide">
<h2>Developer’s Guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this heading">¶</a></h2>
<p>This section gives guidance on how to develop a FileUtils plugin for a device
with a non-Linux OS.</p>
<p>File operations are expected to be performed relative to
(ie. via running commands on) the device,
Users are expected to first connect to the device and then instantiate the
device’s FileUtils plugin using <code class="docutils literal notranslate"><span class="pre">FileUtils.from_device</span></code>.</p>
<section id="suggested-package-file-layout">
<h3>Suggested Package File Layout<a class="headerlink" href="#suggested-package-file-layout" title="Permalink to this heading">¶</a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>|-- .gitignore                        Tell git to ignore many common file types
|-- README.rst                        Points to src/myfutils/README.rst
|-- DESCRIPTION.rst                   Long description of package
|-- MANIFEST.in                       Extra files to be packaged
|-- setup.py                          For PyPi distribution of your package and
|                                     unit test execution.
|-- tests                             Sym-link to the src/myfutils/tests folder
|-- docs                              Sphinx online documentation for your package
|   |-- README.rst
|   `-- changelog
`-- src                               All sources for package myfutils
    |-- __init__.py                   Module declaration file
    `-- myfutils
        |-- __init__.py               Module declaration file
        |-- README.rst                Instructions to the installing user.
        |-- fileutils.py              Top-level fileutils, inherits from
        |                             ats.utils.fileutils.FileUtils
        |-- plugins                   All FileUtils OS plugins are under this directory
        |   |-- xyz                   Plugin module providing support for OS xyz
        |       |-- __init__.py       Module declaration file
        |       |-- fileutils.py      Fileutils module for OS xyz
        |       `-- ftp               Optional subplugin (child) module providing
        |           |                 support for protocol ftp on OS xyz
        |           `-- __init__.py   Module declaration file
        |           `-- fileutils.py  Fileutils module providing ftp services
        |                             for OS xyz
        |-- tests                     Unit tests for the package
</pre></div>
</div>
</section>
<section id="protocol-level-abstraction">
<h3>Protocol-level Abstraction<a class="headerlink" href="#protocol-level-abstraction" title="Permalink to this heading">¶</a></h3>
<p>A parent module advertises file utilities for a specific OS and implements
user-facing operations defined by the base class.</p>
<p>If it has any contained packages they are treated as subplugins that a
parent may instantiate via <code class="docutils literal notranslate"><span class="pre">get_child</span></code>.  In this way, a parent may delegate
processing of a file operation to a protocol-specific child object which is
created only when the user invokes an operation against that protocol.</p>
<p>When a user executes <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pyats.utils.fileutils</span> <span class="pre">import</span> <span class="pre">FileUtils</span></code> all
advertised OS-specific plugins (and any subplugins underneath them) are
automatically loaded.</p>
<p>A child object is expected to both be contained by and inherit from the
parent class.  A child object has access to its parent object via its
<code class="docutils literal notranslate"><span class="pre">parent</span></code> member (which is set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> on a parent object).  A parent object
has access to its child objects via its <code class="docutils literal notranslate"><span class="pre">children</span></code> member.</p>
<p>Every child must implement each user-facing operation implemented by its
parent, and raise a <code class="docutils literal notranslate"><span class="pre">NonImplementedError</span></code> if it does not support the
operation.</p>
<p>The first time a child is allocated for a given protocol by calling
<code class="docutils literal notranslate"><span class="pre">get_child</span></code> it is instantiated and added to a cache.
Subsequent calls by the parent to <code class="docutils literal notranslate"><span class="pre">get_child</span></code> return the cached object.
This allows a child to maintain session state if required.</p>
<p>It is possible to remove a child from the cache so the next time <code class="docutils literal notranslate"><span class="pre">get_child</span></code>
is called a new object is instantiated.</p>
</section>
<section id="package-designer-s-responsibilities">
<h3>Package Designer’s Responsibilities<a class="headerlink" href="#package-designer-s-responsibilities" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>Define one or more OS-specific plugins and ensure they inherit from
<code class="docutils literal notranslate"><span class="pre">pyats.utils.fileutils.FileUtils</span></code>.</p></li>
<li><p>Ensure plugins implementing the <code class="docutils literal notranslate"><span class="pre">dir</span></code> operation return a list of files
expressed in URL form.</p></li>
<li><p>Define a plugin point for each provided OS fileutils implementation to allow
it to be automatically loaded by the core and be made accessible to users:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># setup.py</span>
<span class="o">...</span>
<span class="c1"># console entry point</span>
<span class="n">entry_points</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;pyats.utils.fileutils.plugins&#39;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="s1">&#39;xyz = myfutils.plugins.xyz&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">},</span>
</pre></div>
</div>
</li>
<li><p>Ensure each input URL is checked for remote/local and refuse any operations
that are not supported.</p></li>
<li><p>Parse each input URL with <code class="docutils literal notranslate"><span class="pre">urllib.parse.urlparse</span></code> and ignore unsupported
parts with a warning (for example, embedded username/password, fragments
or query parameters).</p></li>
<li><p>Implement the <code class="docutils literal notranslate"><span class="pre">close</span></code> method and, if children have been allocated via
<code class="docutils literal notranslate"><span class="pre">get_child</span></code> delegate the close to each child.</p></li>
</ul>
</section>
<section id="sample-implementation">
<h3>Sample Implementation<a class="headerlink" href="#sample-implementation" title="Permalink to this heading">¶</a></h3>
<p>Here is a sample implementation of a FileUtils plugin for platform XYZ and
protocol <code class="docutils literal notranslate"><span class="pre">ftp</span></code>.</p>
<p>The parent class:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span> <span class="k">as</span> <span class="n">FileUtilsBase</span>

<span class="k">class</span> <span class="nc">FileUtils</span><span class="p">(</span><span class="n">FileUtilsBsae</span><span class="p">):</span>
  <span class="n">DEFAULT_COPY_TIMEOUT_SECONDS</span> <span class="o">=</span> <span class="mi">1200</span>

  <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot; Deallocate any resources being held.  &quot;&quot;&quot;</span>
      <span class="k">for</span> <span class="n">child_name</span><span class="p">,</span> <span class="n">child_obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
          <span class="n">child_obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


  <span class="k">def</span> <span class="nf">copyfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span>
          <span class="n">timeout_seconds</span> <span class="o">=</span> <span class="n">DEFAULT_COPY_TIMEOUT_SECONDS</span><span class="p">,</span>
          <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">      </span><span class="sd">&quot;&quot;&quot; Copy a file to/from a remote server. &quot;&quot;&quot;</span>

      <span class="n">from_scheme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_scheme</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
      <span class="n">to_scheme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_scheme</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>

      <span class="n">from_scheme_is_local</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
      <span class="n">to_scheme_is_local</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_local</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">from_scheme_is_local</span> <span class="ow">and</span> <span class="n">to_scheme_is_local</span><span class="p">:</span>
          <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;fileutils module </span><span class="si">{}</span><span class="s2"> does not allow &quot;</span>
              <span class="s2">&quot;copying between two local files.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="p">))</span>

      <span class="k">if</span> <span class="ow">not</span> <span class="n">from_scheme_is_local</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">to_scheme_is_local</span><span class="p">:</span>
          <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;fileutils module </span><span class="si">{}</span><span class="s2"> does not allow &quot;</span>
              <span class="s2">&quot;copying between two remote files.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="p">))</span>


      <span class="n">abstraction_scheme</span> <span class="o">=</span> <span class="n">to_scheme</span> <span class="k">if</span> <span class="n">from_scheme_is_local</span> <span class="k">else</span> <span class="n">from_scheme</span>

      <span class="c1"># Get implementation</span>
      <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_child</span><span class="p">(</span><span class="n">abstraction_scheme</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

      <span class="c1"># Execute copy</span>
      <span class="k">return</span> <span class="n">child</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">timeout_seconds</span><span class="p">,</span>
          <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">upload</span><span class="o">=</span><span class="n">from_scheme_is_local</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The child (protocol-specific) class:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="kn">import</span> <span class="n">FileUtils</span> <span class="k">as</span> <span class="n">FileUtilsXyzBase</span>

<span class="k">class</span> <span class="nc">FileUtils</span><span class="p">(</span><span class="n">FileUtilsXyzBase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">copyfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span>
            <span class="n">timeout_seconds</span> <span class="o">=</span> <span class="n">DEFAULT_COPY_TIMEOUT_SECONDS</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">upload</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="n">from_parsed_url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">to_parsed_url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">destination</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">upload</span><span class="p">:</span>
        <span class="n">from_path</span> <span class="o">=</span> <span class="n">from_parsed_url</span><span class="o">.</span><span class="n">path</span>

        <span class="n">to_server_name</span> <span class="o">=</span> <span class="n">to_parsed_url</span><span class="o">.</span><span class="n">hostname</span>
        <span class="n">to_parsed_port</span> <span class="o">=</span> <span class="n">to_parsed_url</span><span class="o">.</span><span class="n">port</span>
        <span class="n">to_path</span> <span class="o">=</span> <span class="n">to_parsed_url</span><span class="o">.</span><span class="n">path</span>
        <span class="n">server_name</span> <span class="o">=</span> <span class="n">to_server_name</span>
        <span class="n">port</span> <span class="o">=</span> <span class="n">to_parsed_port</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_path</span> <span class="o">=</span> <span class="n">to_parsed_url</span><span class="o">.</span><span class="n">path</span>
        <span class="n">from_server_name</span> <span class="o">=</span> <span class="n">from_parsed_url</span><span class="o">.</span><span class="n">hostname</span>
        <span class="n">from_parsed_port</span> <span class="o">=</span> <span class="n">from_parsed_url</span><span class="o">.</span><span class="n">port</span>
        <span class="n">from_path</span> <span class="o">=</span> <span class="n">from_parsed_url</span><span class="o">.</span><span class="n">path</span>

        <span class="n">server_name</span> <span class="o">=</span> <span class="n">from_server_name</span>
        <span class="n">port</span> <span class="o">=</span> <span class="n">from_parsed_port</span>

    <span class="c1"># Get auth details</span>
    <span class="n">username</span><span class="p">,</span> <span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_auth</span><span class="p">(</span><span class="n">server_name</span><span class="p">)</span>

    <span class="c1"># Transfer the file by executing commands on the device.</span>
    <span class="k">if</span> <span class="n">upload</span><span class="p">:</span>
        <span class="n">upload_ftp_file</span><span class="p">(</span>
            <span class="n">from_path</span><span class="o">=</span><span class="n">from_path</span><span class="p">,</span>
            <span class="n">to_path</span><span class="o">=</span><span class="n">to_path</span><span class="p">,</span>
            <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
            <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout_seconds</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">download_ftp_file</span><span class="p">(</span>
            <span class="n">from_path</span><span class="o">=</span><span class="n">from_path</span><span class="p">,</span>
            <span class="n">to_path</span><span class="o">=</span><span class="n">to_path</span><span class="p">,</span>
            <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">device</span><span class="p">,</span>
            <span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">,</span>
            <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout_seconds</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="api-guide-for-plugin-developers">
<h3>API Guide for Plugin Developers<a class="headerlink" href="#api-guide-for-plugin-developers" title="Permalink to this heading">¶</a></h3>
<section id="is-local">
<h4>is_local<a class="headerlink" href="#is-local" title="Permalink to this heading">¶</a></h4>
<p>Returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the URL refers to a local resource.</p>
<table class="docutils align-default" id="id17">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">is_local</span></code> arguments</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>URL to check</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">futils</span><span class="o">.</span><span class="n">is_local</span><span class="p">(</span><span class="s2">&quot;file:///path/to/local/file&quot;</span>
</pre></div>
</div>
</section>
<section id="is-remote">
<h4>is_remote<a class="headerlink" href="#is-remote" title="Permalink to this heading">¶</a></h4>
<p>Returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the URL refers to a remote (ie. non-local) resource.</p>
<table class="docutils align-default" id="id18">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">is_remote</span></code> arguments</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>URL to check</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">futils</span><span class="o">.</span><span class="n">is_remote</span><span class="p">(</span><span class="s2">&quot;ftp://server.com/path/to/remote/file&quot;</span>
</pre></div>
</div>
</section>
<section id="get-protocol">
<h4>get_protocol<a class="headerlink" href="#get-protocol" title="Permalink to this heading">¶</a></h4>
<p>Returns the URL protocol (scheme).</p>
<table class="docutils align-default" id="id19">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">get_protocol</span></code> arguments</span><a class="headerlink" href="#id19" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>URL to parse</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">futils</span><span class="o">.</span><span class="n">get_protocol</span><span class="p">(</span><span class="s2">&quot;ftp://server.com/path/to/remote/file&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ftp&#39;</span>
</pre></div>
</div>
</section>
<section id="get-auth">
<h4>get_auth<a class="headerlink" href="#get-auth" title="Permalink to this heading">¶</a></h4>
<p>Get authentication details from self.testbed</p>
<p>Returns (username, password) as strings or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if not found.</p>
<table class="docutils align-default" id="id20">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">get_auth</span></code> arguments</span><a class="headerlink" href="#id20" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">server_name_or_ip</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Server name or alias or IP address.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">username</span><span class="p">,</span> <span class="n">password</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">get_auth</span><span class="p">(</span><span class="n">server_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-hostname">
<h4>get_hostname<a class="headerlink" href="#get-hostname" title="Permalink to this heading">¶</a></h4>
<p>Get hostname details from self.testbed.</p>
<p>The hostname is set to:</p>
<ul class="simple">
<li><p>the contents of the <code class="docutils literal notranslate"><span class="pre">address</span></code> key if present in the testbed’s server block.</p>
<ul>
<li><p>if multiple address is present (eg, the server block contains a list of
addresses), the first network-reachable address (eg, responds to ping), is
returned</p></li>
</ul>
</li>
<li><p>Otherwise, the contents of the <code class="docutils literal notranslate"><span class="pre">server</span></code> key if present in the testbed’s
server block.</p></li>
<li><p>Otherwise, the server alias.</p></li>
<li><p>Otherwise, if the server block is not found in the testbed, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
</ul>
<table class="docutils align-default" id="id21">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">get_hostname</span></code> arguments</span><a class="headerlink" href="#id21" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">server_name_or_ip</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Server name or alias or IP address.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">hostname</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">get_hostname</span><span class="p">(</span><span class="n">server_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-server-block">
<h4>get_server_block<a class="headerlink" href="#get-server-block" title="Permalink to this heading">¶</a></h4>
<p>Get server block from self.testbed</p>
<p>Returns the server block dictionary.</p>
<table class="docutils align-default" id="id22">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">get_server_block</span></code> arguments</span><a class="headerlink" href="#id22" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">server_name_or_ip</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>Server name or alias or IP address.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">server_block</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">get_server_block</span><span class="p">(</span><span class="n">server_name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-child">
<h4>get_child<a class="headerlink" href="#get-child" title="Permalink to this heading">¶</a></h4>
<p>Get a child FileUtils object under the current OS.
If a child does not exist in the cache it is instantiated, otherwise it is
returned from the cache.</p>
<p>To be called by a parent (OS-specific) FileUtils object.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">parent</span></code> member of the child points back to the containing parent.
The <code class="docutils literal notranslate"><span class="pre">children</span></code> member of the parent holds a list of instantiated children.</p>
<table class="docutils align-default" id="id23">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">get_child</span></code> arguments</span><a class="headerlink" href="#id23" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">abstraction_key</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>The name of the protocol being abstracted</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">futils_ftp</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">get_child</span><span class="p">(</span><span class="s1">&#39;ftp&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">futils_ftp</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="n">futils</span>
</pre></div>
</div>
</section>
<section id="remove-child">
<h4>remove_child<a class="headerlink" href="#remove-child" title="Permalink to this heading">¶</a></h4>
<p>Remove a child FileUtils object from the cache.</p>
<p>To be called by a parent (OS-specific) FileUtils object.</p>
<p>All resources are first deallocated by calling the child’s <code class="docutils literal notranslate"><span class="pre">close</span></code> method.
The child is then removed from the cache and deleted.</p>
<table class="docutils align-default" id="id24">
<caption><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">remove_child</span></code> arguments</span><a class="headerlink" href="#id24" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">abstraction_key</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
<td><p>The name of the protocol being abstracted</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.fileutils</span> <span class="kn">import</span> <span class="n">FileUtils</span>
<span class="n">futils</span> <span class="o">=</span> <span class="n">FileUtils</span><span class="p">(</span><span class="n">testbed</span><span class="o">=</span><span class="n">tb</span><span class="p">)</span>
<span class="n">futils_ftp</span> <span class="o">=</span> <span class="n">futils</span><span class="o">.</span><span class="n">get_child</span><span class="p">(</span><span class="s1">&#39;ftp&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">futils_ftp</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="n">futils</span>
</pre></div>
</div>
<aside class="footnote brackets" id="f1" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id4">1</a>,<a role="doc-backlink" href="#id5">2</a>)</span>
<p>Requires additional python dependencies to be manually pip-installed.</p>
</aside>
<aside class="footnote brackets" id="f2" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Please see Appendix B of <a class="reference external" href="https://tools.ietf.org/html/rfc8089#appendix-B">RFC8089</a> for examples of how local
files are expressed in URL form.</p>
</aside>
<aside class="footnote brackets" id="f3" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">3</a><span class="fn-bracket">]</span></span>
<p>Please see <a class="reference external" href="https://tools.ietf.org/html/rfc3986">RFC3986</a> for a standards-based discussion of URLs.</p>
</aside>
<aside class="footnote brackets" id="f4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">4</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://curl.haxx.se/">curl</a> is a popular file transfer system package.</p>
</aside>
<aside class="footnote brackets" id="f5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">5</a><span class="fn-bracket">]</span></span>
<p>Requires additional system packages to be manually installed.</p>
</aside>
<aside class="footnote brackets" id="f6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">6</a><span class="fn-bracket">]</span></span>
<p>The connection timeout is calculated as a percentage of the copy
timeout in order to keep the API simple.</p>
</aside>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="secret_strings.html" class="btn btn-neutral float-left" title="Secret Strings" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="file_transfer_server.html" class="btn btn-neutral float-right" title="Embedded pyATS File Transfer Server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>