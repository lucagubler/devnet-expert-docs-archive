<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Secret Strings &mdash; pyATS Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Multiprotocol File Transfer Utilities" href="file_transfer_utilities.html" />
    <link rel="prev" title="Find" href="helper_functions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyATS
          </a>
              <div class="version">
                24.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Main Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../aetest/index.html">AEtest - Test Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../easypy/index.html">Easypy - Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topology/index.html">Testbed &amp; Topology Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kleenex/index.html">Testbed &amp; Device Cleaning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connections/index.html">Connection Meta</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Supporting Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../async/index.html">Asynchronous Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datastructures/index.html">Datastructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tcl/index.html">Tcl Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log/index.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../results/index.html">Result Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporter/index.html">Reporter</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Utilities</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="helper_functions.html">Find</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Secret Strings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-secure-your-secret-strings">How to secure your secret strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-representers">Multiple Representers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#secret-string-object">Secret String Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#representer-classes">Representer Classes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supported-representers">Supported Representers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-representer-implementation">Sample Representer Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="file_transfer_utilities.html">Multiprotocol File Transfer Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_transfer_server.html">Embedded pyATS File Transfer Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="import_utils.html">Import Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../robot/index.html">RobotFramework Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../terminology.html">Terminologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Doc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apidoc/index.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyATS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Utilities</a></li>
      <li class="breadcrumb-item active">Secret Strings</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="secret-strings">
<span id="id1"></span><h1>Secret Strings<a class="headerlink" href="#secret-strings" title="Permalink to this heading">¶</a></h1>
<p>Secret strings (such as passwords) may be specified in an encoded form suitable
for sharing with a wide audience, while ensuring that only authorized
users are able to decode these strings into their plaintext form.</p>
<p>A secret string class is provided that behaves like a string but has some
special features.</p>
<p>Refer to <a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">Configuration</span></a> for more details on secret string
related configuration.</p>
<p>See <a class="reference internal" href="../cli/pyats_secret.html#pyats-secret-cli"><span class="std std-ref">pyats secret</span></a> for details on the CLI commands related
to secret string manipulation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By default, pyATS secret strings are not cryptographically secure.</p>
</div>
<section id="how-to-secure-your-secret-strings">
<h2>How to secure your secret strings<a class="headerlink" href="#how-to-secure-your-secret-strings" title="Permalink to this heading">¶</a></h2>
<p>Follow this procedure to make your secret strings cryptographically secure:</p>
<ol class="arabic">
<li><p>Update your <a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">pyATS configuration file</span></a> as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">secrets</span><span class="p">]</span>
<span class="n">string</span><span class="o">.</span><span class="n">representer</span> <span class="o">=</span> <span class="n">pyats</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">secret_strings</span><span class="o">.</span><span class="n">FernetSecretStringRepresenter</span>
</pre></div>
</div>
</li>
<li><p>Install the cryptography package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">cryptography</span>
</pre></div>
</div>
</li>
<li><p>Ensure the permissions are restricted on your
<a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">pyATS configuration file</span></a> to prevent others
from reading it.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">chmod</span> <span class="mi">600</span> <span class="o">~/.</span><span class="n">pyats</span><span class="o">/</span><span class="n">pyats</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
</li>
<li><p>Generate a cryptographic key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">keygen</span>
<span class="n">Newly</span> <span class="n">generated</span> <span class="n">key</span> <span class="p">:</span>
<span class="n">dSvoKX23jKQADn20INt3W3B5ogUQmh6Pq00czddHtgU</span><span class="o">=</span>
</pre></div>
</div>
</li>
<li><p>Update your <a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">pyATS configuration file</span></a> as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">secrets</span><span class="p">]</span>
<span class="n">string</span><span class="o">.</span><span class="n">representer</span> <span class="o">=</span> <span class="n">pyats</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">secret_strings</span><span class="o">.</span><span class="n">FernetSecretStringRepresenter</span>
<span class="n">string</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">dSvoKX23jKQADn20INt3W3B5ogUQmh6Pq00czddHtgU</span><span class="o">=</span>
</pre></div>
</div>
</li>
<li><p>Encode a password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">RECOMMENDED</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">encode</span>
<span class="n">Password</span><span class="p">:</span> <span class="n">MySecretPassword</span>
<span class="n">Encoded</span> <span class="n">string</span> <span class="p">:</span>
<span class="n">gAAAAABdsgvwElU9_3RTZsRnd4b1l3Es2gV6Y_DUnUE8C9y3SdZGBc2v0B2m9sKVz80jyeYhlWKMDwtqfwlbg4sQ2Y0a843luOrZyyOuCgZ7bxE5X3Dk_NY</span><span class="o">=</span>

<span class="n">OR</span>

<span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">encode</span> <span class="o">--</span><span class="n">string</span> <span class="n">MySecretPassword</span>
<span class="n">Encoded</span> <span class="n">string</span> <span class="p">:</span>
<span class="n">gAAAAABdsgvwElU9_3RTZsRnd4b1l3Es2gV6Y_DUnUE8C9y3SdZGBc2v0B2m9sKVz80jyeYhlWKMDwtqfwlbg4sQ2Y0a843luOrZyyOuCgZ7bxE5X3Dk_NY</span><span class="o">=</span>
</pre></div>
</div>
</li>
<li><p>Do a test decode of the encoded password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">decode</span> <span class="n">gAAAAABdsgvwElU9_3RTZsRnd4b1l3Es2gV6Y_DUnUE8C9y3SdZGBc2v0B2m9sKVz80jyeYhlWKMDwtqfwlbg4sQ2Y0a843luOrZyyOuCgZ7bxE5X3Dk_NY</span><span class="o">=</span>
<span class="n">Decoded</span> <span class="n">string</span> <span class="p">:</span>
<span class="n">MySecretPassword</span>
</pre></div>
</div>
</li>
<li><p>Add your encoded password to a testbed.yaml %ENC{} block, as described in
<a class="reference internal" href="../topology/schema.html#topology-credential-password-modeling"><span class="std std-ref">Credential Password Modeling</span></a>.  Now your password is
secured.  The only way to decode the password from the testbed YAML file
is to use the same pyATS configuration file used to encode the password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Snippet of your testbed.yaml</span>
<span class="n">testbed</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">sampleTestbed</span>
    <span class="n">credentials</span><span class="p">:</span>
        <span class="n">default</span><span class="p">:</span>
            <span class="n">username</span><span class="p">:</span> <span class="n">admin</span>
            <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%E</span><span class="s2">NC{gAAAAABdsgvwElU9_3RTZsRnd4b1l3Es2gV6Y_DUnUE8C9y3SdZGBc2v0B2m9sKVz80jyeYhlWKMDwtqfwlbg4sQ2Y0a843luOrZyyOuCgZ7bxE5X3Dk_NY=}&quot;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="multiple-representers">
<h2>Multiple Representers<a class="headerlink" href="#multiple-representers" title="Permalink to this heading">¶</a></h2>
<p>Follow this procedure to specify multiple representers if there are several
kinds of encoded strings you want to specify in a file such as a testbed YAML:</p>
<ol class="arabic">
<li><p>Add your new representer to the
<a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">pyATS configuration file</span></a> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">secrets</span><span class="p">]</span>
<span class="n">my_custom</span><span class="o">.</span><span class="n">representer</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">MyRepresenterClass</span>
</pre></div>
</div>
</li>
<li><p>Generate a key if your representer requires it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">keygen</span> <span class="o">--</span><span class="n">prefix</span> <span class="n">my_custom</span>
<span class="n">Newly</span> <span class="n">generated</span> <span class="n">key</span> <span class="p">:</span>
<span class="o">&lt;</span><span class="n">generated</span> <span class="n">key</span> <span class="k">for</span> <span class="n">my_custom</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Update your <a class="reference internal" href="../configuration/index.html#pyats-configuration"><span class="std std-ref">pyATS configuration file</span></a> with the
newly generated key (if required) as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">secrets</span><span class="p">]</span>
<span class="n">my_custom</span><span class="o">.</span><span class="n">representer</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">MyRepresenterClass</span>
<span class="n">my_custom</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">generated</span> <span class="n">key</span> <span class="k">for</span> <span class="n">my_custom</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Encode a password using the default representer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">encode</span>
<span class="n">Password</span><span class="p">:</span> <span class="n">MySecretPassword</span>
<span class="n">Encoded</span> <span class="n">string</span> <span class="p">:</span>
<span class="n">wr3DssK0w5nDlsORw4nDmcK2w4LDqMOfw6vDjsOdw4k</span><span class="o">=</span>
</pre></div>
</div>
</li>
<li><p>Encode a password using the my_custom representer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">secret</span> <span class="n">encode</span> <span class="o">--</span><span class="n">prefix</span> <span class="n">my_custom</span>
<span class="n">Password</span><span class="p">:</span> <span class="n">MySecretPassword</span>
<span class="n">Encoded</span> <span class="n">string</span> <span class="p">:</span>
<span class="o">&lt;</span><span class="n">my_custom</span> <span class="n">encoded</span> <span class="n">string</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Add references to your encoded passwords to your testbed YAML file,
for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">testbed</span><span class="p">:</span>
    <span class="n">credentials</span><span class="p">:</span>
        <span class="n">default</span><span class="p">:</span>
            <span class="n">username</span><span class="p">:</span> <span class="n">my_username</span>
            <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%E</span><span class="s2">NC{wr3DssK0w5nDlsORw4nDmcK2w4LDqMOfw6vDjsOdw4k=}&quot;</span>
        <span class="n">alternate</span><span class="p">:</span>
            <span class="n">username</span><span class="p">:</span> <span class="n">alternate_username</span>
            <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%E</span><span class="s2">NC{&lt;my_custom encoded string&gt;, prefix=my_custom}&quot;</span>
    <span class="n">custom</span><span class="p">:</span>
        <span class="n">custom_key</span><span class="p">:</span> <span class="o">|</span><span class="mi">4</span><span class="o">-</span>
            <span class="n">custom</span> <span class="n">data</span> <span class="n">containing</span> <span class="n">encoded</span> <span class="n">text</span>
            <span class="o">%</span><span class="n">ENC</span><span class="p">{</span><span class="o">&lt;</span><span class="n">my_custom</span> <span class="n">encoded</span> <span class="n">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">my_custom</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Check that your passwords can be recovered from the loaded testbed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">pyats</span> <span class="n">shell</span> <span class="o">--</span><span class="n">testbed_file</span> <span class="n">my_testbed</span><span class="o">.</span><span class="n">yaml</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pyats.utils.secret_strings</span> <span class="kn">import</span> <span class="n">to_plaintext</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_plaintext</span><span class="p">(</span><span class="n">testbed</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="s1">&#39;MySecretPassword&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">to_plaintext</span><span class="p">(</span><span class="n">testbed</span><span class="o">.</span><span class="n">credentials</span><span class="o">.</span><span class="n">alternate</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
<span class="s1">&#39;MySecretPassword&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">testbed</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">custom_key</span>
<span class="s1">&#39;custom data containing encoded text</span><span class="se">\n</span><span class="s1">MySecretPassword&#39;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="secret-string-object">
<h2>Secret String Object<a class="headerlink" href="#secret-string-object" title="Permalink to this heading">¶</a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+--------------------------------------------------------------------------+
| SecretString object                                                      |
+==========================================================================+
| class methods  | description                                             |
|----------------+---------------------------------------------------------|
| from_plaintext | returns an encoded secret string from plaintext         |
|----------------+---------------------------------------------------------|
| keygen         | returns a key that affects the string encoding/decoding |
+==========================================================================+
| properties     | description                                             |
|----------------+---------------------------------------------------------|
| plaintext      | returns the decoded secret string in plaintext form     |
+==========================================================================+
| attributes     | description                                             |
|----------------+---------------------------------------------------------|
| data           | the secret string in encoded form                       |
+==========================================================================+
| methods        | description                                             |
|----------------+---------------------------------------------------------|
| __str__        | returns asterisks in order to hide the secret string    |
+--------------------------------------------------------------------------+
</pre></div>
</div>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example</span>
<span class="c1"># -------</span>
<span class="c1">#</span>
<span class="c1">#   creating secret string objects</span>

<span class="kn">from</span> <span class="nn">pyats.utils.secret_strings</span> <span class="kn">import</span> <span class="n">to_plaintext</span><span class="p">,</span> <span class="n">SecretString</span>

<span class="c1"># Create a secret string by specifying its encoded form.</span>
<span class="c1"># The ``pyats secret encode`` CLI command may be used to convert a</span>
<span class="c1"># plaintext string to encoded form.</span>
<span class="n">my_secret</span> <span class="o">=</span> <span class="n">SecretString</span><span class="p">(</span><span class="s1">&#39;w53DssKBw6fDmMOCw5bDisOa&#39;</span><span class="p">)</span>

<span class="c1"># Decode the password</span>
<span class="n">my_secret</span><span class="o">.</span><span class="n">plaintext</span>
<span class="s1">&#39;my password&#39;</span>

<span class="c1"># Create a secret string from plaintext.</span>
<span class="n">my_secret</span> <span class="o">=</span>  <span class="n">SecretString</span><span class="o">.</span><span class="n">from_plaintext</span><span class="p">(</span><span class="s1">&#39;another secret&#39;</span><span class="p">)</span>

<span class="c1"># Asterisks are shown when the secret is printed.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_secret</span><span class="p">)</span>
<span class="o">**************</span>

<span class="c1"># Print the secret string in plaintext form.</span>
<span class="c1"># The ``pyats secret decode`` CLI command may be used to convert</span>
<span class="c1"># an encoded string to plaintext form.</span>
<span class="n">to_plaintext</span><span class="p">(</span><span class="n">my_secret</span><span class="p">)</span>
<span class="s1">&#39;another secret&#39;</span>

<span class="c1"># to_plaintext works on regular strings as well.</span>
<span class="n">to_plaintext</span><span class="p">(</span><span class="s1">&#39;plain string&#39;</span><span class="p">)</span>
<span class="s1">&#39;plain string&#39;</span>

<span class="c1"># Print the secret string in its encoded form.</span>
<span class="n">my_secret</span><span class="o">.</span><span class="n">data</span>
<span class="s1">&#39;w53DssKBw6fDmMOCw5bDisOa&#39;</span>

<span class="c1"># Allocate a brand new key.</span>
<span class="c1"># This does the same thing as the ``pyats secret keygen`` CLI command.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">SecretString</span><span class="o">.</span><span class="n">keygen</span><span class="p">())</span>

<span class="c1"># Allocate a secret string that stores a string in plaintext (non-encoded)</span>
<span class="c1"># form.</span>
<span class="kn">from</span> <span class="nn">pyats.utils.secret_strings</span> <span class="kn">import</span> <span class="n">PlainTextSecretStringRepresenter</span>
<span class="n">weak_secret</span> <span class="o">=</span> <span class="n">SecretString</span><span class="p">(</span><span class="s1">&#39;weak_pw&#39;</span><span class="p">,</span> <span class="n">representer_cls</span><span class="o">=</span> <span class="n">PlainTextSecretStringRepresenter</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="representer-classes">
<h2>Representer Classes<a class="headerlink" href="#representer-classes" title="Permalink to this heading">¶</a></h2>
<p>The encoding/decoding of secret strings and any required key management is
defined in a pluggable manner by the use of representer classes.</p>
<section id="supported-representers">
<h3>Supported Representers<a class="headerlink" href="#supported-representers" title="Permalink to this heading">¶</a></h3>
<p>The following representers are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pyats.utils.secret_strings.ObscuringSecretStringRepresenter</span></code>
- This class stores the secret string in cipher-encoded form.</p>
<ul>
<li><p>It is the default representer if the user has not specified a representer
in pyATS configuration.</p></li>
<li><p>It uses a default key, but allows the user to overwrite the key in
pyATS configuration.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyats.utils.secret_strings.PlainTextSecretStringRepresenter</span></code>
- This class stores the secret string in plaintext form.</p>
<ul>
<li><p>It does not make use of the key.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyats.utils.secret_strings.FernetSecretStringRepresenter</span></code></p>
<ul>
<li><p>This class stores the secret string in crypto-encoded form.</p></li>
<li><p>It requires the user to manually execute <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">cryptography</span></code>.</p></li>
<li><p>It can generate a decryption key.</p></li>
<li><p>A generated key must be specified in pyATS configuration.</p></li>
</ul>
</li>
</ul>
</section>
<section id="sample-representer-implementation">
<h3>Sample Representer Implementation<a class="headerlink" href="#sample-representer-implementation" title="Permalink to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyats.utils.secret_strings</span> <span class="kn">import</span> <span class="n">BaseSecretStringRepresenter</span>

<span class="k">class</span> <span class="nc">MySecretStringRepresenter</span><span class="p">(</span><span class="n">BaseSecretStringRepresenter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; My secret string representer &quot;&quot;&quot;</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">keygen</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">my_generate_key</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">key</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_KEY</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;A key must be specified as pyATS &quot;</span>
                <span class="s2">&quot;configuration under [secrets] string.key.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;This key may be generated with &quot;</span>
                <span class="s2">&quot;the &#39;pyats secret keygen&#39; command&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">key</span>

    <span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Encode a contained plaintext string object &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">my_encode</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Decode a contained encoded string object &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">my_decode</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="helper_functions.html" class="btn btn-neutral float-left" title="Find" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="file_transfer_utilities.html" class="btn btn-neutral float-right" title="Multiprotocol File Transfer Utilities" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Copyright (c) 2024, Cisco Systems Inc..
      <span class="lastupdated">Last updated on Dec 27, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>